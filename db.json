{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-volantis/source/css/Readme.md","path":"css/Readme.md","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","path":"css/first.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/aplayer.js","path":"js/aplayer.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/message.css","path":"css/message.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","path":"js/app.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/message.js","path":"js/message.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/parallax.js","path":"js/parallax.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/rightMenu.js","path":"js/rightMenu.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/valine.js","path":"js/valine.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/contributors.js","path":"js/plugins/contributors.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/friends.js","path":"js/plugins/friends.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/sites.js","path":"js/plugins/sites.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","path":"js/search/hexo.js","modified":0,"renderable":1},{"_id":"source/img/about.svg","path":"img/about.svg","modified":0,"renderable":0},{"_id":"source/img/categories.svg","path":"img/categories.svg","modified":0,"renderable":0},{"_id":"source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":0},{"_id":"source/img/cover.jpg","path":"img/cover.jpg","modified":0,"renderable":0},{"_id":"source/img/default.png","path":"img/default.png","modified":0,"renderable":0},{"_id":"source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":0},{"_id":"source/img/github.svg","path":"img/github.svg","modified":0,"renderable":0},{"_id":"source/img/guidang.svg","path":"img/guidang.svg","modified":0,"renderable":0},{"_id":"source/img/police_beian.png","path":"img/police_beian.png","modified":0,"renderable":0},{"_id":"source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":0},{"_id":"source/img/wechatQRcode.jpg","path":"img/wechatQRcode.jpg","modified":0,"renderable":0},{"_id":"source/img/tag.svg","path":"img/tag.svg","modified":0,"renderable":0}],"Cache":[{"_id":"source/_data/author.yml","hash":"01c86929eb5044365704736a910fd2d5b60f1d43","modified":1652509538747},{"_id":"source/_posts/DeFi-Learning-Beginner.md","hash":"b8cf2ed85de6bc0c0b9735c44524b03eb3abe160","modified":1656776999938},{"_id":"source/_posts/5G网元特征.md","hash":"10eeb7f7f7df68eebbc98fc8d9ff8cb891bd1fa1","modified":1656776999937},{"_id":"source/_posts/DeFi-Learning-Advance.md","hash":"64c134192f773c856b4a98281127a3774fd25a3e","modified":1656776999937},{"_id":"source/_posts/GametheoryResult.md","hash":"f012e695ba8a9bab1a9fa055b9a56b2dc3c33c64","modified":1656776999938},{"_id":"source/_posts/Git-使用系统代理.md","hash":"094eb09b45b6cc53dce6b8e54483601ecbe2223e","modified":1656776999939},{"_id":"source/_posts/BRAN.md","hash":"9ca2cbf5a67e192ad36a6e5e28f4fb9f11e3d968","modified":1656776999937},{"_id":"source/_posts/Fisco-3-0体验.md","hash":"cb9801b9639b519a9e7a016e559b8b17b7fc9ca3","modified":1656776999938},{"_id":"source/_posts/Leetcode-Hard-675.md","hash":"09987bb77057aa3a6b1a35f238afaade15d80801","modified":1656776999940},{"_id":"source/_posts/Leetcode-Hard-668.md","hash":"d23f5102d89641746a4772220ed0534c649fcead","modified":1656776999940},{"_id":"source/_posts/GametheoryResult2.md","hash":"44916be52d8837f89d07c2b1bc28b93de77cfaaf","modified":1656776999939},{"_id":"source/_posts/Lcy-の-4月.md","hash":"3bbe7586216f11855ba494cc07427bdcdc8466d9","modified":1656776999939},{"_id":"source/_posts/QQ机器人搭建（三）环境构建.md","hash":"2a95c012f7ef20e27a0db1d1aced838ce9d7765c","modified":1656776999941},{"_id":"source/_posts/QQ机器人搭建（一）.md","hash":"d71858276c67fee77f479f076c807b3616320c9a","modified":1656776999941},{"_id":"source/_posts/nginx-网站转发配置.md","hash":"fe06c3ee847c549fe23058e2267f38f1af85ef79","modified":1656776999943},{"_id":"source/_posts/QQ机器人搭建（二）应用案例.md","hash":"0d7661fb1a4ad162b1749ac6bdd63d76a37079f9","modified":1656776999942},{"_id":"source/_posts/k8s-token-generate.md","hash":"1435439d356c4c96a4c3fba386dc9cc652578fdf","modified":1656776999942},{"_id":"source/_posts/win11-恢复原右键菜单栏.md","hash":"fc8b33c76cac76a4f4edcfcb5c1a7416a678231f","modified":1656776999944},{"_id":"source/_posts/nginx-nps的配置修改.md","hash":"6865810b1652eb93757e805fffec253ad6ae6b1c","modified":1656776999943},{"_id":"source/_posts/ubuntu-安装anaconda配置python环境.md","hash":"ce3a180047ea23e56d7c4c3d93e7b56362d0f89e","modified":1656776999943},{"_id":"source/_posts/python发送post-get请求.md","hash":"81ec00ea2e32cf689d61075ae0f088402862e2d7","modified":1656776999943},{"_id":"source/_posts/修改微软远程桌面帧率.md","hash":"f6fc95b7944a29c921af00b51603beb0f1ea0b76","modified":1656776999945},{"_id":"source/_posts/封校减肥实录.md","hash":"bcb9b487e61eba69897f7b58a96a5b72ec0b9cff","modified":1657381651309},{"_id":"source/_posts/蚂蚁链ACCA过啦.md","hash":"3de5cc157cc2462d01feecf3d5ade6168f8bf326","modified":1656776999947},{"_id":"source/_posts/使用nps替代向日葵.md","hash":"daa5a9ad39f7cefae087c8314dbf7854bed80d62","modified":1656776999945},{"_id":"source/_posts/使用Typora的PicGo-Core配置阿里云OSS图床.md","hash":"803b0498c6510f00a0d006b024828a0070b0e619","modified":1656776999945},{"_id":"source/_posts/在Pypi上上传Lcyutils包.md","hash":"9a46bcfb6153d4eb71fed48662d5ccbaa9760cbf","modified":1656776999946},{"_id":"source/categories/index.md","hash":"8487455e9fc5dedf407c27ac26a0eef3531a1aea","modified":1656776999948},{"_id":"source/_posts/树莓派安装FISCO-BCOS.md","hash":"bff90b430fbf6f3484321e8275b593f0eb073bd7","modified":1656776999946},{"_id":"source/about/index.md","hash":"0147da78fddce0b93f831b10e38b54e8a7857a96","modified":1656776999947},{"_id":"source/img/about.svg","hash":"5722afe6b6bba7807dfba343505678187027b6b5","modified":1653112581272},{"_id":"source/_posts/解决跨域问题.md","hash":"6428c4ea917819fa499e418cf5f265a8eca4184a","modified":1656776999947},{"_id":"source/img/categories.svg","hash":"1410be1d46feb763b883d7ac66f5462fea622f98","modified":1653112544679},{"_id":"source/img/avatar.png","hash":"bdd9ce02c84e08ec75d6cbf7a081d5620639892e","modified":1649927767870},{"_id":"source/img/github.svg","hash":"bc1c9dca30e7445486d85eceba11339fdd3b8b27","modified":1653112620757},{"_id":"source/img/default.png","hash":"7bb2b8ee07db305bcadee2985b81b942027ae940","modified":1649927007427},{"_id":"source/img/favicon.png","hash":"bdd9ce02c84e08ec75d6cbf7a081d5620639892e","modified":1649927767871},{"_id":"source/img/guidang.svg","hash":"33e45ff7c99a3aeb80a86e3579f61b9603eeb2f5","modified":1653112600184},{"_id":"source/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1649927007423},{"_id":"source/tags/index.md","hash":"b24fbfafc78f819aad4d1b596ef05ef21cae7eb0","modified":1656776999972},{"_id":"source/page/index.md","hash":"5eb41c424d63ed5ba989a476756fedf05dd2a899","modified":1656776999972},{"_id":"source/img/wechatQRcode.jpg","hash":"b52a550c1201d63fe414ec828aceb3b986e3ea74","modified":1649948298677},{"_id":"source/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1649927007425},{"_id":"source/img/tag.svg","hash":"fb6339d9bfefef2de55974c03add5648182c5f8d","modified":1653112562443},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/blank.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/_config.yml","hash":"05c0c6cdecd527db33d33decda12f04e2da6c222","modified":1656776998333},{"_id":"node_modules/hexo-theme-volantis/package.json","hash":"b88f4d016d56a226914f6cc0ed56ee5120e5e8c3","modified":1656776998380},{"_id":"node_modules/hexo-theme-volantis/layout/404.ejs","hash":"64e4710cac866085ae8a1dff9520253a848ba7ef","modified":1656776998335},{"_id":"node_modules/hexo-theme-volantis/layout/_pre.ejs","hash":"89a0d5adfaa111a31922bc3fb919ea3388d66726","modified":1656776998371},{"_id":"node_modules/hexo-theme-volantis/layout/archive.ejs","hash":"09a19549f363f7152695d2287dba898745f8bec1","modified":1656776998377},{"_id":"node_modules/hexo-theme-volantis/layout/category.ejs","hash":"db29c0b1fe4b36e9c4529683835dd32e002d6124","modified":1656776998377},{"_id":"node_modules/hexo-theme-volantis/layout/docs.ejs","hash":"2ebefc2d265d4ffafbd96108d5e04fe84e2a5a4d","modified":1656776998378},{"_id":"node_modules/hexo-theme-volantis/layout/layout.ejs","hash":"79100189566342c6f987f20f2ba5c7ab117db40c","modified":1656776998379},{"_id":"node_modules/hexo-theme-volantis/layout/friends.ejs","hash":"fc02faf15e4a16216a217b15fdcb495d0fa49d5d","modified":1656776998378},{"_id":"node_modules/hexo-theme-volantis/layout/index.ejs","hash":"570368d44c0011236671f2c043c7b5de76f7d9b9","modified":1656776998378},{"_id":"node_modules/hexo-theme-volantis/README.md","hash":"11369f1fba02fe52f4a6817c39caae5e85aeb297","modified":1656776998333},{"_id":"node_modules/hexo-theme-volantis/layout/list.ejs","hash":"4d9f954c92ebd50a875d5474514a78b220b82166","modified":1656776998379},{"_id":"node_modules/hexo-theme-volantis/layout/page.ejs","hash":"2ebefc2d265d4ffafbd96108d5e04fe84e2a5a4d","modified":1656776998379},{"_id":"node_modules/hexo-theme-volantis/layout/post.ejs","hash":"2ebefc2d265d4ffafbd96108d5e04fe84e2a5a4d","modified":1656776998379},{"_id":"node_modules/hexo-theme-volantis/LICENSE","hash":"e0cbf6906cab5926a34f17852db6c05187ee1f68","modified":1656776998333},{"_id":"node_modules/hexo-theme-volantis/languages/en.yml","hash":"f5000164c056140c894108b9575abdf34cdc8529","modified":1656776998334},{"_id":"node_modules/hexo-theme-volantis/layout/tag.ejs","hash":"8e2fe5c43cdbf5116435a50523fb16774fef422a","modified":1656776998380},{"_id":"node_modules/hexo-theme-volantis/languages/zh-CN.yml","hash":"1ccbc254f41f25d6d4cfac3667ab79ebe672b605","modified":1656776998334},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/counter.ejs","hash":"0e5c61c0930d7063002333ba2542f8e7936b811a","modified":1656776998336},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/author.ejs","hash":"a95a474a0394a4b35b6d5d1604c98532155f6569","modified":1656776998335},{"_id":"node_modules/hexo-theme-volantis/languages/zh-TW.yml","hash":"43fbf58214c7c97f6f9a4616c29c9d1f80f24efc","modified":1656776998334},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/category.ejs","hash":"6d6dbb84cce90146b0e6ed130ea1c3581c54a029","modified":1656776998336},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/music.ejs","hash":"0608d08b7f1cf6be529193c8b7fea99517b4a0d0","modified":1656776998337},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/date.ejs","hash":"96f55772b90f582616d1adb414172c1bd8a9af2c","modified":1656776998336},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/share.ejs","hash":"1fb300f5c2dca5d53d748fed8ccc343e69d1d9d5","modified":1656776998337},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/valinecount.ejs","hash":"024f8e45ff9130e4c5afdabddb765f28310ff6b7","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/wordcount.ejs","hash":"eebaab3821af95ee64d8d56f33ca6c9c60b9b6f0","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/thumbnail.ejs","hash":"7aaa1093b8a96706cacba60d9390fbab602f65a4","modified":1656776998337},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/tags.ejs","hash":"ff3b700a971fc3190653e2bf415f6d23a70a8f61","modified":1656776998337},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/updated.ejs","hash":"988a4486b768dc410541c262fef291b79390e98a","modified":1656776998338},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/archive.ejs","hash":"4c1aee843e8f7a327427c026ded94e197f96b77b","modified":1656776998341},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/walinecount.ejs","hash":"35aa8382daea84fafd20ae636b7586af4022d61e","modified":1656776998338},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/footer.ejs","hash":"f0e66bd6cf45966fc931622e7d5aa32ece04544d","modified":1656776998342},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/article.ejs","hash":"f2b61badcd3a536a941c8dbcb84375f0df5a6627","modified":1656776998341},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/cover.ejs","hash":"7c0ff34dd099bcb24aab39c4872ff60e679c59d1","modified":1656776998342},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/categories.ejs","hash":"7c7b6cc39e1aa8d01cc2e94d1195bb7620bb68ea","modified":1656776998342},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/meta.ejs","hash":"ebeeb06f6c7aa167d64838f403fba6a307ad47d2","modified":1656776998343},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/head.ejs","hash":"ca8cad5d143b3b854ca44516c7e43d4a44341206","modified":1656776998343},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/header.ejs","hash":"c23ccaa065898914e5c0d2ec1b66acdda80d78cd","modified":1656776998343},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/side.ejs","hash":"b6d04940278e3f922f81fffeca1574de4fecf94a","modified":1656776998347},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/blogger.ejs","hash":"d9f56ddb9007e8fd6f9afe992dbdc9cad4496446","modified":1656776998371},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/_pre.ejs","hash":"e54ff8ee1bb39a16932b1b7385c302d1decedd83","modified":1656776998371},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/grid.ejs","hash":"17cfb5545fa6ceb8e5fbdf84c6984891633faecf","modified":1656776998372},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/post.ejs","hash":"692417b15db6b946ef9f157bb33a2f654f40bb47","modified":1656776998343},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/group.ejs","hash":"1b7976d02ce069d7b738a768e6b8665a033c00f3","modified":1656776998373},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/copyright.ejs","hash":"3c556fee94dc120a1d922a33f98cc2ca90ab3042","modified":1656776998372},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/category.ejs","hash":"8ab793579738c5a5f4fc97467ad88cfce7167c35","modified":1656776998372},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/header.ejs","hash":"b54a04af22efd55585af6e76ddbb7e856c5e9601","modified":1656776998373},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/list.ejs","hash":"b47bca0145dea6fe9b542cff8b83b00f4081dc6e","modified":1656776998374},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/music.ejs","hash":"35dc617105b48900d30bd6e84ca15a5ed4ce7717","modified":1656776998374},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/load.ejs","hash":"9a7d8cfe5e6cf0b954e7599e947e1fad0e3d3919","modified":1656776998374},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/lastupdate.ejs","hash":"a4ac52f21e75ef70eb9fc3f1f0fede40d578bca6","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/page.ejs","hash":"b0c448fffe9e6c14ef77ac1c6bb7d97f79566dfe","modified":1656776998375},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/qrcode.ejs","hash":"a9fb66fa6415f0152d4f938461836cf3e5a6c550","modified":1656776998375},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/references.ejs","hash":"c4669e92b922516265bb68b1802d759cf0265fbf","modified":1656776998375},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/related_posts.ejs","hash":"06511e899b7d7d6cf7bfcb1dda202574c05a01c7","modified":1656776998375},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/tagcloud.ejs","hash":"618b10cb1c5155c59fc77c70669bad1757fefb1c","modified":1656776998376},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/webinfo.ejs","hash":"7b9be5cec25759a3533b5682399b236207d03776","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/text.ejs","hash":"a3f71a80818f655a3d2810dedb662e16e58ba716","modified":1656776998376},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/toc.ejs","hash":"83157f00a15c9844e68089a6074d59d34a3f0760","modified":1656776998376},{"_id":"node_modules/hexo-theme-volantis/scripts/events/index.js","hash":"a8afd11df96a7c71e6da4b74aacecf12e85112f8","modified":1656776998381},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/seo.js","hash":"057332d6a5ea0b4c83ceabec742b84994ca310dd","modified":1656776998383},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btns.js","hash":"9294bc39ebb8ea7f66edcda26ebb8bfdde5213fe","modified":1656776998391},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/checkbox.js","hash":"7ad06787a2b9ae4e1aeaf397508db357223dce9f","modified":1656776998391},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/img.js","hash":"2536854025b6c105ba27f9ab9e99fda05263d9f0","modified":1656776998383},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/content-visibility.js","hash":"367da8d9bbd4e588d4901f6839e103bfa93e6988","modified":1656776998382},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/contributors.js","hash":"22af863bbf8b2c790dc0492bf9995cc5c7736ce8","modified":1656776998392},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btn.js","hash":"1691e38dc3c7eb0810a4bb3247237661f2282005","modified":1656776998391},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/folding.js","hash":"87e8a902420ee31eb8558198a2a6b59e2f22de68","modified":1656776998393},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/dropmenu.js","hash":"af00c0b28fdff2048f1287aca794d5ca8ec479be","modified":1656776998392},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/frame.js","hash":"45485cab9741943fcb498563c376fae3795d5349","modified":1656776998393},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/inline-labels.js","hash":"eaaedc3d65384e0beb4306534ef4ed202b46da18","modified":1656776998394},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/friends.js","hash":"e15e230e50b638d56e0bd31e1c0089369b0ac5a3","modified":1656776998393},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/fancybox.js","hash":"27cc803d2b70f690471e22c4a313840e690b567a","modified":1656776998392},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/image.js","hash":"f879b4fee542cf51c233fe436aba2a07c5f01259","modified":1656776998394},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/ghcard.js","hash":"95277092799e243e7b3f3347271cd1cdba794a10","modified":1656776998393},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/link.js","hash":"9a488ef5040871d7a5178e86e787ba3f682a6e13","modified":1656776998394},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/media.js","hash":"f0925629feb8588be87f92af13950bb39371d954","modified":1656776998395},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/md.js","hash":"4ae0157c3c2642e40b25145de8fa5011039837f6","modified":1656776998395},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/span.js","hash":"d73eb17fc8064da31fae2823b9cfb1031ba0d105","modified":1656776998396},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/timeline.js","hash":"0ff2717c342a12d7120bb6de6bf23968e56e4d5a","modified":1656776998397},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/table.js","hash":"13528b4ba9caffd5ea5c9ded4d048e9b9e8da5b0","modified":1656776998396},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/note.js","hash":"a98bfe4b2fcf8ff2e46d53d2a3700b624a885114","modified":1656776998395},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/tabs.js","hash":"5d7cc16f5662b99a5a76af2d743c154341b3cdf9","modified":1656776998397},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/site.js","hash":"6915cd76fbcd1f9e660b9b093380bb005d6e63c6","modified":1656776998396},{"_id":"node_modules/hexo-theme-volantis/source/js/aplayer.js","hash":"308ff655322837264ed96aca07b51a11959af777","modified":1656776998424},{"_id":"node_modules/hexo-theme-volantis/source/css/message.css","hash":"d2c6cd54cf8a6c040c28844b306543b76eeab8b8","modified":1656776998424},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","hash":"030eb5f213ab0e1577967a2367c046c64f165e59","modified":1656776998423},{"_id":"node_modules/hexo-theme-volantis/source/js/message.js","hash":"c6fd53b0a4abc2b73f55025ecb28d2eb65db93d4","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/source/css/Readme.md","hash":"8046a2fb69589fb01b19eec6ba903b93dacc5852","modified":1656776998397},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","hash":"9ad2b7ace6b8233d27279a2656e3311d6338668c","modified":1656776998424},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","hash":"5db025c67b8cc408600ceed1f7a3ade0c83e291e","modified":1656776998425},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/index.ejs","hash":"54652037612d27be2bdf5005c6cfc92e5599ffe7","modified":1656776998350},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/analytics/script.ejs","hash":"ad35f1e7efe5948d92504c1967876221532be3fa","modified":1656776998352},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/aplayer/layout.ejs","hash":"9b64c819cd0301def53d223c2f3bd89e4962fd79","modified":1656776998353},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/aplayer/script.ejs","hash":"b678302c843eaaa5aaae99cc7290711f3ba6de81","modified":1656776998353},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/analytics/LCCounter.ejs","hash":"d165260a59866e5ee437fb1e08e452b1fb351a52","modified":1656776998352},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/index.ejs","hash":"ce9cff471f0498325100f5992c209a18832e4159","modified":1656776998358},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/index.ejs","hash":"99d149ca778a6b956e18a3d380b36a120bcb98e4","modified":1656776998354},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/github-api/script.ejs","hash":"5095fa0a33c95d5b1bfcd3f554df5256994bca26","modified":1656776998363},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/end-of-support/script.ejs","hash":"5190a6482719b12f187dc4c30d3bf8810b97be00","modified":1656776998363},{"_id":"node_modules/hexo-theme-volantis/source/js/rightMenu.js","hash":"c36d91ac21c168ff80a75f721d5e44e8dd3cace8","modified":499162500000},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/message/script.ejs","hash":"79279f90b5bef768287d7c4dab79f036ea57fe80","modified":1656776998366},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/lazyload/script.ejs","hash":"59a2957aca23c0cc4199aa30596423876891d2b9","modified":1656776998365},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/darkmode/script.ejs","hash":"bd520e16261a7cffe2f41142594ab9a4b732c710","modified":1656776998362},{"_id":"node_modules/hexo-theme-volantis/source/js/parallax.js","hash":"ac6b9b60ff4a739649882723f653896a73a89ec5","modified":1656776998426},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/script.ejs","hash":"98a4351c0750e7a9f35e136211f2ea5cc8f2900b","modified":1656776998365},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/animate.ejs","hash":"0a01a9407e0780699c375ba2b2a439473ca7a544","modified":1656776998367},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/parallax/script.ejs","hash":"0bd8ec4292ffe576b8a595962c95d7458de7f7d3","modified":1656776998367},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/nodewaves/script.ejs","hash":"e3d227b8366f62c65d1f8bbfba7061f43b36c806","modified":1656776998366},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/preload/script.ejs","hash":"d8904aaf8b1e14086b4ce9de9770a89e0f1c6a2b","modified":1656776998368},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/index.ejs","hash":"80278853848cd8ef5ddd092b375be7b3a0d05168","modified":1656776998368},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/featured.ejs","hash":"21d8e3fd3872b0eb69f407c7e567544a90c630aa","modified":1656776998340},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/pjax/pdata.ejs","hash":"d94786b3733f1d13137607faee46d3fb1bf2bd8a","modified":1656776998368},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/rightmenu/layout.ejs","hash":"6a06cf506f108f1160709597453376399d3d09b8","modified":1656776998369},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/scrollreveal/script.ejs","hash":"eae0c08c5c72745529fc1b7991a329df71ea3c07","modified":1656776998369},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/search/script.ejs","hash":"40730605cf5a12eea80e3a474c0f8c2042f1e805","modified":1656776998370},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/layout.ejs","hash":"a965bd46f1d9471458436202ba1fac97c13452db","modified":1656776998340},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/dock.ejs","hash":"21d8e3fd3872b0eb69f407c7e567544a90c630aa","modified":1656776998340},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/search.ejs","hash":"eabee555f0605c19e4a8cdd95325b8aa1f8012c5","modified":1656776998341},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/share/layout.ejs","hash":"aa714ba68918c2b9e74997161811ca35ff57da1c","modified":1656776998370},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/content-visibility-scroll-fix.ejs","hash":"e09b89c9189e5e9db85213b95b3e90bd51528630","modified":1656776998345},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/_cover/focus.ejs","hash":"21d8e3fd3872b0eb69f407c7e567544a90c630aa","modified":1656776998340},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/import.ejs","hash":"0a61a4d35ffdc4ee858e9c4199cc2fd0b1926025","modified":1656776998346},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/config.js","hash":"005dc842a427ceffeb5d0b20cf086ad364a189e5","modified":1656776998381},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl.ejs","hash":"b3ded924f33b145a491fe3a694c82f9f39133943","modified":1656776998344},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/toc.ejs","hash":"04d94009a56c4b8176aa505f6f26f43d5c6850ce","modified":1656776998346},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/global.ejs","hash":"14346e9e11ebc55cf9442661e7d2d699a560b3f5","modified":1656776998345},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/index.ejs","hash":"ff4b4a55c64983d2257918c81a69b3fce17afdbb","modified":1656776998346},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/custom-files/index.js","hash":"4cc405901a2678b021b480372c203179ed19a3f9","modified":1656776998384},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/utils.js","hash":"e451be9a7b23bf52a0d0b02c3ac4101ca25f7ccd","modified":1656776998382},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/z-lazyload/index.js","hash":"58b935fb699a98f0a9ceb741d2105a977e24cf59","modified":1656776998383},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/renderStylus.js","hash":"51294f1fd67b7492430133e074ec5273732f7a5c","modified":1656776998381},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/first-style/index.js","hash":"63d067b9ae2334d1af35e286f38f04379f37a6cd","modified":1656776998385},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/autoCanonical.js","hash":"2021e20e02651c7007245c8fd70254a282ddceba","modified":1656776998385},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/related_posts/index.js","hash":"8f5e201ababac080de44243338f62aae61010837","modified":1656776998387},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/tag-plugins-style/index.js","hash":"5eae679bca8adaf29c4464728d9764374d2cb5ac","modified":1656776998390},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/index.js","hash":"61c9b7577bebb41fb0fb0ddd907f7d89abef30e7","modified":1656776998387},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/AutoPrefixCSS.styl","hash":"5a7e59c93c4adca1912864be2eaee99efa3b7103","modified":1656776998398},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_preload_fontfamily.js","hash":"b4b9f902aa1b43e7814158e1bdb9b723828210d6","modified":1656776998386},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/color.styl","hash":"b30006c12cb8227cb6dc6713a207f8fb3509fb84","modified":1656776998399},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_seo.js","hash":"53494050b451d755b63d35e1796d2ffe10c4d1be","modified":1656776998386},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/Readme.md","hash":"75c2fa01e58095a98d463e6b9bab1f0c04e38692","modified":1656776998399},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/head/generate_title__keywords__description.js","hash":"bf4146a34bea007ccb1b5d4d5785bff7a8bb877a","modified":1656776998386},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/base_first.styl","hash":"12928e311dd9c3c9a899c3f9c351551f7191de60","modified":1656776998401},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/effect.styl","hash":"96b8e1b97146946469dd965e7d04cf90b22eb497","modified":1656776998399},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/cover_first.styl","hash":"881210244593d7125337d4f810d49b9699420b43","modified":1656776998401},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/fonts.styl","hash":"9601ac0c9ecfb65288fa64eae67b2a6b6e56d8dd","modified":1656776998400},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/dark_first.styl","hash":"02d41715c7d95b1772cd801f9ad64f13ae8d6fd5","modified":1656776998401},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/fontfamily_first.styl","hash":"cce88d81a8e21cce65b7fd586765e8819388d31d","modified":1656776998402},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/layout.styl","hash":"192d0a3b07f95e01a3952c5c88967068e0682cca","modified":1656776998400},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/func.styl","hash":"d5b08a9b533c8cde12e34f9f6df1bd4a994c46d2","modified":1656776998400},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/navbar_first.styl","hash":"7f616cb5b756c78902387b52661608519b839c4d","modified":1656776998402},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/search_first.styl","hash":"4eedde6a3806741a450de0aeffa5a100d9c2d408","modified":1656776998402},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/index.styl","hash":"5de51a7fa4760b754927e1ce10a4db06269371cf","modified":1656776998423},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/artitalk/index.ejs","hash":"667743a887abcb467293f4e6e3be119def0d168e","modified":1656776998348},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/contributors.js","hash":"4294ea6413fa2891063d4e2a41750fb511c571c4","modified":1656776998426},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/hpptalk/index.ejs","hash":"3fd851002a663515108848a9ab1533eec687e437","modified":1656776998349},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/bbtalk/index.ejs","hash":"0637551061ebfa965304f6bccad02589d36e03ad","modified":1656776998348},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/fcircle/index.ejs","hash":"eb611d1d6523d8bfc5c682ec38e1232698e87736","modified":1656776998348},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/gitter/index.ejs","hash":"b6e00d7d8a3201e219456dca6572518baae26dcf","modified":1656776998349},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/sites.js","hash":"d0475b84a95963090071b861855b25bcadeb17c4","modified":1656776998427},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","hash":"a32e7b06955e1ab11db9b68af25709eae41e472d","modified":1656776998428},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/indent/index.ejs","hash":"238b4cc44210e76124ac636c47e4c1df5ff62c7a","modified":1656776998350},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/disqus/script.ejs","hash":"ecdc9bc6055830e39ca6c2cd14a4f58623793da1","modified":1656776998356},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/mathjax/index.ejs","hash":"ef9527eae118a13903ccb151e94132b9eff84c7d","modified":1656776998351},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/snackbar/index.ejs","hash":"3dbd68f6501d4ebeae28b1beb7f90174accb421b","modified":1656776998352},{"_id":"node_modules/hexo-theme-volantis/source/js/plugins/friends.js","hash":"2283eda232505303d79983c2eaf3680aaca523f4","modified":1656776998426},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/beaudar/script.ejs","hash":"6dc622267d8f7b2bfa093364f692957c8da35dde","modified":1656776998355},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/gitalk/script.ejs","hash":"ff170075678ea864d3d43c7ad996006545c8c272","modified":1656776998357},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/hashover/script.ejs","hash":"8427dda9edb36778ffad193728dcbd8addedb18e","modified":1656776998357},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/_page_plugins/katex/index.ejs","hash":"dfd80484e9d2df7a3840e005a3d29b7c5389c9e7","modified":1656776998351},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/giscus/script.ejs","hash":"7b845e839a4c03c700b6cf13590218d3e2b533b0","modified":1656776998357},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/disqusjs/script.ejs","hash":"a4414eb21aef9433f30eaeed3cdcf602965cbef1","modified":1656776998356},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/livere/script.ejs","hash":"325e2b9c507b0d498011fa401db3d53131a85a1d","modified":1656776998359},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/utterances/script.ejs","hash":"844eef0906a67fa8d42a331578e5538e33521aef","modified":1656776998360},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/minivaline/script.ejs","hash":"479738e47b7decce01c8dc005db06ec08a95c003","modified":1656776998359},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/valine/script.ejs","hash":"bd9802abc513b48135d9cada93209fa0fc69bdb6","modified":1656776998361},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/twikoo/script.ejs","hash":"8b9a1cfca860fb418087cf1ddf9f7d2d2bb029ba","modified":1656776998360},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/waline/script.ejs","hash":"46d431ae201b90eac22774c36de1b57cc4d5725c","modified":1656776998361},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/isso/script.ejs","hash":"dfbff9b81ce537a7da0ab1cc95480ebc4cb4cffa","modified":1656776998358},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/z-custom/script.ejs","hash":"9c9c19d0de11ff183ffea60910681d9e91c13f9d","modified":1656776998362},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/gitter/script.ejs","hash":"2a9780cb228944d671f959610aea710e6db6bac0","modified":1656776998354},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/highlightjs/script.ejs","hash":"dbb3d088d5198ccb2de8299f2b419ce40640028e","modified":1656776998364},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/highlight/prismjs/script.ejs","hash":"c2db81a44646ef821be53f9ff7c5525ccd948aa3","modified":1656776998365},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/chat/tidio/script.ejs","hash":"36dd36c2a4ade5f873978b554033115908959a29","modified":1656776998354},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl/cdnCtrl.ejs","hash":"145ac4c2c2a23e398d38f6a6e44cb792ec4e42ed","modified":1656776998344},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/_ctrl/coverCtrl.ejs","hash":"d99909694b96f78c48b3433fb8c6d70cc8f92e6e","modified":1656776998345},{"_id":"node_modules/hexo-theme-volantis/layout/_plugins/comments/vssue/script.ejs","hash":"1eb3e21f1fa1044041bab0a3000fc1e45cce378f","modified":1656776998361},{"_id":"node_modules/hexo-theme-volantis/scripts/filters/z-lazyload/lib/process.js","hash":"7f4cf667b7340d68e8f276e87535230f98896f50","modified":1656776998384},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/blogposting.js","hash":"05ade7190640e3f02229f6b4afbf977cc3bea8c4","modified":1656776998388},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/config.js","hash":"0e886a1eb28710321f6891290d1c5a6898a99e8b","modified":1656776998388},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/breadcrumblist.js","hash":"bb5250b7eb60ddfd52a3ca07ed2997631ce9fadc","modified":1656776998388},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/organization.js","hash":"21b509275f7d43b0f95bb122468d6f301ff7b76e","modified":1656776998389},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/index.js","hash":"ab988c0695b5c7544704c91b1a8fb29b193085e8","modified":1656776998389},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/person.js","hash":"d19975f00233c9b7625020fdbb6142128098a10e","modified":1656776998389},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/article.styl","hash":"24677588714c6373c52074031fe8ae66bc9b043f","modified":1656776998404},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/archive.styl","hash":"93a0846f1d65d66950403aba90ed5a8b5c8a9884","modified":1656776998404},{"_id":"node_modules/hexo-theme-volantis/scripts/helpers/structured-data/lib/website.js","hash":"d1e92abc94eaa7a141744e07b00280078b750d25","modified":1656776998390},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/footer.styl","hash":"5146a149d97dfaa88ae4bf819b60bab2f8d92a53","modified":1656776998404},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_base/fontfamily_async.styl","hash":"7b6f2da48a225b3d836d7b2e5dfa90fa18dc3174","modified":1656776998403},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/friends-simpleuser.styl","hash":"3d8e963fd1c24668fc1df078c619c4126f6a8a93","modified":1656776998405},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/img.styl","hash":"7f733971a7862fc5764a953ae4f8e17c171ff1b6","modified":1656776998405},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/loading.styl","hash":"c6757684fa37ced88e181b91c873644d1bde591d","modified":1656776998406},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/friends-traditional.styl","hash":"c5a3d30071b3208bd6af2b11df94e729b0537ea2","modified":1656776998405},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/md.styl","hash":"3e43f6ddcbf010feaa1a686b212f0d7e42f51e78","modified":1656776998406},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/pagination.styl","hash":"d727004c3bbe16ace26bfcd45dd7b2f1202acec4","modified":1656776998407},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/main.styl","hash":"e59379b9293b387962899f9281fd1807cd6c4db2","modified":1656776998406},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_base/base.styl","hash":"692a7b4294ac149dc310c0be4a33856b2a6e5920","modified":1656776998403},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/search.styl","hash":"411e32f7346e7f742b1e0078e641e8b5df875faf","modified":1656776998407},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/posts.styl","hash":"15ba48f975067cc464677e2e645f5319cacbf82e","modified":1656776998407},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/snackbar.styl","hash":"c3137362a2615159565477cab19afb1fc2d22cbf","modified":1656776998408},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/sidebar.styl","hash":"8786cf624b84f30aa128fc79f3c4e069a12fd9d1","modified":1656776998408},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/toc.styl","hash":"73e3843d4550d5d0e416a7bfa587507b2a920561","modified":1656776998408},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/aplayer.styl","hash":"6e523e48520c8700fc28d048cae1480e33d12644","modified":1656776998414},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_layout/video.styl","hash":"94bdeb9f28ba503a7a3fbd1148bc349983c17818","modified":1656776998409},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/mathjax.styl","hash":"95b0c51b678bc3ecc607bcf52d97b9634931ccba","modified":1656776998415},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/index.styl","hash":"2ea88bf51d345c5e83e356cd18922d6db6e87021","modified":1656776998415},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/gitalk.styl","hash":"17938fd65f7996c71e382934553af9fdee6a0e18","modified":1656776998415},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/message.styl","hash":"32eaf66de2f82e4c364b9244c5eef6380ec00bb4","modified":1656776998416},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/fontcolor.styl","hash":"6ff5814d11baf079fb4c96068e9ccd512f1bda9a","modified":1656776998414},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/cursor.styl","hash":"c4e48ee74bbbc3be23ba9c1b9206b39492cfbe05","modified":1656776998414},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/pjaxanimate.styl","hash":"9664f37f2632e17c2d6bd93eb587d4df9aefa265","modified":1656776998416},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/btns.styl","hash":"525919d04929c2c849f3aae587ecc6a004b05e86","modified":1656776998417},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/dropmenu.styl","hash":"469d3458db6531b1283768bbae30f283110d1726","modified":1656776998418},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/valine.styl","hash":"e5f1a88f68ac7e3b61a5a63c2140a89f4d28c14e","modified":1656776998416},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/Readme.md","hash":"731e90126d77886f25aca1479fc209e9a3abc0d8","modified":1656776998417},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/checkbox.styl","hash":"ae7ae8a3377525396a9163d32ca76c11647d877d","modified":1656776998417},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/fancybox.styl","hash":"671f43ec7ee5b98227ce60e4b564eee5281f92ea","modified":1656776998418},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/ghcard.styl","hash":"3a6fd480b244c76ac670b418e461c0f77bd9f4d4","modified":1656776998419},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/image.styl","hash":"842f58a4c464d5ec59038cc923dbce1dd432362b","modified":1656776998419},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/frame.styl","hash":"0f6230d77f22f0969d15d092b3d973c08d2219cc","modified":1656776998419},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/folding.styl","hash":"40fe5c009ad79325b1ad8c88b6d146682035348c","modified":1656776998418},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/friends.styl","hash":"b76cf16571ac2099a39fe35a238e4d735b4115e1","modified":1656776998419},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/media.styl","hash":"03c9942ed8560b923ac3535e7e80396d4a92df04","modified":1656776998420},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/link.styl","hash":"870a0d50082116adffe385d7695e28795542aa23","modified":1656776998420},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/note.styl","hash":"959a9fe09cf9d0c29de76d05d6123c337a259ab5","modified":1656776998420},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/sites.styl","hash":"f20f37b20ca803db2981e8931d70f0dd78bca30e","modified":1656776998421},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/tag.json","hash":"f294512e90cf9c0b54d5aec0c6273930fd758cf7","modified":1656776998422},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/span.styl","hash":"cdda513cbc9d95e9311a0a52c06ae7d1d250a769","modified":1656776998421},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/table.styl","hash":"84abe90bc0b505d35d8e702337fcbe5da6ee1217","modified":1656776998421},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/text.styl","hash":"7231d9c0e1e05a3ab7094d6ff4d1c37d97a1e8af","modified":1656776998422},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/tabs.styl","hash":"5cb4366b6ed139c952b846357e9d077b5c1b9c66","modified":1656776998422},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/index.styl","hash":"c62f0c706c08ec7a830f7ede2d04996ccc721e90","modified":1656776998412},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_tag-plugins/timeline.styl","hash":"14b86f0ad0098e679d66dae7d997802c77a27141","modified":1656776998423},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_dark/dark_async.styl","hash":"35afa35701893289145084d8ad8e7d9c6e71e92a","modified":1656776998409},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_rightmenu/reading.styl","hash":"9dc6cc8d2b8a4db1c6398b9afc6461514141942c","modified":1656776998413},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_rightmenu/rightmenu.styl","hash":"f36b8b6c9650a762d1e1698e2682e0979d0fa1bb","modified":1656776998413},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/clipboard.styl","hash":"2a1fa263c6efaa7113186fdb78bb733986e786f8","modified":1656776998410},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_dark/dark_plugins.styl","hash":"26f5b2ffa06336429896447075bb310eba20e2c1","modified":1656776998410},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/index.styl","hash":"661f36ee05c75465a046fcdca091f406c96cb37d","modified":1656776998411},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/color.styl","hash":"7ba7e4aeacc31b12c5fc57317d902b3742aa6c38","modified":1656776998411},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/index.styl","hash":"273196519db0ac4e223458e002e2ad0536213ba5","modified":1656776998412},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/clipboard.styl","hash":"6dcea4963642a693869411ad40df703a716790d6","modified":1656776998412},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/highlightjs/language.styl","hash":"aa98bc49ba55119529c47175eaa3e87f44eae26c","modified":1656776998411},{"_id":"node_modules/hexo-theme-volantis/source/css/_style/_plugins/_highlight/prismjs/language.styl","hash":"7773ed6757f1cc1f4ce4d8c991d721a5d49a8a92","modified":1656776998413},{"_id":"node_modules/hexo-theme-volantis/source/js/valine.js","hash":"ce5d397f6521957594189c0b4c26f2802bbaa308","modified":1656776998429},{"_id":"source/img/cover.jpg","hash":"174f733ad6ab0618bdf2fb6a70b11ec50e7193c2","modified":1612334772870},{"_id":"public/categories/index.html","hash":"3f08c8c530c3c65027dff9d7594db466d6a43c10","modified":1699958961360},{"_id":"public/tags/index.html","hash":"ae20c6b39b0d42bc99fcb228f3f1ec442b42dae0","modified":1699958961360},{"_id":"public/about/index.html","hash":"7c9e7d7e005d2b156f1b01eebb367f052385471d","modified":1699958961360},{"_id":"public/2022/05/23/Leetcode-Hard-675/index.html","hash":"684ed8b2290126a4a55d4e69a78b10775fbc58eb","modified":1699958961360},{"_id":"public/page/index.html","hash":"2b35045eec4235d27a8f259592ac231d07d7a984","modified":1699958961360},{"_id":"public/2022/05/19/在Pypi上上传Lcyutils包/index.html","hash":"98412912a44630ff4d972578a128881c6cf8ca49","modified":1699958961360},{"_id":"public/2022/05/18/Leetcode-Hard-668/index.html","hash":"a07ac083fa968597c4595d846cf63a3a583f7a64","modified":1699958961360},{"_id":"public/2022/05/17/nginx-nps的配置修改/index.html","hash":"5e33d1408885e6cb5645619eb03bd28ee3868fb2","modified":1699958961360},{"_id":"public/2022/05/17/nginx-网站转发配置/index.html","hash":"ed101c6065341471a0c06af71b2f153b745c7eaf","modified":1699958961360},{"_id":"public/2022/05/16/QQ机器人搭建（三）环境构建/index.html","hash":"51be2e49d3e4c76456f1fd9d614c72ddd477a40c","modified":1699958961360},{"_id":"public/2022/05/16/ubuntu-安装anaconda配置python环境/index.html","hash":"485eb791d792ba693a459a20bd9a50755b97966d","modified":1699958961360},{"_id":"public/2022/05/15/修改微软远程桌面帧率/index.html","hash":"24d54d47bd3913b7e49a0aa4c4d1e3c9515c38ce","modified":1699958961360},{"_id":"public/2022/05/14/DeFi-Learning-Advance/index.html","hash":"553f453a371ee7a5390f45c9a77d05f5107af847","modified":1699958961360},{"_id":"public/2022/05/10/python发送post-get请求/index.html","hash":"cd799b0987e892516e170a82a098ac38d5556b5a","modified":1699958961360},{"_id":"public/2022/05/04/使用nps替代向日葵/index.html","hash":"f7680a99c6aacdbbf68aa3be574b84f90f5234df","modified":1699958961360},{"_id":"public/2022/05/01/Lcy-の-4月/index.html","hash":"a59831c4474018be549190082268ec3e4711f6ec","modified":1699958961360},{"_id":"public/2022/04/28/Fisco-3-0体验/index.html","hash":"92cf1eadc44decc60574c6ffc90cc80bbe44a56c","modified":1699958961360},{"_id":"public/2022/04/26/5G网元特征/index.html","hash":"0002d7b8afae7fba97e96fbf52c02dea49d8884c","modified":1699958961360},{"_id":"public/2022/04/18/封校减肥实录/index.html","hash":"cbd9afa76e5b158c510288aef7f78519bd20b7ff","modified":1699958961360},{"_id":"public/2022/04/15/DeFi-Learning-Beginner/index.html","hash":"414bd52c9d097508f1a72da972c3cc4ea9d1d2f7","modified":1699958961360},{"_id":"public/2022/04/08/k8s-token-generate/index.html","hash":"94b0d6921cfca4b8db0160d6be068f466cad00c5","modified":1699958961360},{"_id":"public/2022/04/08/GametheoryResult2/index.html","hash":"68b6877f86a0b7a3a9e8e5b454d4204861182630","modified":1699958961360},{"_id":"public/2022/04/05/Git-使用系统代理/index.html","hash":"79c6f47c688930202818d16b1f36ea060aa11d00","modified":1699958961360},{"_id":"public/2022/04/04/QQ机器人搭建（二）应用案例/index.html","hash":"228e5ed08f149ab11a970327163960ffdb84ab1c","modified":1699958961360},{"_id":"public/2022/04/04/QQ机器人搭建（一）/index.html","hash":"30c5fd4d7acfd564caf4f5c989e42f5ada83b4ce","modified":1699958961360},{"_id":"public/2022/04/04/GametheoryResult/index.html","hash":"c8dc519129d023d165f50862cf464727a8ff4127","modified":1699958961360},{"_id":"public/2022/03/09/使用Typora的PicGo-Core配置阿里云OSS图床/index.html","hash":"159a8a7f0ee83cdfc02b9adbd3af26a975b51b85","modified":1699958961360},{"_id":"public/2022/01/07/蚂蚁链ACCA过啦/index.html","hash":"d234f2bde9771cd30b5b1b572faf32e4faba0b67","modified":1699958961360},{"_id":"public/2021/12/16/win11-恢复原右键菜单栏/index.html","hash":"df9d522904180b76d91305576a0b24bcf508c89b","modified":1699958961360},{"_id":"public/2021/12/13/解决跨域问题/index.html","hash":"d53def6fa4baaac559bf927adad961057262d4f7","modified":1699958961360},{"_id":"public/2021/11/18/树莓派安装FISCO-BCOS/index.html","hash":"2871aa2ee17367161dbe1900a0c94a0b2bc5f2f6","modified":1699958961360},{"_id":"public/2021/04/05/BRAN/index.html","hash":"c671c7d39ab281d539e3208689bcebfa42061f7d","modified":1699958961360},{"_id":"public/archives/index.html","hash":"e29d4ba4891358b39a1fa9704370cc43cb7d4aa2","modified":1699958961360},{"_id":"public/archives/page/2/index.html","hash":"2d8ef58cdba285df6c1be14c224226576cd08d61","modified":1699958961360},{"_id":"public/archives/page/3/index.html","hash":"dfa86f22aafd52ca6c14b7a8af8744edd32da088","modified":1699958961360},{"_id":"public/archives/2021/index.html","hash":"52d181cad51f83d9dbe744cc5d58c0031411624a","modified":1699958961360},{"_id":"public/archives/2021/04/index.html","hash":"4061e5e3d093b818cebc40cd309cc76e30e3ef49","modified":1699958961360},{"_id":"public/archives/2021/11/index.html","hash":"e3fc8dd02ad3e0e2fd4c169600aa394f3a5368a3","modified":1699958961360},{"_id":"public/archives/2021/12/index.html","hash":"33b83b92bd05d7256fb2fe01349ddd2048867735","modified":1699958961360},{"_id":"public/archives/2022/index.html","hash":"241fc7926d7caf7ca946706ccc47a6713b67e986","modified":1699958961360},{"_id":"public/archives/2022/page/2/index.html","hash":"5b0caafa7a3659f88acf54fd61ab85535defd3ac","modified":1699958961360},{"_id":"public/archives/2022/page/3/index.html","hash":"ddc5502e9fd30ea517be3d0cd3f77276ebea2ff4","modified":1699958961360},{"_id":"public/archives/2022/01/index.html","hash":"3e0971028daa2dece5da54c92bcd0cee96fe8da5","modified":1699958961360},{"_id":"public/archives/2022/03/index.html","hash":"37e8c8de383cf0710fe42479d87ab11e5ad9601e","modified":1699958961360},{"_id":"public/archives/2022/04/index.html","hash":"6a013b9c15225b7a242fd44f24d759f17c032a8d","modified":1699958961360},{"_id":"public/archives/2022/05/index.html","hash":"6bef3ba62a3469d5fc40493557145a31acac3ea5","modified":1699958961360},{"_id":"public/archives/2022/05/page/2/index.html","hash":"ff53bf0a94d578c87c2dba5b0e4954a3637244a3","modified":1699958961360},{"_id":"public/categories/Dirty-Work/index.html","hash":"6d7552749c4fac4338ea2d0c876321dcaf3badfa","modified":1699958961360},{"_id":"public/categories/Others/index.html","hash":"3517331857f448f118a948238911f988a527b68e","modified":1699958961360},{"_id":"public/categories/FISCO/index.html","hash":"116c4e33b16857571acaa5d5805df637480b0a54","modified":1699958961360},{"_id":"public/categories/Lcy/index.html","hash":"687d654653eec91543b50c57042c21b48c8beb98","modified":1699958961360},{"_id":"public/categories/Leetcode/index.html","hash":"f1fa498994ff21852b69928250b4c51d3121c6e4","modified":1653311336155},{"_id":"public/categories/QQRobot/index.html","hash":"36ecfc98886b2fc40fd9cbd40d0ab69b99969e2a","modified":1699958961360},{"_id":"public/categories/Useful-Tools/index.html","hash":"fe7494d7ee69b8d4c446733d7dbb6818da49eaa1","modified":1699958961360},{"_id":"public/categories/Titanium-Tech/index.html","hash":"70b810dcc7a98d315932dd0b78a60d400bc026ac","modified":1699958961360},{"_id":"public/categories/Tips/index.html","hash":"0eb97d152af41643d04c66d21b4805de1f77b8c2","modified":1699958961360},{"_id":"public/categories/Personal/index.html","hash":"b9335704fcfe214ae3e4808f6010a26e45c5a2d0","modified":1653311085959},{"_id":"public/categories/Work-Prepare/index.html","hash":"8e7fd00d87541c3c693453b5dbdead609a5cba25","modified":1699958961360},{"_id":"public/categories/Blockchain/index.html","hash":"504e025db5d747d1c978c17485c8c1ea2d703f40","modified":1699958961360},{"_id":"public/index.html","hash":"4e62b290b0b31d393b2610a65094b20ea05418f6","modified":1699958961360},{"_id":"public/categories/DeFi/index.html","hash":"8fde2b426ef1eee1e24a07a0a67feaaebd5b6c8e","modified":1699958961360},{"_id":"public/page/2/index.html","hash":"66803e10e6b9091cdc6b325032d23e38696b1e2f","modified":1699958961360},{"_id":"public/page/3/index.html","hash":"d889c8eb9fb89a2b942c11db639e26fd8e0649bd","modified":1699958961360},{"_id":"public/tags/Study/index.html","hash":"df89604651069482dd96d7fa80fa9e984eec8ce9","modified":1699958961360},{"_id":"public/tags/Interests/index.html","hash":"78773cce298801b0b4bda7558d332a1bfbda788b","modified":1699958961360},{"_id":"public/tags/Tips/index.html","hash":"247551c9ff6b566a0a04951a63e594e16db4e4a8","modified":1699958961360},{"_id":"public/tags/Lcy/index.html","hash":"19f55eeec33630ce21f7b1dbfdc3090b32050e30","modified":1699958961360},{"_id":"public/tags/Leetcode/index.html","hash":"551ef140e272d7d578ca54bc2eb7c4f18ee8c108","modified":1653311336155},{"_id":"public/tags/QQrobot/index.html","hash":"cbeca8d924db6a286a6f6735cca4135544d5fb54","modified":1699958961360},{"_id":"public/tags/Titanium-Tech/index.html","hash":"4303df6816312db1cf05821e1b4533e78b334079","modified":1699958961360},{"_id":"public/tags/Personal-Tips/index.html","hash":"f79e8fefb81c54e5a04f18ff3d16309e5557da81","modified":1699958961360},{"_id":"public/tags/Tools/index.html","hash":"4e56bf3c7511681463b2c09e576c167ef31b71e6","modified":1699958961360},{"_id":"public/tags/Study-Devops/index.html","hash":"151a61ec082c441668fa27fd1a2e28a83275fc52","modified":1699958961360},{"_id":"public/tags/Others/index.html","hash":"9687c244d3921cb32a686a7c15a9d4cc31b96d8c","modified":1653311085959},{"_id":"public/img/about.svg","hash":"5722afe6b6bba7807dfba343505678187027b6b5","modified":1653311085959},{"_id":"public/img/avatar.png","hash":"bdd9ce02c84e08ec75d6cbf7a081d5620639892e","modified":1653311085959},{"_id":"public/img/categories.svg","hash":"1410be1d46feb763b883d7ac66f5462fea622f98","modified":1653311085959},{"_id":"public/img/default.png","hash":"7bb2b8ee07db305bcadee2985b81b942027ae940","modified":1653311085959},{"_id":"public/img/favicon.png","hash":"bdd9ce02c84e08ec75d6cbf7a081d5620639892e","modified":1653311085959},{"_id":"public/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1653311085959},{"_id":"public/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1653311085959},{"_id":"public/img/github.svg","hash":"bc1c9dca30e7445486d85eceba11339fdd3b8b27","modified":1653311085959},{"_id":"public/img/guidang.svg","hash":"33e45ff7c99a3aeb80a86e3579f61b9603eeb2f5","modified":1653311085959},{"_id":"public/img/wechatQRcode.jpg","hash":"b52a550c1201d63fe414ec828aceb3b986e3ea74","modified":1653311085959},{"_id":"public/img/tag.svg","hash":"fb6339d9bfefef2de55974c03add5648182c5f8d","modified":1653311085959},{"_id":"public/css/Readme.html","hash":"c9912722e1c7a72fbc45b4087424f819fa47013a","modified":1653311085959},{"_id":"public/js/aplayer.js","hash":"79ad0408b7c55486ef5c1eda314f1fff0fecd98d","modified":1653311085959},{"_id":"public/js/plugins/contributors.js","hash":"8290abea6d8dceb8df35826dbeafaab648b8940f","modified":1653311085959},{"_id":"public/js/parallax.js","hash":"3c3210bde6e86d7d157c34c14796abe98cb1bbd0","modified":1653311085959},{"_id":"public/js/plugins/friends.js","hash":"6c760ccc8b96488aecbddc10c75034c9b8a2a455","modified":1653311085959},{"_id":"public/js/plugins/sites.js","hash":"a1452c47503ab44aaed1b4bc73a0ebe77aeeeb4b","modified":1653311085959},{"_id":"public/js/search/hexo.js","hash":"a78f318d0f8d99e69b5550913d2eea770702843f","modified":1653311085959},{"_id":"public/css/style.css","hash":"bc8605542aa02d193d1571563125a9dc687e4fd8","modified":1653311085959},{"_id":"public/css/first.css","hash":"e7cb26a619dd815e00937fc17665e6232759fa0c","modified":1653311085959},{"_id":"public/js/app.js","hash":"3cf1d71b38e330337d19838d48c37883af741dd1","modified":1653311085959},{"_id":"public/js/message.js","hash":"5d753b1c803de12f4d2217ab0d143d4dcf047010","modified":1653311085959},{"_id":"public/js/rightMenu.js","hash":"d44218814b9feffd4fa125af0fd697529329f039","modified":1653311085959},{"_id":"public/css/message.css","hash":"398acaa4eca2baa749a90175fe24d3c2a35f19ca","modified":1653311085959},{"_id":"public/js/valine.js","hash":"63916e2be7d378e9d32271371c588e75e69c871e","modified":1653311085959},{"_id":"public/img/cover.jpg","hash":"174f733ad6ab0618bdf2fb6a70b11ec50e7193c2","modified":1653311085959},{"_id":"public/categories/leetcode/index.html","hash":"75adfe92dcedee395e39fd132f70f0ce1cb78ab2","modified":1699958961360},{"_id":"public/tags/leetcode/index.html","hash":"4c4ebabce52a4c6c3e1e9fcbd726280ef0c60332","modified":1699958961360},{"_id":"source/_posts/Leetcode-Hard-699.md","hash":"41bf98a2633593f1b4ebd3d8080a24f236062856","modified":1656776999941},{"_id":"public/2022/05/26/Leetcode-Hard-699/index.html","hash":"fa40faf086834901abf0dbcc5107ee5edccf70b8","modified":1699958961360},{"_id":"source/_posts/Leetcode-Hard-42.md","hash":"12668ec7afe520c94952cb77735d17b76670ccfe","modified":1656776999940},{"_id":"public/2022/05/30/Leetcode-Hard-42/index.html","hash":"4cb1b00ff7b2af1775a5946137be658418aa34b8","modified":1699958961360},{"_id":"source/_posts/ubuntu-安装科学上网.md","hash":"514069319c0e0f42b479f3b9759cfa22fa6dd578","modified":1656776999944},{"_id":"public/2022/06/09/ubuntu-安装科学上网/index.html","hash":"6c3c2db84b1548c3e7811690e57ac194ffd87f1b","modified":1699958961360},{"_id":"public/archives/page/4/index.html","hash":"c6986f4de810ba46409be5c2394a3bc89f99e8dd","modified":1699958961360},{"_id":"public/archives/2022/06/index.html","hash":"7ad2afa10111209d65ac103033cb3533321796f8","modified":1699958961360},{"_id":"public/page/4/index.html","hash":"a3807cc60fc5b479f7d1d57fdd8a4685a730b6ec","modified":1699958961360},{"_id":"source/_posts/Ubuntu下安装gocv.md","hash":"acfd68a8ce15878ab360cca5ad41f6f27cdaf7f5","modified":1656776999942},{"_id":"public/2022/06/13/Ubuntu下安装gocv/index.html","hash":"b71a075f454a71553603d1cf1c3b081bf94be246","modified":1699958961360},{"_id":"public/tags/Tips/page/2/index.html","hash":"e38602691b2e190b9e881a16643ac2b61bebb5f8","modified":1699958961360},{"_id":"source/_posts/windows-专业版破解RDP链接限制.md","hash":"35d3216ea879d50150efb5b03ecece574b51f1c7","modified":1656776999944},{"_id":"public/2022/06/18/windows-专业版破解RDP链接限制/index.html","hash":"42ce2f80719965299161728c2c45aa1ad0fa7555","modified":1699958961360},{"_id":"source/_posts/Windows安装hexo.md","hash":"e6c1607f850d7e43f8ad5c830b33625291caa6f4","modified":1656777599209},{"_id":"public/2022/07/02/Windows安装hexo/index.html","hash":"e28d62028cf94684c82c120daa096b11301d72a1","modified":1699958961360},{"_id":"public/archives/2022/07/index.html","hash":"97c0bf419f4b4fe05202710906da3045ae2e9339","modified":1699958961360},{"_id":"source/_posts/windows安装hexo.md","hash":"e6c1607f850d7e43f8ad5c830b33625291caa6f4","modified":1656777599209},{"_id":"public/2022/07/02/windows安装hexo/index.html","hash":"94402551e784b3753435c7d8e21930a1d9155372","modified":1656777721369},{"_id":"source/_posts/windows安装arcanist.md","hash":"27ce01b11f659d9c3000fee18ff9b66318beaa10","modified":1656779747323},{"_id":"public/2022/07/03/windows安装arcanist/index.html","hash":"8126b1ec656e31fd553fa3a4db498ac649141c94","modified":1699958961360},{"_id":"public/archives/2022/page/4/index.html","hash":"86bdb75f0d2aa70828becff254bcf334176c6cf6","modified":1699958961360},{"_id":"source/_posts/ubuntu设置root登陆.md","hash":"4016290743797caf3b88c66f347ac17222d3ddf8","modified":1657381651308},{"_id":"public/2022/07/04/ubuntu设置root登陆/index.html","hash":"b1703c341d8eae658e93ea194bd33657f5ba7387","modified":1699958961360},{"_id":"source/_posts/ubuntu安装ns3.md","hash":"2961f7cf511cba8dce21e726f6fbdc1f5db61927","modified":1657381651308},{"_id":"public/2022/07/04/ubuntu安装ns3/index.html","hash":"100131ac742153c880030da58970379d539b1e3d","modified":1699958961360},{"_id":"source/_posts/Docker学习.md","hash":"1fb625651ae917ba3a46b235ccf22d5474f38187","modified":1659368684942},{"_id":"public/2022/07/11/Docker学习/index.html","hash":"b126be09c4fb470d1ae9e5a7be3795db26796dac","modified":1699958961360},{"_id":"public/categories/Study/index.html","hash":"7826739421ba15bd5d1d0019525e14e4c5655c09","modified":1699958961360},{"_id":"source/_posts/fisco-go-sdk合约事件推送.md","hash":"a3b939e4cb2df273b7de65f9582feaa79e7379e1","modified":1659368684947},{"_id":"public/2022/07/14/fisco-go-sdk合约事件推送/index.html","hash":"340b0b00e3e5f5e1ffbd30dacf3a7fe0cb755229","modified":1699958961360},{"_id":"source/_posts/写第一篇paper的一些记录.md","hash":"58f55f6d86c7dd647d6c5f3b33aa5de63e1000b5","modified":1659780503253},{"_id":"public/2022/08/01/写第一篇paper的一些记录/index.html","hash":"ba801878f841db76e68d7cdea48fc6dd7e9bc9c1","modified":1699958961360},{"_id":"public/archives/2022/08/index.html","hash":"25ffaaede600fe2e8e2818782e1f35602b8bf0e2","modified":1699958961360},{"_id":"source/_posts/Ns3-入门踩坑.md","hash":"1249e04b4df3e5cc1d7a6bcd01cd7d45a9f4990a","modified":1666269882832},{"_id":"source/_posts/Stable-Diffusion-Deployment-RTX3090.md","hash":"071e0e33df74da9f7115324ae71d478063bd7bab","modified":1666261852731},{"_id":"public/2022/09/11/Stable-Diffusion-Deployment-RTX3090/index.html","hash":"32a8fd1127641f77b6193b75c9ad76dbeb808aa5","modified":1699958961360},{"_id":"public/2022/10/18/Ns3-入门踩坑/index.html","hash":"f03348c2c029635ff4ff034008bbd7ae5cf4070d","modified":1699958961360},{"_id":"public/archives/page/5/index.html","hash":"de107fb39c27cc6b978f5d798bfe7ed851560aa8","modified":1699958961360},{"_id":"public/archives/2022/09/index.html","hash":"017014387f6b5de1d2647a845fdd05d67b159abd","modified":1699958961360},{"_id":"public/archives/2022/10/index.html","hash":"f75c78b23a06095d2e13837e8ee4c332708520f7","modified":1699958961360},{"_id":"public/page/5/index.html","hash":"a4db2cc855eb30ed01d5d5f3c5045de874437f42","modified":1699958961360},{"_id":"public/tags/Study/page/2/index.html","hash":"c5994040ff9bd5a2d84509e820482c871c4fbeb3","modified":1699958961360},{"_id":"source/_posts/XRDP-安装注意事项.md","hash":"0c0be8d78be05fd5e127675cabb06de1078fbc22","modified":1666262268858},{"_id":"public/2022/10/20/XRDP-安装注意事项/index.html","hash":"72102f968b5bd9cf8ecc8ecb9a5a8fff01e99f18","modified":1699958961360},{"_id":"source/_posts/Ubuntu20-04批量添加用户.md","hash":"834b5d1e93d261bbbc194a56a6face7b2b007597","modified":1668588353610},{"_id":"source/_posts/ubuntu本地搭建sui测试链.md","hash":"719ac0025ce46ac52fd8fd2703de3b86ae67d794","modified":1666665680243},{"_id":"public/2022/11/16/Ubuntu20-04批量添加用户/index.html","hash":"a821a4d2c63f6b4975b2681948ac040be54601ad","modified":1699958961360},{"_id":"public/2022/10/25/ubuntu本地搭建sui测试链/index.html","hash":"181e4454789cd2a080f407e5a963385b02e68d57","modified":1699958961360},{"_id":"public/archives/2022/page/5/index.html","hash":"a869467edd5b42cfb047582426e7614d564e18ec","modified":1699958961360},{"_id":"public/archives/2022/11/index.html","hash":"6eef93dd7cd82e89b107c5f24bc86cec05e5eddf","modified":1699958961360},{"_id":"source/_posts/在mac上部署mlc-chat.md","hash":"1f37509c9577fd8665bcd2f08404232b91b8f4de","modified":1683107869016},{"_id":"public/2023/05/03/在mac上部署mlc-chat/index.html","hash":"5f3dd3c58db6abe56c577602f5764cf0dd50365e","modified":1699958961360},{"_id":"public/archives/2023/index.html","hash":"312a3d2c13aef017b60e11208078a8cb8e5c6f42","modified":1699958961360},{"_id":"public/archives/2023/05/index.html","hash":"855ee93e39b6a02c9c32dd9f1ed17e5a91d0f767","modified":1699958961360},{"_id":"public/categories/AI/index.html","hash":"513f0172285496a6dddf8e77d44c5d238a06d5ed","modified":1699958961360},{"_id":"public/tags/AI/index.html","hash":"17466395921699282dfbf2802cde4ba80423bbbd","modified":1699958961360},{"_id":"source/_posts/ubuntu安装kafka.md","hash":"76a2f880bcaf1ddc04008885383b8ca3b9da6d20","modified":1688907484133},{"_id":"public/2023/07/09/ubuntu安装kafka/index.html","hash":"7caf19b2edb2c9eb81c1715edd8f26ff485206a0","modified":1699958961360},{"_id":"public/archives/2023/07/index.html","hash":"772fd5b652ccdf371d2d7be450ac30edd042bb90","modified":1699958961360}],"Category":[{"name":"Dirty Work","_id":"cl3iqqerd0003l0emedaw6zxv"},{"name":"Others","_id":"cl3iqqeri000bl0em8mn7elit"},{"name":"FISCO","_id":"cl3iqqerk000hl0em4ww8ev3t"},{"name":"Lcy","_id":"cl3iqqerm000ol0embgkgf8c8"},{"name":"Leetcode","_id":"cl3iqqern000vl0emhfmv6gli"},{"name":"QQRobot","_id":"cl3iqqero0012l0em1pah4vh5"},{"name":"Useful Tools","_id":"cl3iqqeru001ol0em98hm0hjk"},{"name":"Titanium Tech","_id":"cl3iqqerw001wl0em13243vx7"},{"name":"Tips","_id":"cl3iqqery0023l0em8kztgs1t"},{"name":"Personal","_id":"cl3iqqes1002tl0emch5d1983"},{"name":"Work Prepare","_id":"cl3iqqes2002wl0em1b483mtb"},{"name":"Blockchain","_id":"cl3iqqes2002yl0emc2tq7fht"},{"name":"DeFi","_id":"cl3iqqes40037l0em97tug9co"},{"name":"leetcode","_id":"cl3iqx5xq00001oembkhycvwu"},{"name":"Study","_id":"cl5g8mk750001e4tz0wwfblkj"},{"name":"AI","_id":"clh7iz3xh0001g8fz2hznh39o"}],"Data":[{"_id":"author","data":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}],"Page":[{"title":"落城雨在搞什么东西","date":"2022-04-14T06:16:52.000Z","type":"categories","layout":"category","comment":false,"_content":"","source":"categories/index.md","raw":"---\ntitle: 落城雨在搞什么东西\ndate: 2022-04-14 14:16:52\ntype: \"categories\"\nlayout: category\ncomment: false\n---\n","updated":"2022-07-02T15:49:59.948Z","path":"categories/index.html","_id":"cl3iqqer90000l0em1zylf29z","comments":1,"content":"\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":""},{"title":"落城雨搞了什么鬼","date":"2022-04-14T06:15:15.000Z","type":"tags","layout":"tag","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 落城雨搞了什么鬼\ndate: 2022-04-14 14:15:15\ntype: \"tags\"\nlayout: tag\ncomments: false\n---\n","updated":"2022-07-02T15:49:59.972Z","path":"tags/index.html","_id":"cl3iqqerc0002l0em91lt661y","content":"\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":""},{"title":"About Me","date":"2022-04-04T07:42:13.000Z","layout":"about","author":"Lcy","_content":"\nName: Chengyu Luo\n\nEducation: Southeast University\n\nResearch Direction: Blockchain and Wireless Communication\n\nQQ: 1157340882\n\nMail: luochengyu1317@gmail.com\n\nPhone: +86 188 5165 1321","source":"about/index.md","raw":"---\ntitle: About Me\ndate: 2022-04-04 15:42:13\nlayout: about\nauthor: Lcy\n---\n\nName: Chengyu Luo\n\nEducation: Southeast University\n\nResearch Direction: Blockchain and Wireless Communication\n\nQQ: 1157340882\n\nMail: luochengyu1317@gmail.com\n\nPhone: +86 188 5165 1321","updated":"2022-07-02T15:49:59.947Z","path":"about/index.html","_id":"cl3iqqere0005l0em4gtzaah2","comments":1,"content":"<p>Name: Chengyu Luo</p>\n<p>Education: Southeast University</p>\n<p>Research Direction: Blockchain and Wireless Communication</p>\n<p>QQ: 1157340882</p>\n<p>Mail: <a href=\"mailto:&#x6c;&#117;&#x6f;&#99;&#x68;&#x65;&#110;&#103;&#121;&#117;&#49;&#x33;&#49;&#55;&#x40;&#103;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;\">&#x6c;&#117;&#x6f;&#99;&#x68;&#x65;&#110;&#103;&#121;&#117;&#49;&#x33;&#49;&#55;&#x40;&#103;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;</a></p>\n<p>Phone: +86 188 5165 1321</p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>Name: Chengyu Luo</p>\n<p>Education: Southeast University</p>\n<p>Research Direction: Blockchain and Wireless Communication</p>\n<p>QQ: 1157340882</p>\n<p>Mail: <a href=\"mailto:&#x6c;&#117;&#x6f;&#99;&#x68;&#x65;&#110;&#103;&#121;&#117;&#49;&#x33;&#49;&#55;&#x40;&#103;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;\">&#x6c;&#117;&#x6f;&#99;&#x68;&#x65;&#110;&#103;&#121;&#117;&#49;&#x33;&#49;&#55;&#x40;&#103;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;</a></p>\n<p>Phone: +86 188 5165 1321</p>\n"},{"title":"Page","date":"2013-12-26T14:52:56.000Z","_content":"\nThis is a page test.","source":"page/index.md","raw":"title: Page\ndate: 2013-12-26 22:52:56\n---\n\nThis is a page test.","updated":"2022-07-02T15:49:59.972Z","path":"page/index.html","_id":"cl3iqqere0006l0em5klo6vvu","comments":1,"layout":"page","content":"<p>This is a page test.</p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>This is a page test.</p>\n"}],"Post":[{"title":"5G网元特征","date":"2022-04-26T14:31:56.000Z","author":"Lcy","_content":"\n# 5G网元特征\n\n## 核心网网元\n\n### 1.  AMF\n\n**AMF**（Access and Mobility Management Function，接入和移动管理功能）是接入和移动性管理功能实体，AMF可以类比于4G的MME。AMF的主要功能有：\n\n- RAN信令接口（N2）的终结点，NAS（N1）信令（MM消息）的终结点；\n- 负责NAS消息的加密和完整性保护，负责注册、接入、移动性管理、鉴权、短信等功能；\n- 此外在和EPS网络交互时还负责Eps Bearer Id的分配。\n\n### 2. SMF\n\nSMF（Session Management Function，会话管理功能）是会话管理功能实体。SMF的主要功能有：\n\n- NAS消息的SM消息的终结点；\n- 会话（session）的建立、修改、释放；\n- UE IP的分配管理；\n- DHCP功能；\n- ARP代理或IPv6邻居请求代理（Ethernet PDU场景下）；\n- 为一个会话选择和控制UPF；\n- 计费数据的收集以及支持计费接口；\n- 决定一个会话的SSC模式；\n- 下行数据指示。\n\n### 3. UPF\n\n**UPF**（User Plane Function，用户面管理功能）是用户面功能实体，其类似于4G下的GW（SGW+PGW）。最主要的功能是负责数据包的路由转发、Qos流映射。\n\n- 用于RAT内/RAT间移动性的锚点（适用时）。\n- 外部 PDU 与数据网络互连的会话点。\n- 分组路由和转发（例如，支持上行链路分类器以将业务流路由到数据网络的实例，支持分支点以支持多宿主PDU会话）。\n- 数据包检查（例如，基于服务数据流模板的应用流程检测以及从SMF接收的可选PFD）。\n- 用户平面部分策略规则实施，例如门控，重定向，流量转向）。\n- 合法拦截（UP收集）。\n- 流量使用报告。\n- 用户平面的QoS处理，例如UL/DL速率实施，DL中的反射QoS标记。\n- 上行链路流量验证（SDF到QoS流量映射）。\n- 上行链路和下行链路中的传输级分组标记。\n- 下行数据包缓冲和下行数据通知触发。\n- 将一个或多个“结束标记”发送和转发到源NG-RAN节点。\n\n### 4. PCF\n\n**PCF**（Policy Control Function，策略控制功能）为策略控制功能实体。支持统一的策略框架并管理网络行为，向网络实体提供策略规则，访问统一数据仓库（UDR）的订阅信息，PCF只能访问和其相同PLMN的NDR。\n\n### 5. NEF\n\n**NEF**（Network Exposure Function，网络业务呈现功能）是网络呈现功能实体。NEF的主要功能有：\n\n- 3GPP的网元都是通过NEF将其能力呈现给其它网元的；\n- NEF将相关信息存储到NDR中、也可以从NDR获取相关的信息，NEF只能访问和其相同PLMN的NDR；\n- F提供相应的安全保障来保证外部应用到3gpp网络的安全；\n- 3GPP内部和外部相关信息的转换，例如AF-Service-Identifier和5G核心网内部的DNN、S-NSSAI等的转换，尤其是网络和用户敏感信息一定要对外部网元隐藏；\n- NEF可以通过访问NDR获取到其它网元的相关信息，NEF只能访问和其相同PLMN的UDR。\n\n### 6. NRF\n\n**NRF**（NF Repository Function，NF贮存功能）是网络贮存功能实体。NRF的主要功能有：\n\n- 支持业务发现功能，也就是接收网元发过来的NF-Discovery-Request，然后提供发现的网元信息给请求方；\n- 维护可用网元实例的特征和其支持的业务能力；\n- 一个网元的特征参数主要有：网元实例ID、网元类型、PLMN、网络分片的相关ID（如S-NSSAI、NSI、ID）、网元的IP或者域名、网元的能力信息、支持的业务能力名字等\n\n### 7. UDM\n\nUDM（Unified Data Manager，统一数据管理）的主要功能有：\n\n- 产生3GPP鉴权证书/鉴权参数；\n- 存储和管理5G系统的永久性用户ID（SUPI）；\n- 订阅信息管理；\n- MT-SMS递交；\n- SMS管理；\n- 用户的服务网元注册管理（比如当前为终端提供业务的AMF、SMF等）。\n\n### 8. AUSF\n\n**AUSF**（Authentication Server Function，鉴权服务器功能）是鉴权服务器网元；支持3GPP接入的鉴权和untrusted non3GPP接入的鉴权。\n\n### 9. UDR\n\n**UDR**（Unified Data Repository，统一数据仓库），负责的主要功能有：\n\n- UDM存储订阅数据或读取订阅数据；\n- PCF存储策略数据或者读取策略数据；\n- 存储公开的数据或者从中读取公开的数据；UDR和访问UDR的NF具有相同的PLMN，也就是同一个网络下，也即Nudr接口是一个PLMN内部接口。\n\n### 10. SMSF\n\n**SMSF**（SMS Function，短信功能）为短信功能；\n\n### 11. RAN\n\n**（R）AN**（Access Network）就是接入网，可以是3GPP的接入网（如LTE、5G-NR），也可以是non-3GPP的接入网（如常见的WiFi接入）。\n\n## 5G核心网系统架构主要特征\n\n5G核心网架构为用户提供数据连接和数据业务服务，基于NFV（Network Function Virtualization，网络功能虚拟化）和 SDN（Software Defined Network，软件定义网络）等新技术，其控制面网元之间使用服务化的接口进行交互。5G核心网系统架构主要特征如下：\n\n1. 承载和控制分离：承载和控制可独立扩展和演进，可集中式或分布式灵活部署；\n2. 模块化功能设计：可以灵活和高效地进行网络切片；\n3. 网元交互流程服务化：按需调用，并服务可重复使用；\n4. 每个网元可以与其他网元直接交互，也可通过中间网元辅助进行控制面的消息路由；\n5. 无线接入和核心网之间弱关联：5G核心网是与接入无关并起到收敛作用的架构，3GPP和非3GPP均通过通用的接口接入5G核心网；\n6. 支持统一的鉴权框架；\n7. 支持无状态的网络功能，即计算资源与存储资源解耦部署；\n8. 基于流的QoS：简化了QoS架构，提升了网络处理能力；\n9. 支持本地集中部署的业务的大量并发接入， 用户面功能可部署在靠近接入网络的位置，以支持低时延业务、本地业务网络接入。\n\n在网元形态方面，4G EPC 以物理网元形态为主，通常基于专用硬件实现，模块颗粒度较大。 **5GC 以虚拟化网元形态为主，特别是控制面网元的虚拟化比较成熟**，支持云原生部署，可以基于共享云资源池部署 5GCVNF 。\n\n![image-20220426225721740](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426225721740.png)\n\n# Reference\n\n1. [5G 网络架构（核心网）总结_Yolandalt7777777的博客-CSDN博客_5g核心网](https://blog.csdn.net/Yolandalt7777777/article/details/105852009#:~:text=一个网元的特征参,SSAI、NSI)\n2. [5G核心网前沿报告](http://pdf.dfcfw.com/pdf/H3_AP202006071382919340_1.pdf) 来源： 中国通信学会\n\n","source":"_posts/5G网元特征.md","raw":"---\ntitle: 5G网元特征\ndate: 2022-04-26 22:31:56\ntags: Study\ncategories: Dirty Work\nauthor: Lcy\n\n---\n\n# 5G网元特征\n\n## 核心网网元\n\n### 1.  AMF\n\n**AMF**（Access and Mobility Management Function，接入和移动管理功能）是接入和移动性管理功能实体，AMF可以类比于4G的MME。AMF的主要功能有：\n\n- RAN信令接口（N2）的终结点，NAS（N1）信令（MM消息）的终结点；\n- 负责NAS消息的加密和完整性保护，负责注册、接入、移动性管理、鉴权、短信等功能；\n- 此外在和EPS网络交互时还负责Eps Bearer Id的分配。\n\n### 2. SMF\n\nSMF（Session Management Function，会话管理功能）是会话管理功能实体。SMF的主要功能有：\n\n- NAS消息的SM消息的终结点；\n- 会话（session）的建立、修改、释放；\n- UE IP的分配管理；\n- DHCP功能；\n- ARP代理或IPv6邻居请求代理（Ethernet PDU场景下）；\n- 为一个会话选择和控制UPF；\n- 计费数据的收集以及支持计费接口；\n- 决定一个会话的SSC模式；\n- 下行数据指示。\n\n### 3. UPF\n\n**UPF**（User Plane Function，用户面管理功能）是用户面功能实体，其类似于4G下的GW（SGW+PGW）。最主要的功能是负责数据包的路由转发、Qos流映射。\n\n- 用于RAT内/RAT间移动性的锚点（适用时）。\n- 外部 PDU 与数据网络互连的会话点。\n- 分组路由和转发（例如，支持上行链路分类器以将业务流路由到数据网络的实例，支持分支点以支持多宿主PDU会话）。\n- 数据包检查（例如，基于服务数据流模板的应用流程检测以及从SMF接收的可选PFD）。\n- 用户平面部分策略规则实施，例如门控，重定向，流量转向）。\n- 合法拦截（UP收集）。\n- 流量使用报告。\n- 用户平面的QoS处理，例如UL/DL速率实施，DL中的反射QoS标记。\n- 上行链路流量验证（SDF到QoS流量映射）。\n- 上行链路和下行链路中的传输级分组标记。\n- 下行数据包缓冲和下行数据通知触发。\n- 将一个或多个“结束标记”发送和转发到源NG-RAN节点。\n\n### 4. PCF\n\n**PCF**（Policy Control Function，策略控制功能）为策略控制功能实体。支持统一的策略框架并管理网络行为，向网络实体提供策略规则，访问统一数据仓库（UDR）的订阅信息，PCF只能访问和其相同PLMN的NDR。\n\n### 5. NEF\n\n**NEF**（Network Exposure Function，网络业务呈现功能）是网络呈现功能实体。NEF的主要功能有：\n\n- 3GPP的网元都是通过NEF将其能力呈现给其它网元的；\n- NEF将相关信息存储到NDR中、也可以从NDR获取相关的信息，NEF只能访问和其相同PLMN的NDR；\n- F提供相应的安全保障来保证外部应用到3gpp网络的安全；\n- 3GPP内部和外部相关信息的转换，例如AF-Service-Identifier和5G核心网内部的DNN、S-NSSAI等的转换，尤其是网络和用户敏感信息一定要对外部网元隐藏；\n- NEF可以通过访问NDR获取到其它网元的相关信息，NEF只能访问和其相同PLMN的UDR。\n\n### 6. NRF\n\n**NRF**（NF Repository Function，NF贮存功能）是网络贮存功能实体。NRF的主要功能有：\n\n- 支持业务发现功能，也就是接收网元发过来的NF-Discovery-Request，然后提供发现的网元信息给请求方；\n- 维护可用网元实例的特征和其支持的业务能力；\n- 一个网元的特征参数主要有：网元实例ID、网元类型、PLMN、网络分片的相关ID（如S-NSSAI、NSI、ID）、网元的IP或者域名、网元的能力信息、支持的业务能力名字等\n\n### 7. UDM\n\nUDM（Unified Data Manager，统一数据管理）的主要功能有：\n\n- 产生3GPP鉴权证书/鉴权参数；\n- 存储和管理5G系统的永久性用户ID（SUPI）；\n- 订阅信息管理；\n- MT-SMS递交；\n- SMS管理；\n- 用户的服务网元注册管理（比如当前为终端提供业务的AMF、SMF等）。\n\n### 8. AUSF\n\n**AUSF**（Authentication Server Function，鉴权服务器功能）是鉴权服务器网元；支持3GPP接入的鉴权和untrusted non3GPP接入的鉴权。\n\n### 9. UDR\n\n**UDR**（Unified Data Repository，统一数据仓库），负责的主要功能有：\n\n- UDM存储订阅数据或读取订阅数据；\n- PCF存储策略数据或者读取策略数据；\n- 存储公开的数据或者从中读取公开的数据；UDR和访问UDR的NF具有相同的PLMN，也就是同一个网络下，也即Nudr接口是一个PLMN内部接口。\n\n### 10. SMSF\n\n**SMSF**（SMS Function，短信功能）为短信功能；\n\n### 11. RAN\n\n**（R）AN**（Access Network）就是接入网，可以是3GPP的接入网（如LTE、5G-NR），也可以是non-3GPP的接入网（如常见的WiFi接入）。\n\n## 5G核心网系统架构主要特征\n\n5G核心网架构为用户提供数据连接和数据业务服务，基于NFV（Network Function Virtualization，网络功能虚拟化）和 SDN（Software Defined Network，软件定义网络）等新技术，其控制面网元之间使用服务化的接口进行交互。5G核心网系统架构主要特征如下：\n\n1. 承载和控制分离：承载和控制可独立扩展和演进，可集中式或分布式灵活部署；\n2. 模块化功能设计：可以灵活和高效地进行网络切片；\n3. 网元交互流程服务化：按需调用，并服务可重复使用；\n4. 每个网元可以与其他网元直接交互，也可通过中间网元辅助进行控制面的消息路由；\n5. 无线接入和核心网之间弱关联：5G核心网是与接入无关并起到收敛作用的架构，3GPP和非3GPP均通过通用的接口接入5G核心网；\n6. 支持统一的鉴权框架；\n7. 支持无状态的网络功能，即计算资源与存储资源解耦部署；\n8. 基于流的QoS：简化了QoS架构，提升了网络处理能力；\n9. 支持本地集中部署的业务的大量并发接入， 用户面功能可部署在靠近接入网络的位置，以支持低时延业务、本地业务网络接入。\n\n在网元形态方面，4G EPC 以物理网元形态为主，通常基于专用硬件实现，模块颗粒度较大。 **5GC 以虚拟化网元形态为主，特别是控制面网元的虚拟化比较成熟**，支持云原生部署，可以基于共享云资源池部署 5GCVNF 。\n\n![image-20220426225721740](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426225721740.png)\n\n# Reference\n\n1. [5G 网络架构（核心网）总结_Yolandalt7777777的博客-CSDN博客_5g核心网](https://blog.csdn.net/Yolandalt7777777/article/details/105852009#:~:text=一个网元的特征参,SSAI、NSI)\n2. [5G核心网前沿报告](http://pdf.dfcfw.com/pdf/H3_AP202006071382919340_1.pdf) 来源： 中国通信学会\n\n","slug":"5G网元特征","published":1,"updated":"2022-07-02T15:49:59.937Z","_id":"cl3iqqerb0001l0ema3qc5iyv","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"5G网元特征\"><a href=\"#5G网元特征\" class=\"headerlink\" title=\"5G网元特征\"></a>5G网元特征</h1><h2 id=\"核心网网元\"><a href=\"#核心网网元\" class=\"headerlink\" title=\"核心网网元\"></a>核心网网元</h2><div class=\"story post-story\"><h3 id=\"1-AMF\"><a href=\"#1-AMF\" class=\"headerlink\" title=\"1.  AMF\"></a>1.  AMF</h3><p><strong>AMF</strong>（Access and Mobility Management Function，接入和移动管理功能）是接入和移动性管理功能实体，AMF可以类比于4G的MME。AMF的主要功能有：</p>\n<ul>\n<li>RAN信令接口（N2）的终结点，NAS（N1）信令（MM消息）的终结点；</li>\n<li>负责NAS消息的加密和完整性保护，负责注册、接入、移动性管理、鉴权、短信等功能；</li>\n<li>此外在和EPS网络交互时还负责Eps Bearer Id的分配。</li>\n</ul>\n<h3 id=\"2-SMF\"><a href=\"#2-SMF\" class=\"headerlink\" title=\"2. SMF\"></a>2. SMF</h3><p>SMF（Session Management Function，会话管理功能）是会话管理功能实体。SMF的主要功能有：</p>\n<ul>\n<li>NAS消息的SM消息的终结点；</li>\n<li>会话（session）的建立、修改、释放；</li>\n<li>UE IP的分配管理；</li>\n<li>DHCP功能；</li>\n<li>ARP代理或IPv6邻居请求代理（Ethernet PDU场景下）；</li>\n<li>为一个会话选择和控制UPF；</li>\n<li>计费数据的收集以及支持计费接口；</li>\n<li>决定一个会话的SSC模式；</li>\n<li>下行数据指示。</li>\n</ul>\n<h3 id=\"3-UPF\"><a href=\"#3-UPF\" class=\"headerlink\" title=\"3. UPF\"></a>3. UPF</h3><p><strong>UPF</strong>（User Plane Function，用户面管理功能）是用户面功能实体，其类似于4G下的GW（SGW+PGW）。最主要的功能是负责数据包的路由转发、Qos流映射。</p>\n<ul>\n<li>用于RAT内/RAT间移动性的锚点（适用时）。</li>\n<li>外部 PDU 与数据网络互连的会话点。</li>\n<li>分组路由和转发（例如，支持上行链路分类器以将业务流路由到数据网络的实例，支持分支点以支持多宿主PDU会话）。</li>\n<li>数据包检查（例如，基于服务数据流模板的应用流程检测以及从SMF接收的可选PFD）。</li>\n<li>用户平面部分策略规则实施，例如门控，重定向，流量转向）。</li>\n<li>合法拦截（UP收集）。</li>\n<li>流量使用报告。</li>\n<li>用户平面的QoS处理，例如UL/DL速率实施，DL中的反射QoS标记。</li>\n<li>上行链路流量验证（SDF到QoS流量映射）。</li>\n<li>上行链路和下行链路中的传输级分组标记。</li>\n<li>下行数据包缓冲和下行数据通知触发。</li>\n<li>将一个或多个“结束标记”发送和转发到源NG-RAN节点。</li>\n</ul>\n<h3 id=\"4-PCF\"><a href=\"#4-PCF\" class=\"headerlink\" title=\"4. PCF\"></a>4. PCF</h3><p><strong>PCF</strong>（Policy Control Function，策略控制功能）为策略控制功能实体。支持统一的策略框架并管理网络行为，向网络实体提供策略规则，访问统一数据仓库（UDR）的订阅信息，PCF只能访问和其相同PLMN的NDR。</p>\n<h3 id=\"5-NEF\"><a href=\"#5-NEF\" class=\"headerlink\" title=\"5. NEF\"></a>5. NEF</h3><p><strong>NEF</strong>（Network Exposure Function，网络业务呈现功能）是网络呈现功能实体。NEF的主要功能有：</p>\n<ul>\n<li>3GPP的网元都是通过NEF将其能力呈现给其它网元的；</li>\n<li>NEF将相关信息存储到NDR中、也可以从NDR获取相关的信息，NEF只能访问和其相同PLMN的NDR；</li>\n<li>F提供相应的安全保障来保证外部应用到3gpp网络的安全；</li>\n<li>3GPP内部和外部相关信息的转换，例如AF-Service-Identifier和5G核心网内部的DNN、S-NSSAI等的转换，尤其是网络和用户敏感信息一定要对外部网元隐藏；</li>\n<li>NEF可以通过访问NDR获取到其它网元的相关信息，NEF只能访问和其相同PLMN的UDR。</li>\n</ul>\n<h3 id=\"6-NRF\"><a href=\"#6-NRF\" class=\"headerlink\" title=\"6. NRF\"></a>6. NRF</h3><p><strong>NRF</strong>（NF Repository Function，NF贮存功能）是网络贮存功能实体。NRF的主要功能有：</p>\n<ul>\n<li>支持业务发现功能，也就是接收网元发过来的NF-Discovery-Request，然后提供发现的网元信息给请求方；</li>\n<li>维护可用网元实例的特征和其支持的业务能力；</li>\n<li>一个网元的特征参数主要有：网元实例ID、网元类型、PLMN、网络分片的相关ID（如S-NSSAI、NSI、ID）、网元的IP或者域名、网元的能力信息、支持的业务能力名字等</li>\n</ul>\n<h3 id=\"7-UDM\"><a href=\"#7-UDM\" class=\"headerlink\" title=\"7. UDM\"></a>7. UDM</h3><p>UDM（Unified Data Manager，统一数据管理）的主要功能有：</p>\n<ul>\n<li>产生3GPP鉴权证书/鉴权参数；</li>\n<li>存储和管理5G系统的永久性用户ID（SUPI）；</li>\n<li>订阅信息管理；</li>\n<li>MT-SMS递交；</li>\n<li>SMS管理；</li>\n<li>用户的服务网元注册管理（比如当前为终端提供业务的AMF、SMF等）。</li>\n</ul>\n<h3 id=\"8-AUSF\"><a href=\"#8-AUSF\" class=\"headerlink\" title=\"8. AUSF\"></a>8. AUSF</h3><p><strong>AUSF</strong>（Authentication Server Function，鉴权服务器功能）是鉴权服务器网元；支持3GPP接入的鉴权和untrusted non3GPP接入的鉴权。</p>\n<h3 id=\"9-UDR\"><a href=\"#9-UDR\" class=\"headerlink\" title=\"9. UDR\"></a>9. UDR</h3><p><strong>UDR</strong>（Unified Data Repository，统一数据仓库），负责的主要功能有：</p>\n<ul>\n<li>UDM存储订阅数据或读取订阅数据；</li>\n<li>PCF存储策略数据或者读取策略数据；</li>\n<li>存储公开的数据或者从中读取公开的数据；UDR和访问UDR的NF具有相同的PLMN，也就是同一个网络下，也即Nudr接口是一个PLMN内部接口。</li>\n</ul>\n<h3 id=\"10-SMSF\"><a href=\"#10-SMSF\" class=\"headerlink\" title=\"10. SMSF\"></a>10. SMSF</h3><p><strong>SMSF</strong>（SMS Function，短信功能）为短信功能；</p>\n<h3 id=\"11-RAN\"><a href=\"#11-RAN\" class=\"headerlink\" title=\"11. RAN\"></a>11. RAN</h3><p><strong>（R）AN</strong>（Access Network）就是接入网，可以是3GPP的接入网（如LTE、5G-NR），也可以是non-3GPP的接入网（如常见的WiFi接入）。</p>\n</div><h2 id=\"5G核心网系统架构主要特征\"><a href=\"#5G核心网系统架构主要特征\" class=\"headerlink\" title=\"5G核心网系统架构主要特征\"></a>5G核心网系统架构主要特征</h2><div class=\"story post-story\"><p>5G核心网架构为用户提供数据连接和数据业务服务，基于NFV（Network Function Virtualization，网络功能虚拟化）和 SDN（Software Defined Network，软件定义网络）等新技术，其控制面网元之间使用服务化的接口进行交互。5G核心网系统架构主要特征如下：</p>\n<ol>\n<li>承载和控制分离：承载和控制可独立扩展和演进，可集中式或分布式灵活部署；</li>\n<li>模块化功能设计：可以灵活和高效地进行网络切片；</li>\n<li>网元交互流程服务化：按需调用，并服务可重复使用；</li>\n<li>每个网元可以与其他网元直接交互，也可通过中间网元辅助进行控制面的消息路由；</li>\n<li>无线接入和核心网之间弱关联：5G核心网是与接入无关并起到收敛作用的架构，3GPP和非3GPP均通过通用的接口接入5G核心网；</li>\n<li>支持统一的鉴权框架；</li>\n<li>支持无状态的网络功能，即计算资源与存储资源解耦部署；</li>\n<li>基于流的QoS：简化了QoS架构，提升了网络处理能力；</li>\n<li>支持本地集中部署的业务的大量并发接入， 用户面功能可部署在靠近接入网络的位置，以支持低时延业务、本地业务网络接入。</li>\n</ol>\n<p>在网元形态方面，4G EPC 以物理网元形态为主，通常基于专用硬件实现，模块颗粒度较大。 <strong>5GC 以虚拟化网元形态为主，特别是控制面网元的虚拟化比较成熟</strong>，支持云原生部署，可以基于共享云资源池部署 5GCVNF 。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426225721740.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426225721740.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220426225721740\"></p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><ol>\n<li><a href=\"https://blog.csdn.net/Yolandalt7777777/article/details/105852009#:~:text=%E4%B8%80%E4%B8%AA%E7%BD%91%E5%85%83%E7%9A%84%E7%89%B9%E5%BE%81%E5%8F%82,SSAI%E3%80%81NSI\">5G 网络架构（核心网）总结_Yolandalt7777777的博客-CSDN博客_5g核心网</a></li>\n<li><a href=\"http://pdf.dfcfw.com/pdf/H3_AP202006071382919340_1.pdf\">5G核心网前沿报告</a> 来源： 中国通信学会</li>\n</ol>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"5G网元特征\"><a href=\"#5G网元特征\" class=\"headerlink\" title=\"5G网元特征\"></a>5G网元特征</h1><h2 id=\"核心网网元\"><a href=\"#核心网网元\" class=\"headerlink\" title=\"核心网网元\"></a>核心网网元</h2><h3 id=\"1-AMF\"><a href=\"#1-AMF\" class=\"headerlink\" title=\"1.  AMF\"></a>1.  AMF</h3><p><strong>AMF</strong>（Access and Mobility Management Function，接入和移动管理功能）是接入和移动性管理功能实体，AMF可以类比于4G的MME。AMF的主要功能有：</p>\n<ul>\n<li>RAN信令接口（N2）的终结点，NAS（N1）信令（MM消息）的终结点；</li>\n<li>负责NAS消息的加密和完整性保护，负责注册、接入、移动性管理、鉴权、短信等功能；</li>\n<li>此外在和EPS网络交互时还负责Eps Bearer Id的分配。</li>\n</ul>\n<h3 id=\"2-SMF\"><a href=\"#2-SMF\" class=\"headerlink\" title=\"2. SMF\"></a>2. SMF</h3><p>SMF（Session Management Function，会话管理功能）是会话管理功能实体。SMF的主要功能有：</p>\n<ul>\n<li>NAS消息的SM消息的终结点；</li>\n<li>会话（session）的建立、修改、释放；</li>\n<li>UE IP的分配管理；</li>\n<li>DHCP功能；</li>\n<li>ARP代理或IPv6邻居请求代理（Ethernet PDU场景下）；</li>\n<li>为一个会话选择和控制UPF；</li>\n<li>计费数据的收集以及支持计费接口；</li>\n<li>决定一个会话的SSC模式；</li>\n<li>下行数据指示。</li>\n</ul>\n<h3 id=\"3-UPF\"><a href=\"#3-UPF\" class=\"headerlink\" title=\"3. UPF\"></a>3. UPF</h3><p><strong>UPF</strong>（User Plane Function，用户面管理功能）是用户面功能实体，其类似于4G下的GW（SGW+PGW）。最主要的功能是负责数据包的路由转发、Qos流映射。</p>\n<ul>\n<li>用于RAT内/RAT间移动性的锚点（适用时）。</li>\n<li>外部 PDU 与数据网络互连的会话点。</li>\n<li>分组路由和转发（例如，支持上行链路分类器以将业务流路由到数据网络的实例，支持分支点以支持多宿主PDU会话）。</li>\n<li>数据包检查（例如，基于服务数据流模板的应用流程检测以及从SMF接收的可选PFD）。</li>\n<li>用户平面部分策略规则实施，例如门控，重定向，流量转向）。</li>\n<li>合法拦截（UP收集）。</li>\n<li>流量使用报告。</li>\n<li>用户平面的QoS处理，例如UL/DL速率实施，DL中的反射QoS标记。</li>\n<li>上行链路流量验证（SDF到QoS流量映射）。</li>\n<li>上行链路和下行链路中的传输级分组标记。</li>\n<li>下行数据包缓冲和下行数据通知触发。</li>\n<li>将一个或多个“结束标记”发送和转发到源NG-RAN节点。</li>\n</ul>\n<h3 id=\"4-PCF\"><a href=\"#4-PCF\" class=\"headerlink\" title=\"4. PCF\"></a>4. PCF</h3><p><strong>PCF</strong>（Policy Control Function，策略控制功能）为策略控制功能实体。支持统一的策略框架并管理网络行为，向网络实体提供策略规则，访问统一数据仓库（UDR）的订阅信息，PCF只能访问和其相同PLMN的NDR。</p>\n<h3 id=\"5-NEF\"><a href=\"#5-NEF\" class=\"headerlink\" title=\"5. NEF\"></a>5. NEF</h3><p><strong>NEF</strong>（Network Exposure Function，网络业务呈现功能）是网络呈现功能实体。NEF的主要功能有：</p>\n<ul>\n<li>3GPP的网元都是通过NEF将其能力呈现给其它网元的；</li>\n<li>NEF将相关信息存储到NDR中、也可以从NDR获取相关的信息，NEF只能访问和其相同PLMN的NDR；</li>\n<li>F提供相应的安全保障来保证外部应用到3gpp网络的安全；</li>\n<li>3GPP内部和外部相关信息的转换，例如AF-Service-Identifier和5G核心网内部的DNN、S-NSSAI等的转换，尤其是网络和用户敏感信息一定要对外部网元隐藏；</li>\n<li>NEF可以通过访问NDR获取到其它网元的相关信息，NEF只能访问和其相同PLMN的UDR。</li>\n</ul>\n<h3 id=\"6-NRF\"><a href=\"#6-NRF\" class=\"headerlink\" title=\"6. NRF\"></a>6. NRF</h3><p><strong>NRF</strong>（NF Repository Function，NF贮存功能）是网络贮存功能实体。NRF的主要功能有：</p>\n<ul>\n<li>支持业务发现功能，也就是接收网元发过来的NF-Discovery-Request，然后提供发现的网元信息给请求方；</li>\n<li>维护可用网元实例的特征和其支持的业务能力；</li>\n<li>一个网元的特征参数主要有：网元实例ID、网元类型、PLMN、网络分片的相关ID（如S-NSSAI、NSI、ID）、网元的IP或者域名、网元的能力信息、支持的业务能力名字等</li>\n</ul>\n<h3 id=\"7-UDM\"><a href=\"#7-UDM\" class=\"headerlink\" title=\"7. UDM\"></a>7. UDM</h3><p>UDM（Unified Data Manager，统一数据管理）的主要功能有：</p>\n<ul>\n<li>产生3GPP鉴权证书/鉴权参数；</li>\n<li>存储和管理5G系统的永久性用户ID（SUPI）；</li>\n<li>订阅信息管理；</li>\n<li>MT-SMS递交；</li>\n<li>SMS管理；</li>\n<li>用户的服务网元注册管理（比如当前为终端提供业务的AMF、SMF等）。</li>\n</ul>\n<h3 id=\"8-AUSF\"><a href=\"#8-AUSF\" class=\"headerlink\" title=\"8. AUSF\"></a>8. AUSF</h3><p><strong>AUSF</strong>（Authentication Server Function，鉴权服务器功能）是鉴权服务器网元；支持3GPP接入的鉴权和untrusted non3GPP接入的鉴权。</p>\n<h3 id=\"9-UDR\"><a href=\"#9-UDR\" class=\"headerlink\" title=\"9. UDR\"></a>9. UDR</h3><p><strong>UDR</strong>（Unified Data Repository，统一数据仓库），负责的主要功能有：</p>\n<ul>\n<li>UDM存储订阅数据或读取订阅数据；</li>\n<li>PCF存储策略数据或者读取策略数据；</li>\n<li>存储公开的数据或者从中读取公开的数据；UDR和访问UDR的NF具有相同的PLMN，也就是同一个网络下，也即Nudr接口是一个PLMN内部接口。</li>\n</ul>\n<h3 id=\"10-SMSF\"><a href=\"#10-SMSF\" class=\"headerlink\" title=\"10. SMSF\"></a>10. SMSF</h3><p><strong>SMSF</strong>（SMS Function，短信功能）为短信功能；</p>\n<h3 id=\"11-RAN\"><a href=\"#11-RAN\" class=\"headerlink\" title=\"11. RAN\"></a>11. RAN</h3><p><strong>（R）AN</strong>（Access Network）就是接入网，可以是3GPP的接入网（如LTE、5G-NR），也可以是non-3GPP的接入网（如常见的WiFi接入）。</p>\n<h2 id=\"5G核心网系统架构主要特征\"><a href=\"#5G核心网系统架构主要特征\" class=\"headerlink\" title=\"5G核心网系统架构主要特征\"></a>5G核心网系统架构主要特征</h2><p>5G核心网架构为用户提供数据连接和数据业务服务，基于NFV（Network Function Virtualization，网络功能虚拟化）和 SDN（Software Defined Network，软件定义网络）等新技术，其控制面网元之间使用服务化的接口进行交互。5G核心网系统架构主要特征如下：</p>\n<ol>\n<li>承载和控制分离：承载和控制可独立扩展和演进，可集中式或分布式灵活部署；</li>\n<li>模块化功能设计：可以灵活和高效地进行网络切片；</li>\n<li>网元交互流程服务化：按需调用，并服务可重复使用；</li>\n<li>每个网元可以与其他网元直接交互，也可通过中间网元辅助进行控制面的消息路由；</li>\n<li>无线接入和核心网之间弱关联：5G核心网是与接入无关并起到收敛作用的架构，3GPP和非3GPP均通过通用的接口接入5G核心网；</li>\n<li>支持统一的鉴权框架；</li>\n<li>支持无状态的网络功能，即计算资源与存储资源解耦部署；</li>\n<li>基于流的QoS：简化了QoS架构，提升了网络处理能力；</li>\n<li>支持本地集中部署的业务的大量并发接入， 用户面功能可部署在靠近接入网络的位置，以支持低时延业务、本地业务网络接入。</li>\n</ol>\n<p>在网元形态方面，4G EPC 以物理网元形态为主，通常基于专用硬件实现，模块颗粒度较大。 <strong>5GC 以虚拟化网元形态为主，特别是控制面网元的虚拟化比较成熟</strong>，支持云原生部署，可以基于共享云资源池部署 5GCVNF 。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426225721740.png\" alt=\"image-20220426225721740\"></p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><ol>\n<li><a href=\"https://blog.csdn.net/Yolandalt7777777/article/details/105852009#:~:text=%E4%B8%80%E4%B8%AA%E7%BD%91%E5%85%83%E7%9A%84%E7%89%B9%E5%BE%81%E5%8F%82,SSAI%E3%80%81NSI\">5G 网络架构（核心网）总结_Yolandalt7777777的博客-CSDN博客_5g核心网</a></li>\n<li><a href=\"http://pdf.dfcfw.com/pdf/H3_AP202006071382919340_1.pdf\">5G核心网前沿报告</a> 来源： 中国通信学会</li>\n</ol>\n"},{"title":"博弈论小游戏结果","date":"2022-04-04T06:52:17.000Z","author":"Lcy","_content":"\n# 博弈论小游戏的结果\n\n[toc]\n\n其实这两个游戏都是经典猜均值2/3游戏的小小变型。这里就给出简单结果了，先不分析了，以及：\n\n<center><font color=cayon size=\"+3\"><a href=\"https://www.wjx.top/vj/emyupFd.aspx\">第二轮链接！！！</a></font></center>\n\n## 无激励结果\n\n首先我先提供一下一份此前无激励的数据，[单击下载](https://lcydesktop.oss-cn-beijing.aliyuncs.com/tmp/%E6%97%A0%E6%BF%80%E5%8A%B1%E7%9A%84%E7%BB%93%E6%9E%9C.xlsx?versionId=CAEQHxiBgIDUj7eN_xciIDlkOTkyOTZkNjQ1NjRkNzFhNWY1ZmY0MTA0NjlhNDZk)\n\n这份数据中总共只收集到了51个结果，两个游戏的winner如下\n\n![image-20220401122516435](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122516435.png)\n\n数据量较小，按间隔5提供一下数据分布：\n\n![image-20220401122739516](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122739516.png)\n\n![image-20220401122654118](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122654118.png)\n\n## 本次问卷实测\n首先恭喜一下@1668131450@1584129782两个同学成功的获得了红包，相同值取的是最早填报的同学。\n\n这次问卷总共收到了818条数据，其中有两条（事实肯定远远不止）备注了不要删去了。\n\n### 游戏1——最接近平均数\n\n所有数字的平均数是44.76135975757379\n\n很奇妙的事情是当问卷数量在700之前时（没记错的话）这个数字似乎一直在44.5左右波动，有位填44.444444444444······的一度坐稳了Game 1的Winner，然后后面的问卷来了之后这个数字不断被提升。\n\n最早是1668131450在2022/3/31 11:40:16 第65个填问卷的填了45，成为了Winner。\n\n在此我只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。\n\n<center>10等分，0，50，100单列</center>\n\n![Game1ResultDividedInto10parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto10parts.jpg)\n\n<center>20等分，0，50，100单列</center>\n\n![Game1ResultDividedInto20parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto20parts.jpg)\n\n<center>50等分，0，50，100单列</center>\n\n![Game1ResultDividedInto50parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto50parts.jpg)\n\n<center>一个个分，0，50，100单列</center>\n\n![Game1ResultDividedInto100parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto100parts.jpg)\n\n### 游戏2——最接近所有数从小到大排序的2/3的数 \n\n首先结果是70\n\n这里很奇妙的事情是当问卷数量在300左右时（没记错的话）这个数字直到结束都是70，是因为填70的太多了吧，导致最后虽然一会往前偏一点一会往后偏一点但仍然是70。哦这里我平时pandas用的少并不知道69.9999999······被处理成70怎么办所以附件的python程序有点bug要注意一下。\n\n最早是1584129782在2022/3/31 11:04:40 第11个填问卷的填70，成为了Winner。\n\n在此我同样只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。\n\n\n<center>10等分，0，67，100单列</center>\n\n![Game2ResultDividedInto10parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto10parts.jpg)\n\n\n<center>20等分，0，67，100单列</center>\n\n![Game2ResultDividedInto20parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto20parts.jpg)\n\n<center>50等分，0，67，100单列</center>\n\n![Game2ResultDividedInto50parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto50parts.jpg)\n\n<center>一个个分，0，67，100单列</center>\n\n![Game2ResultDividedInto100parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto100parts.jpg)\n\n## 附件：Code\n\n1.库导入&文件读取\n\n```python\nfrom posixpath import split\nfrom decimal import Decimal\nimport pandas as pd\ndf = pd.read_excel(\"dataFinal.xlsx\")\npd.set_option('precision', 30)\n```\n\n2.class 定义\n\n```python\nclass game:\n    def __init__(self,game1,game2,qq,time,no,thinkTime) -> None:\n        self.game1 = game1\n        self.game2 = game2\n        self.qq = qq\n        self.time = str(time)\n        self.no =  no\n        self.thinkTime = thinkTime\n\nans =[game(df.iloc[i,6],df.iloc[i,7],df.iloc[i,8],df.iloc[i,1],df.iloc[i,0],int(df.iloc[i,2].strip(\"秒\"))) for i in range(0,len(df))]\n```\n\n3.结果获取\n\n```python\ngame1ans = 0\nfor i in range(0,len(ans)):\n    game1ans += ans[i].game1/len(ans)\nprint(\"参与人数\",len(ans),\"Game 1 average number: \",game1ans)\nmaxk = 99.999\nansk = -1\nfor i in range(0,len(ans)):\n    # Find the only winner of game1, the minist distance\n    if abs(ans[i].game1 - game1ans) < maxk:\n        ansk , maxk = i , abs(ans[i].game1 - game1ans)\nprint(\"Smallest distance:\",abs(ans[ansk].game1-game1ans))\nprint(\"Game1 win number:\",ans[ansk].game1,\" WinnerQQ:\",ans[ansk].qq,\"填报时间:\",ans[ansk].time,\"填报顺序:\",ans[ansk].no)\n# Sort\nsorted_ans = sorted(ans, key=lambda x: (x.game2,x.no))\n# Start from zero so minus 1 then find the first one\n# TODO: There is a pricision bug here, so don't just trust the python result. so who gives me the number 69.999999999999999999999999999999999999999999999999999999999999999999999???????\nansl = int(len(ans)*2/3)-1\nfor i in range(0,len(sorted_ans)):\n    if sorted_ans[i].game2 == sorted_ans[ansl].game2 and sorted_ans[i].no < sorted_ans[ansl].no:\n        ansl = i\nprint(\"Game2 winner position:\",ansl,end = \" \")\nprint(\"Game2 win number:\",sorted_ans[ansl].game2,\" WinnerQQ:\",sorted_ans[ansl].qq,\"填报时间:\",sorted_ans[ansl].time,\"填报顺序:\",sorted_ans[ansl].no)\n```\n\n4.简单画下图\n\n```python\nimport matplotlib.pyplot as plt\n# 这两行代码解决 plt 中文显示的问题\nplt.rcParams['font.sans-serif'] = ['SimHei']\nplt.rcParams['axes.unicode_minus'] = False\n\ndef drawgame1(divide,figx,figy):\n    cols = [\"特别的0\"]\n    for i in range(0,50//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的50\")\n    for i in range(50//divide,100//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的100\")\n\n    dictgame1 = {}\n    for i in cols:\n        dictgame1[i] = 0\n    for i in range(0,len(ans)):\n        if (ans[i].game1 == 0):\n            dictgame1[\"特别的0\"] += 1\n            continue\n        if (ans[i].game1 == 50):\n            dictgame1[\"特别的50\"] += 1\n            continue\n        if (ans[i].game1 == 100):\n            dictgame1[\"特别的100\"] += 1\n            continue\n        for j in range(0,100//divide):\n            s = str(j*divide) + \"~\" + str(j*divide+divide)\n            if ans[i].game1 > j *divide and ans[i].game1 <= j*divide+divide:\n                dictgame1[s] += 1\n    colsans = []\n    for i in cols:\n        colsans.append(dictgame1[i])\n    plt.figure(figsize=(figx,figy))\n    plt.bar(cols,colsans)\n    plt.title('Game1 统计结果 间隔'+str(divide))\n    plt.savefig(\"Game1ResultDividedInto\"+str(100//divide)+\"parts.jpg\")\n    plt.show()\ndef drawgame2(divide,figx,figy):\n    cols = [\"特别的0\"]\n    for i in range(0,66//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的67\")\n    for i in range(66//divide,100//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的100\")\n\n    dictgame2 = {}\n    for i in cols:\n        dictgame2[i] = 0\n    for i in range(0,len(ans)):\n        if (ans[i].game2 == 0):\n            dictgame2[\"特别的0\"] += 1\n            continue\n        if (ans[i].game2 == 67):\n            dictgame2[\"特别的67\"] += 1\n            continue\n        if (ans[i].game2 == 100):\n            dictgame2[\"特别的100\"] += 1\n            continue\n        for j in range(0,100//divide):\n            s = str(j*divide) + \"~\" + str(j*divide+divide)\n            if ans[i].game2 > j *divide and ans[i].game2 <= j*divide+divide:\n                dictgame2[s] += 1\n    colsans = []\n    for i in cols:\n        colsans.append(dictgame2[i])\n    plt.figure(figsize=(figx,figy))\n    plt.bar(cols,colsans)\n    plt.title('Game2 统计结果 间隔'+str(divide))\n    plt.savefig(\"Game2ResultDividedInto\"+str(100//divide)+\"parts.jpg\")\n    plt.show()\n# %%\ndrawgame1(1,50,20)\ndrawgame2(1,40,20)\n```\n\n","source":"_posts/GametheoryResult.md","raw":"---\ntitle: 博弈论小游戏结果\ndate: 2022-04-04 14:52:17\ntags: Interests\ncategories: Others\nauthor: Lcy\n\n---\n\n# 博弈论小游戏的结果\n\n[toc]\n\n其实这两个游戏都是经典猜均值2/3游戏的小小变型。这里就给出简单结果了，先不分析了，以及：\n\n<center><font color=cayon size=\"+3\"><a href=\"https://www.wjx.top/vj/emyupFd.aspx\">第二轮链接！！！</a></font></center>\n\n## 无激励结果\n\n首先我先提供一下一份此前无激励的数据，[单击下载](https://lcydesktop.oss-cn-beijing.aliyuncs.com/tmp/%E6%97%A0%E6%BF%80%E5%8A%B1%E7%9A%84%E7%BB%93%E6%9E%9C.xlsx?versionId=CAEQHxiBgIDUj7eN_xciIDlkOTkyOTZkNjQ1NjRkNzFhNWY1ZmY0MTA0NjlhNDZk)\n\n这份数据中总共只收集到了51个结果，两个游戏的winner如下\n\n![image-20220401122516435](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122516435.png)\n\n数据量较小，按间隔5提供一下数据分布：\n\n![image-20220401122739516](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122739516.png)\n\n![image-20220401122654118](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122654118.png)\n\n## 本次问卷实测\n首先恭喜一下@1668131450@1584129782两个同学成功的获得了红包，相同值取的是最早填报的同学。\n\n这次问卷总共收到了818条数据，其中有两条（事实肯定远远不止）备注了不要删去了。\n\n### 游戏1——最接近平均数\n\n所有数字的平均数是44.76135975757379\n\n很奇妙的事情是当问卷数量在700之前时（没记错的话）这个数字似乎一直在44.5左右波动，有位填44.444444444444······的一度坐稳了Game 1的Winner，然后后面的问卷来了之后这个数字不断被提升。\n\n最早是1668131450在2022/3/31 11:40:16 第65个填问卷的填了45，成为了Winner。\n\n在此我只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。\n\n<center>10等分，0，50，100单列</center>\n\n![Game1ResultDividedInto10parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto10parts.jpg)\n\n<center>20等分，0，50，100单列</center>\n\n![Game1ResultDividedInto20parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto20parts.jpg)\n\n<center>50等分，0，50，100单列</center>\n\n![Game1ResultDividedInto50parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto50parts.jpg)\n\n<center>一个个分，0，50，100单列</center>\n\n![Game1ResultDividedInto100parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto100parts.jpg)\n\n### 游戏2——最接近所有数从小到大排序的2/3的数 \n\n首先结果是70\n\n这里很奇妙的事情是当问卷数量在300左右时（没记错的话）这个数字直到结束都是70，是因为填70的太多了吧，导致最后虽然一会往前偏一点一会往后偏一点但仍然是70。哦这里我平时pandas用的少并不知道69.9999999······被处理成70怎么办所以附件的python程序有点bug要注意一下。\n\n最早是1584129782在2022/3/31 11:04:40 第11个填问卷的填70，成为了Winner。\n\n在此我同样只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。\n\n\n<center>10等分，0，67，100单列</center>\n\n![Game2ResultDividedInto10parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto10parts.jpg)\n\n\n<center>20等分，0，67，100单列</center>\n\n![Game2ResultDividedInto20parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto20parts.jpg)\n\n<center>50等分，0，67，100单列</center>\n\n![Game2ResultDividedInto50parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto50parts.jpg)\n\n<center>一个个分，0，67，100单列</center>\n\n![Game2ResultDividedInto100parts](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto100parts.jpg)\n\n## 附件：Code\n\n1.库导入&文件读取\n\n```python\nfrom posixpath import split\nfrom decimal import Decimal\nimport pandas as pd\ndf = pd.read_excel(\"dataFinal.xlsx\")\npd.set_option('precision', 30)\n```\n\n2.class 定义\n\n```python\nclass game:\n    def __init__(self,game1,game2,qq,time,no,thinkTime) -> None:\n        self.game1 = game1\n        self.game2 = game2\n        self.qq = qq\n        self.time = str(time)\n        self.no =  no\n        self.thinkTime = thinkTime\n\nans =[game(df.iloc[i,6],df.iloc[i,7],df.iloc[i,8],df.iloc[i,1],df.iloc[i,0],int(df.iloc[i,2].strip(\"秒\"))) for i in range(0,len(df))]\n```\n\n3.结果获取\n\n```python\ngame1ans = 0\nfor i in range(0,len(ans)):\n    game1ans += ans[i].game1/len(ans)\nprint(\"参与人数\",len(ans),\"Game 1 average number: \",game1ans)\nmaxk = 99.999\nansk = -1\nfor i in range(0,len(ans)):\n    # Find the only winner of game1, the minist distance\n    if abs(ans[i].game1 - game1ans) < maxk:\n        ansk , maxk = i , abs(ans[i].game1 - game1ans)\nprint(\"Smallest distance:\",abs(ans[ansk].game1-game1ans))\nprint(\"Game1 win number:\",ans[ansk].game1,\" WinnerQQ:\",ans[ansk].qq,\"填报时间:\",ans[ansk].time,\"填报顺序:\",ans[ansk].no)\n# Sort\nsorted_ans = sorted(ans, key=lambda x: (x.game2,x.no))\n# Start from zero so minus 1 then find the first one\n# TODO: There is a pricision bug here, so don't just trust the python result. so who gives me the number 69.999999999999999999999999999999999999999999999999999999999999999999999???????\nansl = int(len(ans)*2/3)-1\nfor i in range(0,len(sorted_ans)):\n    if sorted_ans[i].game2 == sorted_ans[ansl].game2 and sorted_ans[i].no < sorted_ans[ansl].no:\n        ansl = i\nprint(\"Game2 winner position:\",ansl,end = \" \")\nprint(\"Game2 win number:\",sorted_ans[ansl].game2,\" WinnerQQ:\",sorted_ans[ansl].qq,\"填报时间:\",sorted_ans[ansl].time,\"填报顺序:\",sorted_ans[ansl].no)\n```\n\n4.简单画下图\n\n```python\nimport matplotlib.pyplot as plt\n# 这两行代码解决 plt 中文显示的问题\nplt.rcParams['font.sans-serif'] = ['SimHei']\nplt.rcParams['axes.unicode_minus'] = False\n\ndef drawgame1(divide,figx,figy):\n    cols = [\"特别的0\"]\n    for i in range(0,50//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的50\")\n    for i in range(50//divide,100//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的100\")\n\n    dictgame1 = {}\n    for i in cols:\n        dictgame1[i] = 0\n    for i in range(0,len(ans)):\n        if (ans[i].game1 == 0):\n            dictgame1[\"特别的0\"] += 1\n            continue\n        if (ans[i].game1 == 50):\n            dictgame1[\"特别的50\"] += 1\n            continue\n        if (ans[i].game1 == 100):\n            dictgame1[\"特别的100\"] += 1\n            continue\n        for j in range(0,100//divide):\n            s = str(j*divide) + \"~\" + str(j*divide+divide)\n            if ans[i].game1 > j *divide and ans[i].game1 <= j*divide+divide:\n                dictgame1[s] += 1\n    colsans = []\n    for i in cols:\n        colsans.append(dictgame1[i])\n    plt.figure(figsize=(figx,figy))\n    plt.bar(cols,colsans)\n    plt.title('Game1 统计结果 间隔'+str(divide))\n    plt.savefig(\"Game1ResultDividedInto\"+str(100//divide)+\"parts.jpg\")\n    plt.show()\ndef drawgame2(divide,figx,figy):\n    cols = [\"特别的0\"]\n    for i in range(0,66//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的67\")\n    for i in range(66//divide,100//divide):\n        cols.append((str(i*divide) + \"~\" + str(i*divide+divide)))\n    cols.append(\"特别的100\")\n\n    dictgame2 = {}\n    for i in cols:\n        dictgame2[i] = 0\n    for i in range(0,len(ans)):\n        if (ans[i].game2 == 0):\n            dictgame2[\"特别的0\"] += 1\n            continue\n        if (ans[i].game2 == 67):\n            dictgame2[\"特别的67\"] += 1\n            continue\n        if (ans[i].game2 == 100):\n            dictgame2[\"特别的100\"] += 1\n            continue\n        for j in range(0,100//divide):\n            s = str(j*divide) + \"~\" + str(j*divide+divide)\n            if ans[i].game2 > j *divide and ans[i].game2 <= j*divide+divide:\n                dictgame2[s] += 1\n    colsans = []\n    for i in cols:\n        colsans.append(dictgame2[i])\n    plt.figure(figsize=(figx,figy))\n    plt.bar(cols,colsans)\n    plt.title('Game2 统计结果 间隔'+str(divide))\n    plt.savefig(\"Game2ResultDividedInto\"+str(100//divide)+\"parts.jpg\")\n    plt.show()\n# %%\ndrawgame1(1,50,20)\ndrawgame2(1,40,20)\n```\n\n","slug":"GametheoryResult","published":1,"updated":"2022-07-02T15:49:59.938Z","_id":"cl3iqqerh0009l0emhc0chuwr","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"博弈论小游戏的结果\"><a href=\"#博弈论小游戏的结果\" class=\"headerlink\" title=\"博弈论小游戏的结果\"></a>博弈论小游戏的结果</h1><p>[toc]</p>\n<p>其实这两个游戏都是经典猜均值2/3游戏的小小变型。这里就给出简单结果了，先不分析了，以及：</p>\n<center><font color=cayon size=\"+3\"><a href=\"https://www.wjx.top/vj/emyupFd.aspx\">第二轮链接！！！</a></font></center>\n\n<h2 id=\"无激励结果\"><a href=\"#无激励结果\" class=\"headerlink\" title=\"无激励结果\"></a>无激励结果</h2><div class=\"story post-story\"><p>首先我先提供一下一份此前无激励的数据，<a href=\"https://lcydesktop.oss-cn-beijing.aliyuncs.com/tmp/%E6%97%A0%E6%BF%80%E5%8A%B1%E7%9A%84%E7%BB%93%E6%9E%9C.xlsx?versionId=CAEQHxiBgIDUj7eN_xciIDlkOTkyOTZkNjQ1NjRkNzFhNWY1ZmY0MTA0NjlhNDZk\">单击下载</a></p>\n<p>这份数据中总共只收集到了51个结果，两个游戏的winner如下</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122516435.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122516435.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220401122516435\"></p>\n<p>数据量较小，按间隔5提供一下数据分布：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122739516.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122739516.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220401122739516\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122654118.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122654118.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220401122654118\"></p>\n</div><h2 id=\"本次问卷实测\"><a href=\"#本次问卷实测\" class=\"headerlink\" title=\"本次问卷实测\"></a>本次问卷实测</h2><div class=\"story post-story\"><p>首先恭喜一下@1668131450@1584129782两个同学成功的获得了红包，相同值取的是最早填报的同学。</p>\n<p>这次问卷总共收到了818条数据，其中有两条（事实肯定远远不止）备注了不要删去了。</p>\n<h3 id=\"游戏1——最接近平均数\"><a href=\"#游戏1——最接近平均数\" class=\"headerlink\" title=\"游戏1——最接近平均数\"></a>游戏1——最接近平均数</h3><p>所有数字的平均数是44.76135975757379</p>\n<p>很奇妙的事情是当问卷数量在700之前时（没记错的话）这个数字似乎一直在44.5左右波动，有位填44.444444444444······的一度坐稳了Game 1的Winner，然后后面的问卷来了之后这个数字不断被提升。</p>\n<p>最早是1668131450在2022/3/31 11:40:16 第65个填问卷的填了45，成为了Winner。</p>\n<p>在此我只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。</p>\n<center>10等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto10parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto10parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game1ResultDividedInto10parts\"></p>\n<center>20等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto20parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto20parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game1ResultDividedInto20parts\"></p>\n<center>50等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto50parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto50parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game1ResultDividedInto50parts\"></p>\n<center>一个个分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto100parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto100parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game1ResultDividedInto100parts\"></p>\n<h3 id=\"游戏2——最接近所有数从小到大排序的2-3的数\"><a href=\"#游戏2——最接近所有数从小到大排序的2-3的数\" class=\"headerlink\" title=\"游戏2——最接近所有数从小到大排序的2/3的数\"></a>游戏2——最接近所有数从小到大排序的2/3的数</h3><p>首先结果是70</p>\n<p>这里很奇妙的事情是当问卷数量在300左右时（没记错的话）这个数字直到结束都是70，是因为填70的太多了吧，导致最后虽然一会往前偏一点一会往后偏一点但仍然是70。哦这里我平时pandas用的少并不知道69.9999999······被处理成70怎么办所以附件的python程序有点bug要注意一下。</p>\n<p>最早是1584129782在2022/3/31 11:04:40 第11个填问卷的填70，成为了Winner。</p>\n<p>在此我同样只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。</p>\n<center>10等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto10parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto10parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game2ResultDividedInto10parts\"></p>\n<center>20等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto20parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto20parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game2ResultDividedInto20parts\"></p>\n<center>50等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto50parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto50parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game2ResultDividedInto50parts\"></p>\n<center>一个个分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto100parts.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto100parts.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"Game2ResultDividedInto100parts\"></p>\n</div><h2 id=\"附件：Code\"><a href=\"#附件：Code\" class=\"headerlink\" title=\"附件：Code\"></a>附件：Code</h2><div class=\"story post-story\"><p>1.库导入&amp;文件读取</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> posixpath <span class=\"keyword\">import</span> split</span><br><span class=\"line\"><span class=\"keyword\">from</span> decimal <span class=\"keyword\">import</span> Decimal</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\">df = pd.read_excel(<span class=\"string\">&quot;dataFinal.xlsx&quot;</span>)</span><br><span class=\"line\">pd.set_option(<span class=\"string\">&#x27;precision&#x27;</span>, <span class=\"number\">30</span>)</span><br></pre></td></tr></table></figure>\n\n<p>2.class 定义</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">game</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self,game1,game2,qq,time,no,thinkTime</span>) -&gt; <span class=\"literal\">None</span>:</span><br><span class=\"line\">        self.game1 = game1</span><br><span class=\"line\">        self.game2 = game2</span><br><span class=\"line\">        self.qq = qq</span><br><span class=\"line\">        self.time = <span class=\"built_in\">str</span>(time)</span><br><span class=\"line\">        self.no =  no</span><br><span class=\"line\">        self.thinkTime = thinkTime</span><br><span class=\"line\"></span><br><span class=\"line\">ans =[game(df.iloc[i,<span class=\"number\">6</span>],df.iloc[i,<span class=\"number\">7</span>],df.iloc[i,<span class=\"number\">8</span>],df.iloc[i,<span class=\"number\">1</span>],df.iloc[i,<span class=\"number\">0</span>],<span class=\"built_in\">int</span>(df.iloc[i,<span class=\"number\">2</span>].strip(<span class=\"string\">&quot;秒&quot;</span>))) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(df))]</span><br></pre></td></tr></table></figure>\n\n<p>3.结果获取</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">game1ans = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">    game1ans += ans[i].game1/<span class=\"built_in\">len</span>(ans)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;参与人数&quot;</span>,<span class=\"built_in\">len</span>(ans),<span class=\"string\">&quot;Game 1 average number: &quot;</span>,game1ans)</span><br><span class=\"line\">maxk = <span class=\"number\">99.999</span></span><br><span class=\"line\">ansk = -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">    <span class=\"comment\"># Find the only winner of game1, the minist distance</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">abs</span>(ans[i].game1 - game1ans) &lt; maxk:</span><br><span class=\"line\">        ansk , maxk = i , <span class=\"built_in\">abs</span>(ans[i].game1 - game1ans)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Smallest distance:&quot;</span>,<span class=\"built_in\">abs</span>(ans[ansk].game1-game1ans))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game1 win number:&quot;</span>,ans[ansk].game1,<span class=\"string\">&quot; WinnerQQ:&quot;</span>,ans[ansk].qq,<span class=\"string\">&quot;填报时间:&quot;</span>,ans[ansk].time,<span class=\"string\">&quot;填报顺序:&quot;</span>,ans[ansk].no)</span><br><span class=\"line\"><span class=\"comment\"># Sort</span></span><br><span class=\"line\">sorted_ans = <span class=\"built_in\">sorted</span>(ans, key=<span class=\"keyword\">lambda</span> x: (x.game2,x.no))</span><br><span class=\"line\"><span class=\"comment\"># Start from zero so minus 1 then find the first one</span></span><br><span class=\"line\"><span class=\"comment\"># <span class=\"doctag\">TODO:</span> There is a pricision bug here, so don&#x27;t just trust the python result. so who gives me the number 69.999999999999999999999999999999999999999999999999999999999999999999999???????</span></span><br><span class=\"line\">ansl = <span class=\"built_in\">int</span>(<span class=\"built_in\">len</span>(ans)*<span class=\"number\">2</span>/<span class=\"number\">3</span>)-<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(sorted_ans)):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> sorted_ans[i].game2 == sorted_ans[ansl].game2 <span class=\"keyword\">and</span> sorted_ans[i].no &lt; sorted_ans[ansl].no:</span><br><span class=\"line\">        ansl = i</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game2 winner position:&quot;</span>,ansl,end = <span class=\"string\">&quot; &quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game2 win number:&quot;</span>,sorted_ans[ansl].game2,<span class=\"string\">&quot; WinnerQQ:&quot;</span>,sorted_ans[ansl].qq,<span class=\"string\">&quot;填报时间:&quot;</span>,sorted_ans[ansl].time,<span class=\"string\">&quot;填报顺序:&quot;</span>,sorted_ans[ansl].no)</span><br></pre></td></tr></table></figure>\n\n<p>4.简单画下图</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 这两行代码解决 plt 中文显示的问题</span></span><br><span class=\"line\">plt.rcParams[<span class=\"string\">&#x27;font.sans-serif&#x27;</span>] = [<span class=\"string\">&#x27;SimHei&#x27;</span>]</span><br><span class=\"line\">plt.rcParams[<span class=\"string\">&#x27;axes.unicode_minus&#x27;</span>] = <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">drawgame1</span>(<span class=\"params\">divide,figx,figy</span>):</span><br><span class=\"line\">    cols = [<span class=\"string\">&quot;特别的0&quot;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">50</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的50&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">50</span>//divide,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的100&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    dictgame1 = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        dictgame1[i] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">0</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的0&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">50</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的50&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">100</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的100&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">            s = <span class=\"built_in\">str</span>(j*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(j*divide+divide)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ans[i].game1 &gt; j *divide <span class=\"keyword\">and</span> ans[i].game1 &lt;= j*divide+divide:</span><br><span class=\"line\">                dictgame1[s] += <span class=\"number\">1</span></span><br><span class=\"line\">    colsans = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        colsans.append(dictgame1[i])</span><br><span class=\"line\">    plt.figure(figsize=(figx,figy))</span><br><span class=\"line\">    plt.bar(cols,colsans)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Game1 统计结果 间隔&#x27;</span>+<span class=\"built_in\">str</span>(divide))</span><br><span class=\"line\">    plt.savefig(<span class=\"string\">&quot;Game1ResultDividedInto&quot;</span>+<span class=\"built_in\">str</span>(<span class=\"number\">100</span>//divide)+<span class=\"string\">&quot;parts.jpg&quot;</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">drawgame2</span>(<span class=\"params\">divide,figx,figy</span>):</span><br><span class=\"line\">    cols = [<span class=\"string\">&quot;特别的0&quot;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">66</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的67&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">66</span>//divide,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的100&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    dictgame2 = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        dictgame2[i] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">0</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的0&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">67</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的67&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">100</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的100&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">            s = <span class=\"built_in\">str</span>(j*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(j*divide+divide)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ans[i].game2 &gt; j *divide <span class=\"keyword\">and</span> ans[i].game2 &lt;= j*divide+divide:</span><br><span class=\"line\">                dictgame2[s] += <span class=\"number\">1</span></span><br><span class=\"line\">    colsans = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        colsans.append(dictgame2[i])</span><br><span class=\"line\">    plt.figure(figsize=(figx,figy))</span><br><span class=\"line\">    plt.bar(cols,colsans)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Game2 统计结果 间隔&#x27;</span>+<span class=\"built_in\">str</span>(divide))</span><br><span class=\"line\">    plt.savefig(<span class=\"string\">&quot;Game2ResultDividedInto&quot;</span>+<span class=\"built_in\">str</span>(<span class=\"number\">100</span>//divide)+<span class=\"string\">&quot;parts.jpg&quot;</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"><span class=\"comment\"># %%</span></span><br><span class=\"line\">drawgame1(<span class=\"number\">1</span>,<span class=\"number\">50</span>,<span class=\"number\">20</span>)</span><br><span class=\"line\">drawgame2(<span class=\"number\">1</span>,<span class=\"number\">40</span>,<span class=\"number\">20</span>)</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"博弈论小游戏的结果\"><a href=\"#博弈论小游戏的结果\" class=\"headerlink\" title=\"博弈论小游戏的结果\"></a>博弈论小游戏的结果</h1><p>[toc]</p>\n<p>其实这两个游戏都是经典猜均值2/3游戏的小小变型。这里就给出简单结果了，先不分析了，以及：</p>\n<center><font color=cayon size=\"+3\"><a href=\"https://www.wjx.top/vj/emyupFd.aspx\">第二轮链接！！！</a></font></center>\n\n<h2 id=\"无激励结果\"><a href=\"#无激励结果\" class=\"headerlink\" title=\"无激励结果\"></a>无激励结果</h2><p>首先我先提供一下一份此前无激励的数据，<a href=\"https://lcydesktop.oss-cn-beijing.aliyuncs.com/tmp/%E6%97%A0%E6%BF%80%E5%8A%B1%E7%9A%84%E7%BB%93%E6%9E%9C.xlsx?versionId=CAEQHxiBgIDUj7eN_xciIDlkOTkyOTZkNjQ1NjRkNzFhNWY1ZmY0MTA0NjlhNDZk\">单击下载</a></p>\n<p>这份数据中总共只收集到了51个结果，两个游戏的winner如下</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122516435.png\" alt=\"image-20220401122516435\"></p>\n<p>数据量较小，按间隔5提供一下数据分布：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122739516.png\" alt=\"image-20220401122739516\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220401122654118.png\" alt=\"image-20220401122654118\"></p>\n<h2 id=\"本次问卷实测\"><a href=\"#本次问卷实测\" class=\"headerlink\" title=\"本次问卷实测\"></a>本次问卷实测</h2><p>首先恭喜一下@1668131450@1584129782两个同学成功的获得了红包，相同值取的是最早填报的同学。</p>\n<p>这次问卷总共收到了818条数据，其中有两条（事实肯定远远不止）备注了不要删去了。</p>\n<h3 id=\"游戏1——最接近平均数\"><a href=\"#游戏1——最接近平均数\" class=\"headerlink\" title=\"游戏1——最接近平均数\"></a>游戏1——最接近平均数</h3><p>所有数字的平均数是44.76135975757379</p>\n<p>很奇妙的事情是当问卷数量在700之前时（没记错的话）这个数字似乎一直在44.5左右波动，有位填44.444444444444······的一度坐稳了Game 1的Winner，然后后面的问卷来了之后这个数字不断被提升。</p>\n<p>最早是1668131450在2022/3/31 11:40:16 第65个填问卷的填了45，成为了Winner。</p>\n<p>在此我只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。</p>\n<center>10等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto10parts.jpg\" alt=\"Game1ResultDividedInto10parts\"></p>\n<center>20等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto20parts.jpg\" alt=\"Game1ResultDividedInto20parts\"></p>\n<center>50等分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto50parts.jpg\" alt=\"Game1ResultDividedInto50parts\"></p>\n<center>一个个分，0，50，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game1ResultDividedInto100parts.jpg\" alt=\"Game1ResultDividedInto100parts\"></p>\n<h3 id=\"游戏2——最接近所有数从小到大排序的2-3的数\"><a href=\"#游戏2——最接近所有数从小到大排序的2-3的数\" class=\"headerlink\" title=\"游戏2——最接近所有数从小到大排序的2/3的数\"></a>游戏2——最接近所有数从小到大排序的2/3的数</h3><p>首先结果是70</p>\n<p>这里很奇妙的事情是当问卷数量在300左右时（没记错的话）这个数字直到结束都是70，是因为填70的太多了吧，导致最后虽然一会往前偏一点一会往后偏一点但仍然是70。哦这里我平时pandas用的少并不知道69.9999999······被处理成70怎么办所以附件的python程序有点bug要注意一下。</p>\n<p>最早是1584129782在2022/3/31 11:04:40 第11个填问卷的填70，成为了Winner。</p>\n<p>在此我同样只简单处理一下数据并给出一些分布的图片以供参考，相关代码也放在文末供有兴趣的人自行运行测试。</p>\n<center>10等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto10parts.jpg\" alt=\"Game2ResultDividedInto10parts\"></p>\n<center>20等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto20parts.jpg\" alt=\"Game2ResultDividedInto20parts\"></p>\n<center>50等分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto50parts.jpg\" alt=\"Game2ResultDividedInto50parts\"></p>\n<center>一个个分，0，67，100单列</center>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/Game2ResultDividedInto100parts.jpg\" alt=\"Game2ResultDividedInto100parts\"></p>\n<h2 id=\"附件：Code\"><a href=\"#附件：Code\" class=\"headerlink\" title=\"附件：Code\"></a>附件：Code</h2><p>1.库导入&amp;文件读取</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> posixpath <span class=\"keyword\">import</span> split</span><br><span class=\"line\"><span class=\"keyword\">from</span> decimal <span class=\"keyword\">import</span> Decimal</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\">df = pd.read_excel(<span class=\"string\">&quot;dataFinal.xlsx&quot;</span>)</span><br><span class=\"line\">pd.set_option(<span class=\"string\">&#x27;precision&#x27;</span>, <span class=\"number\">30</span>)</span><br></pre></td></tr></table></figure>\n\n<p>2.class 定义</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">game</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self,game1,game2,qq,time,no,thinkTime</span>) -&gt; <span class=\"literal\">None</span>:</span><br><span class=\"line\">        self.game1 = game1</span><br><span class=\"line\">        self.game2 = game2</span><br><span class=\"line\">        self.qq = qq</span><br><span class=\"line\">        self.time = <span class=\"built_in\">str</span>(time)</span><br><span class=\"line\">        self.no =  no</span><br><span class=\"line\">        self.thinkTime = thinkTime</span><br><span class=\"line\"></span><br><span class=\"line\">ans =[game(df.iloc[i,<span class=\"number\">6</span>],df.iloc[i,<span class=\"number\">7</span>],df.iloc[i,<span class=\"number\">8</span>],df.iloc[i,<span class=\"number\">1</span>],df.iloc[i,<span class=\"number\">0</span>],<span class=\"built_in\">int</span>(df.iloc[i,<span class=\"number\">2</span>].strip(<span class=\"string\">&quot;秒&quot;</span>))) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(df))]</span><br></pre></td></tr></table></figure>\n\n<p>3.结果获取</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">game1ans = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">    game1ans += ans[i].game1/<span class=\"built_in\">len</span>(ans)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;参与人数&quot;</span>,<span class=\"built_in\">len</span>(ans),<span class=\"string\">&quot;Game 1 average number: &quot;</span>,game1ans)</span><br><span class=\"line\">maxk = <span class=\"number\">99.999</span></span><br><span class=\"line\">ansk = -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">    <span class=\"comment\"># Find the only winner of game1, the minist distance</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">abs</span>(ans[i].game1 - game1ans) &lt; maxk:</span><br><span class=\"line\">        ansk , maxk = i , <span class=\"built_in\">abs</span>(ans[i].game1 - game1ans)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Smallest distance:&quot;</span>,<span class=\"built_in\">abs</span>(ans[ansk].game1-game1ans))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game1 win number:&quot;</span>,ans[ansk].game1,<span class=\"string\">&quot; WinnerQQ:&quot;</span>,ans[ansk].qq,<span class=\"string\">&quot;填报时间:&quot;</span>,ans[ansk].time,<span class=\"string\">&quot;填报顺序:&quot;</span>,ans[ansk].no)</span><br><span class=\"line\"><span class=\"comment\"># Sort</span></span><br><span class=\"line\">sorted_ans = <span class=\"built_in\">sorted</span>(ans, key=<span class=\"keyword\">lambda</span> x: (x.game2,x.no))</span><br><span class=\"line\"><span class=\"comment\"># Start from zero so minus 1 then find the first one</span></span><br><span class=\"line\"><span class=\"comment\"># <span class=\"doctag\">TODO:</span> There is a pricision bug here, so don&#x27;t just trust the python result. so who gives me the number 69.999999999999999999999999999999999999999999999999999999999999999999999???????</span></span><br><span class=\"line\">ansl = <span class=\"built_in\">int</span>(<span class=\"built_in\">len</span>(ans)*<span class=\"number\">2</span>/<span class=\"number\">3</span>)-<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(sorted_ans)):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> sorted_ans[i].game2 == sorted_ans[ansl].game2 <span class=\"keyword\">and</span> sorted_ans[i].no &lt; sorted_ans[ansl].no:</span><br><span class=\"line\">        ansl = i</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game2 winner position:&quot;</span>,ansl,end = <span class=\"string\">&quot; &quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;Game2 win number:&quot;</span>,sorted_ans[ansl].game2,<span class=\"string\">&quot; WinnerQQ:&quot;</span>,sorted_ans[ansl].qq,<span class=\"string\">&quot;填报时间:&quot;</span>,sorted_ans[ansl].time,<span class=\"string\">&quot;填报顺序:&quot;</span>,sorted_ans[ansl].no)</span><br></pre></td></tr></table></figure>\n\n<p>4.简单画下图</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 这两行代码解决 plt 中文显示的问题</span></span><br><span class=\"line\">plt.rcParams[<span class=\"string\">&#x27;font.sans-serif&#x27;</span>] = [<span class=\"string\">&#x27;SimHei&#x27;</span>]</span><br><span class=\"line\">plt.rcParams[<span class=\"string\">&#x27;axes.unicode_minus&#x27;</span>] = <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">drawgame1</span>(<span class=\"params\">divide,figx,figy</span>):</span><br><span class=\"line\">    cols = [<span class=\"string\">&quot;特别的0&quot;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">50</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的50&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">50</span>//divide,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的100&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    dictgame1 = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        dictgame1[i] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">0</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的0&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">50</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的50&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game1 == <span class=\"number\">100</span>):</span><br><span class=\"line\">            dictgame1[<span class=\"string\">&quot;特别的100&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">            s = <span class=\"built_in\">str</span>(j*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(j*divide+divide)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ans[i].game1 &gt; j *divide <span class=\"keyword\">and</span> ans[i].game1 &lt;= j*divide+divide:</span><br><span class=\"line\">                dictgame1[s] += <span class=\"number\">1</span></span><br><span class=\"line\">    colsans = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        colsans.append(dictgame1[i])</span><br><span class=\"line\">    plt.figure(figsize=(figx,figy))</span><br><span class=\"line\">    plt.bar(cols,colsans)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Game1 统计结果 间隔&#x27;</span>+<span class=\"built_in\">str</span>(divide))</span><br><span class=\"line\">    plt.savefig(<span class=\"string\">&quot;Game1ResultDividedInto&quot;</span>+<span class=\"built_in\">str</span>(<span class=\"number\">100</span>//divide)+<span class=\"string\">&quot;parts.jpg&quot;</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">drawgame2</span>(<span class=\"params\">divide,figx,figy</span>):</span><br><span class=\"line\">    cols = [<span class=\"string\">&quot;特别的0&quot;</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">66</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的67&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">66</span>//divide,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">        cols.append((<span class=\"built_in\">str</span>(i*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(i*divide+divide)))</span><br><span class=\"line\">    cols.append(<span class=\"string\">&quot;特别的100&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    dictgame2 = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        dictgame2[i] = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ans)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">0</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的0&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">67</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的67&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans[i].game2 == <span class=\"number\">100</span>):</span><br><span class=\"line\">            dictgame2[<span class=\"string\">&quot;特别的100&quot;</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">100</span>//divide):</span><br><span class=\"line\">            s = <span class=\"built_in\">str</span>(j*divide) + <span class=\"string\">&quot;~&quot;</span> + <span class=\"built_in\">str</span>(j*divide+divide)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ans[i].game2 &gt; j *divide <span class=\"keyword\">and</span> ans[i].game2 &lt;= j*divide+divide:</span><br><span class=\"line\">                dictgame2[s] += <span class=\"number\">1</span></span><br><span class=\"line\">    colsans = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cols:</span><br><span class=\"line\">        colsans.append(dictgame2[i])</span><br><span class=\"line\">    plt.figure(figsize=(figx,figy))</span><br><span class=\"line\">    plt.bar(cols,colsans)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Game2 统计结果 间隔&#x27;</span>+<span class=\"built_in\">str</span>(divide))</span><br><span class=\"line\">    plt.savefig(<span class=\"string\">&quot;Game2ResultDividedInto&quot;</span>+<span class=\"built_in\">str</span>(<span class=\"number\">100</span>//divide)+<span class=\"string\">&quot;parts.jpg&quot;</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"><span class=\"comment\"># %%</span></span><br><span class=\"line\">drawgame1(<span class=\"number\">1</span>,<span class=\"number\">50</span>,<span class=\"number\">20</span>)</span><br><span class=\"line\">drawgame2(<span class=\"number\">1</span>,<span class=\"number\">40</span>,<span class=\"number\">20</span>)</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Fisco 3.0体验","date":"2022-04-28T13:51:55.000Z","author":"Lcy","_content":"\n# Ubuntu Fisco 3.0 体验\n\nFisco 3.0 发布了，准备着本地去搭建一个Fisco3.0的链，同时试验一下2.0的go sdk是否能用，如果不能用的话短期业务就不能切到3.0去开发。\n\n## 本地搭链\n\n在对应文件夹里终端执行：\n\n```shell\n# 下载脚本\ncurl -#LO https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/FISCO-BCOS/FISCO-BCOS/releases/v3.0.0-rc3/build_chain.sh && chmod u+x build_chain.sh\n# 脚本建链\nbash build_chain.sh -l 127.0.0.1:4 -p 30300,20200\n```\n\n![image-20220428215623117](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220428215623117.png)\n\n## 使用GO SDK\n\n好了不用尝试旧的了，配置文件以及一系列的证书设置都全新了。\n\n太草，Fisco 3.0的SDK更新太慢了。\n","source":"_posts/Fisco-3-0体验.md","raw":"---\ntitle: Fisco 3.0体验\ndate: 2022-04-28 21:51:55\ntags: Study\ncategories: FISCO\nauthor: Lcy\n---\n\n# Ubuntu Fisco 3.0 体验\n\nFisco 3.0 发布了，准备着本地去搭建一个Fisco3.0的链，同时试验一下2.0的go sdk是否能用，如果不能用的话短期业务就不能切到3.0去开发。\n\n## 本地搭链\n\n在对应文件夹里终端执行：\n\n```shell\n# 下载脚本\ncurl -#LO https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/FISCO-BCOS/FISCO-BCOS/releases/v3.0.0-rc3/build_chain.sh && chmod u+x build_chain.sh\n# 脚本建链\nbash build_chain.sh -l 127.0.0.1:4 -p 30300,20200\n```\n\n![image-20220428215623117](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220428215623117.png)\n\n## 使用GO SDK\n\n好了不用尝试旧的了，配置文件以及一系列的证书设置都全新了。\n\n太草，Fisco 3.0的SDK更新太慢了。\n","slug":"Fisco-3-0体验","published":1,"updated":"2022-07-02T15:49:59.938Z","_id":"cl3iqqerh000al0em1pa30sr3","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Ubuntu-Fisco-3-0-体验\"><a href=\"#Ubuntu-Fisco-3-0-体验\" class=\"headerlink\" title=\"Ubuntu Fisco 3.0 体验\"></a>Ubuntu Fisco 3.0 体验</h1><p>Fisco 3.0 发布了，准备着本地去搭建一个Fisco3.0的链，同时试验一下2.0的go sdk是否能用，如果不能用的话短期业务就不能切到3.0去开发。</p>\n<h2 id=\"本地搭链\"><a href=\"#本地搭链\" class=\"headerlink\" title=\"本地搭链\"></a>本地搭链</h2><div class=\"story post-story\"><p>在对应文件夹里终端执行：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载脚本</span></span><br><span class=\"line\">curl -#LO https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/FISCO-BCOS/FISCO-BCOS/releases/v3.0.0-rc3/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">脚本建链</span></span><br><span class=\"line\">bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220428215623117.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220428215623117.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220428215623117\"></p>\n</div><h2 id=\"使用GO-SDK\"><a href=\"#使用GO-SDK\" class=\"headerlink\" title=\"使用GO SDK\"></a>使用GO SDK</h2><div class=\"story post-story\"><p>好了不用尝试旧的了，配置文件以及一系列的证书设置都全新了。</p>\n<p>太草，Fisco 3.0的SDK更新太慢了。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Ubuntu-Fisco-3-0-体验\"><a href=\"#Ubuntu-Fisco-3-0-体验\" class=\"headerlink\" title=\"Ubuntu Fisco 3.0 体验\"></a>Ubuntu Fisco 3.0 体验</h1><p>Fisco 3.0 发布了，准备着本地去搭建一个Fisco3.0的链，同时试验一下2.0的go sdk是否能用，如果不能用的话短期业务就不能切到3.0去开发。</p>\n<h2 id=\"本地搭链\"><a href=\"#本地搭链\" class=\"headerlink\" title=\"本地搭链\"></a>本地搭链</h2><p>在对应文件夹里终端执行：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载脚本</span></span><br><span class=\"line\">curl -#LO https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/FISCO-BCOS/FISCO-BCOS/releases/v3.0.0-rc3/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">脚本建链</span></span><br><span class=\"line\">bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220428215623117.png\" alt=\"image-20220428215623117\"></p>\n<h2 id=\"使用GO-SDK\"><a href=\"#使用GO-SDK\" class=\"headerlink\" title=\"使用GO SDK\"></a>使用GO SDK</h2><p>好了不用尝试旧的了，配置文件以及一系列的证书设置都全新了。</p>\n<p>太草，Fisco 3.0的SDK更新太慢了。</p>\n"},{"title":"Git 使用系统代理","date":"2022-04-05T10:13:42.000Z","_content":"\n# Git 使用系统代理\n\n```shell\ngit config --global http.proxy 'http://127.0.0.1:1080'\ngit config --global https.proxy 'https://127.0.0.1:1080'\n```\n\n其中端口号为代理软件中配置的端口，如：\n\n![image-20220405181526848](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220405181526848.png)\n","source":"_posts/Git-使用系统代理.md","raw":"---\ntitle: Git 使用系统代理\ndate: 2022-04-05 18:13:42\ntags: Tips\n---\n\n# Git 使用系统代理\n\n```shell\ngit config --global http.proxy 'http://127.0.0.1:1080'\ngit config --global https.proxy 'https://127.0.0.1:1080'\n```\n\n其中端口号为代理软件中配置的端口，如：\n\n![image-20220405181526848](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220405181526848.png)\n","slug":"Git-使用系统代理","published":1,"updated":"2022-07-02T15:49:59.939Z","_id":"cl3iqqeri000dl0em7ipj7j0x","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Git-使用系统代理\"><a href=\"#Git-使用系统代理\" class=\"headerlink\" title=\"Git 使用系统代理\"></a>Git 使用系统代理</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy &#x27;http://127.0.0.1:1080&#x27;</span><br><span class=\"line\">git config --global https.proxy &#x27;https://127.0.0.1:1080&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>其中端口号为代理软件中配置的端口，如：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220405181526848.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220405181526848.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220405181526848\"></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Git-使用系统代理\"><a href=\"#Git-使用系统代理\" class=\"headerlink\" title=\"Git 使用系统代理\"></a>Git 使用系统代理</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy &#x27;http://127.0.0.1:1080&#x27;</span><br><span class=\"line\">git config --global https.proxy &#x27;https://127.0.0.1:1080&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>其中端口号为代理软件中配置的端口，如：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220405181526848.png\" alt=\"image-20220405181526848\"></p>\n"},{"title":"博弈论小游戏结果2","date":"2022-04-08T05:31:01.000Z","author":"Lcy","_content":"\n\n\n在猜均值2/3的游戏中我们最终获得了366个数字，他们平均值的2/3结果是：19.149962487030315\n\n对应的游戏获胜者：\n\n- 填报数字：18.9\n- 距离平均数：0.24996248703031654\n- QQ：215965814\n- 填报时间：2022/4/8 11:56:24\n- 填报顺序：121 也就是倒数第二个\n\n事实上倒数第三个人填的19更加接近平均数但是由于他没有填写联系方式那么只能让次接近平均数的人来享受获奖的奖金了hhh。\n\n简单给一下数据的分布吧：\n\n![image-20220408133632290](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220408133632290.png)\n","source":"_posts/GametheoryResult2.md","raw":"---\ntitle: 博弈论小游戏结果2\ndate: 2022-04-08 13:31:01\ntags: Interests\ncategories: Others\nauthor: Lcy\n\n\n---\n\n\n\n在猜均值2/3的游戏中我们最终获得了366个数字，他们平均值的2/3结果是：19.149962487030315\n\n对应的游戏获胜者：\n\n- 填报数字：18.9\n- 距离平均数：0.24996248703031654\n- QQ：215965814\n- 填报时间：2022/4/8 11:56:24\n- 填报顺序：121 也就是倒数第二个\n\n事实上倒数第三个人填的19更加接近平均数但是由于他没有填写联系方式那么只能让次接近平均数的人来享受获奖的奖金了hhh。\n\n简单给一下数据的分布吧：\n\n![image-20220408133632290](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220408133632290.png)\n","slug":"GametheoryResult2","published":1,"updated":"2022-07-02T15:49:59.939Z","_id":"cl3iqqerj000fl0em1bhzgdwp","comments":1,"layout":"post","photos":[],"link":"","content":"<p>在猜均值2/3的游戏中我们最终获得了366个数字，他们平均值的2/3结果是：19.149962487030315</p>\n<p>对应的游戏获胜者：</p>\n<ul>\n<li>填报数字：18.9</li>\n<li>距离平均数：0.24996248703031654</li>\n<li>QQ：215965814</li>\n<li>填报时间：2022/4/8 11:56:24</li>\n<li>填报顺序：121 也就是倒数第二个</li>\n</ul>\n<p>事实上倒数第三个人填的19更加接近平均数但是由于他没有填写联系方式那么只能让次接近平均数的人来享受获奖的奖金了hhh。</p>\n<p>简单给一下数据的分布吧：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220408133632290.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220408133632290.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220408133632290\"></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>在猜均值2/3的游戏中我们最终获得了366个数字，他们平均值的2/3结果是：19.149962487030315</p>\n<p>对应的游戏获胜者：</p>\n<ul>\n<li>填报数字：18.9</li>\n<li>距离平均数：0.24996248703031654</li>\n<li>QQ：215965814</li>\n<li>填报时间：2022/4/8 11:56:24</li>\n<li>填报顺序：121 也就是倒数第二个</li>\n</ul>\n<p>事实上倒数第三个人填的19更加接近平均数但是由于他没有填写联系方式那么只能让次接近平均数的人来享受获奖的奖金了hhh。</p>\n<p>简单给一下数据的分布吧：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220408133632290.png\" alt=\"image-20220408133632290\"></p>\n"},{"title":"Lcy の 4月","date":"2022-04-30T17:45:12.000Z","author":"Lcy","_content":"\n​\t四月，过的很快，这狗屁的疫情折腾的封校让人不知所措。其实大四反倒是最没有emo的一个学期，唯一emo的地方怕就是身边人拿的高薪offer罢。一个比一个离谱，尤其是7位数的那位属于是让人望而却步。\n\n​\t大四不emo的主要原因想必就是想要减肥的念想，倒也不是念想，而是找点事做，不然封校期太过于空虚\n\n![image-20220501015212326](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015212326.png)\n\n​\t这大概就是开学以来的体重变化吧，最后一段的上升倒是情有可原，这之前吧每天吃的不多，这些日子就多吃了点，毕竟想要以后在正常饮食的情况下维持体重就不得不这样了。\n\n​\t这个四月，跑了接近110km。\n\n![image-20220501015513834](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015513834.png)\n\n![image-20220501015530404](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015530404.png)\n\n​\t每天跑步的时候倒也挺快乐，没感觉很累。\n\n​\t四月的其他时间，基本上就贡献给了毕设、开发以及和学长们唠嗑。毕设完成了初稿，刚提交了查重，5.58的重复率宣告我不需要再去为了修改而修改一些无关紧要的东西。挺好。\n\n​\t欸，五月做什么呢？改改论文吧，然后学点东西。\n","source":"_posts/Lcy-の-4月.md","raw":"---\ntitle: Lcy の 4月\ndate: 2022-05-01 01:45:12\ntags: Lcy\ncategories: Lcy\nauthor: Lcy\n---\n\n​\t四月，过的很快，这狗屁的疫情折腾的封校让人不知所措。其实大四反倒是最没有emo的一个学期，唯一emo的地方怕就是身边人拿的高薪offer罢。一个比一个离谱，尤其是7位数的那位属于是让人望而却步。\n\n​\t大四不emo的主要原因想必就是想要减肥的念想，倒也不是念想，而是找点事做，不然封校期太过于空虚\n\n![image-20220501015212326](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015212326.png)\n\n​\t这大概就是开学以来的体重变化吧，最后一段的上升倒是情有可原，这之前吧每天吃的不多，这些日子就多吃了点，毕竟想要以后在正常饮食的情况下维持体重就不得不这样了。\n\n​\t这个四月，跑了接近110km。\n\n![image-20220501015513834](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015513834.png)\n\n![image-20220501015530404](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015530404.png)\n\n​\t每天跑步的时候倒也挺快乐，没感觉很累。\n\n​\t四月的其他时间，基本上就贡献给了毕设、开发以及和学长们唠嗑。毕设完成了初稿，刚提交了查重，5.58的重复率宣告我不需要再去为了修改而修改一些无关紧要的东西。挺好。\n\n​\t欸，五月做什么呢？改改论文吧，然后学点东西。\n","slug":"Lcy-の-4月","published":1,"updated":"2022-07-02T15:49:59.939Z","_id":"cl3iqqerk000gl0em6bnddh7j","comments":1,"layout":"post","photos":[],"link":"","content":"<p>​    四月，过的很快，这狗屁的疫情折腾的封校让人不知所措。其实大四反倒是最没有emo的一个学期，唯一emo的地方怕就是身边人拿的高薪offer罢。一个比一个离谱，尤其是7位数的那位属于是让人望而却步。</p>\n<p>​    大四不emo的主要原因想必就是想要减肥的念想，倒也不是念想，而是找点事做，不然封校期太过于空虚</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015212326.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015212326.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220501015212326\"></p>\n<p>​    这大概就是开学以来的体重变化吧，最后一段的上升倒是情有可原，这之前吧每天吃的不多，这些日子就多吃了点，毕竟想要以后在正常饮食的情况下维持体重就不得不这样了。</p>\n<p>​    这个四月，跑了接近110km。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015513834.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015513834.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220501015513834\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015530404.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015530404.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220501015530404\"></p>\n<p>​    每天跑步的时候倒也挺快乐，没感觉很累。</p>\n<p>​    四月的其他时间，基本上就贡献给了毕设、开发以及和学长们唠嗑。毕设完成了初稿，刚提交了查重，5.58的重复率宣告我不需要再去为了修改而修改一些无关紧要的东西。挺好。</p>\n<p>​    欸，五月做什么呢？改改论文吧，然后学点东西。</p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>​    四月，过的很快，这狗屁的疫情折腾的封校让人不知所措。其实大四反倒是最没有emo的一个学期，唯一emo的地方怕就是身边人拿的高薪offer罢。一个比一个离谱，尤其是7位数的那位属于是让人望而却步。</p>\n<p>​    大四不emo的主要原因想必就是想要减肥的念想，倒也不是念想，而是找点事做，不然封校期太过于空虚</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015212326.png\" alt=\"image-20220501015212326\"></p>\n<p>​    这大概就是开学以来的体重变化吧，最后一段的上升倒是情有可原，这之前吧每天吃的不多，这些日子就多吃了点，毕竟想要以后在正常饮食的情况下维持体重就不得不这样了。</p>\n<p>​    这个四月，跑了接近110km。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015513834.png\" alt=\"image-20220501015513834\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220501015530404.png\" alt=\"image-20220501015530404\"></p>\n<p>​    每天跑步的时候倒也挺快乐，没感觉很累。</p>\n<p>​    四月的其他时间，基本上就贡献给了毕设、开发以及和学长们唠嗑。毕设完成了初稿，刚提交了查重，5.58的重复率宣告我不需要再去为了修改而修改一些无关紧要的东西。挺好。</p>\n<p>​    欸，五月做什么呢？改改论文吧，然后学点东西。</p>\n"},{"title":"Leetcode-Hard-668","date":"2022-05-18T00:33:13.000Z","author":"Lcy","plugins":["mathjax","katex"],"_content":"\n\n# [668. 乘法表中第k小的数](https://leetcode.cn/problems/kth-smallest-number-in-multiplication-table/)\n\n几乎每一个人都用 [乘法表](https://baike.baidu.com/item/乘法表)。但是你能在乘法表中快速找到第`k`小的数字吗？\n\n给定高度`m` 、宽度`n` 的一张 `m * n`的乘法表，以及正整数`k`，你需要返回表中第`k` 小的数字。\n\n**例 1：**\n\n```\n输入: m = 3, n = 3, k = 5\n输出: 3\n解释: \n乘法表:\n1\t2\t3\n2\t4\t6\n3\t6\t9\n\n第5小的数字是 3 (1, 2, 2, 3, 3).\n```\n\n**例 2：**\n\n```\n输入: m = 2, n = 3, k = 6\n输出: 6\n解释: \n乘法表:\n1\t2\t3\n2\t4\t6\n\n第6小的数字是 6 (1, 2, 2, 3, 4, 6).\n```\n\n**注意：**\n\n1. `m` 和 `n` 的范围在 [1, 30000] 之间。\n2. `k` 的范围在 [1, m * n] 之间。\n\n## 分析\n\n首先看数据范围，数据范围m，n均在1，30000之间，这意味着肯定不能强行计算之后排序获得结果。\n\n对于$max(m,n)<=30000$的情况，先预计一下时间复杂度应该是$O(nlogn)$级别。\n\n在这种情况下既然不能算出所有结果常见应该就这几种方法：\n\n1. 我有一个方法能够快速跳过不可能的值\n2. 我可以通过分解来完成，比如二分/递归掉原问题\n3. 动态规划\n\nObviously第一种很难实现，但是考虑二分的时候可以想到，如果我直接去二分结果，结果也就是在$1\\sim m*n$之间这样的话二分结果的复杂度是$O(log(m*n))$此后我们对于每一个结果的验证应当是简单的，我只要循环遍历m/n中间最大的那个值就可以了。中间需要处理一下细节的问题，因此复杂度应该是：\n$$\nO(nlog n^2)\n$$\n大概就是这个样子。\n\n## 实现\n\nFine，从时间复杂度角度分析可以通过那就可以。直接实现去就行了，注意处理一系列的细节问题。\n\n```python\nclass Solution:\n    def findKthNumber(self, m: int, n: int, k: int) -> int:\n        if m < n:\n            m , n = n , m # make m the bigger one\n        l = 1 # Define the left bound\n        r = m*n # Define the right bound\n\n        def check(num,m,n):\n            tot = 0 # count the smaller numbers.\n            for i in range(1,m+1):\n                tmp = num // i\n                if tmp > n:\n                    tmp = n\n                tot += tmp\n            return tot\n        \n        while l < r: # Attention: Take care of l = r - 1 \n            mid = (l + r) // 2 # Get mid \n            if check(mid,m,n) < k: # the numer smaller than mid is less than k\n                l = mid\n            elif check(mid,m,n) > k: # the number bigger than mid is more than k\n                r = mid\n            else: # yes mid is the kth one.           \n                maxans = 1 # get the max num -> the answer\n                for i in range(1,m+1):\n                    tmp = mid // i\n                    if tmp > n:\n                        tmp = n\n                    if maxans < tmp * i:\n                        maxans = tmp * i\n                return maxans\n            if l == r - 1: # if don't handle this you may can't get a Accept but TimeLimitException\n                return r\n```\n\n![image-20220518091027524](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220518091027524.png)\n","source":"_posts/Leetcode-Hard-668.md","raw":"---\ntitle: Leetcode-Hard-668\ndate: 2022-05-18 08:33:13\ntags: leetcode\ncategories: leetcode\nauthor: Lcy\nplugins: \n- mathjax\n- katex\n---\n\n\n# [668. 乘法表中第k小的数](https://leetcode.cn/problems/kth-smallest-number-in-multiplication-table/)\n\n几乎每一个人都用 [乘法表](https://baike.baidu.com/item/乘法表)。但是你能在乘法表中快速找到第`k`小的数字吗？\n\n给定高度`m` 、宽度`n` 的一张 `m * n`的乘法表，以及正整数`k`，你需要返回表中第`k` 小的数字。\n\n**例 1：**\n\n```\n输入: m = 3, n = 3, k = 5\n输出: 3\n解释: \n乘法表:\n1\t2\t3\n2\t4\t6\n3\t6\t9\n\n第5小的数字是 3 (1, 2, 2, 3, 3).\n```\n\n**例 2：**\n\n```\n输入: m = 2, n = 3, k = 6\n输出: 6\n解释: \n乘法表:\n1\t2\t3\n2\t4\t6\n\n第6小的数字是 6 (1, 2, 2, 3, 4, 6).\n```\n\n**注意：**\n\n1. `m` 和 `n` 的范围在 [1, 30000] 之间。\n2. `k` 的范围在 [1, m * n] 之间。\n\n## 分析\n\n首先看数据范围，数据范围m，n均在1，30000之间，这意味着肯定不能强行计算之后排序获得结果。\n\n对于$max(m,n)<=30000$的情况，先预计一下时间复杂度应该是$O(nlogn)$级别。\n\n在这种情况下既然不能算出所有结果常见应该就这几种方法：\n\n1. 我有一个方法能够快速跳过不可能的值\n2. 我可以通过分解来完成，比如二分/递归掉原问题\n3. 动态规划\n\nObviously第一种很难实现，但是考虑二分的时候可以想到，如果我直接去二分结果，结果也就是在$1\\sim m*n$之间这样的话二分结果的复杂度是$O(log(m*n))$此后我们对于每一个结果的验证应当是简单的，我只要循环遍历m/n中间最大的那个值就可以了。中间需要处理一下细节的问题，因此复杂度应该是：\n$$\nO(nlog n^2)\n$$\n大概就是这个样子。\n\n## 实现\n\nFine，从时间复杂度角度分析可以通过那就可以。直接实现去就行了，注意处理一系列的细节问题。\n\n```python\nclass Solution:\n    def findKthNumber(self, m: int, n: int, k: int) -> int:\n        if m < n:\n            m , n = n , m # make m the bigger one\n        l = 1 # Define the left bound\n        r = m*n # Define the right bound\n\n        def check(num,m,n):\n            tot = 0 # count the smaller numbers.\n            for i in range(1,m+1):\n                tmp = num // i\n                if tmp > n:\n                    tmp = n\n                tot += tmp\n            return tot\n        \n        while l < r: # Attention: Take care of l = r - 1 \n            mid = (l + r) // 2 # Get mid \n            if check(mid,m,n) < k: # the numer smaller than mid is less than k\n                l = mid\n            elif check(mid,m,n) > k: # the number bigger than mid is more than k\n                r = mid\n            else: # yes mid is the kth one.           \n                maxans = 1 # get the max num -> the answer\n                for i in range(1,m+1):\n                    tmp = mid // i\n                    if tmp > n:\n                        tmp = n\n                    if maxans < tmp * i:\n                        maxans = tmp * i\n                return maxans\n            if l == r - 1: # if don't handle this you may can't get a Accept but TimeLimitException\n                return r\n```\n\n![image-20220518091027524](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220518091027524.png)\n","slug":"Leetcode-Hard-668","published":1,"updated":"2022-07-02T15:49:59.940Z","_id":"cl3iqqerl000kl0emb2am2p0i","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"668-乘法表中第k小的数\"><a href=\"#668-乘法表中第k小的数\" class=\"headerlink\" title=\"668. 乘法表中第k小的数\"></a><a href=\"https://leetcode.cn/problems/kth-smallest-number-in-multiplication-table/\">668. 乘法表中第k小的数</a></h1><p>几乎每一个人都用 <a href=\"https://baike.baidu.com/item/%E4%B9%98%E6%B3%95%E8%A1%A8\">乘法表</a>。但是你能在乘法表中快速找到第<code>k</code>小的数字吗？</p>\n<p>给定高度<code>m</code> 、宽度<code>n</code> 的一张 <code>m * n</code>的乘法表，以及正整数<code>k</code>，你需要返回表中第<code>k</code> 小的数字。</p>\n<p><strong>例 1：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: m = 3, n = 3, k = 5</span><br><span class=\"line\">输出: 3</span><br><span class=\"line\">解释: </span><br><span class=\"line\">乘法表:</span><br><span class=\"line\">1\t2\t3</span><br><span class=\"line\">2\t4\t6</span><br><span class=\"line\">3\t6\t9</span><br><span class=\"line\"></span><br><span class=\"line\">第5小的数字是 3 (1, 2, 2, 3, 3).</span><br></pre></td></tr></table></figure>\n\n<p><strong>例 2：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: m = 2, n = 3, k = 6</span><br><span class=\"line\">输出: 6</span><br><span class=\"line\">解释: </span><br><span class=\"line\">乘法表:</span><br><span class=\"line\">1\t2\t3</span><br><span class=\"line\">2\t4\t6</span><br><span class=\"line\"></span><br><span class=\"line\">第6小的数字是 6 (1, 2, 2, 3, 4, 6).</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意：</strong></p>\n<ol>\n<li><code>m</code> 和 <code>n</code> 的范围在 [1, 30000] 之间。</li>\n<li><code>k</code> 的范围在 [1, m * n] 之间。</li>\n</ol>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><div class=\"story post-story\"><p>首先看数据范围，数据范围m，n均在1，30000之间，这意味着肯定不能强行计算之后排序获得结果。</p>\n<p>对于$max(m,n)&lt;=30000$的情况，先预计一下时间复杂度应该是$O(nlogn)$级别。</p>\n<p>在这种情况下既然不能算出所有结果常见应该就这几种方法：</p>\n<ol>\n<li>我有一个方法能够快速跳过不可能的值</li>\n<li>我可以通过分解来完成，比如二分/递归掉原问题</li>\n<li>动态规划</li>\n</ol>\n<p>Obviously第一种很难实现，但是考虑二分的时候可以想到，如果我直接去二分结果，结果也就是在$1\\sim m<em>n$之间这样的话二分结果的复杂度是$O(log(m</em>n))$此后我们对于每一个结果的验证应当是简单的，我只要循环遍历m/n中间最大的那个值就可以了。中间需要处理一下细节的问题，因此复杂度应该是：<br>$$<br>O(nlog n^2)<br>$$<br>大概就是这个样子。</p>\n</div><h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><div class=\"story post-story\"><p>Fine，从时间复杂度角度分析可以通过那就可以。直接实现去就行了，注意处理一系列的细节问题。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">findKthNumber</span>(<span class=\"params\">self, m: <span class=\"built_in\">int</span>, n: <span class=\"built_in\">int</span>, k: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m &lt; n:</span><br><span class=\"line\">            m , n = n , m <span class=\"comment\"># make m the bigger one</span></span><br><span class=\"line\">        l = <span class=\"number\">1</span> <span class=\"comment\"># Define the left bound</span></span><br><span class=\"line\">        r = m*n <span class=\"comment\"># Define the right bound</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">check</span>(<span class=\"params\">num,m,n</span>):</span><br><span class=\"line\">            tot = <span class=\"number\">0</span> <span class=\"comment\"># count the smaller numbers.</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,m+<span class=\"number\">1</span>):</span><br><span class=\"line\">                tmp = num // i</span><br><span class=\"line\">                <span class=\"keyword\">if</span> tmp &gt; n:</span><br><span class=\"line\">                    tmp = n</span><br><span class=\"line\">                tot += tmp</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tot</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> l &lt; r: <span class=\"comment\"># Attention: Take care of l = r - 1 </span></span><br><span class=\"line\">            mid = (l + r) // <span class=\"number\">2</span> <span class=\"comment\"># Get mid </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> check(mid,m,n) &lt; k: <span class=\"comment\"># the numer smaller than mid is less than k</span></span><br><span class=\"line\">                l = mid</span><br><span class=\"line\">            <span class=\"keyword\">elif</span> check(mid,m,n) &gt; k: <span class=\"comment\"># the number bigger than mid is more than k</span></span><br><span class=\"line\">                r = mid</span><br><span class=\"line\">            <span class=\"keyword\">else</span>: <span class=\"comment\"># yes mid is the kth one.           </span></span><br><span class=\"line\">                maxans = <span class=\"number\">1</span> <span class=\"comment\"># get the max num -&gt; the answer</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,m+<span class=\"number\">1</span>):</span><br><span class=\"line\">                    tmp = mid // i</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> tmp &gt; n:</span><br><span class=\"line\">                        tmp = n</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> maxans &lt; tmp * i:</span><br><span class=\"line\">                        maxans = tmp * i</span><br><span class=\"line\">                <span class=\"keyword\">return</span> maxans</span><br><span class=\"line\">            <span class=\"keyword\">if</span> l == r - <span class=\"number\">1</span>: <span class=\"comment\"># if don&#x27;t handle this you may can&#x27;t get a Accept but TimeLimitException</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220518091027524.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220518091027524.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220518091027524\"></p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"668-乘法表中第k小的数\"><a href=\"#668-乘法表中第k小的数\" class=\"headerlink\" title=\"668. 乘法表中第k小的数\"></a><a href=\"https://leetcode.cn/problems/kth-smallest-number-in-multiplication-table/\">668. 乘法表中第k小的数</a></h1><p>几乎每一个人都用 <a href=\"https://baike.baidu.com/item/%E4%B9%98%E6%B3%95%E8%A1%A8\">乘法表</a>。但是你能在乘法表中快速找到第<code>k</code>小的数字吗？</p>\n<p>给定高度<code>m</code> 、宽度<code>n</code> 的一张 <code>m * n</code>的乘法表，以及正整数<code>k</code>，你需要返回表中第<code>k</code> 小的数字。</p>\n<p><strong>例 1：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: m = 3, n = 3, k = 5</span><br><span class=\"line\">输出: 3</span><br><span class=\"line\">解释: </span><br><span class=\"line\">乘法表:</span><br><span class=\"line\">1\t2\t3</span><br><span class=\"line\">2\t4\t6</span><br><span class=\"line\">3\t6\t9</span><br><span class=\"line\"></span><br><span class=\"line\">第5小的数字是 3 (1, 2, 2, 3, 3).</span><br></pre></td></tr></table></figure>\n\n<p><strong>例 2：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: m = 2, n = 3, k = 6</span><br><span class=\"line\">输出: 6</span><br><span class=\"line\">解释: </span><br><span class=\"line\">乘法表:</span><br><span class=\"line\">1\t2\t3</span><br><span class=\"line\">2\t4\t6</span><br><span class=\"line\"></span><br><span class=\"line\">第6小的数字是 6 (1, 2, 2, 3, 4, 6).</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意：</strong></p>\n<ol>\n<li><code>m</code> 和 <code>n</code> 的范围在 [1, 30000] 之间。</li>\n<li><code>k</code> 的范围在 [1, m * n] 之间。</li>\n</ol>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>首先看数据范围，数据范围m，n均在1，30000之间，这意味着肯定不能强行计算之后排序获得结果。</p>\n<p>对于$max(m,n)&lt;=30000$的情况，先预计一下时间复杂度应该是$O(nlogn)$级别。</p>\n<p>在这种情况下既然不能算出所有结果常见应该就这几种方法：</p>\n<ol>\n<li>我有一个方法能够快速跳过不可能的值</li>\n<li>我可以通过分解来完成，比如二分/递归掉原问题</li>\n<li>动态规划</li>\n</ol>\n<p>Obviously第一种很难实现，但是考虑二分的时候可以想到，如果我直接去二分结果，结果也就是在$1\\sim m<em>n$之间这样的话二分结果的复杂度是$O(log(m</em>n))$此后我们对于每一个结果的验证应当是简单的，我只要循环遍历m/n中间最大的那个值就可以了。中间需要处理一下细节的问题，因此复杂度应该是：<br>$$<br>O(nlog n^2)<br>$$<br>大概就是这个样子。</p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><p>Fine，从时间复杂度角度分析可以通过那就可以。直接实现去就行了，注意处理一系列的细节问题。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">findKthNumber</span>(<span class=\"params\">self, m: <span class=\"built_in\">int</span>, n: <span class=\"built_in\">int</span>, k: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m &lt; n:</span><br><span class=\"line\">            m , n = n , m <span class=\"comment\"># make m the bigger one</span></span><br><span class=\"line\">        l = <span class=\"number\">1</span> <span class=\"comment\"># Define the left bound</span></span><br><span class=\"line\">        r = m*n <span class=\"comment\"># Define the right bound</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">check</span>(<span class=\"params\">num,m,n</span>):</span><br><span class=\"line\">            tot = <span class=\"number\">0</span> <span class=\"comment\"># count the smaller numbers.</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,m+<span class=\"number\">1</span>):</span><br><span class=\"line\">                tmp = num // i</span><br><span class=\"line\">                <span class=\"keyword\">if</span> tmp &gt; n:</span><br><span class=\"line\">                    tmp = n</span><br><span class=\"line\">                tot += tmp</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tot</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> l &lt; r: <span class=\"comment\"># Attention: Take care of l = r - 1 </span></span><br><span class=\"line\">            mid = (l + r) // <span class=\"number\">2</span> <span class=\"comment\"># Get mid </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> check(mid,m,n) &lt; k: <span class=\"comment\"># the numer smaller than mid is less than k</span></span><br><span class=\"line\">                l = mid</span><br><span class=\"line\">            <span class=\"keyword\">elif</span> check(mid,m,n) &gt; k: <span class=\"comment\"># the number bigger than mid is more than k</span></span><br><span class=\"line\">                r = mid</span><br><span class=\"line\">            <span class=\"keyword\">else</span>: <span class=\"comment\"># yes mid is the kth one.           </span></span><br><span class=\"line\">                maxans = <span class=\"number\">1</span> <span class=\"comment\"># get the max num -&gt; the answer</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,m+<span class=\"number\">1</span>):</span><br><span class=\"line\">                    tmp = mid // i</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> tmp &gt; n:</span><br><span class=\"line\">                        tmp = n</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> maxans &lt; tmp * i:</span><br><span class=\"line\">                        maxans = tmp * i</span><br><span class=\"line\">                <span class=\"keyword\">return</span> maxans</span><br><span class=\"line\">            <span class=\"keyword\">if</span> l == r - <span class=\"number\">1</span>: <span class=\"comment\"># if don&#x27;t handle this you may can&#x27;t get a Accept but TimeLimitException</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220518091027524.png\" alt=\"image-20220518091027524\"></p>\n"},{"title":"QQ机器人搭建（一）","date":"2022-04-04T10:18:22.000Z","author":"Lcy","_content":"\n# QA\n\n## QQrobot用来干什么好？\n\nA：显然QQ机器人被用来做一些简单的消息回复是最基础也是最无聊的工作，调用API查查天气和搜搜H图也是QQrobot的新手玩家部署在机器人上寻乐子的。而我在用了很久QQrobot后发现他更多的可以作为一个提供自动化执行操作的窗口，提供一些脚本化服务。\n\nFor Example：\n\n- 健康日报，简化日报流程，直接让机器人发POST请求，也不用每天自己手动填写重复的信息。\n- 青年大学习，青年大学习目前也是一个POST请求罢了，每周你只需要给自己的robot发个消息就完成，多是一件美事。\n- 备忘，当然大部分时候专业的软件做这个比自己做好的多，但有些特异化功能可以自己实现。\n- 球场预约\n- ……\n\n总之将QQrobot当成一个命令入口我觉得是当前QQrobot最大价值之一，而他的功能完全由自己编写。\n\n## 用什么搭建QQ robot比较好？\n\nA：个人推荐使用[NoneBot](https://v2.nonebot.dev/)+[OneBot](https://onebot.dev/)进行搭建，会更加简单也更加快速。\n\n## 需要会什么？\n\nA：只要会Python就可以。\n\n","source":"_posts/QQ机器人搭建（一）.md","raw":"---\ntitle: QQ机器人搭建（一）\ndate: 2022-04-04 18:18:22\ntags: QQrobot\ncategories: QQRobot\nauthor: Lcy\n\n---\n\n# QA\n\n## QQrobot用来干什么好？\n\nA：显然QQ机器人被用来做一些简单的消息回复是最基础也是最无聊的工作，调用API查查天气和搜搜H图也是QQrobot的新手玩家部署在机器人上寻乐子的。而我在用了很久QQrobot后发现他更多的可以作为一个提供自动化执行操作的窗口，提供一些脚本化服务。\n\nFor Example：\n\n- 健康日报，简化日报流程，直接让机器人发POST请求，也不用每天自己手动填写重复的信息。\n- 青年大学习，青年大学习目前也是一个POST请求罢了，每周你只需要给自己的robot发个消息就完成，多是一件美事。\n- 备忘，当然大部分时候专业的软件做这个比自己做好的多，但有些特异化功能可以自己实现。\n- 球场预约\n- ……\n\n总之将QQrobot当成一个命令入口我觉得是当前QQrobot最大价值之一，而他的功能完全由自己编写。\n\n## 用什么搭建QQ robot比较好？\n\nA：个人推荐使用[NoneBot](https://v2.nonebot.dev/)+[OneBot](https://onebot.dev/)进行搭建，会更加简单也更加快速。\n\n## 需要会什么？\n\nA：只要会Python就可以。\n\n","slug":"QQ机器人搭建（一）","published":1,"updated":"2022-07-02T15:49:59.941Z","_id":"cl3iqqerl000ml0eme7wi1ylx","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h1><h2 id=\"QQrobot用来干什么好？\"><a href=\"#QQrobot用来干什么好？\" class=\"headerlink\" title=\"QQrobot用来干什么好？\"></a>QQrobot用来干什么好？</h2><div class=\"story post-story\"><p>A：显然QQ机器人被用来做一些简单的消息回复是最基础也是最无聊的工作，调用API查查天气和搜搜H图也是QQrobot的新手玩家部署在机器人上寻乐子的。而我在用了很久QQrobot后发现他更多的可以作为一个提供自动化执行操作的窗口，提供一些脚本化服务。</p>\n<p>For Example：</p>\n<ul>\n<li>健康日报，简化日报流程，直接让机器人发POST请求，也不用每天自己手动填写重复的信息。</li>\n<li>青年大学习，青年大学习目前也是一个POST请求罢了，每周你只需要给自己的robot发个消息就完成，多是一件美事。</li>\n<li>备忘，当然大部分时候专业的软件做这个比自己做好的多，但有些特异化功能可以自己实现。</li>\n<li>球场预约</li>\n<li>……</li>\n</ul>\n<p>总之将QQrobot当成一个命令入口我觉得是当前QQrobot最大价值之一，而他的功能完全由自己编写。</p>\n</div><h2 id=\"用什么搭建QQ-robot比较好？\"><a href=\"#用什么搭建QQ-robot比较好？\" class=\"headerlink\" title=\"用什么搭建QQ robot比较好？\"></a>用什么搭建QQ robot比较好？</h2><div class=\"story post-story\"><p>A：个人推荐使用<a href=\"https://v2.nonebot.dev/\">NoneBot</a>+<a href=\"https://onebot.dev/\">OneBot</a>进行搭建，会更加简单也更加快速。</p>\n</div><h2 id=\"需要会什么？\"><a href=\"#需要会什么？\" class=\"headerlink\" title=\"需要会什么？\"></a>需要会什么？</h2><div class=\"story post-story\"><p>A：只要会Python就可以。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h1><h2 id=\"QQrobot用来干什么好？\"><a href=\"#QQrobot用来干什么好？\" class=\"headerlink\" title=\"QQrobot用来干什么好？\"></a>QQrobot用来干什么好？</h2><p>A：显然QQ机器人被用来做一些简单的消息回复是最基础也是最无聊的工作，调用API查查天气和搜搜H图也是QQrobot的新手玩家部署在机器人上寻乐子的。而我在用了很久QQrobot后发现他更多的可以作为一个提供自动化执行操作的窗口，提供一些脚本化服务。</p>\n<p>For Example：</p>\n<ul>\n<li>健康日报，简化日报流程，直接让机器人发POST请求，也不用每天自己手动填写重复的信息。</li>\n<li>青年大学习，青年大学习目前也是一个POST请求罢了，每周你只需要给自己的robot发个消息就完成，多是一件美事。</li>\n<li>备忘，当然大部分时候专业的软件做这个比自己做好的多，但有些特异化功能可以自己实现。</li>\n<li>球场预约</li>\n<li>……</li>\n</ul>\n<p>总之将QQrobot当成一个命令入口我觉得是当前QQrobot最大价值之一，而他的功能完全由自己编写。</p>\n<h2 id=\"用什么搭建QQ-robot比较好？\"><a href=\"#用什么搭建QQ-robot比较好？\" class=\"headerlink\" title=\"用什么搭建QQ robot比较好？\"></a>用什么搭建QQ robot比较好？</h2><p>A：个人推荐使用<a href=\"https://v2.nonebot.dev/\">NoneBot</a>+<a href=\"https://onebot.dev/\">OneBot</a>进行搭建，会更加简单也更加快速。</p>\n<h2 id=\"需要会什么？\"><a href=\"#需要会什么？\" class=\"headerlink\" title=\"需要会什么？\"></a>需要会什么？</h2><p>A：只要会Python就可以。</p>\n"},{"title":"Leetcode-Hard-675","date":"2022-05-23T05:43:55.000Z","author":"Lcy","plugins":["mathjax","katex"],"_content":"\n# [675. 为高尔夫比赛砍树](https://leetcode.cn/problems/cut-off-trees-for-golf-event/)\n\n你被请来给一个要举办高尔夫比赛的树林砍树。树林由一个 `m x n` 的矩阵表示， 在这个矩阵中：\n\n- `0` 表示障碍，无法触碰\n- `1` 表示地面，可以行走\n- `比 1 大的数` 表示有树的单元格，可以行走，数值表示树的高度\n\n每一步，你都可以向上、下、左、右四个方向之一移动一个单位，如果你站的地方有一棵树，那么你可以决定是否要砍倒它。\n\n你需要按照树的高度从低向高砍掉所有的树，每砍过一颗树，该单元格的值变为 `1`（即变为地面）。\n\n你将从 `(0, 0)` 点开始工作，返回你砍完所有树需要走的最小步数。 如果你无法砍完所有的树，返回 `-1` 。\n\n可以保证的是，没有两棵树的高度是相同的，并且你至少需要砍倒一棵树。\n\n \n\n**示例 1：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees1.jpg)\n\n```\n输入：forest = [[1,2,3],[0,0,4],[7,6,5]]\n输出：6\n解释：沿着上面的路径，你可以用 6 步，按从最矮到最高的顺序砍掉这些树。\n```\n\n**示例 2：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees2.jpg)\n\n```\n输入：forest = [[1,2,3],[0,0,0],[7,6,5]]\n输出：-1\n解释：由于中间一行被障碍阻塞，无法访问最下面一行中的树。\n```\n\n**示例 3：**\n\n```\n输入：forest = [[2,3,4],[0,0,5],[8,7,6]]\n输出：6\n解释：可以按与示例 1 相同的路径来砍掉所有的树。\n(0,0) 位置的树，可以直接砍去，不用算步数。\n```\n\n \n\n**提示：**\n\n- `m == forest.length`\n- `n == forest[i].length`\n- `1 <= m, n <= 50`\n- `0 <= forest[i][j] <= 109`\n\n## 分析\n\n很显然这是一个BFS的问题，第一步肯定是进行一个排序，作用是获得我们所需要的路径。得到路径之后通过广度优先搜索来不断的获取点对之间的距离。一旦搜索到点对之间无法抵达那么就返回-1。其余的情况就是一致累加点对之间的距离即可。\n\n我们来分析一下复杂度。\n\n首先第一次的排序+获得路径是一个$O(n^2logn^2)$的时间。\n\n其次点对数量加点对间BFS是$O(n^2*m^2)$所以理论上是可以在$n^4$的时间内解决的。\n\n当然如果是Go/C++我觉得直接暴力BFS就解决了。\n\n## 实现\n\n```python\nmove = (0, 1), (1, 0), (0, -1), (-1, 0)\nclass Solution:\n    def cutOffTree(self, forest: List[List[int]]) -> int:\n        road = []\n        for i in range(0,len(forest)):\n            for j in range(0,len(forest[0])):\n                if forest[i][j] == 0 or forest[i][j] == 1:\n                    continue\n                road.append([forest[i][j],i,j])\n        def mycmp(a,b): # 完全不需要，只是加深一下python3传自己的compare函数方法的记忆。\n            return a[0] - b[0] \n        road.sort(key=functools.cmp_to_key(mycmp)) # 要用key=functools.cmp_to_key()\n        \n        ans = 0\n        if forest[0][0] == 0:\n            return -1\n\n        def bfs(start, end):\n            q = deque([(start, 0)])\n            vis = [list(r) for r in forest]\n            while q:\n                cur, step = q.popleft()\n                if cur == end:\n                    return step\n                x, y = cur\n                step += 1\n                for dx, dy in move:\n                    if 0 <= (nx := x + dx) < len(forest) and 0 <= (ny := y + dy) < len(forest[0]) and vis[nx][ny]:\n                        vis[nx][ny] = 0\n                        q.append(((nx, ny), step))\n            return -1\n\n        if road[0][1] != 0 or road[0][2] != 0:\n            ans = bfs((0,0),(road[0][1],road[0][2]))\n        if ans == -1:\n            return -1\n        for i in range(1,len(road)):\n            tmp = bfs((road[i-1][1],road[i-1][2]),(road[i][1],road[i][2])) # 点对之间找\n            if tmp == -1:\n                return tmp\n            ans += tmp\n        return ans\n```\n\n","source":"_posts/Leetcode-Hard-675.md","raw":"---\ntitle: Leetcode-Hard-675\ndate: 2022-05-23 13:43:55\ntags: leetcode\ncategories: leetcode\nauthor: Lcy\nplugins: \n- mathjax\n- katex\n---\n\n# [675. 为高尔夫比赛砍树](https://leetcode.cn/problems/cut-off-trees-for-golf-event/)\n\n你被请来给一个要举办高尔夫比赛的树林砍树。树林由一个 `m x n` 的矩阵表示， 在这个矩阵中：\n\n- `0` 表示障碍，无法触碰\n- `1` 表示地面，可以行走\n- `比 1 大的数` 表示有树的单元格，可以行走，数值表示树的高度\n\n每一步，你都可以向上、下、左、右四个方向之一移动一个单位，如果你站的地方有一棵树，那么你可以决定是否要砍倒它。\n\n你需要按照树的高度从低向高砍掉所有的树，每砍过一颗树，该单元格的值变为 `1`（即变为地面）。\n\n你将从 `(0, 0)` 点开始工作，返回你砍完所有树需要走的最小步数。 如果你无法砍完所有的树，返回 `-1` 。\n\n可以保证的是，没有两棵树的高度是相同的，并且你至少需要砍倒一棵树。\n\n \n\n**示例 1：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees1.jpg)\n\n```\n输入：forest = [[1,2,3],[0,0,4],[7,6,5]]\n输出：6\n解释：沿着上面的路径，你可以用 6 步，按从最矮到最高的顺序砍掉这些树。\n```\n\n**示例 2：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees2.jpg)\n\n```\n输入：forest = [[1,2,3],[0,0,0],[7,6,5]]\n输出：-1\n解释：由于中间一行被障碍阻塞，无法访问最下面一行中的树。\n```\n\n**示例 3：**\n\n```\n输入：forest = [[2,3,4],[0,0,5],[8,7,6]]\n输出：6\n解释：可以按与示例 1 相同的路径来砍掉所有的树。\n(0,0) 位置的树，可以直接砍去，不用算步数。\n```\n\n \n\n**提示：**\n\n- `m == forest.length`\n- `n == forest[i].length`\n- `1 <= m, n <= 50`\n- `0 <= forest[i][j] <= 109`\n\n## 分析\n\n很显然这是一个BFS的问题，第一步肯定是进行一个排序，作用是获得我们所需要的路径。得到路径之后通过广度优先搜索来不断的获取点对之间的距离。一旦搜索到点对之间无法抵达那么就返回-1。其余的情况就是一致累加点对之间的距离即可。\n\n我们来分析一下复杂度。\n\n首先第一次的排序+获得路径是一个$O(n^2logn^2)$的时间。\n\n其次点对数量加点对间BFS是$O(n^2*m^2)$所以理论上是可以在$n^4$的时间内解决的。\n\n当然如果是Go/C++我觉得直接暴力BFS就解决了。\n\n## 实现\n\n```python\nmove = (0, 1), (1, 0), (0, -1), (-1, 0)\nclass Solution:\n    def cutOffTree(self, forest: List[List[int]]) -> int:\n        road = []\n        for i in range(0,len(forest)):\n            for j in range(0,len(forest[0])):\n                if forest[i][j] == 0 or forest[i][j] == 1:\n                    continue\n                road.append([forest[i][j],i,j])\n        def mycmp(a,b): # 完全不需要，只是加深一下python3传自己的compare函数方法的记忆。\n            return a[0] - b[0] \n        road.sort(key=functools.cmp_to_key(mycmp)) # 要用key=functools.cmp_to_key()\n        \n        ans = 0\n        if forest[0][0] == 0:\n            return -1\n\n        def bfs(start, end):\n            q = deque([(start, 0)])\n            vis = [list(r) for r in forest]\n            while q:\n                cur, step = q.popleft()\n                if cur == end:\n                    return step\n                x, y = cur\n                step += 1\n                for dx, dy in move:\n                    if 0 <= (nx := x + dx) < len(forest) and 0 <= (ny := y + dy) < len(forest[0]) and vis[nx][ny]:\n                        vis[nx][ny] = 0\n                        q.append(((nx, ny), step))\n            return -1\n\n        if road[0][1] != 0 or road[0][2] != 0:\n            ans = bfs((0,0),(road[0][1],road[0][2]))\n        if ans == -1:\n            return -1\n        for i in range(1,len(road)):\n            tmp = bfs((road[i-1][1],road[i-1][2]),(road[i][1],road[i][2])) # 点对之间找\n            if tmp == -1:\n                return tmp\n            ans += tmp\n        return ans\n```\n\n","slug":"Leetcode-Hard-675","published":1,"updated":"2022-07-02T15:49:59.940Z","_id":"cl3iqqerm000ql0emfb67g06m","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"675-为高尔夫比赛砍树\"><a href=\"#675-为高尔夫比赛砍树\" class=\"headerlink\" title=\"675. 为高尔夫比赛砍树\"></a><a href=\"https://leetcode.cn/problems/cut-off-trees-for-golf-event/\">675. 为高尔夫比赛砍树</a></h1><p>你被请来给一个要举办高尔夫比赛的树林砍树。树林由一个 <code>m x n</code> 的矩阵表示， 在这个矩阵中：</p>\n<ul>\n<li><code>0</code> 表示障碍，无法触碰</li>\n<li><code>1</code> 表示地面，可以行走</li>\n<li><code>比 1 大的数</code> 表示有树的单元格，可以行走，数值表示树的高度</li>\n</ul>\n<p>每一步，你都可以向上、下、左、右四个方向之一移动一个单位，如果你站的地方有一棵树，那么你可以决定是否要砍倒它。</p>\n<p>你需要按照树的高度从低向高砍掉所有的树，每砍过一颗树，该单元格的值变为 <code>1</code>（即变为地面）。</p>\n<p>你将从 <code>(0, 0)</code> 点开始工作，返回你砍完所有树需要走的最小步数。 如果你无法砍完所有的树，返回 <code>-1</code> 。</p>\n<p>可以保证的是，没有两棵树的高度是相同的，并且你至少需要砍倒一棵树。</p>\n<p><strong>示例 1：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees1.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees1.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[1,2,3],[0,0,4],[7,6,5]]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：沿着上面的路径，你可以用 6 步，按从最矮到最高的顺序砍掉这些树。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees2.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees2.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[1,2,3],[0,0,0],[7,6,5]]</span><br><span class=\"line\">输出：-1</span><br><span class=\"line\">解释：由于中间一行被障碍阻塞，无法访问最下面一行中的树。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 3：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[2,3,4],[0,0,5],[8,7,6]]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：可以按与示例 1 相同的路径来砍掉所有的树。</span><br><span class=\"line\">(0,0) 位置的树，可以直接砍去，不用算步数。</span><br></pre></td></tr></table></figure>\n\n<p><strong>提示：</strong></p>\n<ul>\n<li><code>m == forest.length</code></li>\n<li><code>n == forest[i].length</code></li>\n<li><code>1 &lt;= m, n &lt;= 50</code></li>\n<li><code>0 &lt;= forest[i][j] &lt;= 109</code></li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><div class=\"story post-story\"><p>很显然这是一个BFS的问题，第一步肯定是进行一个排序，作用是获得我们所需要的路径。得到路径之后通过广度优先搜索来不断的获取点对之间的距离。一旦搜索到点对之间无法抵达那么就返回-1。其余的情况就是一致累加点对之间的距离即可。</p>\n<p>我们来分析一下复杂度。</p>\n<p>首先第一次的排序+获得路径是一个$O(n^2logn^2)$的时间。</p>\n<p>其次点对数量加点对间BFS是$O(n^2*m^2)$所以理论上是可以在$n^4$的时间内解决的。</p>\n<p>当然如果是Go/C++我觉得直接暴力BFS就解决了。</p>\n</div><h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><div class=\"story post-story\"><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">move = (<span class=\"number\">0</span>, <span class=\"number\">1</span>), (<span class=\"number\">1</span>, <span class=\"number\">0</span>), (<span class=\"number\">0</span>, -<span class=\"number\">1</span>), (-<span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cutOffTree</span>(<span class=\"params\">self, forest: <span class=\"type\">List</span>[<span class=\"type\">List</span>[<span class=\"built_in\">int</span>]]</span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        road = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(forest)):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(forest[<span class=\"number\">0</span>])):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> forest[i][j] == <span class=\"number\">0</span> <span class=\"keyword\">or</span> forest[i][j] == <span class=\"number\">1</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">                road.append([forest[i][j],i,j])</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">mycmp</span>(<span class=\"params\">a,b</span>): <span class=\"comment\"># 完全不需要，只是加深一下python3传自己的compare函数方法的记忆。</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>] </span><br><span class=\"line\">        road.sort(key=functools.cmp_to_key(mycmp)) <span class=\"comment\"># 要用key=functools.cmp_to_key()</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        ans = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> forest[<span class=\"number\">0</span>][<span class=\"number\">0</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">bfs</span>(<span class=\"params\">start, end</span>):</span><br><span class=\"line\">            q = deque([(start, <span class=\"number\">0</span>)])</span><br><span class=\"line\">            vis = [<span class=\"built_in\">list</span>(r) <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> forest]</span><br><span class=\"line\">            <span class=\"keyword\">while</span> q:</span><br><span class=\"line\">                cur, step = q.popleft()</span><br><span class=\"line\">                <span class=\"keyword\">if</span> cur == end:</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> step</span><br><span class=\"line\">                x, y = cur</span><br><span class=\"line\">                step += <span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> dx, dy <span class=\"keyword\">in</span> move:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> <span class=\"number\">0</span> &lt;= (nx := x + dx) &lt; <span class=\"built_in\">len</span>(forest) <span class=\"keyword\">and</span> <span class=\"number\">0</span> &lt;= (ny := y + dy) &lt; <span class=\"built_in\">len</span>(forest[<span class=\"number\">0</span>]) <span class=\"keyword\">and</span> vis[nx][ny]:</span><br><span class=\"line\">                        vis[nx][ny] = <span class=\"number\">0</span></span><br><span class=\"line\">                        q.append(((nx, ny), step))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> road[<span class=\"number\">0</span>][<span class=\"number\">1</span>] != <span class=\"number\">0</span> <span class=\"keyword\">or</span> road[<span class=\"number\">0</span>][<span class=\"number\">2</span>] != <span class=\"number\">0</span>:</span><br><span class=\"line\">            ans = bfs((<span class=\"number\">0</span>,<span class=\"number\">0</span>),(road[<span class=\"number\">0</span>][<span class=\"number\">1</span>],road[<span class=\"number\">0</span>][<span class=\"number\">2</span>]))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ans == -<span class=\"number\">1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,<span class=\"built_in\">len</span>(road)):</span><br><span class=\"line\">            tmp = bfs((road[i-<span class=\"number\">1</span>][<span class=\"number\">1</span>],road[i-<span class=\"number\">1</span>][<span class=\"number\">2</span>]),(road[i][<span class=\"number\">1</span>],road[i][<span class=\"number\">2</span>])) <span class=\"comment\"># 点对之间找</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> tmp == -<span class=\"number\">1</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> tmp</span><br><span class=\"line\">            ans += tmp</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"675-为高尔夫比赛砍树\"><a href=\"#675-为高尔夫比赛砍树\" class=\"headerlink\" title=\"675. 为高尔夫比赛砍树\"></a><a href=\"https://leetcode.cn/problems/cut-off-trees-for-golf-event/\">675. 为高尔夫比赛砍树</a></h1><p>你被请来给一个要举办高尔夫比赛的树林砍树。树林由一个 <code>m x n</code> 的矩阵表示， 在这个矩阵中：</p>\n<ul>\n<li><code>0</code> 表示障碍，无法触碰</li>\n<li><code>1</code> 表示地面，可以行走</li>\n<li><code>比 1 大的数</code> 表示有树的单元格，可以行走，数值表示树的高度</li>\n</ul>\n<p>每一步，你都可以向上、下、左、右四个方向之一移动一个单位，如果你站的地方有一棵树，那么你可以决定是否要砍倒它。</p>\n<p>你需要按照树的高度从低向高砍掉所有的树，每砍过一颗树，该单元格的值变为 <code>1</code>（即变为地面）。</p>\n<p>你将从 <code>(0, 0)</code> 点开始工作，返回你砍完所有树需要走的最小步数。 如果你无法砍完所有的树，返回 <code>-1</code> 。</p>\n<p>可以保证的是，没有两棵树的高度是相同的，并且你至少需要砍倒一棵树。</p>\n<p><strong>示例 1：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees1.jpg\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[1,2,3],[0,0,4],[7,6,5]]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：沿着上面的路径，你可以用 6 步，按从最矮到最高的顺序砍掉这些树。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/trees2.jpg\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[1,2,3],[0,0,0],[7,6,5]]</span><br><span class=\"line\">输出：-1</span><br><span class=\"line\">解释：由于中间一行被障碍阻塞，无法访问最下面一行中的树。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 3：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：forest = [[2,3,4],[0,0,5],[8,7,6]]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：可以按与示例 1 相同的路径来砍掉所有的树。</span><br><span class=\"line\">(0,0) 位置的树，可以直接砍去，不用算步数。</span><br></pre></td></tr></table></figure>\n\n<p><strong>提示：</strong></p>\n<ul>\n<li><code>m == forest.length</code></li>\n<li><code>n == forest[i].length</code></li>\n<li><code>1 &lt;= m, n &lt;= 50</code></li>\n<li><code>0 &lt;= forest[i][j] &lt;= 109</code></li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>很显然这是一个BFS的问题，第一步肯定是进行一个排序，作用是获得我们所需要的路径。得到路径之后通过广度优先搜索来不断的获取点对之间的距离。一旦搜索到点对之间无法抵达那么就返回-1。其余的情况就是一致累加点对之间的距离即可。</p>\n<p>我们来分析一下复杂度。</p>\n<p>首先第一次的排序+获得路径是一个$O(n^2logn^2)$的时间。</p>\n<p>其次点对数量加点对间BFS是$O(n^2*m^2)$所以理论上是可以在$n^4$的时间内解决的。</p>\n<p>当然如果是Go/C++我觉得直接暴力BFS就解决了。</p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">move = (<span class=\"number\">0</span>, <span class=\"number\">1</span>), (<span class=\"number\">1</span>, <span class=\"number\">0</span>), (<span class=\"number\">0</span>, -<span class=\"number\">1</span>), (-<span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cutOffTree</span>(<span class=\"params\">self, forest: <span class=\"type\">List</span>[<span class=\"type\">List</span>[<span class=\"built_in\">int</span>]]</span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        road = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(forest)):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(forest[<span class=\"number\">0</span>])):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> forest[i][j] == <span class=\"number\">0</span> <span class=\"keyword\">or</span> forest[i][j] == <span class=\"number\">1</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">                road.append([forest[i][j],i,j])</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">mycmp</span>(<span class=\"params\">a,b</span>): <span class=\"comment\"># 完全不需要，只是加深一下python3传自己的compare函数方法的记忆。</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> a[<span class=\"number\">0</span>] - b[<span class=\"number\">0</span>] </span><br><span class=\"line\">        road.sort(key=functools.cmp_to_key(mycmp)) <span class=\"comment\"># 要用key=functools.cmp_to_key()</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        ans = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> forest[<span class=\"number\">0</span>][<span class=\"number\">0</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">bfs</span>(<span class=\"params\">start, end</span>):</span><br><span class=\"line\">            q = deque([(start, <span class=\"number\">0</span>)])</span><br><span class=\"line\">            vis = [<span class=\"built_in\">list</span>(r) <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> forest]</span><br><span class=\"line\">            <span class=\"keyword\">while</span> q:</span><br><span class=\"line\">                cur, step = q.popleft()</span><br><span class=\"line\">                <span class=\"keyword\">if</span> cur == end:</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> step</span><br><span class=\"line\">                x, y = cur</span><br><span class=\"line\">                step += <span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> dx, dy <span class=\"keyword\">in</span> move:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> <span class=\"number\">0</span> &lt;= (nx := x + dx) &lt; <span class=\"built_in\">len</span>(forest) <span class=\"keyword\">and</span> <span class=\"number\">0</span> &lt;= (ny := y + dy) &lt; <span class=\"built_in\">len</span>(forest[<span class=\"number\">0</span>]) <span class=\"keyword\">and</span> vis[nx][ny]:</span><br><span class=\"line\">                        vis[nx][ny] = <span class=\"number\">0</span></span><br><span class=\"line\">                        q.append(((nx, ny), step))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> road[<span class=\"number\">0</span>][<span class=\"number\">1</span>] != <span class=\"number\">0</span> <span class=\"keyword\">or</span> road[<span class=\"number\">0</span>][<span class=\"number\">2</span>] != <span class=\"number\">0</span>:</span><br><span class=\"line\">            ans = bfs((<span class=\"number\">0</span>,<span class=\"number\">0</span>),(road[<span class=\"number\">0</span>][<span class=\"number\">1</span>],road[<span class=\"number\">0</span>][<span class=\"number\">2</span>]))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ans == -<span class=\"number\">1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,<span class=\"built_in\">len</span>(road)):</span><br><span class=\"line\">            tmp = bfs((road[i-<span class=\"number\">1</span>][<span class=\"number\">1</span>],road[i-<span class=\"number\">1</span>][<span class=\"number\">2</span>]),(road[i][<span class=\"number\">1</span>],road[i][<span class=\"number\">2</span>])) <span class=\"comment\"># 点对之间找</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> tmp == -<span class=\"number\">1</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> tmp</span><br><span class=\"line\">            ans += tmp</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n\n"},{"title":"QQ机器人搭建（三）环境构建","date":"2022-05-16T15:53:45.000Z","author":"Lcy","_content":"\n# QQrobot 环境搭建\n\n## 1. 安装nonebot2\n\n```shell\npip install nonebot2\n# 安装nonebot脚手架\npip install nb-cli\n```\n\n## 2. 安装go-cqhttp\n\n[go-cqhttp 帮助中心](https://docs.go-cqhttp.org/)\n\n下载最新发行版\n\n```shell\nwget https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc1/go-cqhttp_1.0.0-rc1_linux_amd64.deb\n# 安装\ndpkg -i go-cqhttp_1.0.0-rc1_linux_amd64.deb\n# 启动\ngo-cqhttp\n```\n\n![image-20220517000405670](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517000405670.png)\n\n如图选择023就够用了\n\n## 3. 修改config.yaml\n\n后半部分参考配置\n\n```json\n# 连接服务列表\nservers:\n  # 添加方式，同一连接方式可添加多个，具体配置说明请查看文档\n  #- http: # http 通信\n  #- ws:   # 正向 Websocket\n  #- ws-reverse: # 反向 Websocket\n  #- pprof: #性能分析服务器\n\n  - http: # HTTP 通信设置\n      host: 127.0.0.1 # 服务端监听地址\n      port: 5700      # 服务端监听端口\n      timeout: 5      # 反向 HTTP 超时时间, 单位秒，<5 时将被忽略\n      long-polling:   # 长轮询拓展\n        enabled: false       # 是否开启\n        max-queue-size: 0 # 消息队列大小，0 表示不限制队列大小，谨慎使用\n      middlewares:\n        <<: *default # 引用默认中间件\n      post:           # 反向HTTP POST地址列表\n      #- url: ''                # 地址\n      #  secret: ''             # 密钥\n\t  #  max-retries: 3         # 最大重试，0 时禁用\n      #  retries-interval: 1500 # 重试时间，单位毫秒，0 时立即\n      #- url: http://127.0.0.1:5701/ # 地址\n      #  secret: ''                  # 密钥\n\t  #  max-retries: 10             # 最大重试，0 时禁用\n      #  retries-interval: 1000      # 重试时间，单位毫秒，0 时立即\n  # 正向WS设置\n  - ws:\n      # 正向WS服务器监听地址\n      host: 127.0.0.1\n      # 正向WS服务器监听端口\n      port: 6700\n      middlewares:\n        <<: *default # 引用默认中间件\n  # 反向WS设置\n  - ws-reverse:\n      # 反向WS Universal 地址\n      # 注意 设置了此项地址后下面两项将会被忽略\n      universal: ws://127.0.0.1:8080/onebot/v11/ws\n      # 反向WS API 地址\n      api: \n      # 反向WS Event 地址\n      event: \n      # 重连间隔 单位毫秒\n      reconnect-interval: 3000\n      middlewares:\n        <<: *default # 引用默认中间件\n```\n\n## 4. 安装协议适配器\n\n这里用的是onebot所以直接：\n\n```shell\nnb adapter install nonebot-adapter-onebot\n```\n\n注意一些nb adapter的操作：\n\n使用 nb-cli 命令行查看:\n\n```bash\nnb adapter list\n```\n\n前往[商店](https://nb2.baka.icu/store)点击复制 nb-cli 安装命令至命令行执行即可安装。\n\n或者自行输入命令安装:\n\n```bash\nnb adapter install <adapter-name>\n```\n\n或者使用交互模式安装:\n\n```bash\nnb adapter install\n```\n\n也可以使用 pip 安装\n\n```bash\npip install <adapter-name>\n```\n\n## 5. 创建项目\n\n```shell\nnb create\n```\n\n![image-20220517101751752](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517101751752.png)\n\n连接上远程可以看到这样一个目录结构：\n\n![image-20220517102052789](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102052789.png)\n\n## 6. 写一个测试的插件\n\n比如我想要写一个能给我发送校历的文件，可以这样：\n\n```python\nfrom nonebot import on_command,on_startswith,on_keyword,on_message\nfrom nonebot.rule import to_me\nfrom nonebot.adapters.onebot.v11 import Bot, Event, MessageSegment, Message\n# 863152457\n\nblacklist = [\"768887710\"]\n\n\ntest = on_keyword([\"校历\"],priority = 1)\n@test.handle()\nasync def test_handle(bot: Bot, event: Event):\n    if event.message_type == \"group\":\n        if event.group_id in blacklist:\n            await test.finish()\n    message = MessageSegment.image(file=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20210908230617690.png\")\n    await test.finish(message=message)\n```\n\n实现的效果如下：\n\n![image-20220517102854597](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102854597.png)\n\n\n\nFine 至此环境构建成功。下一步就是写各种脚本了。\n","source":"_posts/QQ机器人搭建（三）环境构建.md","raw":"---\ntitle: QQ机器人搭建（三）环境构建\ndate: 2022-05-16 23:53:45\ntags: QQrobot\ncategories: QQRobot\nauthor: Lcy\n---\n\n# QQrobot 环境搭建\n\n## 1. 安装nonebot2\n\n```shell\npip install nonebot2\n# 安装nonebot脚手架\npip install nb-cli\n```\n\n## 2. 安装go-cqhttp\n\n[go-cqhttp 帮助中心](https://docs.go-cqhttp.org/)\n\n下载最新发行版\n\n```shell\nwget https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc1/go-cqhttp_1.0.0-rc1_linux_amd64.deb\n# 安装\ndpkg -i go-cqhttp_1.0.0-rc1_linux_amd64.deb\n# 启动\ngo-cqhttp\n```\n\n![image-20220517000405670](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517000405670.png)\n\n如图选择023就够用了\n\n## 3. 修改config.yaml\n\n后半部分参考配置\n\n```json\n# 连接服务列表\nservers:\n  # 添加方式，同一连接方式可添加多个，具体配置说明请查看文档\n  #- http: # http 通信\n  #- ws:   # 正向 Websocket\n  #- ws-reverse: # 反向 Websocket\n  #- pprof: #性能分析服务器\n\n  - http: # HTTP 通信设置\n      host: 127.0.0.1 # 服务端监听地址\n      port: 5700      # 服务端监听端口\n      timeout: 5      # 反向 HTTP 超时时间, 单位秒，<5 时将被忽略\n      long-polling:   # 长轮询拓展\n        enabled: false       # 是否开启\n        max-queue-size: 0 # 消息队列大小，0 表示不限制队列大小，谨慎使用\n      middlewares:\n        <<: *default # 引用默认中间件\n      post:           # 反向HTTP POST地址列表\n      #- url: ''                # 地址\n      #  secret: ''             # 密钥\n\t  #  max-retries: 3         # 最大重试，0 时禁用\n      #  retries-interval: 1500 # 重试时间，单位毫秒，0 时立即\n      #- url: http://127.0.0.1:5701/ # 地址\n      #  secret: ''                  # 密钥\n\t  #  max-retries: 10             # 最大重试，0 时禁用\n      #  retries-interval: 1000      # 重试时间，单位毫秒，0 时立即\n  # 正向WS设置\n  - ws:\n      # 正向WS服务器监听地址\n      host: 127.0.0.1\n      # 正向WS服务器监听端口\n      port: 6700\n      middlewares:\n        <<: *default # 引用默认中间件\n  # 反向WS设置\n  - ws-reverse:\n      # 反向WS Universal 地址\n      # 注意 设置了此项地址后下面两项将会被忽略\n      universal: ws://127.0.0.1:8080/onebot/v11/ws\n      # 反向WS API 地址\n      api: \n      # 反向WS Event 地址\n      event: \n      # 重连间隔 单位毫秒\n      reconnect-interval: 3000\n      middlewares:\n        <<: *default # 引用默认中间件\n```\n\n## 4. 安装协议适配器\n\n这里用的是onebot所以直接：\n\n```shell\nnb adapter install nonebot-adapter-onebot\n```\n\n注意一些nb adapter的操作：\n\n使用 nb-cli 命令行查看:\n\n```bash\nnb adapter list\n```\n\n前往[商店](https://nb2.baka.icu/store)点击复制 nb-cli 安装命令至命令行执行即可安装。\n\n或者自行输入命令安装:\n\n```bash\nnb adapter install <adapter-name>\n```\n\n或者使用交互模式安装:\n\n```bash\nnb adapter install\n```\n\n也可以使用 pip 安装\n\n```bash\npip install <adapter-name>\n```\n\n## 5. 创建项目\n\n```shell\nnb create\n```\n\n![image-20220517101751752](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517101751752.png)\n\n连接上远程可以看到这样一个目录结构：\n\n![image-20220517102052789](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102052789.png)\n\n## 6. 写一个测试的插件\n\n比如我想要写一个能给我发送校历的文件，可以这样：\n\n```python\nfrom nonebot import on_command,on_startswith,on_keyword,on_message\nfrom nonebot.rule import to_me\nfrom nonebot.adapters.onebot.v11 import Bot, Event, MessageSegment, Message\n# 863152457\n\nblacklist = [\"768887710\"]\n\n\ntest = on_keyword([\"校历\"],priority = 1)\n@test.handle()\nasync def test_handle(bot: Bot, event: Event):\n    if event.message_type == \"group\":\n        if event.group_id in blacklist:\n            await test.finish()\n    message = MessageSegment.image(file=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20210908230617690.png\")\n    await test.finish(message=message)\n```\n\n实现的效果如下：\n\n![image-20220517102854597](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102854597.png)\n\n\n\nFine 至此环境构建成功。下一步就是写各种脚本了。\n","slug":"QQ机器人搭建（三）环境构建","published":1,"updated":"2022-07-02T15:49:59.941Z","_id":"cl3iqqern000tl0emg00v87ac","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"QQrobot-环境搭建\"><a href=\"#QQrobot-环境搭建\" class=\"headerlink\" title=\"QQrobot 环境搭建\"></a>QQrobot 环境搭建</h1><h2 id=\"1-安装nonebot2\"><a href=\"#1-安装nonebot2\" class=\"headerlink\" title=\"1. 安装nonebot2\"></a>1. 安装nonebot2</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install nonebot2</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装nonebot脚手架</span></span><br><span class=\"line\">pip install nb-cli</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"2-安装go-cqhttp\"><a href=\"#2-安装go-cqhttp\" class=\"headerlink\" title=\"2. 安装go-cqhttp\"></a>2. 安装go-cqhttp</h2><div class=\"story post-story\"><p><a href=\"https://docs.go-cqhttp.org/\">go-cqhttp 帮助中心</a></p>\n<p>下载最新发行版</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc1/go-cqhttp_1.0.0-rc1_linux_amd64.deb</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装</span></span><br><span class=\"line\">dpkg -i go-cqhttp_1.0.0-rc1_linux_amd64.deb</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">go-cqhttp</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517000405670.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517000405670.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220517000405670\"></p>\n<p>如图选择023就够用了</p>\n</div><h2 id=\"3-修改config-yaml\"><a href=\"#3-修改config-yaml\" class=\"headerlink\" title=\"3. 修改config.yaml\"></a>3. 修改config.yaml</h2><div class=\"story post-story\"><p>后半部分参考配置</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 连接服务列表</span><br><span class=\"line\">servers<span class=\"punctuation\">:</span></span><br><span class=\"line\">  # 添加方式，同一连接方式可添加多个，具体配置说明请查看文档</span><br><span class=\"line\">  #- http<span class=\"punctuation\">:</span> # http 通信</span><br><span class=\"line\">  #- ws<span class=\"punctuation\">:</span>   # 正向 Websocket</span><br><span class=\"line\">  #- ws-reverse<span class=\"punctuation\">:</span> # 反向 Websocket</span><br><span class=\"line\">  #- pprof<span class=\"punctuation\">:</span> #性能分析服务器</span><br><span class=\"line\"></span><br><span class=\"line\">  - http<span class=\"punctuation\">:</span> # HTTP 通信设置</span><br><span class=\"line\">      host<span class=\"punctuation\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> # 服务端监听地址</span><br><span class=\"line\">      port<span class=\"punctuation\">:</span> <span class=\"number\">5700</span>      # 服务端监听端口</span><br><span class=\"line\">      timeout<span class=\"punctuation\">:</span> <span class=\"number\">5</span>      # 反向 HTTP 超时时间<span class=\"punctuation\">,</span> 单位秒，&lt;<span class=\"number\">5</span> 时将被忽略</span><br><span class=\"line\">      long-polling<span class=\"punctuation\">:</span>   # 长轮询拓展</span><br><span class=\"line\">        enabled<span class=\"punctuation\">:</span> <span class=\"keyword\">false</span>       # 是否开启</span><br><span class=\"line\">        max-queue-size<span class=\"punctuation\">:</span> <span class=\"number\">0</span> # 消息队列大小，<span class=\"number\">0</span> 表示不限制队列大小，谨慎使用</span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br><span class=\"line\">      post<span class=\"punctuation\">:</span>           # 反向HTTP POST地址列表</span><br><span class=\"line\">      #- url<span class=\"punctuation\">:</span> &#x27;&#x27;                # 地址</span><br><span class=\"line\">      #  secret<span class=\"punctuation\">:</span> &#x27;&#x27;             # 密钥</span><br><span class=\"line\">\t  #  max-retries<span class=\"punctuation\">:</span> <span class=\"number\">3</span>         # 最大重试，<span class=\"number\">0</span> 时禁用</span><br><span class=\"line\">      #  retries-interval<span class=\"punctuation\">:</span> <span class=\"number\">1500</span> # 重试时间，单位毫秒，<span class=\"number\">0</span> 时立即</span><br><span class=\"line\">      #- url<span class=\"punctuation\">:</span> http<span class=\"punctuation\">:</span><span class=\"comment\">//127.0.0.1:5701/ # 地址</span></span><br><span class=\"line\">      #  secret<span class=\"punctuation\">:</span> &#x27;&#x27;                  # 密钥</span><br><span class=\"line\">\t  #  max-retries<span class=\"punctuation\">:</span> <span class=\"number\">10</span>             # 最大重试，<span class=\"number\">0</span> 时禁用</span><br><span class=\"line\">      #  retries-interval<span class=\"punctuation\">:</span> <span class=\"number\">1000</span>      # 重试时间，单位毫秒，<span class=\"number\">0</span> 时立即</span><br><span class=\"line\">  # 正向WS设置</span><br><span class=\"line\">  - ws<span class=\"punctuation\">:</span></span><br><span class=\"line\">      # 正向WS服务器监听地址</span><br><span class=\"line\">      host<span class=\"punctuation\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></span><br><span class=\"line\">      # 正向WS服务器监听端口</span><br><span class=\"line\">      port<span class=\"punctuation\">:</span> <span class=\"number\">6700</span></span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br><span class=\"line\">  # 反向WS设置</span><br><span class=\"line\">  - ws-reverse<span class=\"punctuation\">:</span></span><br><span class=\"line\">      # 反向WS Universal 地址</span><br><span class=\"line\">      # 注意 设置了此项地址后下面两项将会被忽略</span><br><span class=\"line\">      universal<span class=\"punctuation\">:</span> ws<span class=\"punctuation\">:</span><span class=\"comment\">//127.0.0.1:8080/onebot/v11/ws</span></span><br><span class=\"line\">      # 反向WS API 地址</span><br><span class=\"line\">      api<span class=\"punctuation\">:</span> </span><br><span class=\"line\">      # 反向WS Event 地址</span><br><span class=\"line\">      event<span class=\"punctuation\">:</span> </span><br><span class=\"line\">      # 重连间隔 单位毫秒</span><br><span class=\"line\">      reconnect-interval<span class=\"punctuation\">:</span> <span class=\"number\">3000</span></span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"4-安装协议适配器\"><a href=\"#4-安装协议适配器\" class=\"headerlink\" title=\"4. 安装协议适配器\"></a>4. 安装协议适配器</h2><div class=\"story post-story\"><p>这里用的是onebot所以直接：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install nonebot-adapter-onebot</span><br></pre></td></tr></table></figure>\n\n<p>注意一些nb adapter的操作：</p>\n<p>使用 nb-cli 命令行查看:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter list</span><br></pre></td></tr></table></figure>\n\n<p>前往<a href=\"https://nb2.baka.icu/store\">商店</a>点击复制 nb-cli 安装命令至命令行执行即可安装。</p>\n<p>或者自行输入命令安装:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install &lt;adapter-name&gt;</span><br></pre></td></tr></table></figure>\n\n<p>或者使用交互模式安装:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install</span><br></pre></td></tr></table></figure>\n\n<p>也可以使用 pip 安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install &lt;adapter-name&gt;</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"5-创建项目\"><a href=\"#5-创建项目\" class=\"headerlink\" title=\"5. 创建项目\"></a>5. 创建项目</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb create</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517101751752.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517101751752.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220517101751752\"></p>\n<p>连接上远程可以看到这样一个目录结构：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102052789.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102052789.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220517102052789\"></p>\n</div><h2 id=\"6-写一个测试的插件\"><a href=\"#6-写一个测试的插件\" class=\"headerlink\" title=\"6. 写一个测试的插件\"></a>6. 写一个测试的插件</h2><div class=\"story post-story\"><p>比如我想要写一个能给我发送校历的文件，可以这样：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> nonebot <span class=\"keyword\">import</span> on_command,on_startswith,on_keyword,on_message</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.rule <span class=\"keyword\">import</span> to_me</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.adapters.onebot.v11 <span class=\"keyword\">import</span> Bot, Event, MessageSegment, Message</span><br><span class=\"line\"><span class=\"comment\"># 863152457</span></span><br><span class=\"line\"></span><br><span class=\"line\">blacklist = [<span class=\"string\">&quot;768887710&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">test = on_keyword([<span class=\"string\">&quot;校历&quot;</span>],priority = <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"meta\">@test.handle()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">test_handle</span>(<span class=\"params\">bot: Bot, event: Event</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> event.message_type == <span class=\"string\">&quot;group&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> event.group_id <span class=\"keyword\">in</span> blacklist:</span><br><span class=\"line\">            <span class=\"keyword\">await</span> test.finish()</span><br><span class=\"line\">    message = MessageSegment.image(file=<span class=\"string\">&quot;https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20210908230617690.png&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> test.finish(message=message)</span><br></pre></td></tr></table></figure>\n\n<p>实现的效果如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102854597.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102854597.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220517102854597\"></p>\n<p>Fine 至此环境构建成功。下一步就是写各种脚本了。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"QQrobot-环境搭建\"><a href=\"#QQrobot-环境搭建\" class=\"headerlink\" title=\"QQrobot 环境搭建\"></a>QQrobot 环境搭建</h1><h2 id=\"1-安装nonebot2\"><a href=\"#1-安装nonebot2\" class=\"headerlink\" title=\"1. 安装nonebot2\"></a>1. 安装nonebot2</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install nonebot2</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装nonebot脚手架</span></span><br><span class=\"line\">pip install nb-cli</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装go-cqhttp\"><a href=\"#2-安装go-cqhttp\" class=\"headerlink\" title=\"2. 安装go-cqhttp\"></a>2. 安装go-cqhttp</h2><p><a href=\"https://docs.go-cqhttp.org/\">go-cqhttp 帮助中心</a></p>\n<p>下载最新发行版</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc1/go-cqhttp_1.0.0-rc1_linux_amd64.deb</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装</span></span><br><span class=\"line\">dpkg -i go-cqhttp_1.0.0-rc1_linux_amd64.deb</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">go-cqhttp</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517000405670.png\" alt=\"image-20220517000405670\"></p>\n<p>如图选择023就够用了</p>\n<h2 id=\"3-修改config-yaml\"><a href=\"#3-修改config-yaml\" class=\"headerlink\" title=\"3. 修改config.yaml\"></a>3. 修改config.yaml</h2><p>后半部分参考配置</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 连接服务列表</span><br><span class=\"line\">servers<span class=\"punctuation\">:</span></span><br><span class=\"line\">  # 添加方式，同一连接方式可添加多个，具体配置说明请查看文档</span><br><span class=\"line\">  #- http<span class=\"punctuation\">:</span> # http 通信</span><br><span class=\"line\">  #- ws<span class=\"punctuation\">:</span>   # 正向 Websocket</span><br><span class=\"line\">  #- ws-reverse<span class=\"punctuation\">:</span> # 反向 Websocket</span><br><span class=\"line\">  #- pprof<span class=\"punctuation\">:</span> #性能分析服务器</span><br><span class=\"line\"></span><br><span class=\"line\">  - http<span class=\"punctuation\">:</span> # HTTP 通信设置</span><br><span class=\"line\">      host<span class=\"punctuation\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> # 服务端监听地址</span><br><span class=\"line\">      port<span class=\"punctuation\">:</span> <span class=\"number\">5700</span>      # 服务端监听端口</span><br><span class=\"line\">      timeout<span class=\"punctuation\">:</span> <span class=\"number\">5</span>      # 反向 HTTP 超时时间<span class=\"punctuation\">,</span> 单位秒，&lt;<span class=\"number\">5</span> 时将被忽略</span><br><span class=\"line\">      long-polling<span class=\"punctuation\">:</span>   # 长轮询拓展</span><br><span class=\"line\">        enabled<span class=\"punctuation\">:</span> <span class=\"keyword\">false</span>       # 是否开启</span><br><span class=\"line\">        max-queue-size<span class=\"punctuation\">:</span> <span class=\"number\">0</span> # 消息队列大小，<span class=\"number\">0</span> 表示不限制队列大小，谨慎使用</span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br><span class=\"line\">      post<span class=\"punctuation\">:</span>           # 反向HTTP POST地址列表</span><br><span class=\"line\">      #- url<span class=\"punctuation\">:</span> &#x27;&#x27;                # 地址</span><br><span class=\"line\">      #  secret<span class=\"punctuation\">:</span> &#x27;&#x27;             # 密钥</span><br><span class=\"line\">\t  #  max-retries<span class=\"punctuation\">:</span> <span class=\"number\">3</span>         # 最大重试，<span class=\"number\">0</span> 时禁用</span><br><span class=\"line\">      #  retries-interval<span class=\"punctuation\">:</span> <span class=\"number\">1500</span> # 重试时间，单位毫秒，<span class=\"number\">0</span> 时立即</span><br><span class=\"line\">      #- url<span class=\"punctuation\">:</span> http<span class=\"punctuation\">:</span><span class=\"comment\">//127.0.0.1:5701/ # 地址</span></span><br><span class=\"line\">      #  secret<span class=\"punctuation\">:</span> &#x27;&#x27;                  # 密钥</span><br><span class=\"line\">\t  #  max-retries<span class=\"punctuation\">:</span> <span class=\"number\">10</span>             # 最大重试，<span class=\"number\">0</span> 时禁用</span><br><span class=\"line\">      #  retries-interval<span class=\"punctuation\">:</span> <span class=\"number\">1000</span>      # 重试时间，单位毫秒，<span class=\"number\">0</span> 时立即</span><br><span class=\"line\">  # 正向WS设置</span><br><span class=\"line\">  - ws<span class=\"punctuation\">:</span></span><br><span class=\"line\">      # 正向WS服务器监听地址</span><br><span class=\"line\">      host<span class=\"punctuation\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></span><br><span class=\"line\">      # 正向WS服务器监听端口</span><br><span class=\"line\">      port<span class=\"punctuation\">:</span> <span class=\"number\">6700</span></span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br><span class=\"line\">  # 反向WS设置</span><br><span class=\"line\">  - ws-reverse<span class=\"punctuation\">:</span></span><br><span class=\"line\">      # 反向WS Universal 地址</span><br><span class=\"line\">      # 注意 设置了此项地址后下面两项将会被忽略</span><br><span class=\"line\">      universal<span class=\"punctuation\">:</span> ws<span class=\"punctuation\">:</span><span class=\"comment\">//127.0.0.1:8080/onebot/v11/ws</span></span><br><span class=\"line\">      # 反向WS API 地址</span><br><span class=\"line\">      api<span class=\"punctuation\">:</span> </span><br><span class=\"line\">      # 反向WS Event 地址</span><br><span class=\"line\">      event<span class=\"punctuation\">:</span> </span><br><span class=\"line\">      # 重连间隔 单位毫秒</span><br><span class=\"line\">      reconnect-interval<span class=\"punctuation\">:</span> <span class=\"number\">3000</span></span><br><span class=\"line\">      middlewares<span class=\"punctuation\">:</span></span><br><span class=\"line\">        &lt;&lt;<span class=\"punctuation\">:</span> *default # 引用默认中间件</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-安装协议适配器\"><a href=\"#4-安装协议适配器\" class=\"headerlink\" title=\"4. 安装协议适配器\"></a>4. 安装协议适配器</h2><p>这里用的是onebot所以直接：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install nonebot-adapter-onebot</span><br></pre></td></tr></table></figure>\n\n<p>注意一些nb adapter的操作：</p>\n<p>使用 nb-cli 命令行查看:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter list</span><br></pre></td></tr></table></figure>\n\n<p>前往<a href=\"https://nb2.baka.icu/store\">商店</a>点击复制 nb-cli 安装命令至命令行执行即可安装。</p>\n<p>或者自行输入命令安装:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install &lt;adapter-name&gt;</span><br></pre></td></tr></table></figure>\n\n<p>或者使用交互模式安装:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb adapter install</span><br></pre></td></tr></table></figure>\n\n<p>也可以使用 pip 安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install &lt;adapter-name&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-创建项目\"><a href=\"#5-创建项目\" class=\"headerlink\" title=\"5. 创建项目\"></a>5. 创建项目</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nb create</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517101751752.png\" alt=\"image-20220517101751752\"></p>\n<p>连接上远程可以看到这样一个目录结构：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102052789.png\" alt=\"image-20220517102052789\"></p>\n<h2 id=\"6-写一个测试的插件\"><a href=\"#6-写一个测试的插件\" class=\"headerlink\" title=\"6. 写一个测试的插件\"></a>6. 写一个测试的插件</h2><p>比如我想要写一个能给我发送校历的文件，可以这样：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> nonebot <span class=\"keyword\">import</span> on_command,on_startswith,on_keyword,on_message</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.rule <span class=\"keyword\">import</span> to_me</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.adapters.onebot.v11 <span class=\"keyword\">import</span> Bot, Event, MessageSegment, Message</span><br><span class=\"line\"><span class=\"comment\"># 863152457</span></span><br><span class=\"line\"></span><br><span class=\"line\">blacklist = [<span class=\"string\">&quot;768887710&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">test = on_keyword([<span class=\"string\">&quot;校历&quot;</span>],priority = <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"meta\">@test.handle()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">test_handle</span>(<span class=\"params\">bot: Bot, event: Event</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> event.message_type == <span class=\"string\">&quot;group&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> event.group_id <span class=\"keyword\">in</span> blacklist:</span><br><span class=\"line\">            <span class=\"keyword\">await</span> test.finish()</span><br><span class=\"line\">    message = MessageSegment.image(file=<span class=\"string\">&quot;https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20210908230617690.png&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> test.finish(message=message)</span><br></pre></td></tr></table></figure>\n\n<p>实现的效果如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220517102854597.png\" alt=\"image-20220517102854597\"></p>\n<p>Fine 至此环境构建成功。下一步就是写各种脚本了。</p>\n"},{"title":"nginx+nps的配置修改","date":"2022-05-17T09:12:00.000Z","author":"Lcy","_content":"\n# Nginx+Nps端口修改配置\n\n这里因为网站时80端口，同时nps又需要80端口，所以需要使用nginx进行一个转发的设置。\n\n## nps设置\n\n这里将http端口从80改到了8010。\n\n```shell\nhttp_proxy_ip=0.0.0.0\nhttp_proxy_port=8010\nhttps_proxy_port=443\nhttps_just_proxy=true\n#default https certificate setting\nhttps_default_cert_file=conf/server.pem\nhttps_default_key_file=conf/server.key\n```\n\n## nginx设置\n\n相应的，对应的nginx就可以修改如下：\n\n```shell\nuser root;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n}\n\nhttp {\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; \n\tssl_prefer_server_ciphers on;\n\n\n\taccess_log /var/log/nginx/access.log;\n\terror_log /var/log/nginx/error.log;\n\n\tgzip on;\n\tserver {\n    \t\tlisten 80;\n    \t\tserver_name *.proxy.com;\n    \t\tlocation / {\n        \t\t\tproxy_set_header Host  $http_host;\n        \t\t\tproxy_pass http://127.0.0.1:8010;\n    \t\t}\n\t}\n\tserver {\n        \t\tlisten       80;\n        \t\tserver_name  *.seujyh.cn;\n        \t\tautoindex on;\t\n        \t\troot    /root/luochengyu/HomePage/dist;\n        \t\tindex  index.html;\n        \t\tlocation /about {\n        \t\t\tindex  about.html;\n        \t\t}   \n        \t\tlocation /blog{\n\t\t\talias  /root/luochengyu/HomePage/dist/luochengyublog/public;\n        \t\t\tindex  index.html;\n       \t\t }      \n   \t }\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n\n```\n\n## nps的配置文件启动方法\n\n参考配置文件：\n\n```shell\n[common]\nserver_addr=ip:8024\nconn_type=tcp\nvkey=??\nauto_reconnection=true\nweb_username=??\nweb_password=??\ncrypt=false\ncompress=false\ndisconnect_timeout=60\n```\n\n","source":"_posts/nginx-nps的配置修改.md","raw":"---\ntitle: nginx+nps的配置修改\ndate: 2022-05-17 17:12:00\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n# Nginx+Nps端口修改配置\n\n这里因为网站时80端口，同时nps又需要80端口，所以需要使用nginx进行一个转发的设置。\n\n## nps设置\n\n这里将http端口从80改到了8010。\n\n```shell\nhttp_proxy_ip=0.0.0.0\nhttp_proxy_port=8010\nhttps_proxy_port=443\nhttps_just_proxy=true\n#default https certificate setting\nhttps_default_cert_file=conf/server.pem\nhttps_default_key_file=conf/server.key\n```\n\n## nginx设置\n\n相应的，对应的nginx就可以修改如下：\n\n```shell\nuser root;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n}\n\nhttp {\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; \n\tssl_prefer_server_ciphers on;\n\n\n\taccess_log /var/log/nginx/access.log;\n\terror_log /var/log/nginx/error.log;\n\n\tgzip on;\n\tserver {\n    \t\tlisten 80;\n    \t\tserver_name *.proxy.com;\n    \t\tlocation / {\n        \t\t\tproxy_set_header Host  $http_host;\n        \t\t\tproxy_pass http://127.0.0.1:8010;\n    \t\t}\n\t}\n\tserver {\n        \t\tlisten       80;\n        \t\tserver_name  *.seujyh.cn;\n        \t\tautoindex on;\t\n        \t\troot    /root/luochengyu/HomePage/dist;\n        \t\tindex  index.html;\n        \t\tlocation /about {\n        \t\t\tindex  about.html;\n        \t\t}   \n        \t\tlocation /blog{\n\t\t\talias  /root/luochengyu/HomePage/dist/luochengyublog/public;\n        \t\t\tindex  index.html;\n       \t\t }      \n   \t }\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n\n```\n\n## nps的配置文件启动方法\n\n参考配置文件：\n\n```shell\n[common]\nserver_addr=ip:8024\nconn_type=tcp\nvkey=??\nauto_reconnection=true\nweb_username=??\nweb_password=??\ncrypt=false\ncompress=false\ndisconnect_timeout=60\n```\n\n","slug":"nginx-nps的配置修改","published":1,"updated":"2022-07-02T15:49:59.943Z","_id":"cl3iqqero000xl0em8rhjaxnt","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Nginx-Nps端口修改配置\"><a href=\"#Nginx-Nps端口修改配置\" class=\"headerlink\" title=\"Nginx+Nps端口修改配置\"></a>Nginx+Nps端口修改配置</h1><p>这里因为网站时80端口，同时nps又需要80端口，所以需要使用nginx进行一个转发的设置。</p>\n<h2 id=\"nps设置\"><a href=\"#nps设置\" class=\"headerlink\" title=\"nps设置\"></a>nps设置</h2><div class=\"story post-story\"><p>这里将http端口从80改到了8010。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http_proxy_ip=0.0.0.0</span><br><span class=\"line\">http_proxy_port=8010</span><br><span class=\"line\">https_proxy_port=443</span><br><span class=\"line\">https_just_proxy=true</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">default https certificate setting</span></span><br><span class=\"line\">https_default_cert_file=conf/server.pem</span><br><span class=\"line\">https_default_key_file=conf/server.key</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"nginx设置\"><a href=\"#nginx设置\" class=\"headerlink\" title=\"nginx设置\"></a>nginx设置</h2><div class=\"story post-story\"><p>相应的，对应的nginx就可以修改如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user root;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\">include /etc/nginx/modules-enabled/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">\tworker_connections 768;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tsendfile on;</span><br><span class=\"line\">\ttcp_nopush on;</span><br><span class=\"line\">\ttcp_nodelay on;</span><br><span class=\"line\">\tkeepalive_timeout 65;</span><br><span class=\"line\">\ttypes_hash_max_size 2048;</span><br><span class=\"line\"></span><br><span class=\"line\">\tinclude /etc/nginx/mime.types;</span><br><span class=\"line\">\tdefault_type application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; </span><br><span class=\"line\">\tssl_prefer_server_ciphers on;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\taccess_log /var/log/nginx/access.log;</span><br><span class=\"line\">\terror_log /var/log/nginx/error.log;</span><br><span class=\"line\"></span><br><span class=\"line\">\tgzip on;</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">    \t\tlisten 80;</span><br><span class=\"line\">    \t\tserver_name *.proxy.com;</span><br><span class=\"line\">    \t\tlocation / &#123;</span><br><span class=\"line\">        \t\t\tproxy_set_header Host  $http_host;</span><br><span class=\"line\">        \t\t\tproxy_pass http://127.0.0.1:8010;</span><br><span class=\"line\">    \t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">        \t\tlisten       80;</span><br><span class=\"line\">        \t\tserver_name  *.seujyh.cn;</span><br><span class=\"line\">        \t\tautoindex on;\t</span><br><span class=\"line\">        \t\troot    /root/luochengyu/HomePage/dist;</span><br><span class=\"line\">        \t\tindex  index.html;</span><br><span class=\"line\">        \t\tlocation /about &#123;</span><br><span class=\"line\">        \t\t\tindex  about.html;</span><br><span class=\"line\">        \t\t&#125;   </span><br><span class=\"line\">        \t\tlocation /blog&#123;</span><br><span class=\"line\">\t\t\talias  /root/luochengyu/HomePage/dist/luochengyublog/public;</span><br><span class=\"line\">        \t\t\tindex  index.html;</span><br><span class=\"line\">       \t\t &#125;      </span><br><span class=\"line\">   \t &#125;</span><br><span class=\"line\">\tinclude /etc/nginx/conf.d/*.conf;</span><br><span class=\"line\">\tinclude /etc/nginx/sites-enabled/*;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"nps的配置文件启动方法\"><a href=\"#nps的配置文件启动方法\" class=\"headerlink\" title=\"nps的配置文件启动方法\"></a>nps的配置文件启动方法</h2><div class=\"story post-story\"><p>参考配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[common]</span><br><span class=\"line\">server_addr=ip:8024</span><br><span class=\"line\">conn_type=tcp</span><br><span class=\"line\">vkey=??</span><br><span class=\"line\">auto_reconnection=true</span><br><span class=\"line\">web_username=??</span><br><span class=\"line\">web_password=??</span><br><span class=\"line\">crypt=false</span><br><span class=\"line\">compress=false</span><br><span class=\"line\">disconnect_timeout=60</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Nginx-Nps端口修改配置\"><a href=\"#Nginx-Nps端口修改配置\" class=\"headerlink\" title=\"Nginx+Nps端口修改配置\"></a>Nginx+Nps端口修改配置</h1><p>这里因为网站时80端口，同时nps又需要80端口，所以需要使用nginx进行一个转发的设置。</p>\n<h2 id=\"nps设置\"><a href=\"#nps设置\" class=\"headerlink\" title=\"nps设置\"></a>nps设置</h2><p>这里将http端口从80改到了8010。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http_proxy_ip=0.0.0.0</span><br><span class=\"line\">http_proxy_port=8010</span><br><span class=\"line\">https_proxy_port=443</span><br><span class=\"line\">https_just_proxy=true</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">default https certificate setting</span></span><br><span class=\"line\">https_default_cert_file=conf/server.pem</span><br><span class=\"line\">https_default_key_file=conf/server.key</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nginx设置\"><a href=\"#nginx设置\" class=\"headerlink\" title=\"nginx设置\"></a>nginx设置</h2><p>相应的，对应的nginx就可以修改如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user root;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\">include /etc/nginx/modules-enabled/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">\tworker_connections 768;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tsendfile on;</span><br><span class=\"line\">\ttcp_nopush on;</span><br><span class=\"line\">\ttcp_nodelay on;</span><br><span class=\"line\">\tkeepalive_timeout 65;</span><br><span class=\"line\">\ttypes_hash_max_size 2048;</span><br><span class=\"line\"></span><br><span class=\"line\">\tinclude /etc/nginx/mime.types;</span><br><span class=\"line\">\tdefault_type application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; </span><br><span class=\"line\">\tssl_prefer_server_ciphers on;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\taccess_log /var/log/nginx/access.log;</span><br><span class=\"line\">\terror_log /var/log/nginx/error.log;</span><br><span class=\"line\"></span><br><span class=\"line\">\tgzip on;</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">    \t\tlisten 80;</span><br><span class=\"line\">    \t\tserver_name *.proxy.com;</span><br><span class=\"line\">    \t\tlocation / &#123;</span><br><span class=\"line\">        \t\t\tproxy_set_header Host  $http_host;</span><br><span class=\"line\">        \t\t\tproxy_pass http://127.0.0.1:8010;</span><br><span class=\"line\">    \t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">        \t\tlisten       80;</span><br><span class=\"line\">        \t\tserver_name  *.seujyh.cn;</span><br><span class=\"line\">        \t\tautoindex on;\t</span><br><span class=\"line\">        \t\troot    /root/luochengyu/HomePage/dist;</span><br><span class=\"line\">        \t\tindex  index.html;</span><br><span class=\"line\">        \t\tlocation /about &#123;</span><br><span class=\"line\">        \t\t\tindex  about.html;</span><br><span class=\"line\">        \t\t&#125;   </span><br><span class=\"line\">        \t\tlocation /blog&#123;</span><br><span class=\"line\">\t\t\talias  /root/luochengyu/HomePage/dist/luochengyublog/public;</span><br><span class=\"line\">        \t\t\tindex  index.html;</span><br><span class=\"line\">       \t\t &#125;      </span><br><span class=\"line\">   \t &#125;</span><br><span class=\"line\">\tinclude /etc/nginx/conf.d/*.conf;</span><br><span class=\"line\">\tinclude /etc/nginx/sites-enabled/*;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nps的配置文件启动方法\"><a href=\"#nps的配置文件启动方法\" class=\"headerlink\" title=\"nps的配置文件启动方法\"></a>nps的配置文件启动方法</h2><p>参考配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[common]</span><br><span class=\"line\">server_addr=ip:8024</span><br><span class=\"line\">conn_type=tcp</span><br><span class=\"line\">vkey=??</span><br><span class=\"line\">auto_reconnection=true</span><br><span class=\"line\">web_username=??</span><br><span class=\"line\">web_password=??</span><br><span class=\"line\">crypt=false</span><br><span class=\"line\">compress=false</span><br><span class=\"line\">disconnect_timeout=60</span><br></pre></td></tr></table></figure>\n\n"},{"title":"python发送post/get请求","date":"2022-05-10T08:17:13.000Z","author":"Lcy","_content":"\n# python发送post get请求\n\n通常情况下直接向网址请求直接调request包就好了，但是在某些自己写的api进行测试的时候常常有什么application/json的格式要求或者要在链接里加上参数，所以写了一个tools在这里remark一下。\n\n```python\n# tools.py\nfrom dis import dis\nfrom email import header\nfrom logging.config import stopListening\nfrom wsgiref import headers\nimport yaml\nimport os\nimport scipy.io as io\nimport numpy as np\nimport requests\n\ndef readYaml():\n    curPath = os.path.dirname(os.path.realpath(__file__))\n    yamlPath = os.path.join(curPath, \"config.yaml\")\n    with open(yamlPath, encoding='utf-8')as file:\n        content = file.read()\n\n        data = yaml.load(content, Loader=yaml.FullLoader)\n        return data\n\ndef urlConcat(ip,endpoint,baseurl,api):\n    return \"http://\"+ip+\":\"+str(endpoint)+baseurl+api\n\ndef queryUrl(baseUrl,data):\n    url = baseUrl+\"?\"\n    for i in data.keys():\n        url = url+i+\"=\" + data[i] + \"&\"\n    return url\n\nclass urlTest:\n    # 初始化urlTest类\n    def __init__(self,ip,endpoint,baseurl,api):\n        self.ip = ip\n        self.endpoint = endpoint\n        self.baseurl = baseurl\n        self.api = api\n\n    # 支持传入数据直接进行测试并返回结果\n    def testURL(self,data,contentType = \"application/json\",method = \"POST\"):\n        headers = headers = {'Content-Type': contentType}\n        testBaseURL = urlConcat(self.ip,self.endpoint,self.baseurl,self.api)\n        testQueryURL = queryUrl(baseUrl=testBaseURL,data=data)\n        print(\"正在测试\"+self.api+\"接口，发送数据：\",data,\" method = \",method)\n        if method == \"POST\":\n            res = requests.post(url=testQueryURL,data=data,headers=headers)\n        elif method == \"GET\":\n            res = requests.get(url=testQueryURL,data=data,headers=headers)\n        else: \n            return \"Wrong Method Specialized\"\n        return res\n```\n\njust给自己remark一下，没啥意义哈哈哈\n","source":"_posts/python发送post-get请求.md","raw":"---\ntitle: python发送post/get请求\ndate: 2022-05-10 16:17:13\ntags: Titanium Tech\ncategories: Titanium Tech\nauthor: Lcy\n---\n\n# python发送post get请求\n\n通常情况下直接向网址请求直接调request包就好了，但是在某些自己写的api进行测试的时候常常有什么application/json的格式要求或者要在链接里加上参数，所以写了一个tools在这里remark一下。\n\n```python\n# tools.py\nfrom dis import dis\nfrom email import header\nfrom logging.config import stopListening\nfrom wsgiref import headers\nimport yaml\nimport os\nimport scipy.io as io\nimport numpy as np\nimport requests\n\ndef readYaml():\n    curPath = os.path.dirname(os.path.realpath(__file__))\n    yamlPath = os.path.join(curPath, \"config.yaml\")\n    with open(yamlPath, encoding='utf-8')as file:\n        content = file.read()\n\n        data = yaml.load(content, Loader=yaml.FullLoader)\n        return data\n\ndef urlConcat(ip,endpoint,baseurl,api):\n    return \"http://\"+ip+\":\"+str(endpoint)+baseurl+api\n\ndef queryUrl(baseUrl,data):\n    url = baseUrl+\"?\"\n    for i in data.keys():\n        url = url+i+\"=\" + data[i] + \"&\"\n    return url\n\nclass urlTest:\n    # 初始化urlTest类\n    def __init__(self,ip,endpoint,baseurl,api):\n        self.ip = ip\n        self.endpoint = endpoint\n        self.baseurl = baseurl\n        self.api = api\n\n    # 支持传入数据直接进行测试并返回结果\n    def testURL(self,data,contentType = \"application/json\",method = \"POST\"):\n        headers = headers = {'Content-Type': contentType}\n        testBaseURL = urlConcat(self.ip,self.endpoint,self.baseurl,self.api)\n        testQueryURL = queryUrl(baseUrl=testBaseURL,data=data)\n        print(\"正在测试\"+self.api+\"接口，发送数据：\",data,\" method = \",method)\n        if method == \"POST\":\n            res = requests.post(url=testQueryURL,data=data,headers=headers)\n        elif method == \"GET\":\n            res = requests.get(url=testQueryURL,data=data,headers=headers)\n        else: \n            return \"Wrong Method Specialized\"\n        return res\n```\n\njust给自己remark一下，没啥意义哈哈哈\n","slug":"python发送post-get请求","published":1,"updated":"2022-07-02T15:49:59.943Z","_id":"cl3iqqero000zl0embw6413d7","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"python发送post-get请求\"><a href=\"#python发送post-get请求\" class=\"headerlink\" title=\"python发送post get请求\"></a>python发送post get请求</h1><p>通常情况下直接向网址请求直接调request包就好了，但是在某些自己写的api进行测试的时候常常有什么application/json的格式要求或者要在链接里加上参数，所以写了一个tools在这里remark一下。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># tools.py</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> dis <span class=\"keyword\">import</span> dis</span><br><span class=\"line\"><span class=\"keyword\">from</span> email <span class=\"keyword\">import</span> header</span><br><span class=\"line\"><span class=\"keyword\">from</span> logging.config <span class=\"keyword\">import</span> stopListening</span><br><span class=\"line\"><span class=\"keyword\">from</span> wsgiref <span class=\"keyword\">import</span> headers</span><br><span class=\"line\"><span class=\"keyword\">import</span> yaml</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> scipy.io <span class=\"keyword\">as</span> io</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">readYaml</span>():</span><br><span class=\"line\">    curPath = os.path.dirname(os.path.realpath(__file__))</span><br><span class=\"line\">    yamlPath = os.path.join(curPath, <span class=\"string\">&quot;config.yaml&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(yamlPath, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)<span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        content = file.read()</span><br><span class=\"line\"></span><br><span class=\"line\">        data = yaml.load(content, Loader=yaml.FullLoader)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">urlConcat</span>(<span class=\"params\">ip,endpoint,baseurl,api</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;http://&quot;</span>+ip+<span class=\"string\">&quot;:&quot;</span>+<span class=\"built_in\">str</span>(endpoint)+baseurl+api</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">queryUrl</span>(<span class=\"params\">baseUrl,data</span>):</span><br><span class=\"line\">    url = baseUrl+<span class=\"string\">&quot;?&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> data.keys():</span><br><span class=\"line\">        url = url+i+<span class=\"string\">&quot;=&quot;</span> + data[i] + <span class=\"string\">&quot;&amp;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> url</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">urlTest</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 初始化urlTest类</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self,ip,endpoint,baseurl,api</span>):</span><br><span class=\"line\">        self.ip = ip</span><br><span class=\"line\">        self.endpoint = endpoint</span><br><span class=\"line\">        self.baseurl = baseurl</span><br><span class=\"line\">        self.api = api</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 支持传入数据直接进行测试并返回结果</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">testURL</span>(<span class=\"params\">self,data,contentType = <span class=\"string\">&quot;application/json&quot;</span>,method = <span class=\"string\">&quot;POST&quot;</span></span>):</span><br><span class=\"line\">        headers = headers = &#123;<span class=\"string\">&#x27;Content-Type&#x27;</span>: contentType&#125;</span><br><span class=\"line\">        testBaseURL = urlConcat(self.ip,self.endpoint,self.baseurl,self.api)</span><br><span class=\"line\">        testQueryURL = queryUrl(baseUrl=testBaseURL,data=data)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;正在测试&quot;</span>+self.api+<span class=\"string\">&quot;接口，发送数据：&quot;</span>,data,<span class=\"string\">&quot; method = &quot;</span>,method)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> method == <span class=\"string\">&quot;POST&quot;</span>:</span><br><span class=\"line\">            res = requests.post(url=testQueryURL,data=data,headers=headers)</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> method == <span class=\"string\">&quot;GET&quot;</span>:</span><br><span class=\"line\">            res = requests.get(url=testQueryURL,data=data,headers=headers)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>: </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;Wrong Method Specialized&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> res</span><br></pre></td></tr></table></figure>\n\n<p>just给自己remark一下，没啥意义哈哈哈</p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"python发送post-get请求\"><a href=\"#python发送post-get请求\" class=\"headerlink\" title=\"python发送post get请求\"></a>python发送post get请求</h1><p>通常情况下直接向网址请求直接调request包就好了，但是在某些自己写的api进行测试的时候常常有什么application/json的格式要求或者要在链接里加上参数，所以写了一个tools在这里remark一下。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># tools.py</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> dis <span class=\"keyword\">import</span> dis</span><br><span class=\"line\"><span class=\"keyword\">from</span> email <span class=\"keyword\">import</span> header</span><br><span class=\"line\"><span class=\"keyword\">from</span> logging.config <span class=\"keyword\">import</span> stopListening</span><br><span class=\"line\"><span class=\"keyword\">from</span> wsgiref <span class=\"keyword\">import</span> headers</span><br><span class=\"line\"><span class=\"keyword\">import</span> yaml</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> scipy.io <span class=\"keyword\">as</span> io</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">readYaml</span>():</span><br><span class=\"line\">    curPath = os.path.dirname(os.path.realpath(__file__))</span><br><span class=\"line\">    yamlPath = os.path.join(curPath, <span class=\"string\">&quot;config.yaml&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(yamlPath, encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)<span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        content = file.read()</span><br><span class=\"line\"></span><br><span class=\"line\">        data = yaml.load(content, Loader=yaml.FullLoader)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">urlConcat</span>(<span class=\"params\">ip,endpoint,baseurl,api</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;http://&quot;</span>+ip+<span class=\"string\">&quot;:&quot;</span>+<span class=\"built_in\">str</span>(endpoint)+baseurl+api</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">queryUrl</span>(<span class=\"params\">baseUrl,data</span>):</span><br><span class=\"line\">    url = baseUrl+<span class=\"string\">&quot;?&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> data.keys():</span><br><span class=\"line\">        url = url+i+<span class=\"string\">&quot;=&quot;</span> + data[i] + <span class=\"string\">&quot;&amp;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> url</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">urlTest</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 初始化urlTest类</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self,ip,endpoint,baseurl,api</span>):</span><br><span class=\"line\">        self.ip = ip</span><br><span class=\"line\">        self.endpoint = endpoint</span><br><span class=\"line\">        self.baseurl = baseurl</span><br><span class=\"line\">        self.api = api</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 支持传入数据直接进行测试并返回结果</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">testURL</span>(<span class=\"params\">self,data,contentType = <span class=\"string\">&quot;application/json&quot;</span>,method = <span class=\"string\">&quot;POST&quot;</span></span>):</span><br><span class=\"line\">        headers = headers = &#123;<span class=\"string\">&#x27;Content-Type&#x27;</span>: contentType&#125;</span><br><span class=\"line\">        testBaseURL = urlConcat(self.ip,self.endpoint,self.baseurl,self.api)</span><br><span class=\"line\">        testQueryURL = queryUrl(baseUrl=testBaseURL,data=data)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;正在测试&quot;</span>+self.api+<span class=\"string\">&quot;接口，发送数据：&quot;</span>,data,<span class=\"string\">&quot; method = &quot;</span>,method)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> method == <span class=\"string\">&quot;POST&quot;</span>:</span><br><span class=\"line\">            res = requests.post(url=testQueryURL,data=data,headers=headers)</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> method == <span class=\"string\">&quot;GET&quot;</span>:</span><br><span class=\"line\">            res = requests.get(url=testQueryURL,data=data,headers=headers)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>: </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;Wrong Method Specialized&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> res</span><br></pre></td></tr></table></figure>\n\n<p>just给自己remark一下，没啥意义哈哈哈</p>\n"},{"title":"nginx 网站转发配置","date":"2022-05-17T06:06:54.000Z","author":"Lcy","_content":"\n```json\n#user www-data;\nuser root;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n}\n\nhttp {\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n# fastcgi\n#fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=test:10m inactive=5m;\n#fastcgi_connect_timeout 300;\n#fastcgi_send_timeout 300;\n#fastcgi_read_timeout 300;\n#fastcgi_buffer_size 64k;\n#fastcgi_buffers 4 64k;\n#fastcgi_busy_buffers_size 128k;\n#fastcgi_temp_file_write_size 128k;\n#fastcgi_cache TEST;\n#fastcgi_cache_valid 200 302 1h;\n#fastcgi_cache_valid 301 1d;\n#fastcgi_cache_valid any 1m;\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n\tssl_prefer_server_ciphers on;\n\n\n\taccess_log /var/log/nginx/access.log;\n\terror_log /var/log/nginx/error.log;\n\n\n\tgzip on;\nserver\n    {\n        listen       8081;\n        server_name  localhost;\n        location /api {\n                root   html;\n                index  index.html index.htm;\n                add_header Access-Control-Allow-Origin *;\n                add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n                add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n                if ($request_method = 'OPTIONS') {\n                        return 204;\n                }\n\t\tproxy_pass   http://127.0.0.1:8082;\n         }\n    }\nserver {\n    listen 80;\n    server_name *.proxy.com;\n    location / {\n        proxy_set_header Host  $http_host;\n        proxy_pass http://127.0.0.1:8086;\n    }\n}\n    server {\n        listen       80;\n        server_name  *.seujyh.cn;\n        autoindex on;\t\n        root    /root/Desktop/luochengyu/HomePage/dist;\n        index  index.html;\n        location /about {\n        \t#alias  /root/Desktop/luochengyu/gametheory/;\n        \tindex  about.html;\n        }   \n        location /blog{\n        \t#alias  /root/Desktop/luochengyu/HomePage/dist/lcyblog/public;\n\talias  /root/Desktop/luochengyu/HomePage/dist/luochengyublog/public;\n        \tindex  index.html;\n        }      \n    }\n    server {\n        listen       8099;\n        server_name  localhost;\n        default_type application/json;\n        add_header Access-Control-Allow-Origin $http_origin always;\n        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n        add_header Access-Control-Allow-Credentials 'true';\n        add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n\n        autoindex on;\t\n        #root    /root/Desktop/luochengyu/wordpress/;\n        root   /root/Desktop/luochengyu/typecho/;\n        location / {\n        \t\t# 这里改动了 定义首页索引文件的名称\n        \t\tindex install.php;\n        }\n\tlocation ~ \\.php$ {\n        \t\t# 设置监听端口\n        \t\t#fastcgi_pass   127.0.0.1:9000;\n\t\tfastcgi_pass unix:/var/run/php/php7.4-fpm.sock;\n        \t\t# 设置nginx的默认首页文件(上面已经设置过了，可以删除)\n        \t\tfastcgi_index  index.php;\n        \t\t# 设置脚本文件请求的路径\n        \t\tfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        \t\t# 引入fastcgi的配置文件\n        \t\tinclude        fastcgi_params;\n   \t }\n    }\n    server {\n        listen       8901;\n        server_name  localhost;\n        autoindex on;\t\n        root    /root/Desktop/luochengyu/gametheory/;\n        index analysis.html;\n    }\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n```\n\n","source":"_posts/nginx-网站转发配置.md","raw":"---\ntitle: nginx 网站转发配置\ndate: 2022-05-17 14:06:54\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n```json\n#user www-data;\nuser root;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n}\n\nhttp {\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n# fastcgi\n#fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=test:10m inactive=5m;\n#fastcgi_connect_timeout 300;\n#fastcgi_send_timeout 300;\n#fastcgi_read_timeout 300;\n#fastcgi_buffer_size 64k;\n#fastcgi_buffers 4 64k;\n#fastcgi_busy_buffers_size 128k;\n#fastcgi_temp_file_write_size 128k;\n#fastcgi_cache TEST;\n#fastcgi_cache_valid 200 302 1h;\n#fastcgi_cache_valid 301 1d;\n#fastcgi_cache_valid any 1m;\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n\tssl_prefer_server_ciphers on;\n\n\n\taccess_log /var/log/nginx/access.log;\n\terror_log /var/log/nginx/error.log;\n\n\n\tgzip on;\nserver\n    {\n        listen       8081;\n        server_name  localhost;\n        location /api {\n                root   html;\n                index  index.html index.htm;\n                add_header Access-Control-Allow-Origin *;\n                add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n                add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n                if ($request_method = 'OPTIONS') {\n                        return 204;\n                }\n\t\tproxy_pass   http://127.0.0.1:8082;\n         }\n    }\nserver {\n    listen 80;\n    server_name *.proxy.com;\n    location / {\n        proxy_set_header Host  $http_host;\n        proxy_pass http://127.0.0.1:8086;\n    }\n}\n    server {\n        listen       80;\n        server_name  *.seujyh.cn;\n        autoindex on;\t\n        root    /root/Desktop/luochengyu/HomePage/dist;\n        index  index.html;\n        location /about {\n        \t#alias  /root/Desktop/luochengyu/gametheory/;\n        \tindex  about.html;\n        }   \n        location /blog{\n        \t#alias  /root/Desktop/luochengyu/HomePage/dist/lcyblog/public;\n\talias  /root/Desktop/luochengyu/HomePage/dist/luochengyublog/public;\n        \tindex  index.html;\n        }      \n    }\n    server {\n        listen       8099;\n        server_name  localhost;\n        default_type application/json;\n        add_header Access-Control-Allow-Origin $http_origin always;\n        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n        add_header Access-Control-Allow-Credentials 'true';\n        add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n\n        autoindex on;\t\n        #root    /root/Desktop/luochengyu/wordpress/;\n        root   /root/Desktop/luochengyu/typecho/;\n        location / {\n        \t\t# 这里改动了 定义首页索引文件的名称\n        \t\tindex install.php;\n        }\n\tlocation ~ \\.php$ {\n        \t\t# 设置监听端口\n        \t\t#fastcgi_pass   127.0.0.1:9000;\n\t\tfastcgi_pass unix:/var/run/php/php7.4-fpm.sock;\n        \t\t# 设置nginx的默认首页文件(上面已经设置过了，可以删除)\n        \t\tfastcgi_index  index.php;\n        \t\t# 设置脚本文件请求的路径\n        \t\tfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        \t\t# 引入fastcgi的配置文件\n        \t\tinclude        fastcgi_params;\n   \t }\n    }\n    server {\n        listen       8901;\n        server_name  localhost;\n        autoindex on;\t\n        root    /root/Desktop/luochengyu/gametheory/;\n        index analysis.html;\n    }\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n```\n\n","slug":"nginx-网站转发配置","published":1,"updated":"2022-07-02T15:49:59.943Z","_id":"cl3iqqero0014l0emfemr4c0e","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#user www-data;</span><br><span class=\"line\">user root;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\">include /etc/nginx/modules-enabled<span class=\"comment\">/*.conf;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">events &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tworker_connections 768;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">http &#123;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tsendfile on;</span></span><br><span class=\"line\"><span class=\"comment\">\ttcp_nopush on;</span></span><br><span class=\"line\"><span class=\"comment\">\ttcp_nodelay on;</span></span><br><span class=\"line\"><span class=\"comment\">\tkeepalive_timeout 65;</span></span><br><span class=\"line\"><span class=\"comment\">\ttypes_hash_max_size 2048;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/mime.types;</span></span><br><span class=\"line\"><span class=\"comment\">\tdefault_type application/octet-stream;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"># fastcgi</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=test:10m inactive=5m;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_connect_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_send_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_read_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_buffer_size 64k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_buffers 4 64k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_busy_buffers_size 128k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_temp_file_write_size 128k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache TEST;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid 200 302 1h;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid 301 1d;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid any 1m;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE</span></span><br><span class=\"line\"><span class=\"comment\">\tssl_prefer_server_ciphers on;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\taccess_log /var/log/nginx/access.log;</span></span><br><span class=\"line\"><span class=\"comment\">\terror_log /var/log/nginx/error.log;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tgzip on;</span></span><br><span class=\"line\"><span class=\"comment\">server</span></span><br><span class=\"line\"><span class=\"comment\">    &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8081;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        location /api &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                root   html;</span></span><br><span class=\"line\"><span class=\"comment\">                index  index.html index.htm;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Origin *;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">                if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                        return 204;</span></span><br><span class=\"line\"><span class=\"comment\">                &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tproxy_pass   http://127.0.0.1:8082;</span></span><br><span class=\"line\"><span class=\"comment\">         &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    listen 80;</span></span><br><span class=\"line\"><span class=\"comment\">    server_name *.proxy.com;</span></span><br><span class=\"line\"><span class=\"comment\">    location / &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        proxy_set_header Host  $http_host;</span></span><br><span class=\"line\"><span class=\"comment\">        proxy_pass http://127.0.0.1:8086;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       80;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  *.seujyh.cn;</span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        root    /root/Desktop/luochengyu/HomePage/dist;</span></span><br><span class=\"line\"><span class=\"comment\">        index  index.html;</span></span><br><span class=\"line\"><span class=\"comment\">        location /about &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t#alias  /root/Desktop/luochengyu/gametheory/;</span></span><br><span class=\"line\"><span class=\"comment\">        \tindex  about.html;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;   </span></span><br><span class=\"line\"><span class=\"comment\">        location /blog&#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t#alias  /root/Desktop/luochengyu/HomePage/dist/lcyblog/public;</span></span><br><span class=\"line\"><span class=\"comment\">\talias  /root/Desktop/luochengyu/HomePage/dist/luochengyublog/public;</span></span><br><span class=\"line\"><span class=\"comment\">        \tindex  index.html;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;      </span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8099;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        default_type application/json;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Origin $http_origin always;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Credentials &#x27;true&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        #root    /root/Desktop/luochengyu/wordpress/;</span></span><br><span class=\"line\"><span class=\"comment\">        root   /root/Desktop/luochengyu/typecho/;</span></span><br><span class=\"line\"><span class=\"comment\">        location / &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 这里改动了 定义首页索引文件的名称</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tindex install.php;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\tlocation ~ \\.php$ &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置监听端口</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t#fastcgi_pass   127.0.0.1:9000;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tfastcgi_pass unix:/var/run/php/php7.4-fpm.sock;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置nginx的默认首页文件(上面已经设置过了，可以删除)</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tfastcgi_index  index.php;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置脚本文件请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 引入fastcgi的配置文件</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tinclude        fastcgi_params;</span></span><br><span class=\"line\"><span class=\"comment\">   \t &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8901;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        root    /root/Desktop/luochengyu/gametheory/;</span></span><br><span class=\"line\"><span class=\"comment\">        index analysis.html;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/conf.d/*.conf;</span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/sites-enabled/*;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#user www-data;</span><br><span class=\"line\">user root;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\">include /etc/nginx/modules-enabled<span class=\"comment\">/*.conf;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">events &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\tworker_connections 768;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">http &#123;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tsendfile on;</span></span><br><span class=\"line\"><span class=\"comment\">\ttcp_nopush on;</span></span><br><span class=\"line\"><span class=\"comment\">\ttcp_nodelay on;</span></span><br><span class=\"line\"><span class=\"comment\">\tkeepalive_timeout 65;</span></span><br><span class=\"line\"><span class=\"comment\">\ttypes_hash_max_size 2048;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/mime.types;</span></span><br><span class=\"line\"><span class=\"comment\">\tdefault_type application/octet-stream;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"># fastcgi</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=test:10m inactive=5m;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_connect_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_send_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_read_timeout 300;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_buffer_size 64k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_buffers 4 64k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_busy_buffers_size 128k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_temp_file_write_size 128k;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache TEST;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid 200 302 1h;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid 301 1d;</span></span><br><span class=\"line\"><span class=\"comment\">#fastcgi_cache_valid any 1m;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE</span></span><br><span class=\"line\"><span class=\"comment\">\tssl_prefer_server_ciphers on;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\taccess_log /var/log/nginx/access.log;</span></span><br><span class=\"line\"><span class=\"comment\">\terror_log /var/log/nginx/error.log;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\tgzip on;</span></span><br><span class=\"line\"><span class=\"comment\">server</span></span><br><span class=\"line\"><span class=\"comment\">    &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8081;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        location /api &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                root   html;</span></span><br><span class=\"line\"><span class=\"comment\">                index  index.html index.htm;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Origin *;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">                add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">                if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                        return 204;</span></span><br><span class=\"line\"><span class=\"comment\">                &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tproxy_pass   http://127.0.0.1:8082;</span></span><br><span class=\"line\"><span class=\"comment\">         &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    listen 80;</span></span><br><span class=\"line\"><span class=\"comment\">    server_name *.proxy.com;</span></span><br><span class=\"line\"><span class=\"comment\">    location / &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        proxy_set_header Host  $http_host;</span></span><br><span class=\"line\"><span class=\"comment\">        proxy_pass http://127.0.0.1:8086;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       80;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  *.seujyh.cn;</span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        root    /root/Desktop/luochengyu/HomePage/dist;</span></span><br><span class=\"line\"><span class=\"comment\">        index  index.html;</span></span><br><span class=\"line\"><span class=\"comment\">        location /about &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t#alias  /root/Desktop/luochengyu/gametheory/;</span></span><br><span class=\"line\"><span class=\"comment\">        \tindex  about.html;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;   </span></span><br><span class=\"line\"><span class=\"comment\">        location /blog&#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t#alias  /root/Desktop/luochengyu/HomePage/dist/lcyblog/public;</span></span><br><span class=\"line\"><span class=\"comment\">\talias  /root/Desktop/luochengyu/HomePage/dist/luochengyublog/public;</span></span><br><span class=\"line\"><span class=\"comment\">        \tindex  index.html;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;      </span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8099;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        default_type application/json;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Origin $http_origin always;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Credentials &#x27;true&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">        add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        #root    /root/Desktop/luochengyu/wordpress/;</span></span><br><span class=\"line\"><span class=\"comment\">        root   /root/Desktop/luochengyu/typecho/;</span></span><br><span class=\"line\"><span class=\"comment\">        location / &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 这里改动了 定义首页索引文件的名称</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tindex install.php;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\tlocation ~ \\.php$ &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置监听端口</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t#fastcgi_pass   127.0.0.1:9000;</span></span><br><span class=\"line\"><span class=\"comment\">\t\tfastcgi_pass unix:/var/run/php/php7.4-fpm.sock;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置nginx的默认首页文件(上面已经设置过了，可以删除)</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tfastcgi_index  index.php;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 设置脚本文件请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></span><br><span class=\"line\"><span class=\"comment\">        \t\t# 引入fastcgi的配置文件</span></span><br><span class=\"line\"><span class=\"comment\">        \t\tinclude        fastcgi_params;</span></span><br><span class=\"line\"><span class=\"comment\">   \t &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        listen       8901;</span></span><br><span class=\"line\"><span class=\"comment\">        server_name  localhost;</span></span><br><span class=\"line\"><span class=\"comment\">        autoindex on;\t</span></span><br><span class=\"line\"><span class=\"comment\">        root    /root/Desktop/luochengyu/gametheory/;</span></span><br><span class=\"line\"><span class=\"comment\">        index analysis.html;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/conf.d/*.conf;</span></span><br><span class=\"line\"><span class=\"comment\">\tinclude /etc/nginx/sites-enabled/*;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"QQ机器人搭建（二）应用案例","date":"2022-04-04T13:19:34.000Z","author":"Lcy","_content":"\n# QQ robot 协助博客部署\n\n## 博客工作流\n\n说一下我的博客工作流吧，显然可以直接编辑服务器上的博客文件或者直接传到服务器上，但是这里可以提供一个robot的应用案例。\n\n当前我的博客是在windows环境下构建的，使用了Hexo来进行博客的生成和部署，比较方便。由于这不是用wordpress等搭建的，Hexo是生成静态网页，所以对应的github上我建立了一个仓库用于存放博客的数据与代码，在本地更新博文。\n\n更新一条博文大致如此：\n\n- 更新一个Blog\n- git push到github远端仓库\n- 服务器对应目录git pull远端的改动\n\n## Robot 可以干什么？\n\nemm就是为了这个案例所以可以用部署在服务器上的robot来协助我完成远端的git pull操作，这样我就不用再去连接服务器操作了（虽然连一下并不麻烦。）\n\n## Robot 程序\n\n注：本程序基于旧版go-cqhttp，导入的库注意现在应该是nonebot.adapters.onebot.v11\n\n```python\nfrom nonebot import on_command,on_startswith\nfrom nonebot.rule import to_me\nfrom nonebot.adapters.cqhttp import Bot, Event, MessageSegment, Message\nimport os\nimport subprocess\nfrom bs4 import BeautifulSoup\nlove = on_startswith(msg=\"更新博客\", priority=2)\n\n@love.handle()\nasync def love_rev(bot: Bot, event: Event, state: dict):\n    p = subprocess.check_call([\"git\",\"pull\"], cwd='/root/Desktop/luochengyu/HomePage/dist/lcyblog')\n    if p == 0:\n        await love.finish(\"博客更新完成！\")\n    else:\n        await love.finish(\"拉取错误！\")\n```\n\n## 实现效果\n\n当给机器人发送<更新博客>命令后，robot将自动执行git pull命令并更新博客~\n\n![image-20220404211659936](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220404211659936.png)\n","source":"_posts/QQ机器人搭建（二）应用案例.md","raw":"---\ntitle: QQ机器人搭建（二）应用案例\ndate: 2022-04-04 21:19:34\ntags: QQrobot\ncategories: QQRobot\nauthor: Lcy\n\n---\n\n# QQ robot 协助博客部署\n\n## 博客工作流\n\n说一下我的博客工作流吧，显然可以直接编辑服务器上的博客文件或者直接传到服务器上，但是这里可以提供一个robot的应用案例。\n\n当前我的博客是在windows环境下构建的，使用了Hexo来进行博客的生成和部署，比较方便。由于这不是用wordpress等搭建的，Hexo是生成静态网页，所以对应的github上我建立了一个仓库用于存放博客的数据与代码，在本地更新博文。\n\n更新一条博文大致如此：\n\n- 更新一个Blog\n- git push到github远端仓库\n- 服务器对应目录git pull远端的改动\n\n## Robot 可以干什么？\n\nemm就是为了这个案例所以可以用部署在服务器上的robot来协助我完成远端的git pull操作，这样我就不用再去连接服务器操作了（虽然连一下并不麻烦。）\n\n## Robot 程序\n\n注：本程序基于旧版go-cqhttp，导入的库注意现在应该是nonebot.adapters.onebot.v11\n\n```python\nfrom nonebot import on_command,on_startswith\nfrom nonebot.rule import to_me\nfrom nonebot.adapters.cqhttp import Bot, Event, MessageSegment, Message\nimport os\nimport subprocess\nfrom bs4 import BeautifulSoup\nlove = on_startswith(msg=\"更新博客\", priority=2)\n\n@love.handle()\nasync def love_rev(bot: Bot, event: Event, state: dict):\n    p = subprocess.check_call([\"git\",\"pull\"], cwd='/root/Desktop/luochengyu/HomePage/dist/lcyblog')\n    if p == 0:\n        await love.finish(\"博客更新完成！\")\n    else:\n        await love.finish(\"拉取错误！\")\n```\n\n## 实现效果\n\n当给机器人发送<更新博客>命令后，robot将自动执行git pull命令并更新博客~\n\n![image-20220404211659936](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220404211659936.png)\n","slug":"QQ机器人搭建（二）应用案例","published":1,"updated":"2022-07-02T15:49:59.942Z","_id":"cl3iqqerp0016l0emcibbfxzu","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"QQ-robot-协助博客部署\"><a href=\"#QQ-robot-协助博客部署\" class=\"headerlink\" title=\"QQ robot 协助博客部署\"></a>QQ robot 协助博客部署</h1><h2 id=\"博客工作流\"><a href=\"#博客工作流\" class=\"headerlink\" title=\"博客工作流\"></a>博客工作流</h2><div class=\"story post-story\"><p>说一下我的博客工作流吧，显然可以直接编辑服务器上的博客文件或者直接传到服务器上，但是这里可以提供一个robot的应用案例。</p>\n<p>当前我的博客是在windows环境下构建的，使用了Hexo来进行博客的生成和部署，比较方便。由于这不是用wordpress等搭建的，Hexo是生成静态网页，所以对应的github上我建立了一个仓库用于存放博客的数据与代码，在本地更新博文。</p>\n<p>更新一条博文大致如此：</p>\n<ul>\n<li>更新一个Blog</li>\n<li>git push到github远端仓库</li>\n<li>服务器对应目录git pull远端的改动</li>\n</ul>\n</div><h2 id=\"Robot-可以干什么？\"><a href=\"#Robot-可以干什么？\" class=\"headerlink\" title=\"Robot 可以干什么？\"></a>Robot 可以干什么？</h2><div class=\"story post-story\"><p>emm就是为了这个案例所以可以用部署在服务器上的robot来协助我完成远端的git pull操作，这样我就不用再去连接服务器操作了（虽然连一下并不麻烦。）</p>\n</div><h2 id=\"Robot-程序\"><a href=\"#Robot-程序\" class=\"headerlink\" title=\"Robot 程序\"></a>Robot 程序</h2><div class=\"story post-story\"><p>注：本程序基于旧版go-cqhttp，导入的库注意现在应该是nonebot.adapters.onebot.v11</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> nonebot <span class=\"keyword\">import</span> on_command,on_startswith</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.rule <span class=\"keyword\">import</span> to_me</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.adapters.cqhttp <span class=\"keyword\">import</span> Bot, Event, MessageSegment, Message</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> subprocess</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\">love = on_startswith(msg=<span class=\"string\">&quot;更新博客&quot;</span>, priority=<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@love.handle()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">love_rev</span>(<span class=\"params\">bot: Bot, event: Event, state: <span class=\"built_in\">dict</span></span>):</span><br><span class=\"line\">    p = subprocess.check_call([<span class=\"string\">&quot;git&quot;</span>,<span class=\"string\">&quot;pull&quot;</span>], cwd=<span class=\"string\">&#x27;/root/Desktop/luochengyu/HomePage/dist/lcyblog&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> p == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> love.finish(<span class=\"string\">&quot;博客更新完成！&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> love.finish(<span class=\"string\">&quot;拉取错误！&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"实现效果\"><a href=\"#实现效果\" class=\"headerlink\" title=\"实现效果\"></a>实现效果</h2><div class=\"story post-story\"><p>当给机器人发送&lt;更新博客&gt;命令后，robot将自动执行git pull命令并更新博客~</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220404211659936.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220404211659936.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220404211659936\"></p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"QQ-robot-协助博客部署\"><a href=\"#QQ-robot-协助博客部署\" class=\"headerlink\" title=\"QQ robot 协助博客部署\"></a>QQ robot 协助博客部署</h1><h2 id=\"博客工作流\"><a href=\"#博客工作流\" class=\"headerlink\" title=\"博客工作流\"></a>博客工作流</h2><p>说一下我的博客工作流吧，显然可以直接编辑服务器上的博客文件或者直接传到服务器上，但是这里可以提供一个robot的应用案例。</p>\n<p>当前我的博客是在windows环境下构建的，使用了Hexo来进行博客的生成和部署，比较方便。由于这不是用wordpress等搭建的，Hexo是生成静态网页，所以对应的github上我建立了一个仓库用于存放博客的数据与代码，在本地更新博文。</p>\n<p>更新一条博文大致如此：</p>\n<ul>\n<li>更新一个Blog</li>\n<li>git push到github远端仓库</li>\n<li>服务器对应目录git pull远端的改动</li>\n</ul>\n<h2 id=\"Robot-可以干什么？\"><a href=\"#Robot-可以干什么？\" class=\"headerlink\" title=\"Robot 可以干什么？\"></a>Robot 可以干什么？</h2><p>emm就是为了这个案例所以可以用部署在服务器上的robot来协助我完成远端的git pull操作，这样我就不用再去连接服务器操作了（虽然连一下并不麻烦。）</p>\n<h2 id=\"Robot-程序\"><a href=\"#Robot-程序\" class=\"headerlink\" title=\"Robot 程序\"></a>Robot 程序</h2><p>注：本程序基于旧版go-cqhttp，导入的库注意现在应该是nonebot.adapters.onebot.v11</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> nonebot <span class=\"keyword\">import</span> on_command,on_startswith</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.rule <span class=\"keyword\">import</span> to_me</span><br><span class=\"line\"><span class=\"keyword\">from</span> nonebot.adapters.cqhttp <span class=\"keyword\">import</span> Bot, Event, MessageSegment, Message</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> subprocess</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\">love = on_startswith(msg=<span class=\"string\">&quot;更新博客&quot;</span>, priority=<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@love.handle()</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">def</span> <span class=\"title function_\">love_rev</span>(<span class=\"params\">bot: Bot, event: Event, state: <span class=\"built_in\">dict</span></span>):</span><br><span class=\"line\">    p = subprocess.check_call([<span class=\"string\">&quot;git&quot;</span>,<span class=\"string\">&quot;pull&quot;</span>], cwd=<span class=\"string\">&#x27;/root/Desktop/luochengyu/HomePage/dist/lcyblog&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> p == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> love.finish(<span class=\"string\">&quot;博客更新完成！&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> love.finish(<span class=\"string\">&quot;拉取错误！&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"实现效果\"><a href=\"#实现效果\" class=\"headerlink\" title=\"实现效果\"></a>实现效果</h2><p>当给机器人发送&lt;更新博客&gt;命令后，robot将自动执行git pull命令并更新博客~</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220404211659936.png\" alt=\"image-20220404211659936\"></p>\n"},{"title":"k8s token generate","date":"2022-04-08T07:58:27.000Z","author":"Lcy","_content":"\nPersonal Tips. Only for my k8s.\n\n```shell\nssh root@api.k8s-prod-hkg01.prod.bcollie.net\nkubectl get secret -n kubernetes-dashboard $(kubectl get serviceaccount kubernetes-dashboard-user -n kubernetes-dashboard -o jsonpath=\"{.secrets[0].name}\") -o jsonpath=\"{.data.token}\" | base64 --decode\n```\nWebpage：\n\nhttps://k8s-dashboard.corp.bcollie.net/#/service?namespace=default\n","source":"_posts/k8s-token-generate.md","raw":"---\ntitle: k8s token generate\ndate: 2022-04-08 15:58:27\ntags: Personal-Tips\ncategories: Titanium Tech\nauthor: Lcy\n\n---\n\nPersonal Tips. Only for my k8s.\n\n```shell\nssh root@api.k8s-prod-hkg01.prod.bcollie.net\nkubectl get secret -n kubernetes-dashboard $(kubectl get serviceaccount kubernetes-dashboard-user -n kubernetes-dashboard -o jsonpath=\"{.secrets[0].name}\") -o jsonpath=\"{.data.token}\" | base64 --decode\n```\nWebpage：\n\nhttps://k8s-dashboard.corp.bcollie.net/#/service?namespace=default\n","slug":"k8s-token-generate","published":1,"updated":"2022-07-02T15:49:59.942Z","_id":"cl3iqqerp0019l0emeuexetfu","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Personal Tips. Only for my k8s.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh root@api.k8s-prod-hkg01.prod.bcollie.net</span><br><span class=\"line\">kubectl get secret -n kubernetes-dashboard $(kubectl get serviceaccount kubernetes-dashboard-user -n kubernetes-dashboard -o jsonpath=&quot;&#123;.secrets[0].name&#125;&quot;) -o jsonpath=&quot;&#123;.data.token&#125;&quot; | base64 --decode</span><br></pre></td></tr></table></figure>\n<p>Webpage：</p>\n<p><a href=\"https://k8s-dashboard.corp.bcollie.net/#/service?namespace=default\">https://k8s-dashboard.corp.bcollie.net/#/service?namespace=default</a></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>Personal Tips. Only for my k8s.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh root@api.k8s-prod-hkg01.prod.bcollie.net</span><br><span class=\"line\">kubectl get secret -n kubernetes-dashboard $(kubectl get serviceaccount kubernetes-dashboard-user -n kubernetes-dashboard -o jsonpath=&quot;&#123;.secrets[0].name&#125;&quot;) -o jsonpath=&quot;&#123;.data.token&#125;&quot; | base64 --decode</span><br></pre></td></tr></table></figure>\n<p>Webpage：</p>\n<p><a href=\"https://k8s-dashboard.corp.bcollie.net/#/service?namespace=default\">https://k8s-dashboard.corp.bcollie.net/#/service?namespace=default</a></p>\n"},{"title":"win11 恢复原右键菜单栏","date":"2021-12-16T05:20:43.000Z","author":"Lcy","_content":"\n# Win11干掉反人类右键菜单栏\n\n实际上只是更改一下注册表表的设置\n\n1. win+x选择windows powershell 管理员\n2. 切换成旧版右键菜单栏输入：`reg add \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\\InprocServer32\" /f /ve`\n3. 切换新版`reg delete \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\" /f`\n4. ctrl+shift+esc打开任务管理器重启“windows资源管理器”\n","source":"_posts/win11-恢复原右键菜单栏.md","raw":"---\ntitle: win11 恢复原右键菜单栏\ndate: 2021-12-16 13:20:43\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n# Win11干掉反人类右键菜单栏\n\n实际上只是更改一下注册表表的设置\n\n1. win+x选择windows powershell 管理员\n2. 切换成旧版右键菜单栏输入：`reg add \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\\InprocServer32\" /f /ve`\n3. 切换新版`reg delete \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\" /f`\n4. ctrl+shift+esc打开任务管理器重启“windows资源管理器”\n","slug":"win11-恢复原右键菜单栏","published":1,"updated":"2022-07-02T15:49:59.944Z","_id":"cl3iqqers001dl0em1x8665u4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Win11干掉反人类右键菜单栏\"><a href=\"#Win11干掉反人类右键菜单栏\" class=\"headerlink\" title=\"Win11干掉反人类右键菜单栏\"></a>Win11干掉反人类右键菜单栏</h1><p>实际上只是更改一下注册表表的设置</p>\n<ol>\n<li>win+x选择windows powershell 管理员</li>\n<li>切换成旧版右键菜单栏输入：<code>reg add &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\\InprocServer32&quot; /f /ve</code></li>\n<li>切换新版<code>reg delete &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;&quot; /f</code></li>\n<li>ctrl+shift+esc打开任务管理器重启“windows资源管理器”</li>\n</ol>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Win11干掉反人类右键菜单栏\"><a href=\"#Win11干掉反人类右键菜单栏\" class=\"headerlink\" title=\"Win11干掉反人类右键菜单栏\"></a>Win11干掉反人类右键菜单栏</h1><p>实际上只是更改一下注册表表的设置</p>\n<ol>\n<li>win+x选择windows powershell 管理员</li>\n<li>切换成旧版右键菜单栏输入：<code>reg add &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\\InprocServer32&quot; /f /ve</code></li>\n<li>切换新版<code>reg delete &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;&quot; /f</code></li>\n<li>ctrl+shift+esc打开任务管理器重启“windows资源管理器”</li>\n</ol>\n"},{"title":"ubuntu 安装anaconda配置python环境","date":"2022-05-16T14:06:48.000Z","author":"Lcy","_content":"\n# Ubuntu 安装anaconda\n\n## 1.下载anaconda\n\n直接使用清华源下载anaconda\n\n```shell\nwget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh\n```\n\n## 2. 安装anaconda\n\n```shell\nbash Anaconda3-2022.05-Linux-x86_64.sh\nsource ~/.bashrc\nconda --version\n```\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220516230009483.png\" alt=\"image-20220516230009483\" style=\"zoom:90%;\" />\n\n## 3. 新建一个conda环境（可选）\n\n```shell\nconda create -n bot python==3.9\n```\n\n# 常用conda命令\n\n```shell\n#创建虚拟环境\nconda create -n your_env_name python=X.X（3.6、3.7等）\n \n#激活虚拟环境\nsource activate your_env_name(虚拟环境名称)\n \n#退出虚拟环境\nsource deactivate your_env_name(虚拟环境名称)\n \n#删除虚拟环境\nconda remove -n your_env_name(虚拟环境名称) --all\n \n#查看安装了哪些包\nconda list\n \n#安装包\nconda install package_name(包名)\nconda install scrapy==1.3 # 安装指定版本的包\nconda install -n 环境名 包名 # 在conda指定的某个环境中安装包\n \n#查看当前存在哪些虚拟环境\nconda env list \n#或 \nconda info -e\n#或\nconda info --envs\n \n#检查更新当前conda\nconda update conda\n \n#更新anaconda\nconda update anaconda\n \n#更新所有库\nconda update --all\n \n#更新python\nconda update python\n```\n\n# Reference\n\n[Ubuntu 安装 conda - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/459607806#:~:text=安装Anaconda (Linux%2FUbuntu) 1 安装Anaconda首先先得到权限，然后再使用sh进行安装。 sudo chown,-R henchli Anaconda3-2020.07-Linux-x86_64.sh sudo sh Anaconda3-2020.07-Linux-x86_64.sh按着enter看完简介之后，输…)\n","source":"_posts/ubuntu-安装anaconda配置python环境.md","raw":"---\ntitle: ubuntu 安装anaconda配置python环境\ndate: 2022-05-16 22:06:48\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n# Ubuntu 安装anaconda\n\n## 1.下载anaconda\n\n直接使用清华源下载anaconda\n\n```shell\nwget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh\n```\n\n## 2. 安装anaconda\n\n```shell\nbash Anaconda3-2022.05-Linux-x86_64.sh\nsource ~/.bashrc\nconda --version\n```\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220516230009483.png\" alt=\"image-20220516230009483\" style=\"zoom:90%;\" />\n\n## 3. 新建一个conda环境（可选）\n\n```shell\nconda create -n bot python==3.9\n```\n\n# 常用conda命令\n\n```shell\n#创建虚拟环境\nconda create -n your_env_name python=X.X（3.6、3.7等）\n \n#激活虚拟环境\nsource activate your_env_name(虚拟环境名称)\n \n#退出虚拟环境\nsource deactivate your_env_name(虚拟环境名称)\n \n#删除虚拟环境\nconda remove -n your_env_name(虚拟环境名称) --all\n \n#查看安装了哪些包\nconda list\n \n#安装包\nconda install package_name(包名)\nconda install scrapy==1.3 # 安装指定版本的包\nconda install -n 环境名 包名 # 在conda指定的某个环境中安装包\n \n#查看当前存在哪些虚拟环境\nconda env list \n#或 \nconda info -e\n#或\nconda info --envs\n \n#检查更新当前conda\nconda update conda\n \n#更新anaconda\nconda update anaconda\n \n#更新所有库\nconda update --all\n \n#更新python\nconda update python\n```\n\n# Reference\n\n[Ubuntu 安装 conda - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/459607806#:~:text=安装Anaconda (Linux%2FUbuntu) 1 安装Anaconda首先先得到权限，然后再使用sh进行安装。 sudo chown,-R henchli Anaconda3-2020.07-Linux-x86_64.sh sudo sh Anaconda3-2020.07-Linux-x86_64.sh按着enter看完简介之后，输…)\n","slug":"ubuntu-安装anaconda配置python环境","published":1,"updated":"2022-07-02T15:49:59.943Z","_id":"cl3iqqers001fl0emcqmvfpne","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Ubuntu-安装anaconda\"><a href=\"#Ubuntu-安装anaconda\" class=\"headerlink\" title=\"Ubuntu 安装anaconda\"></a>Ubuntu 安装anaconda</h1><h2 id=\"1-下载anaconda\"><a href=\"#1-下载anaconda\" class=\"headerlink\" title=\"1.下载anaconda\"></a>1.下载anaconda</h2><div class=\"story post-story\"><p>直接使用清华源下载anaconda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"2-安装anaconda\"><a href=\"#2-安装anaconda\" class=\"headerlink\" title=\"2. 安装anaconda\"></a>2. 安装anaconda</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash Anaconda3-2022.05-Linux-x86_64.sh</span><br><span class=\"line\">source ~/.bashrc</span><br><span class=\"line\">conda --version</span><br></pre></td></tr></table></figure>\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220516230009483.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220516230009483.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220516230009483\" style=\"zoom:90%;\" />\n\n</div><h2 id=\"3-新建一个conda环境（可选）\"><a href=\"#3-新建一个conda环境（可选）\" class=\"headerlink\" title=\"3. 新建一个conda环境（可选）\"></a>3. 新建一个conda环境（可选）</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n bot python==3.9</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"常用conda命令\"><a href=\"#常用conda命令\" class=\"headerlink\" title=\"常用conda命令\"></a>常用conda命令</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建虚拟环境</span></span><br><span class=\"line\">conda create -n your_env_name python=X.X（3.6、3.7等）</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">激活虚拟环境</span></span><br><span class=\"line\">source activate your_env_name(虚拟环境名称)</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">退出虚拟环境</span></span><br><span class=\"line\">source deactivate your_env_name(虚拟环境名称)</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">删除虚拟环境</span></span><br><span class=\"line\">conda remove -n your_env_name(虚拟环境名称) --all</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看安装了哪些包</span></span><br><span class=\"line\">conda list</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">安装包</span></span><br><span class=\"line\">conda install package_name(包名)</span><br><span class=\"line\">conda install scrapy==1.3 # 安装指定版本的包</span><br><span class=\"line\">conda install -n 环境名 包名 # 在conda指定的某个环境中安装包</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看当前存在哪些虚拟环境</span></span><br><span class=\"line\">conda env list </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">或</span> </span><br><span class=\"line\">conda info -e</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">或</span></span><br><span class=\"line\">conda info --envs</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">检查更新当前conda</span></span><br><span class=\"line\">conda update conda</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新anaconda</span></span><br><span class=\"line\">conda update anaconda</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新所有库</span></span><br><span class=\"line\">conda update --all</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新python</span></span><br><span class=\"line\">conda update python</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p>[Ubuntu 安装 conda - 知乎 (zhihu.com)](<a href=\"https://zhuanlan.zhihu.com/p/459607806#:~:text=%E5%AE%89%E8%A3%85Anaconda\">https://zhuanlan.zhihu.com/p/459607806#:~:text=安装Anaconda</a> (Linux%2FUbuntu) 1 安装Anaconda首先先得到权限，然后再使用sh进行安装。 sudo chown,-R henchli Anaconda3-2020.07-Linux-x86_64.sh sudo sh Anaconda3-2020.07-Linux-x86_64.sh按着enter看完简介之后，输…)</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Ubuntu-安装anaconda\"><a href=\"#Ubuntu-安装anaconda\" class=\"headerlink\" title=\"Ubuntu 安装anaconda\"></a>Ubuntu 安装anaconda</h1><h2 id=\"1-下载anaconda\"><a href=\"#1-下载anaconda\" class=\"headerlink\" title=\"1.下载anaconda\"></a>1.下载anaconda</h2><p>直接使用清华源下载anaconda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装anaconda\"><a href=\"#2-安装anaconda\" class=\"headerlink\" title=\"2. 安装anaconda\"></a>2. 安装anaconda</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash Anaconda3-2022.05-Linux-x86_64.sh</span><br><span class=\"line\">source ~/.bashrc</span><br><span class=\"line\">conda --version</span><br></pre></td></tr></table></figure>\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220516230009483.png\" alt=\"image-20220516230009483\" style=\"zoom:90%;\" />\n\n<h2 id=\"3-新建一个conda环境（可选）\"><a href=\"#3-新建一个conda环境（可选）\" class=\"headerlink\" title=\"3. 新建一个conda环境（可选）\"></a>3. 新建一个conda环境（可选）</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n bot python==3.9</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"常用conda命令\"><a href=\"#常用conda命令\" class=\"headerlink\" title=\"常用conda命令\"></a>常用conda命令</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建虚拟环境</span></span><br><span class=\"line\">conda create -n your_env_name python=X.X（3.6、3.7等）</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">激活虚拟环境</span></span><br><span class=\"line\">source activate your_env_name(虚拟环境名称)</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">退出虚拟环境</span></span><br><span class=\"line\">source deactivate your_env_name(虚拟环境名称)</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">删除虚拟环境</span></span><br><span class=\"line\">conda remove -n your_env_name(虚拟环境名称) --all</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看安装了哪些包</span></span><br><span class=\"line\">conda list</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">安装包</span></span><br><span class=\"line\">conda install package_name(包名)</span><br><span class=\"line\">conda install scrapy==1.3 # 安装指定版本的包</span><br><span class=\"line\">conda install -n 环境名 包名 # 在conda指定的某个环境中安装包</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看当前存在哪些虚拟环境</span></span><br><span class=\"line\">conda env list </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">或</span> </span><br><span class=\"line\">conda info -e</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">或</span></span><br><span class=\"line\">conda info --envs</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">检查更新当前conda</span></span><br><span class=\"line\">conda update conda</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新anaconda</span></span><br><span class=\"line\">conda update anaconda</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新所有库</span></span><br><span class=\"line\">conda update --all</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">更新python</span></span><br><span class=\"line\">conda update python</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p>[Ubuntu 安装 conda - 知乎 (zhihu.com)](<a href=\"https://zhuanlan.zhihu.com/p/459607806#:~:text=%E5%AE%89%E8%A3%85Anaconda\">https://zhuanlan.zhihu.com/p/459607806#:~:text=安装Anaconda</a> (Linux%2FUbuntu) 1 安装Anaconda首先先得到权限，然后再使用sh进行安装。 sudo chown,-R henchli Anaconda3-2020.07-Linux-x86_64.sh sudo sh Anaconda3-2020.07-Linux-x86_64.sh按着enter看完简介之后，输…)</p>\n"},{"title":"修改微软远程桌面帧率","date":"2022-05-15T05:32:47.000Z","author":"Lcy","_content":"\n## Step1\n\nwin+R进入regedit注册表\n\n## Step2\n\n找到HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations路径\n\n![image-20220515133417595](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133417595.png)\n\n## Step3\n\n新增值DWMFRAMEINTERVAL\n\n![image-20220515133542316](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133542316.png)\n\n修改为十进制15\n\n![image-20220515133530437](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133530437.png)\n\n## Step4\n\n重启电脑\n","source":"_posts/修改微软远程桌面帧率.md","raw":"---\ntitle: 修改微软远程桌面帧率\ndate: 2022-05-15 13:32:47\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n## Step1\n\nwin+R进入regedit注册表\n\n## Step2\n\n找到HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations路径\n\n![image-20220515133417595](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133417595.png)\n\n## Step3\n\n新增值DWMFRAMEINTERVAL\n\n![image-20220515133542316](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133542316.png)\n\n修改为十进制15\n\n![image-20220515133530437](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133530437.png)\n\n## Step4\n\n重启电脑\n","slug":"修改微软远程桌面帧率","published":1,"updated":"2022-07-02T15:49:59.945Z","_id":"cl3iqqert001kl0em8mvl7rbn","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Step1\"><a href=\"#Step1\" class=\"headerlink\" title=\"Step1\"></a>Step1</h2><div class=\"story post-story\"><p>win+R进入regedit注册表</p>\n</div><h2 id=\"Step2\"><a href=\"#Step2\" class=\"headerlink\" title=\"Step2\"></a>Step2</h2><div class=\"story post-story\"><p>找到HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations路径</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133417595.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133417595.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220515133417595\"></p>\n</div><h2 id=\"Step3\"><a href=\"#Step3\" class=\"headerlink\" title=\"Step3\"></a>Step3</h2><div class=\"story post-story\"><p>新增值DWMFRAMEINTERVAL</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133542316.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133542316.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220515133542316\"></p>\n<p>修改为十进制15</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133530437.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133530437.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220515133530437\"></p>\n</div><h2 id=\"Step4\"><a href=\"#Step4\" class=\"headerlink\" title=\"Step4\"></a>Step4</h2><div class=\"story post-story\"><p>重启电脑</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Step1\"><a href=\"#Step1\" class=\"headerlink\" title=\"Step1\"></a>Step1</h2><p>win+R进入regedit注册表</p>\n<h2 id=\"Step2\"><a href=\"#Step2\" class=\"headerlink\" title=\"Step2\"></a>Step2</h2><p>找到HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations路径</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133417595.png\" alt=\"image-20220515133417595\"></p>\n<h2 id=\"Step3\"><a href=\"#Step3\" class=\"headerlink\" title=\"Step3\"></a>Step3</h2><p>新增值DWMFRAMEINTERVAL</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133542316.png\" alt=\"image-20220515133542316\"></p>\n<p>修改为十进制15</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515133530437.png\" alt=\"image-20220515133530437\"></p>\n<h2 id=\"Step4\"><a href=\"#Step4\" class=\"headerlink\" title=\"Step4\"></a>Step4</h2><p>重启电脑</p>\n"},{"title":"使用Typora的PicGo-Core配置阿里云OSS图床","date":"2022-03-09T08:38:51.000Z","author":"Lcy","_content":"\n最近遇到一个比较苟的事情，PicGo可以成功的上传文件，Typora也能够自动调用PicGo，但是PicGo上传完文件后无法将链接返回，直接卡死，所以准备换PicGo-Core来配置图床。\n\n1. 选择PicGo-Core\n\n![image-20220309163258640](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/875dbfdcdce0f11684812f1627d1c5aa.png)\n\n2. 如果没有用过PicGo-Core先点击一下==下载或更新==\n3. 设置PicGo-Core的配置文件，下面给出阿里云的图床配置Config配置：\n\n```json\n{\n  \"picBed\": {\n    \"uploader\": \"aliyun\",\n    \"aliyun\": {\n      \"accessKeyId\": \"必填\",\n      \"accessKeySecret\": \"必填\",\n      \"area\": \"必填，如oss-cn-beijing\",\n      \"bucket\": \"必填\",\n      \"customUrl\": \"\",\n      \"options\": \"\",\n      \"path\": \"img/\"\n    }\n  },\n  \"picgoPlugins\": {}\n}\n```\n\n4. 验证图片上传选项\n\n![image-20220309163605968](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/8166478047f1e582848554b7f6d8c26a.png)\n\n\n\n验证成功即可~\n","source":"_posts/使用Typora的PicGo-Core配置阿里云OSS图床.md","raw":"---\ntitle: 使用Typora的PicGo-Core配置阿里云OSS图床\ndate: 2022-03-09 16:38:51\ntags: Tools\ncategories: Useful Tools\nauthor: Lcy\n\n---\n\n最近遇到一个比较苟的事情，PicGo可以成功的上传文件，Typora也能够自动调用PicGo，但是PicGo上传完文件后无法将链接返回，直接卡死，所以准备换PicGo-Core来配置图床。\n\n1. 选择PicGo-Core\n\n![image-20220309163258640](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/875dbfdcdce0f11684812f1627d1c5aa.png)\n\n2. 如果没有用过PicGo-Core先点击一下==下载或更新==\n3. 设置PicGo-Core的配置文件，下面给出阿里云的图床配置Config配置：\n\n```json\n{\n  \"picBed\": {\n    \"uploader\": \"aliyun\",\n    \"aliyun\": {\n      \"accessKeyId\": \"必填\",\n      \"accessKeySecret\": \"必填\",\n      \"area\": \"必填，如oss-cn-beijing\",\n      \"bucket\": \"必填\",\n      \"customUrl\": \"\",\n      \"options\": \"\",\n      \"path\": \"img/\"\n    }\n  },\n  \"picgoPlugins\": {}\n}\n```\n\n4. 验证图片上传选项\n\n![image-20220309163605968](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/8166478047f1e582848554b7f6d8c26a.png)\n\n\n\n验证成功即可~\n","slug":"使用Typora的PicGo-Core配置阿里云OSS图床","published":1,"updated":"2022-07-02T15:49:59.945Z","_id":"cl3iqqeru001nl0em4athhwls","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近遇到一个比较苟的事情，PicGo可以成功的上传文件，Typora也能够自动调用PicGo，但是PicGo上传完文件后无法将链接返回，直接卡死，所以准备换PicGo-Core来配置图床。</p>\n<ol>\n<li>选择PicGo-Core</li>\n</ol>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/875dbfdcdce0f11684812f1627d1c5aa.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/875dbfdcdce0f11684812f1627d1c5aa.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220309163258640\"></p>\n<ol start=\"2\">\n<li>如果没有用过PicGo-Core先点击一下==下载或更新==</li>\n<li>设置PicGo-Core的配置文件，下面给出阿里云的图床配置Config配置：</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;picBed&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;uploader&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;aliyun&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;aliyun&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;accessKeyId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;accessKeySecret&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;area&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填，如oss-cn-beijing&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;bucket&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;customUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;img/&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;picgoPlugins&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>验证图片上传选项</li>\n</ol>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/8166478047f1e582848554b7f6d8c26a.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/8166478047f1e582848554b7f6d8c26a.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220309163605968\"></p>\n<p>验证成功即可~</p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>最近遇到一个比较苟的事情，PicGo可以成功的上传文件，Typora也能够自动调用PicGo，但是PicGo上传完文件后无法将链接返回，直接卡死，所以准备换PicGo-Core来配置图床。</p>\n<ol>\n<li>选择PicGo-Core</li>\n</ol>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/875dbfdcdce0f11684812f1627d1c5aa.png\" alt=\"image-20220309163258640\"></p>\n<ol start=\"2\">\n<li>如果没有用过PicGo-Core先点击一下==下载或更新==</li>\n<li>设置PicGo-Core的配置文件，下面给出阿里云的图床配置Config配置：</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;picBed&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;uploader&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;aliyun&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;aliyun&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;accessKeyId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;accessKeySecret&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;area&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填，如oss-cn-beijing&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;bucket&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;必填&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;customUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;img/&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;picgoPlugins&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>验证图片上传选项</li>\n</ol>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/8166478047f1e582848554b7f6d8c26a.png\" alt=\"image-20220309163605968\"></p>\n<p>验证成功即可~</p>\n"},{"title":"使用nps替代向日葵","date":"2022-05-03T16:48:53.000Z","author":"Lcy","_content":"\n# Nps替代ToDesk、向日葵、TV的解决方案\n\n## 1. TV/向日葵痛点\n\n常用TV以及向日葵的同学知道，这俩好用是挺好用，但是有一些问题是很讨厌的。比如：\n\n- 远程登陆后本地的机子还是能看见屏幕上的操作\n- 多终端的适配不合适\n- 可能会限制终端数量\n\n然而Nps可以解决所有这些问题，并且他利用了微软自己的远程桌面，分辨率可以做到自适应你的屏幕，双屏？异形？手机？平板？都可以用来作远程，毫无问题。把平板变成电脑也是简简单单的事情。\n\n如何搭建自己的远程桌面呢？\n\n## 2. 拥有一台自己的公网服务器\n\n本来应该不会出现这个教程的，但是偶然看到了百度云作活动，139可以买到两年的轻量应用服务器，又是忍不住就去买了，服务器这玩意么，能干的事情太多了，139和白送没有区别！\n\n如下图：\n\n![image-20220504005637064](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504005637064.png)\n\n点击注册[百度智能云](https://console.bce.baidu.com/qualify/#/qualify/index?invitationUserCode=fmwTG6KE&campaignId=20220407_discount_time)，其实之前阿里云也有更香的但是活动早没了，薅不到了。\n\n当然如果你没有云服务器的需求，单纯想要一个非常好用的远程桌面，可以买左边更便宜的39/年的或者找我代为开个远程连接，可以给个很便宜的价格，也不用自己折腾服务器哈哈。\n\n## 3. 安装一下nps的server端\n\n本来打算说吧用docker安装，但是这边拉docker的东西有点慢，算了，直接下release来安装好了\n\n查看所有release可以去[Releases · ehang-io/nps (github.com)](https://github.com/ehang-io/nps/releases)\n\n在你自己的某个文件夹下做这个操作，比如/root/nps/\n\n```shell\n# 下载文件\nwget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz\n\n# 解压文件\ntar -xvf linux_amd64_server.tar.gz\n```\n\n之后你会看到这些文件：\n\n![image-20220504012031633](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012031633.png)\n\n在conf文件夹下的nps.conf文件夹下可以进行一些配置的更改：\n\n详细配置含义如图：\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012244835.png\" alt=\"image-20220504012244835\" style=\"zoom:50%;\" />\n\n主要你需要更改的信息如下：\n\n![image-20220504012618804](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012618804.png)\n\n至于修改用vim/xftp咋修改都行。\n\n此后执行:\n\n```shell\n./nps install\nnps start\n```\n\nnps就可以在制定端口开启一个前端的控制界面，可以在上面进行可视化操作了。\n\n![image-20220504013153041](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013153041.png)\n\n登陆后如图：\n\n![image-20220504013224729](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013224729.png)\n\n## 4. 配置client客户端\n\n首先在管理界面里进行一个客户端新增\n\n![image-20220504014950059](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504014950059.png)\n\n请记住你的**唯一验证密钥**。\n\n![image-20220504020946893](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504020946893.png)\n\n同时，新建一个tcp隧道：\n\n![image-20220504022156187](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504022156187.png)\n\n注意这里的客户端ID与上图中的ID保持一致。\n\nwindows可在[下载链接](https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz)下载client或者找合适的release自行下载。\n\n解压文件并以管理员身份运行cmd\n\n![image-20220504021103309](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021103309.png)\n\n输入`npc.exe -server=你的服务器ip+客户端连接端口 -vkey=你设置的唯一密钥 -type=tcp`\n\n![image-20220504021308980](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021308980.png)\n\n至此全部配置完毕。\n\n## 5. 连接\n\nwindows电脑连接直接使用电脑自带的远程桌面连接即可，这里的端口号就是你在配置TCP隧道时候自己设置的服务端口：\n\n![image-20220504021455286](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021455286.png)\n\n手机平板等下载RDclient进行连接即可。\n\n![image-20220504021550909](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021550909.png)\n\n## Tips\n\n肯定有人问80和443端口为什么被占用了，这个不用担心，默认配置用的是这俩端口，可以配合nginx进行更改的，有这个烦恼的看下文档也知道怎么弄了。\n\n# Reference\n\n[取代Teamviewer：NPS内网穿透小教程 - 硬核小站 (exhard.cn)](http://exhard.cn/wordpress/?p=324)\n","source":"_posts/使用nps替代向日葵.md","raw":"---\ntitle: 使用nps替代向日葵\ndate: 2022-05-04 00:48:53\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n# Nps替代ToDesk、向日葵、TV的解决方案\n\n## 1. TV/向日葵痛点\n\n常用TV以及向日葵的同学知道，这俩好用是挺好用，但是有一些问题是很讨厌的。比如：\n\n- 远程登陆后本地的机子还是能看见屏幕上的操作\n- 多终端的适配不合适\n- 可能会限制终端数量\n\n然而Nps可以解决所有这些问题，并且他利用了微软自己的远程桌面，分辨率可以做到自适应你的屏幕，双屏？异形？手机？平板？都可以用来作远程，毫无问题。把平板变成电脑也是简简单单的事情。\n\n如何搭建自己的远程桌面呢？\n\n## 2. 拥有一台自己的公网服务器\n\n本来应该不会出现这个教程的，但是偶然看到了百度云作活动，139可以买到两年的轻量应用服务器，又是忍不住就去买了，服务器这玩意么，能干的事情太多了，139和白送没有区别！\n\n如下图：\n\n![image-20220504005637064](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504005637064.png)\n\n点击注册[百度智能云](https://console.bce.baidu.com/qualify/#/qualify/index?invitationUserCode=fmwTG6KE&campaignId=20220407_discount_time)，其实之前阿里云也有更香的但是活动早没了，薅不到了。\n\n当然如果你没有云服务器的需求，单纯想要一个非常好用的远程桌面，可以买左边更便宜的39/年的或者找我代为开个远程连接，可以给个很便宜的价格，也不用自己折腾服务器哈哈。\n\n## 3. 安装一下nps的server端\n\n本来打算说吧用docker安装，但是这边拉docker的东西有点慢，算了，直接下release来安装好了\n\n查看所有release可以去[Releases · ehang-io/nps (github.com)](https://github.com/ehang-io/nps/releases)\n\n在你自己的某个文件夹下做这个操作，比如/root/nps/\n\n```shell\n# 下载文件\nwget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz\n\n# 解压文件\ntar -xvf linux_amd64_server.tar.gz\n```\n\n之后你会看到这些文件：\n\n![image-20220504012031633](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012031633.png)\n\n在conf文件夹下的nps.conf文件夹下可以进行一些配置的更改：\n\n详细配置含义如图：\n\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012244835.png\" alt=\"image-20220504012244835\" style=\"zoom:50%;\" />\n\n主要你需要更改的信息如下：\n\n![image-20220504012618804](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012618804.png)\n\n至于修改用vim/xftp咋修改都行。\n\n此后执行:\n\n```shell\n./nps install\nnps start\n```\n\nnps就可以在制定端口开启一个前端的控制界面，可以在上面进行可视化操作了。\n\n![image-20220504013153041](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013153041.png)\n\n登陆后如图：\n\n![image-20220504013224729](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013224729.png)\n\n## 4. 配置client客户端\n\n首先在管理界面里进行一个客户端新增\n\n![image-20220504014950059](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504014950059.png)\n\n请记住你的**唯一验证密钥**。\n\n![image-20220504020946893](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504020946893.png)\n\n同时，新建一个tcp隧道：\n\n![image-20220504022156187](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504022156187.png)\n\n注意这里的客户端ID与上图中的ID保持一致。\n\nwindows可在[下载链接](https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz)下载client或者找合适的release自行下载。\n\n解压文件并以管理员身份运行cmd\n\n![image-20220504021103309](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021103309.png)\n\n输入`npc.exe -server=你的服务器ip+客户端连接端口 -vkey=你设置的唯一密钥 -type=tcp`\n\n![image-20220504021308980](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021308980.png)\n\n至此全部配置完毕。\n\n## 5. 连接\n\nwindows电脑连接直接使用电脑自带的远程桌面连接即可，这里的端口号就是你在配置TCP隧道时候自己设置的服务端口：\n\n![image-20220504021455286](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021455286.png)\n\n手机平板等下载RDclient进行连接即可。\n\n![image-20220504021550909](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021550909.png)\n\n## Tips\n\n肯定有人问80和443端口为什么被占用了，这个不用担心，默认配置用的是这俩端口，可以配合nginx进行更改的，有这个烦恼的看下文档也知道怎么弄了。\n\n# Reference\n\n[取代Teamviewer：NPS内网穿透小教程 - 硬核小站 (exhard.cn)](http://exhard.cn/wordpress/?p=324)\n","slug":"使用nps替代向日葵","published":1,"updated":"2022-07-02T15:49:59.945Z","_id":"cl3iqqerv001sl0em5ak1e7hq","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Nps替代ToDesk、向日葵、TV的解决方案\"><a href=\"#Nps替代ToDesk、向日葵、TV的解决方案\" class=\"headerlink\" title=\"Nps替代ToDesk、向日葵、TV的解决方案\"></a>Nps替代ToDesk、向日葵、TV的解决方案</h1><h2 id=\"1-TV-向日葵痛点\"><a href=\"#1-TV-向日葵痛点\" class=\"headerlink\" title=\"1. TV/向日葵痛点\"></a>1. TV/向日葵痛点</h2><div class=\"story post-story\"><p>常用TV以及向日葵的同学知道，这俩好用是挺好用，但是有一些问题是很讨厌的。比如：</p>\n<ul>\n<li>远程登陆后本地的机子还是能看见屏幕上的操作</li>\n<li>多终端的适配不合适</li>\n<li>可能会限制终端数量</li>\n</ul>\n<p>然而Nps可以解决所有这些问题，并且他利用了微软自己的远程桌面，分辨率可以做到自适应你的屏幕，双屏？异形？手机？平板？都可以用来作远程，毫无问题。把平板变成电脑也是简简单单的事情。</p>\n<p>如何搭建自己的远程桌面呢？</p>\n</div><h2 id=\"2-拥有一台自己的公网服务器\"><a href=\"#2-拥有一台自己的公网服务器\" class=\"headerlink\" title=\"2. 拥有一台自己的公网服务器\"></a>2. 拥有一台自己的公网服务器</h2><div class=\"story post-story\"><p>本来应该不会出现这个教程的，但是偶然看到了百度云作活动，139可以买到两年的轻量应用服务器，又是忍不住就去买了，服务器这玩意么，能干的事情太多了，139和白送没有区别！</p>\n<p>如下图：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504005637064.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504005637064.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504005637064\"></p>\n<p>点击注册<a href=\"https://console.bce.baidu.com/qualify/#/qualify/index?invitationUserCode=fmwTG6KE&campaignId=20220407_discount_time\">百度智能云</a>，其实之前阿里云也有更香的但是活动早没了，薅不到了。</p>\n<p>当然如果你没有云服务器的需求，单纯想要一个非常好用的远程桌面，可以买左边更便宜的39/年的或者找我代为开个远程连接，可以给个很便宜的价格，也不用自己折腾服务器哈哈。</p>\n</div><h2 id=\"3-安装一下nps的server端\"><a href=\"#3-安装一下nps的server端\" class=\"headerlink\" title=\"3. 安装一下nps的server端\"></a>3. 安装一下nps的server端</h2><div class=\"story post-story\"><p>本来打算说吧用docker安装，但是这边拉docker的东西有点慢，算了，直接下release来安装好了</p>\n<p>查看所有release可以去<a href=\"https://github.com/ehang-io/nps/releases\">Releases · ehang-io/nps (github.com)</a></p>\n<p>在你自己的某个文件夹下做这个操作，比如/root/nps/</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载文件</span></span><br><span class=\"line\">wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压文件</span></span><br><span class=\"line\">tar -xvf linux_amd64_server.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>之后你会看到这些文件：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012031633.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012031633.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504012031633\"></p>\n<p>在conf文件夹下的nps.conf文件夹下可以进行一些配置的更改：</p>\n<p>详细配置含义如图：</p>\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012244835.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012244835.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504012244835\" style=\"zoom:50%;\" />\n\n<p>主要你需要更改的信息如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012618804.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012618804.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504012618804\"></p>\n<p>至于修改用vim/xftp咋修改都行。</p>\n<p>此后执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./nps install</span><br><span class=\"line\">nps start</span><br></pre></td></tr></table></figure>\n\n<p>nps就可以在制定端口开启一个前端的控制界面，可以在上面进行可视化操作了。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013153041.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013153041.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504013153041\"></p>\n<p>登陆后如图：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013224729.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013224729.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504013224729\"></p>\n</div><h2 id=\"4-配置client客户端\"><a href=\"#4-配置client客户端\" class=\"headerlink\" title=\"4. 配置client客户端\"></a>4. 配置client客户端</h2><div class=\"story post-story\"><p>首先在管理界面里进行一个客户端新增</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504014950059.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504014950059.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504014950059\"></p>\n<p>请记住你的<strong>唯一验证密钥</strong>。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504020946893.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504020946893.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504020946893\"></p>\n<p>同时，新建一个tcp隧道：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504022156187.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504022156187.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504022156187\"></p>\n<p>注意这里的客户端ID与上图中的ID保持一致。</p>\n<p>windows可在<a href=\"https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz\">下载链接</a>下载client或者找合适的release自行下载。</p>\n<p>解压文件并以管理员身份运行cmd</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021103309.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021103309.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504021103309\"></p>\n<p>输入<code>npc.exe -server=你的服务器ip+客户端连接端口 -vkey=你设置的唯一密钥 -type=tcp</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021308980.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021308980.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504021308980\"></p>\n<p>至此全部配置完毕。</p>\n</div><h2 id=\"5-连接\"><a href=\"#5-连接\" class=\"headerlink\" title=\"5. 连接\"></a>5. 连接</h2><div class=\"story post-story\"><p>windows电脑连接直接使用电脑自带的远程桌面连接即可，这里的端口号就是你在配置TCP隧道时候自己设置的服务端口：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021455286.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021455286.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504021455286\"></p>\n<p>手机平板等下载RDclient进行连接即可。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021550909.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021550909.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220504021550909\"></p>\n</div><h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h2><div class=\"story post-story\"><p>肯定有人问80和443端口为什么被占用了，这个不用担心，默认配置用的是这俩端口，可以配合nginx进行更改的，有这个烦恼的看下文档也知道怎么弄了。</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p><a href=\"http://exhard.cn/wordpress/?p=324\">取代Teamviewer：NPS内网穿透小教程 - 硬核小站 (exhard.cn)</a></p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Nps替代ToDesk、向日葵、TV的解决方案\"><a href=\"#Nps替代ToDesk、向日葵、TV的解决方案\" class=\"headerlink\" title=\"Nps替代ToDesk、向日葵、TV的解决方案\"></a>Nps替代ToDesk、向日葵、TV的解决方案</h1><h2 id=\"1-TV-向日葵痛点\"><a href=\"#1-TV-向日葵痛点\" class=\"headerlink\" title=\"1. TV/向日葵痛点\"></a>1. TV/向日葵痛点</h2><p>常用TV以及向日葵的同学知道，这俩好用是挺好用，但是有一些问题是很讨厌的。比如：</p>\n<ul>\n<li>远程登陆后本地的机子还是能看见屏幕上的操作</li>\n<li>多终端的适配不合适</li>\n<li>可能会限制终端数量</li>\n</ul>\n<p>然而Nps可以解决所有这些问题，并且他利用了微软自己的远程桌面，分辨率可以做到自适应你的屏幕，双屏？异形？手机？平板？都可以用来作远程，毫无问题。把平板变成电脑也是简简单单的事情。</p>\n<p>如何搭建自己的远程桌面呢？</p>\n<h2 id=\"2-拥有一台自己的公网服务器\"><a href=\"#2-拥有一台自己的公网服务器\" class=\"headerlink\" title=\"2. 拥有一台自己的公网服务器\"></a>2. 拥有一台自己的公网服务器</h2><p>本来应该不会出现这个教程的，但是偶然看到了百度云作活动，139可以买到两年的轻量应用服务器，又是忍不住就去买了，服务器这玩意么，能干的事情太多了，139和白送没有区别！</p>\n<p>如下图：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504005637064.png\" alt=\"image-20220504005637064\"></p>\n<p>点击注册<a href=\"https://console.bce.baidu.com/qualify/#/qualify/index?invitationUserCode=fmwTG6KE&campaignId=20220407_discount_time\">百度智能云</a>，其实之前阿里云也有更香的但是活动早没了，薅不到了。</p>\n<p>当然如果你没有云服务器的需求，单纯想要一个非常好用的远程桌面，可以买左边更便宜的39/年的或者找我代为开个远程连接，可以给个很便宜的价格，也不用自己折腾服务器哈哈。</p>\n<h2 id=\"3-安装一下nps的server端\"><a href=\"#3-安装一下nps的server端\" class=\"headerlink\" title=\"3. 安装一下nps的server端\"></a>3. 安装一下nps的server端</h2><p>本来打算说吧用docker安装，但是这边拉docker的东西有点慢，算了，直接下release来安装好了</p>\n<p>查看所有release可以去<a href=\"https://github.com/ehang-io/nps/releases\">Releases · ehang-io/nps (github.com)</a></p>\n<p>在你自己的某个文件夹下做这个操作，比如/root/nps/</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载文件</span></span><br><span class=\"line\">wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压文件</span></span><br><span class=\"line\">tar -xvf linux_amd64_server.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>之后你会看到这些文件：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012031633.png\" alt=\"image-20220504012031633\"></p>\n<p>在conf文件夹下的nps.conf文件夹下可以进行一些配置的更改：</p>\n<p>详细配置含义如图：</p>\n<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012244835.png\" alt=\"image-20220504012244835\" style=\"zoom:50%;\" />\n\n<p>主要你需要更改的信息如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504012618804.png\" alt=\"image-20220504012618804\"></p>\n<p>至于修改用vim/xftp咋修改都行。</p>\n<p>此后执行:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./nps install</span><br><span class=\"line\">nps start</span><br></pre></td></tr></table></figure>\n\n<p>nps就可以在制定端口开启一个前端的控制界面，可以在上面进行可视化操作了。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013153041.png\" alt=\"image-20220504013153041\"></p>\n<p>登陆后如图：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504013224729.png\" alt=\"image-20220504013224729\"></p>\n<h2 id=\"4-配置client客户端\"><a href=\"#4-配置client客户端\" class=\"headerlink\" title=\"4. 配置client客户端\"></a>4. 配置client客户端</h2><p>首先在管理界面里进行一个客户端新增</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504014950059.png\" alt=\"image-20220504014950059\"></p>\n<p>请记住你的<strong>唯一验证密钥</strong>。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504020946893.png\" alt=\"image-20220504020946893\"></p>\n<p>同时，新建一个tcp隧道：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504022156187.png\" alt=\"image-20220504022156187\"></p>\n<p>注意这里的客户端ID与上图中的ID保持一致。</p>\n<p>windows可在<a href=\"https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz\">下载链接</a>下载client或者找合适的release自行下载。</p>\n<p>解压文件并以管理员身份运行cmd</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021103309.png\" alt=\"image-20220504021103309\"></p>\n<p>输入<code>npc.exe -server=你的服务器ip+客户端连接端口 -vkey=你设置的唯一密钥 -type=tcp</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021308980.png\" alt=\"image-20220504021308980\"></p>\n<p>至此全部配置完毕。</p>\n<h2 id=\"5-连接\"><a href=\"#5-连接\" class=\"headerlink\" title=\"5. 连接\"></a>5. 连接</h2><p>windows电脑连接直接使用电脑自带的远程桌面连接即可，这里的端口号就是你在配置TCP隧道时候自己设置的服务端口：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021455286.png\" alt=\"image-20220504021455286\"></p>\n<p>手机平板等下载RDclient进行连接即可。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220504021550909.png\" alt=\"image-20220504021550909\"></p>\n<h2 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h2><p>肯定有人问80和443端口为什么被占用了，这个不用担心，默认配置用的是这俩端口，可以配合nginx进行更改的，有这个烦恼的看下文档也知道怎么弄了。</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p><a href=\"http://exhard.cn/wordpress/?p=324\">取代Teamviewer：NPS内网穿透小教程 - 硬核小站 (exhard.cn)</a></p>\n"},{"title":"在Pypi上上传Lcyutils包","date":"2022-05-19T08:42:49.000Z","author":"Lcy","_content":"\n\n\n\n\n最近写了一个自己的工具库，现在实现的是两个功能，一个是可以调用给我发邮件 ，另一个是通过1794957373的QQ号通过简单调用一个python函数来进行一个QQ消息的推送。\n\n## lcyutils包\n\n先来自我介绍一下自己的这个包，主要介绍一下QQ消息的反推功能。\n\n当前仅仅在lcyutils.qqmessage模块里提供了一个消息的发送接口lcy_message\n\n比如这样调用：\n\n```python\nimport lcyutils.qqmessage as qq\nqq.lcy_qqmessage(qq=\"1157***882就是你的QQ\",message = \"来一条测试消息~\")\n```\n\n然后你就可以在QQ上接受到他给你发送的消息：\n\n![image-20220520104023056](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220520104023056.png)\n\n这个lcy_message函数有两个参数：\n\n- qq：你接受消息推送的QQ号\n- message：你想要发送的消息，一个string格式的字符串\n\n## QQ消息推送的实现\n\n这个实现其实毕竟利用到了QQ机器人，所以借助了我在服务器上跑的一个QQ机器人。\n\n![image-20220529011909893](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220529011909893.png)\n\n大致是这样一个流程，主要使用了go-cqhttp协议。\n\n## TODO:\n\n显然这里呢有一系列的问题，不管是传包时候的问题还是我自己写包时候的问题都有很多问题。这里总结一下希望有空能够一个个fix：\n\n- pypi上的包的setup没有处理过包依赖的问题（Fixed）\n- 设置消息token/转移后端端口（未解决）\n- qqmessage支持更多的消息格式，图片/文件等（未解决，已更新链接图片发送）\n- 包的结构需要调整，以及需要调整git的流程保证我这边开发和github以及包生成的一致性（未解决）\n- 支持更多的工具（未解决）\n\n## 上传\n\n### setup编写\n\n```python\n#!/usr/bin/env python\n# coding=utf-8\n\nfrom distutils.core import setup\nfrom setuptools import find_packages\n\nwith open(\"README.md\", \"r\",encoding=\"utf-8\") as f:\n  long_description = f.read()\n\nsetup(\n    name=\"lcyutils\",   # python包的名字\n    version=\"0.0.3\",                # 版本号\n    description='LCY Personal Tools',           # 描述\n    long_description=long_description,                  # 详细描述，这里将readme的内容放置于此\n    author='luochengyu',                                      # 作者\n    author_email='luochengyu1317@163.com',              # 作者邮箱\n    maintainer='luochengyu',                               # 维护人\n    maintainer_email='luochengyu1317@163.com',       # 维护人邮箱\n    license='MIT License',                                    # 遵守协议\n    packages=find_packages(),\n    install_requires=[                                               # lamb-common依赖的第三方库\n      'requests>=2.26.0',\n    ],\n    platforms=[\"all\"],                                                # 支持的平台\n    url='https://github.com/lcy1317/lcytools',          # github代码仓地址\n    classifiers=[\n        \"Programming Language :: Python :: 3\",\n        \"License :: OSI Approved :: MIT License\",\n        \"Operating System :: OS Independent\",\n    ],\n    python_requires='>=3.6',    #对python的最低版本要求\n)\n```\n\n\n\n根据setup.py生成包\n\n```shell\npython setup.py sdist bdist_wheel\n```\n\n上传\n\n```shell\ntwine upload dist/*\n```\n\n安装\n\n```shell\npip install lcyutils==0.0.3 -i https://pypi.python.org/simple\n```\n\n","source":"_posts/在Pypi上上传Lcyutils包.md","raw":"---\ntitle: 在Pypi上上传Lcyutils包\ndate: 2022-05-19 16:42:49\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n\n\n\n\n最近写了一个自己的工具库，现在实现的是两个功能，一个是可以调用给我发邮件 ，另一个是通过1794957373的QQ号通过简单调用一个python函数来进行一个QQ消息的推送。\n\n## lcyutils包\n\n先来自我介绍一下自己的这个包，主要介绍一下QQ消息的反推功能。\n\n当前仅仅在lcyutils.qqmessage模块里提供了一个消息的发送接口lcy_message\n\n比如这样调用：\n\n```python\nimport lcyutils.qqmessage as qq\nqq.lcy_qqmessage(qq=\"1157***882就是你的QQ\",message = \"来一条测试消息~\")\n```\n\n然后你就可以在QQ上接受到他给你发送的消息：\n\n![image-20220520104023056](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220520104023056.png)\n\n这个lcy_message函数有两个参数：\n\n- qq：你接受消息推送的QQ号\n- message：你想要发送的消息，一个string格式的字符串\n\n## QQ消息推送的实现\n\n这个实现其实毕竟利用到了QQ机器人，所以借助了我在服务器上跑的一个QQ机器人。\n\n![image-20220529011909893](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220529011909893.png)\n\n大致是这样一个流程，主要使用了go-cqhttp协议。\n\n## TODO:\n\n显然这里呢有一系列的问题，不管是传包时候的问题还是我自己写包时候的问题都有很多问题。这里总结一下希望有空能够一个个fix：\n\n- pypi上的包的setup没有处理过包依赖的问题（Fixed）\n- 设置消息token/转移后端端口（未解决）\n- qqmessage支持更多的消息格式，图片/文件等（未解决，已更新链接图片发送）\n- 包的结构需要调整，以及需要调整git的流程保证我这边开发和github以及包生成的一致性（未解决）\n- 支持更多的工具（未解决）\n\n## 上传\n\n### setup编写\n\n```python\n#!/usr/bin/env python\n# coding=utf-8\n\nfrom distutils.core import setup\nfrom setuptools import find_packages\n\nwith open(\"README.md\", \"r\",encoding=\"utf-8\") as f:\n  long_description = f.read()\n\nsetup(\n    name=\"lcyutils\",   # python包的名字\n    version=\"0.0.3\",                # 版本号\n    description='LCY Personal Tools',           # 描述\n    long_description=long_description,                  # 详细描述，这里将readme的内容放置于此\n    author='luochengyu',                                      # 作者\n    author_email='luochengyu1317@163.com',              # 作者邮箱\n    maintainer='luochengyu',                               # 维护人\n    maintainer_email='luochengyu1317@163.com',       # 维护人邮箱\n    license='MIT License',                                    # 遵守协议\n    packages=find_packages(),\n    install_requires=[                                               # lamb-common依赖的第三方库\n      'requests>=2.26.0',\n    ],\n    platforms=[\"all\"],                                                # 支持的平台\n    url='https://github.com/lcy1317/lcytools',          # github代码仓地址\n    classifiers=[\n        \"Programming Language :: Python :: 3\",\n        \"License :: OSI Approved :: MIT License\",\n        \"Operating System :: OS Independent\",\n    ],\n    python_requires='>=3.6',    #对python的最低版本要求\n)\n```\n\n\n\n根据setup.py生成包\n\n```shell\npython setup.py sdist bdist_wheel\n```\n\n上传\n\n```shell\ntwine upload dist/*\n```\n\n安装\n\n```shell\npip install lcyutils==0.0.3 -i https://pypi.python.org/simple\n```\n\n","slug":"在Pypi上上传Lcyutils包","published":1,"updated":"2022-07-02T15:49:59.946Z","_id":"cl3iqqerw001ul0emawet92wr","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近写了一个自己的工具库，现在实现的是两个功能，一个是可以调用给我发邮件 ，另一个是通过1794957373的QQ号通过简单调用一个python函数来进行一个QQ消息的推送。</p>\n<h2 id=\"lcyutils包\"><a href=\"#lcyutils包\" class=\"headerlink\" title=\"lcyutils包\"></a>lcyutils包</h2><div class=\"story post-story\"><p>先来自我介绍一下自己的这个包，主要介绍一下QQ消息的反推功能。</p>\n<p>当前仅仅在lcyutils.qqmessage模块里提供了一个消息的发送接口lcy_message</p>\n<p>比如这样调用：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lcyutils.qqmessage <span class=\"keyword\">as</span> qq</span><br><span class=\"line\">qq.lcy_qqmessage(qq=<span class=\"string\">&quot;1157***882就是你的QQ&quot;</span>,message = <span class=\"string\">&quot;来一条测试消息~&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>然后你就可以在QQ上接受到他给你发送的消息：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220520104023056.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220520104023056.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220520104023056\"></p>\n<p>这个lcy_message函数有两个参数：</p>\n<ul>\n<li>qq：你接受消息推送的QQ号</li>\n<li>message：你想要发送的消息，一个string格式的字符串</li>\n</ul>\n</div><h2 id=\"QQ消息推送的实现\"><a href=\"#QQ消息推送的实现\" class=\"headerlink\" title=\"QQ消息推送的实现\"></a>QQ消息推送的实现</h2><div class=\"story post-story\"><p>这个实现其实毕竟利用到了QQ机器人，所以借助了我在服务器上跑的一个QQ机器人。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220529011909893.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220529011909893.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220529011909893\"></p>\n<p>大致是这样一个流程，主要使用了go-cqhttp协议。</p>\n</div><h2 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO:\"></a>TODO:</h2><div class=\"story post-story\"><p>显然这里呢有一系列的问题，不管是传包时候的问题还是我自己写包时候的问题都有很多问题。这里总结一下希望有空能够一个个fix：</p>\n<ul>\n<li>pypi上的包的setup没有处理过包依赖的问题（Fixed）</li>\n<li>设置消息token/转移后端端口（未解决）</li>\n<li>qqmessage支持更多的消息格式，图片/文件等（未解决，已更新链接图片发送）</li>\n<li>包的结构需要调整，以及需要调整git的流程保证我这边开发和github以及包生成的一致性（未解决）</li>\n<li>支持更多的工具（未解决）</li>\n</ul>\n</div><h2 id=\"上传\"><a href=\"#上传\" class=\"headerlink\" title=\"上传\"></a>上传</h2><div class=\"story post-story\"><h3 id=\"setup编写\"><a href=\"#setup编写\" class=\"headerlink\" title=\"setup编写\"></a>setup编写</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># coding=utf-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> distutils.core <span class=\"keyword\">import</span> setup</span><br><span class=\"line\"><span class=\"keyword\">from</span> setuptools <span class=\"keyword\">import</span> find_packages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&quot;README.md&quot;</span>, <span class=\"string\">&quot;r&quot;</span>,encoding=<span class=\"string\">&quot;utf-8&quot;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">  long_description = f.read()</span><br><span class=\"line\"></span><br><span class=\"line\">setup(</span><br><span class=\"line\">    name=<span class=\"string\">&quot;lcyutils&quot;</span>,   <span class=\"comment\"># python包的名字</span></span><br><span class=\"line\">    version=<span class=\"string\">&quot;0.0.3&quot;</span>,                <span class=\"comment\"># 版本号</span></span><br><span class=\"line\">    description=<span class=\"string\">&#x27;LCY Personal Tools&#x27;</span>,           <span class=\"comment\"># 描述</span></span><br><span class=\"line\">    long_description=long_description,                  <span class=\"comment\"># 详细描述，这里将readme的内容放置于此</span></span><br><span class=\"line\">    author=<span class=\"string\">&#x27;luochengyu&#x27;</span>,                                      <span class=\"comment\"># 作者</span></span><br><span class=\"line\">    author_email=<span class=\"string\">&#x27;luochengyu1317@163.com&#x27;</span>,              <span class=\"comment\"># 作者邮箱</span></span><br><span class=\"line\">    maintainer=<span class=\"string\">&#x27;luochengyu&#x27;</span>,                               <span class=\"comment\"># 维护人</span></span><br><span class=\"line\">    maintainer_email=<span class=\"string\">&#x27;luochengyu1317@163.com&#x27;</span>,       <span class=\"comment\"># 维护人邮箱</span></span><br><span class=\"line\">    license=<span class=\"string\">&#x27;MIT License&#x27;</span>,                                    <span class=\"comment\"># 遵守协议</span></span><br><span class=\"line\">    packages=find_packages(),</span><br><span class=\"line\">    install_requires=[                                               <span class=\"comment\"># lamb-common依赖的第三方库</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;requests&gt;=2.26.0&#x27;</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    platforms=[<span class=\"string\">&quot;all&quot;</span>],                                                <span class=\"comment\"># 支持的平台</span></span><br><span class=\"line\">    url=<span class=\"string\">&#x27;https://github.com/lcy1317/lcytools&#x27;</span>,          <span class=\"comment\"># github代码仓地址</span></span><br><span class=\"line\">    classifiers=[</span><br><span class=\"line\">        <span class=\"string\">&quot;Programming Language :: Python :: 3&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;License :: OSI Approved :: MIT License&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Operating System :: OS Independent&quot;</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    python_requires=<span class=\"string\">&#x27;&gt;=3.6&#x27;</span>,    <span class=\"comment\">#对python的最低版本要求</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>根据setup.py生成包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py sdist bdist_wheel</span><br></pre></td></tr></table></figure>\n\n<p>上传</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">twine upload dist/*</span><br></pre></td></tr></table></figure>\n\n<p>安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install lcyutils==0.0.3 -i https://pypi.python.org/simple</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>最近写了一个自己的工具库，现在实现的是两个功能，一个是可以调用给我发邮件 ，另一个是通过1794957373的QQ号通过简单调用一个python函数来进行一个QQ消息的推送。</p>\n<h2 id=\"lcyutils包\"><a href=\"#lcyutils包\" class=\"headerlink\" title=\"lcyutils包\"></a>lcyutils包</h2><p>先来自我介绍一下自己的这个包，主要介绍一下QQ消息的反推功能。</p>\n<p>当前仅仅在lcyutils.qqmessage模块里提供了一个消息的发送接口lcy_message</p>\n<p>比如这样调用：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lcyutils.qqmessage <span class=\"keyword\">as</span> qq</span><br><span class=\"line\">qq.lcy_qqmessage(qq=<span class=\"string\">&quot;1157***882就是你的QQ&quot;</span>,message = <span class=\"string\">&quot;来一条测试消息~&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>然后你就可以在QQ上接受到他给你发送的消息：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220520104023056.png\" alt=\"image-20220520104023056\"></p>\n<p>这个lcy_message函数有两个参数：</p>\n<ul>\n<li>qq：你接受消息推送的QQ号</li>\n<li>message：你想要发送的消息，一个string格式的字符串</li>\n</ul>\n<h2 id=\"QQ消息推送的实现\"><a href=\"#QQ消息推送的实现\" class=\"headerlink\" title=\"QQ消息推送的实现\"></a>QQ消息推送的实现</h2><p>这个实现其实毕竟利用到了QQ机器人，所以借助了我在服务器上跑的一个QQ机器人。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220529011909893.png\" alt=\"image-20220529011909893\"></p>\n<p>大致是这样一个流程，主要使用了go-cqhttp协议。</p>\n<h2 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO:\"></a>TODO:</h2><p>显然这里呢有一系列的问题，不管是传包时候的问题还是我自己写包时候的问题都有很多问题。这里总结一下希望有空能够一个个fix：</p>\n<ul>\n<li>pypi上的包的setup没有处理过包依赖的问题（Fixed）</li>\n<li>设置消息token/转移后端端口（未解决）</li>\n<li>qqmessage支持更多的消息格式，图片/文件等（未解决，已更新链接图片发送）</li>\n<li>包的结构需要调整，以及需要调整git的流程保证我这边开发和github以及包生成的一致性（未解决）</li>\n<li>支持更多的工具（未解决）</li>\n</ul>\n<h2 id=\"上传\"><a href=\"#上传\" class=\"headerlink\" title=\"上传\"></a>上传</h2><h3 id=\"setup编写\"><a href=\"#setup编写\" class=\"headerlink\" title=\"setup编写\"></a>setup编写</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># coding=utf-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> distutils.core <span class=\"keyword\">import</span> setup</span><br><span class=\"line\"><span class=\"keyword\">from</span> setuptools <span class=\"keyword\">import</span> find_packages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&quot;README.md&quot;</span>, <span class=\"string\">&quot;r&quot;</span>,encoding=<span class=\"string\">&quot;utf-8&quot;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">  long_description = f.read()</span><br><span class=\"line\"></span><br><span class=\"line\">setup(</span><br><span class=\"line\">    name=<span class=\"string\">&quot;lcyutils&quot;</span>,   <span class=\"comment\"># python包的名字</span></span><br><span class=\"line\">    version=<span class=\"string\">&quot;0.0.3&quot;</span>,                <span class=\"comment\"># 版本号</span></span><br><span class=\"line\">    description=<span class=\"string\">&#x27;LCY Personal Tools&#x27;</span>,           <span class=\"comment\"># 描述</span></span><br><span class=\"line\">    long_description=long_description,                  <span class=\"comment\"># 详细描述，这里将readme的内容放置于此</span></span><br><span class=\"line\">    author=<span class=\"string\">&#x27;luochengyu&#x27;</span>,                                      <span class=\"comment\"># 作者</span></span><br><span class=\"line\">    author_email=<span class=\"string\">&#x27;luochengyu1317@163.com&#x27;</span>,              <span class=\"comment\"># 作者邮箱</span></span><br><span class=\"line\">    maintainer=<span class=\"string\">&#x27;luochengyu&#x27;</span>,                               <span class=\"comment\"># 维护人</span></span><br><span class=\"line\">    maintainer_email=<span class=\"string\">&#x27;luochengyu1317@163.com&#x27;</span>,       <span class=\"comment\"># 维护人邮箱</span></span><br><span class=\"line\">    license=<span class=\"string\">&#x27;MIT License&#x27;</span>,                                    <span class=\"comment\"># 遵守协议</span></span><br><span class=\"line\">    packages=find_packages(),</span><br><span class=\"line\">    install_requires=[                                               <span class=\"comment\"># lamb-common依赖的第三方库</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;requests&gt;=2.26.0&#x27;</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    platforms=[<span class=\"string\">&quot;all&quot;</span>],                                                <span class=\"comment\"># 支持的平台</span></span><br><span class=\"line\">    url=<span class=\"string\">&#x27;https://github.com/lcy1317/lcytools&#x27;</span>,          <span class=\"comment\"># github代码仓地址</span></span><br><span class=\"line\">    classifiers=[</span><br><span class=\"line\">        <span class=\"string\">&quot;Programming Language :: Python :: 3&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;License :: OSI Approved :: MIT License&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;Operating System :: OS Independent&quot;</span>,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    python_requires=<span class=\"string\">&#x27;&gt;=3.6&#x27;</span>,    <span class=\"comment\">#对python的最低版本要求</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>根据setup.py生成包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python setup.py sdist bdist_wheel</span><br></pre></td></tr></table></figure>\n\n<p>上传</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">twine upload dist/*</span><br></pre></td></tr></table></figure>\n\n<p>安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install lcyutils==0.0.3 -i https://pypi.python.org/simple</span><br></pre></td></tr></table></figure>\n\n"},{"title":"树莓派安装FISCO-BCOS","date":"2021-11-18T13:56:22.000Z","author":"Lcy","_content":"\n# 树莓派安装FISCO-BCOS\n\n参考文档：[FISCO BCOS 源码编译 — FISCO BCOS v2.7.2 文档 (fisco-bcos-documentation.readthedocs.io)](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/tutorial/compile.html)\n\n```shell\n# 拉取ubuntu镜像\ndocker pull ubuntu\n\n# 启动容器\nroot@ubuntu:~# docker run -it ubuntu /bin/bash\nroot@35cfb23764c7:/# \n\n# 安装相关依赖\napt-get update\n\napt-get install -y sudo\n\nsudo apt install -y g++ libssl-dev openssl cmake git build-essential autoconf texinfo flex patch bison libgmp-dev zlib1g-dev automake libtool # 安装gcc用于编译\n\n# 克隆代码\ngit clone https://gitee.com/FISCO-BCOS/FISCO-BCOS.git -b master\n\n# 编译代码\ncd FISCO-BCOS\nmkdir -p build && cd build\ncmake -DARCH_NATIVE=on ..\n# 高性能机器可添加-j4使用4核加速编译\nmake -j2\n\n# 树莓派4B编译完成大概耗时2h左右\n\n# 进入build_chain.sh的目录/FISCO-BCOS/tools\ncd FISCO-BCOS\ncd tools\n\n# 使用脚本构建FISCO-BCOS链\nbash build_chain.sh -l 127.0.0.1:4 -e /FISCO-BCOS/build/bin/fisco-bcos\n\n# 后续和正常搭链一致\n\n# FISCO-BCOS启停\nbash nodes/127.0.0.1/start_all.sh\nbash nodes/127.0.0.1/stop_all.sh\n```\n\n需要注意的地方：\n\n- 编译后的二进制文件位置：FISCO-BCOS/build/bin/fisco-bcos\n","source":"_posts/树莓派安装FISCO-BCOS.md","raw":"---\ntitle: 树莓派安装FISCO-BCOS\ndate: 2021-11-18 21:56:22\ntags: Tips\ncategories: FISCO\nauthor: Lcy\n---\n\n# 树莓派安装FISCO-BCOS\n\n参考文档：[FISCO BCOS 源码编译 — FISCO BCOS v2.7.2 文档 (fisco-bcos-documentation.readthedocs.io)](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/tutorial/compile.html)\n\n```shell\n# 拉取ubuntu镜像\ndocker pull ubuntu\n\n# 启动容器\nroot@ubuntu:~# docker run -it ubuntu /bin/bash\nroot@35cfb23764c7:/# \n\n# 安装相关依赖\napt-get update\n\napt-get install -y sudo\n\nsudo apt install -y g++ libssl-dev openssl cmake git build-essential autoconf texinfo flex patch bison libgmp-dev zlib1g-dev automake libtool # 安装gcc用于编译\n\n# 克隆代码\ngit clone https://gitee.com/FISCO-BCOS/FISCO-BCOS.git -b master\n\n# 编译代码\ncd FISCO-BCOS\nmkdir -p build && cd build\ncmake -DARCH_NATIVE=on ..\n# 高性能机器可添加-j4使用4核加速编译\nmake -j2\n\n# 树莓派4B编译完成大概耗时2h左右\n\n# 进入build_chain.sh的目录/FISCO-BCOS/tools\ncd FISCO-BCOS\ncd tools\n\n# 使用脚本构建FISCO-BCOS链\nbash build_chain.sh -l 127.0.0.1:4 -e /FISCO-BCOS/build/bin/fisco-bcos\n\n# 后续和正常搭链一致\n\n# FISCO-BCOS启停\nbash nodes/127.0.0.1/start_all.sh\nbash nodes/127.0.0.1/stop_all.sh\n```\n\n需要注意的地方：\n\n- 编译后的二进制文件位置：FISCO-BCOS/build/bin/fisco-bcos\n","slug":"树莓派安装FISCO-BCOS","published":1,"updated":"2022-07-02T15:49:59.946Z","_id":"cl3iqqerx001zl0em0cchbox4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"树莓派安装FISCO-BCOS\"><a href=\"#树莓派安装FISCO-BCOS\" class=\"headerlink\" title=\"树莓派安装FISCO-BCOS\"></a>树莓派安装FISCO-BCOS</h1><p>参考文档：<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/tutorial/compile.html\">FISCO BCOS 源码编译 — FISCO BCOS v2.7.2 文档 (fisco-bcos-documentation.readthedocs.io)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">拉取ubuntu镜像</span></span><br><span class=\"line\">docker pull ubuntu</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动容器</span></span><br><span class=\"line\">root@ubuntu:~# docker run -it ubuntu /bin/bash</span><br><span class=\"line\">root@35cfb23764c7:/# </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装相关依赖</span></span><br><span class=\"line\">apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">apt-get install -y sudo</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt install -y g++ libssl-dev openssl cmake git build-essential autoconf texinfo flex patch bison libgmp-dev zlib1g-dev automake libtool # 安装gcc用于编译</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">克隆代码</span></span><br><span class=\"line\">git clone https://gitee.com/FISCO-BCOS/FISCO-BCOS.git -b master</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译代码</span></span><br><span class=\"line\">cd FISCO-BCOS</span><br><span class=\"line\">mkdir -p build &amp;&amp; cd build</span><br><span class=\"line\">cmake -DARCH_NATIVE=on ..</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">高性能机器可添加-j4使用4核加速编译</span></span><br><span class=\"line\">make -j2</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">树莓派4B编译完成大概耗时2h左右</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入build_chain.sh的目录/FISCO-BCOS/tools</span></span><br><span class=\"line\">cd FISCO-BCOS</span><br><span class=\"line\">cd tools</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用脚本构建FISCO-BCOS链</span></span><br><span class=\"line\">bash build_chain.sh -l 127.0.0.1:4 -e /FISCO-BCOS/build/bin/fisco-bcos</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">后续和正常搭链一致</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">FISCO-BCOS启停</span></span><br><span class=\"line\">bash nodes/127.0.0.1/start_all.sh</span><br><span class=\"line\">bash nodes/127.0.0.1/stop_all.sh</span><br></pre></td></tr></table></figure>\n\n<p>需要注意的地方：</p>\n<ul>\n<li>编译后的二进制文件位置：FISCO-BCOS/build/bin/fisco-bcos</li>\n</ul>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"树莓派安装FISCO-BCOS\"><a href=\"#树莓派安装FISCO-BCOS\" class=\"headerlink\" title=\"树莓派安装FISCO-BCOS\"></a>树莓派安装FISCO-BCOS</h1><p>参考文档：<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/tutorial/compile.html\">FISCO BCOS 源码编译 — FISCO BCOS v2.7.2 文档 (fisco-bcos-documentation.readthedocs.io)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">拉取ubuntu镜像</span></span><br><span class=\"line\">docker pull ubuntu</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动容器</span></span><br><span class=\"line\">root@ubuntu:~# docker run -it ubuntu /bin/bash</span><br><span class=\"line\">root@35cfb23764c7:/# </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装相关依赖</span></span><br><span class=\"line\">apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">apt-get install -y sudo</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt install -y g++ libssl-dev openssl cmake git build-essential autoconf texinfo flex patch bison libgmp-dev zlib1g-dev automake libtool # 安装gcc用于编译</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">克隆代码</span></span><br><span class=\"line\">git clone https://gitee.com/FISCO-BCOS/FISCO-BCOS.git -b master</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译代码</span></span><br><span class=\"line\">cd FISCO-BCOS</span><br><span class=\"line\">mkdir -p build &amp;&amp; cd build</span><br><span class=\"line\">cmake -DARCH_NATIVE=on ..</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">高性能机器可添加-j4使用4核加速编译</span></span><br><span class=\"line\">make -j2</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">树莓派4B编译完成大概耗时2h左右</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入build_chain.sh的目录/FISCO-BCOS/tools</span></span><br><span class=\"line\">cd FISCO-BCOS</span><br><span class=\"line\">cd tools</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用脚本构建FISCO-BCOS链</span></span><br><span class=\"line\">bash build_chain.sh -l 127.0.0.1:4 -e /FISCO-BCOS/build/bin/fisco-bcos</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">后续和正常搭链一致</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">FISCO-BCOS启停</span></span><br><span class=\"line\">bash nodes/127.0.0.1/start_all.sh</span><br><span class=\"line\">bash nodes/127.0.0.1/stop_all.sh</span><br></pre></td></tr></table></figure>\n\n<p>需要注意的地方：</p>\n<ul>\n<li>编译后的二进制文件位置：FISCO-BCOS/build/bin/fisco-bcos</li>\n</ul>\n"},{"title":"封校减肥实录","date":"2022-04-18T03:32:00.000Z","author":"Lcy","_content":"\n![image-20220704221442557](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704221442557.png)\n\n","source":"_posts/封校减肥实录.md","raw":"---\ntitle: 封校减肥实录\ndate: 2022-04-18 11:32:00\ntags: Lcy\ncategories: Lcy\nauthor: Lcy\n---\n\n![image-20220704221442557](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704221442557.png)\n\n","slug":"封校减肥实录","published":1,"updated":"2022-07-09T15:47:31.309Z","_id":"cl3iqqery0021l0emg80fgsls","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704221442557.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704221442557.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704221442557\"></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704221442557.png\" alt=\"image-20220704221442557\"></p>\n"},{"title":"蚂蚁链ACCA过啦","date":"2022-01-07T13:27:19.000Z","author":"Lcy","_content":"\n![image-20220515232014844](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515232014844.png)\n\n这里还可以给一下旧版的证书，当时还是一个中文的初级认证，后来蚂蚁链ACCA升级了，还帮我刷新了证书时间正好可以cover找实习投简历的时候，真不错。\n\n![蚂蚁链ACCA认证](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/微信图片_20220404212741.jpg)\n\n","source":"_posts/蚂蚁链ACCA过啦.md","raw":"---\ntitle: 蚂蚁链ACCA过啦\ndate: 2022-01-07 21:27:19\ntags: Study\ncategories: Work Prepare\nauthor: Lcy\n---\n\n![image-20220515232014844](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515232014844.png)\n\n这里还可以给一下旧版的证书，当时还是一个中文的初级认证，后来蚂蚁链ACCA升级了，还帮我刷新了证书时间正好可以cover找实习投简历的时候，真不错。\n\n![蚂蚁链ACCA认证](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/微信图片_20220404212741.jpg)\n\n","slug":"蚂蚁链ACCA过啦","published":1,"updated":"2022-07-02T15:49:59.947Z","_id":"cl3iqqery0026l0em0urgafwo","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515232014844.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515232014844.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220515232014844\"></p>\n<p>这里还可以给一下旧版的证书，当时还是一个中文的初级认证，后来蚂蚁链ACCA升级了，还帮我刷新了证书时间正好可以cover找实习投简历的时候，真不错。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220404212741.jpg\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220404212741.jpg\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"蚂蚁链ACCA认证\"></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220515232014844.png\" alt=\"image-20220515232014844\"></p>\n<p>这里还可以给一下旧版的证书，当时还是一个中文的初级认证，后来蚂蚁链ACCA升级了，还帮我刷新了证书时间正好可以cover找实习投简历的时候，真不错。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220404212741.jpg\" alt=\"蚂蚁链ACCA认证\"></p>\n"},{"title":"BRAN","date":"2021-04-05T07:56:26.000Z","author":"Lcy","_content":"# Blockchain Radio Access Network Beyond 5G阅读笔记\n\n## 摘要\n\n提出一种先进的无线网接入模式B-RAN，B-RAN利用区块链，将大规模的免信任子网络连接成大规模可信任合作网络。关于增长的B-RAN网络，我们引入了一个网络经济学的概念。B-RAN可以通过连接多边平台以及多个群组来创造价值。为了在不同的群组中建立深度整合且健康的multi-fold信任，我们将B-RAN划分成了6个层结构，从底层建立信任关系，并提供了一系列的关键技术来克服中间的主要障碍。最后通过三个案例来研究B-RAN网络的性能。\n\n\n\n## 介绍\n\nbalabala 由于现今情况下应用程序和用户服务接入网络很复杂，拓展性不足，费用高昂，企业活个人接入点不协调，利用率不高，所以超越5G需要思考一种新的无线接入模式。\n\n主机间网络（inter-host network）协作可以经济高效地对未来网络进行转变。构建一个跨服务提供商（SP，service providers）共享的动态有机网络平台可以利用一个主机池中的网络元素，并且可以将不协调的AP合并到RAN网络之中，以此来实现高效率、低成本、强可靠性和广泛覆盖。在这种扁平化的主机间网络客户除了可以访问除自己的SP下的AP（access point）外，还可以访问一定范围内的AP。这样就可以在自己的SP阻塞的时候访问范围内不阻塞的AP，或者连接到一个专用AP池。因此，从客户机角度看，大规模网络用较低的成本给了更好的选择。从网络角度看，更低的复杂性的协调减少了对基础资源的投资，同时提高了网络的效率和平衡负载。用这种方法，每个人都可以讲自己的AP合并到共享网络，并将他们的资产商品化到一个无处不在的、不断发展的网络中。\n\n整合这个主机间网络平台并保持公平高效的运行是很难的。主要障碍是缺乏信任，<font color = red>这也导致期待已久的共享无线电技术（如认知无线电CR，cognitive radio）的商业化部署</font>。如图1a所示几个主要的缺乏信任的地方如下：\n\n![image-20210405151406284](https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png)\n\n- SP-Client：在一个动态的多主机网络中，简历并保持一个SP-client信任这一个最基础的关系是非常麻烦的。通常情况下，不信任是双向的。SP受到提供服务的报酬影响，同时客户端要考虑支付后得到的服务和体验(QoS & QoE)。另外，买卖双方都存在隐私问题，特别是个人AP提供的服务。\n- SP-SP：为下一代网络服务的3GPP协议中已经强调了SP之间建立互信。这样的互信可以基于比如商业协，但是把全球700多个主要的移动网络提供商（MNO）纳入一个可信网络而不是我们提到的私人SP非常困难。这导致大多数SP宁愿让网络负载为空也不愿意提供服务给未知的人。\n- Client-Client：多主机网络平台在多个客户端之间存在信任问题，不来自一个公共实体。自私的客户端可能不遵守协议然后过多的占用资源。这会导致无授权上行网络共同悲剧并带来网络阻塞。为了建立并保持健康的不同网络参与者之间的关系，我们提出了先进的B-RAN网络用于5G网络之外。B-RAN是一种**去中心化的，可信赖的，无线**接入模式，利用区块链去链接不同参与者，并为所有的参与者创造一个互利的局面。从以下五个方面总结：\n\n  + 可信(Trustworthiness)：B-RAN可以在不同的各方之间建立互信，并通过底层区块链在不可信的环境中解决授权、授权和会计（AAA）问题。\n\n  + 去中心化(Decentralization)：利用区块链的去中心化特点，B-RAN将无线网络转化为健壮的弹性网络去分布网络元素并避免单节点的故障。\n  + 效率(Efficiency)：B-RAN可以充分利用没组织的低成本自组的AP并通过共享、卸载（offloading）、聚合来提供高的效率。\n  + 灵活性(Flexibility)：B-RAN通过智能合约支持可插拔功能，以便灵活管理异构服务，并与传统网络和新兴的应用兼容。\n  + 开放性(Openness)：作为一个凝聚的实体，B-RAN提供了一个开方并且可拓展的生态系统，供组织个人来接入，并保证了安全性和管理性。\n\n\n后面主要介绍：<font color = blue>为什么使用B-RAN，如何构造B-RAN，以及B-RAN如何执行</font>\n\n## B-RAN Motivations\n\n### Network Effects\n\n网络效应描述了一种随着参与者数量增加而导致服务或者产品价值升高的现象。在B-RAN中，随着客户的增加，SP将会加入经济激励( economic incentives )，又称作跨集团网络效应。因此，大量的SP将提高服务质量，吸引更多客户，又导致更大规模的跨集团网络效应。这种正反馈能让B-RAN更快成长balabala。\n\nbalabala规模很大的网络比小网络好。\n\n#### Multi-Sided Platform(MSP)\n\n传统RAN是单边业务，SP主要二点收入来自于直接给客户提供服务。单边业务是封闭的，线性的单向价值链。这所以现在数据爆炸但是传统SP无法获得更多利润。\n\n为了改变现状我们除了可以横向招募更多SP来整合网络还可以吸引更多方面纵向整合网络成为MSP。如图1c所示，MSP是一个平台，允许多边团队加入并且多边团队能够互动。并且MSP的参与者保留了对剩余交互权的控制。B-RAN是一种典型的MSP，支持SP、客户端交互直连。B-RAN的大规模互联可以重塑原本的单项价值链。\n\n### Multi-Sidedness多边性？多面性，就那个意思。\n\n目前传统的移动网络服务提供者同时扮演多重角色如SP、频谱持有和基础设施持有等。所以陷入寡头垄断，市场缺乏竞争和创新。因此为了吸引更多的参与者，B-RAN会将这些功能打散呗，是的降低进入壁垒。B-RAN的多边性可以导致更广泛的更丰富的网络效应。同时引入多样的收入来源。下面列举几个比较重要的边\n\n![image-20210405151406284](https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png)\n\n- 频谱拥有者Spectrum Holders：频谱持有者可以直接将其数字化频谱资产（DSA）租赁给SP甚至客户端，而不必自己是SP，以实现灵活的频谱管理。\n- 基础设施所有者Infrastruc Owners：B-RAN中的基础设施包括所有类型的ap、集中式云、存储、回程、边缘节点、物联网传感器等等。许多制造商可以通过直接提供和共享基础设施来加入B-RAN。\n- 应用开发者Application Developers：软件开发人员通过提供各种去中心化的应用程序（dapp）和智能合约参与B-RAN。同时，开发人员可以通过B-RAN获得可追踪的数据和证书。\n- 内容提供者Content Providers：内容提供商是B-RAN中的关键参与者，他们创建和销售各种内容，如视频流、广告、众感知（crowdsensing）等，所有这些都向不同方向传递了价值转移。\n- 维护者Maintainers：严格地说，维护者是市场监管者，而不是MSP中的参与者；然而，它也表现出网络效应。随着B-RAN的发展，更多的维护者将加入到经济激励的行列中，这反过来又加强了B-RAN的中立性和民主化。\n\n### Trusted Intelligence\n\nB-RAN作为信任守护者来保障多边之间的信任。B-RAN不仅擅长提供数据，还擅长将信任作为服务。B-RAN连接了大量的实体，使交互超越了数据传输的范围，扩展到更高级的服务，如计算、缓存、众感知等。例如，边缘节点可以基于B-RAN中的免信任链接向客户端提供计算和缓存服务。\n\n目前，机器学习任务包括计算储存传播，事实上，B-RAN也会支持这些功能和任务。B-RAN支持前沿的联合式(federated-style)学习并实现基于网络代理的强大可信智能，而不是单个设备上的有限智能。与传统技术相比，人工智能具有更强的适应性，可以通过实践进行学习。B-RAN通过保持从源到所有操作器的数据跟踪，为分布式学习模型提供更强大的数据安全性，以保证安全性、可信和可解释性。因此，B-RAN适用于需要智能和高安全性的领域，如网络物理控制和自动驾驶。\n\n## B-RAN Hierarchical Architecture\n\nB-RAN不是RAN和区块链的直接结合，而是融合了无线网络和分布式账本技术（distributed ledger technologies. ）的新架构。在这个架构中可信关系十分重要，下面将给出六个层级：\n\n![image-20210405205254682](https://img-blog.csdnimg.cn/img_convert/e36b24075ac8a80988b64521e6535e8a.png)\n\n- 数据层(Data layer)：数据层申明基本的数据结构如区块、数字操作、加密密钥，并且用区块链，交易池（transaction pool），钱包的形式来组织，并且负责各种数据操作功能如（读、写、缓存、加密、解密）\n\n- 连接层(Link Layer)：连接层利用hash-timelocked-contract（HTLC）的原理，通过在两个节点之间内置的安全机制来保证免信任的服务连接，保证双方利益\n\n- 网络层(Network Layer)：网络层由在相同或不同结构上运行的多个子网组成（图2）。网络层由大量的节点和它们之间的链路组成，负责建立、维护和终止子网间和子网内的连接\n\n- 共识层(Consensus Layer)：共识层包括验证数字操作有效的网络维护者并为系统共识生成新的区块。作为安全和花费之间的权衡特点，共识机制可以分为两类\n\t\n\t+ 对于未许可的共识，任何实体都可以是维护者。未许可共识可以加强网络的中立性和民主性，但是也会导致巨大的开销\n\t+ 对于许可的共识，维护者被限制在一些认证过的实体中。例如：主要的MNO和政府机构。这样的许可共识效率高花费低，并且支持更高的产出，然而，竞争者之间的公平治理（fair governance）可能是一个问题。\n\t\n\tB-RAN是一个有许可共识的，始终开放可访问的网络。像Prsim这种区块链中的先进协议可以用来在B-RAN中提高共识层的表现。\n\t\n- 交易层(Trade Layer)：交易层提供智能合约支持的服务级别协议（SLA, service level agreement）以及实体间资源和资产的公平交换。此外，它支持跨网的资源分配和负载均衡，来实现深度集成。\n\n- 应用层(Application Layer)：应用层为用户、SP、开发者提供可信的应用程序接口（API），并支持各种DApps包括随时访问（ubiquitous access）、边缘服务和可信智能。\n\n例子：首先，客户和SP在应用层发出带有特定服务需求的请求。经过交易层，请求以智能合约的形式与服务、资源和资产相关联。智能合约形成一个区块，随后被添加到共识层的区块链中。网络层采取区块链中智能合约规定的数字行动，并为共识层提供物理网络连接。连接层支持两个实体之间的免信任交互，并为网络层建立点到点链路。数据层为上述层定义分组结构和基本操作。因此，在客户和SP之间建立服务关系。\n\n## B-RAN: Enabling Technologies\n\n### Trust-free Services\n\n客户端和SP之间想要达成一个公平的交换就需要可信的中介。因此我们可以考虑在连接层内置一个免信任服务过程(Trust-free sevice process)用来保护双方利益消除顾虑。\n\n![image-20210406120356952](https://img-blog.csdnimg.cn/img_convert/ef5cb98e526af88d476d490573495ef6.png)\n\n如上图所示：一个嵌入了哈希锁和时间锁的智能合约（HTLC）可以解决这个问题。B-RAN中，SP生成一个结构化随机码c，作为这个SP下的ap在设置中的访问服务授权。一旦SP和客户达成交易，SP就用客户的公钥加密c得到K（c），并在客户向合约支付包括服务费在内的费用之前初始化一个仅包含哈希值H(K(c))的HTLC。支付之后，SP必须在K（c）被回收之前把它解出来。否则，HTLC会退还客户服务费。获得K（c）之后，客户通过私钥恢复出c用来访问相应的AP，哈希锁可以确保长时间不响应的交易和免信任服务，同时只在合约中宣布H（K（c））而不揭示任何与c相关的信息。时间锁严格限制进程来组织长时间的延时和无响应的服务。码c需要被结构化如包含客户身份，以免被他人误用。\n\nHTLC允许基于非连锁渠道的免信任服务和支付。我们注意到零知识条件支付<font color = red>（zero-knowledge contingent (service) payment (ZKCP & ZKCSP)）</font>是一种零知识证明（zero-knowledge proof (ZKP)）的变体，也是免信任服务的前景。ZKCP/ZKCSP可以在完全不可信的情况下实现服务和支付的公平交换，也有助于SP和客户之间建立信任。\n\n### Inter-Host Coordination（主机间协调）\n\n以前协调的时候，以多点协调为例（Coordinated Multi-Point (CoMP)）通常是要求同一SP下的AP进行协调，他们可以无私共享资源和信息并且为流量负载均衡而考虑是否卸载子网。实践中不同的SP之间并不信任，所以如图1a，B-RAN可以有助于实现主机间的协调，并形成一个可信的子网络，如图3b所示，可以打破子网络的限制，扩大调度可行空间，在B-RAN中引发显著的网络效应。\n\n主机间协调包括资源共享和负载均衡。B-RAN的协调包含各种元素，例如频谱资源以及各种基础设施。他们再区块链中被**虚拟化以及资产化**，并在SP之间进行共享。另外，用户数据是有价值的隐含资源，客户数据的跨实体共享可以帮助B-RAN发展，但是需要更多的隐私保护。除此之外，可信只能和相应的能力如计算和存储等都可以通过子网络进行共享来加强。还有，B-RAN可以增强主机间无缝卸载来适应不平衡的流量。内置的account可以帮助SP更加愿意参与协作去帮助别的SP。在一个市场平台上，B-RAN将会激励SP和他人合作，形成一个具有生产力和成本效益的网络。多个子网的共享以及卸载可以很大的提高网络效率，这需要一个强大的只能控制器。\n\n### Trustworthy Access（可信链接）\n\n在一个不可信网络中，客户可能会不遵守协议竞争资源。在授信访问中，SP可以预先分配好资源来阻止非必要访问。但是对于那些免授权的如IOT的上行链接来说，这就很麻烦了。因为恶意设备可能会故意摄取更多的资源，当恶意设备变多成规模之后就会导致Rogue's Dilemma现象。Rogue困境意味着即使区块链在上层建立了信任，但是由于底层信任不够仍然可能协调失败。\n\n我们开发了一个叫**Hash Access**的可信访问方案来消除客户端间的不信任。如图3c所示，用于无授权场景。在传输数据包之前，客户机应通过找到低于给定阈值的哈希值来解决哈希问题。否则，客户端必须在当前slot中等待。哈希问题由当前时间戳、其唯一标识符（ID）和访问合约组成。由于哈希函数的前像性，哈希问题的答案很容易验证，但很难伪造。流氓设备很难通过生成假哈希值成功欺骗。由于每个哈希计算都可以看作是一个独立的二项式试验，因此在哈希访问中嵌入了一个随机退避，以减少冲突。哈希访问协议在连接层中建立并强制客户端之间的信任。\n\n### Intelligent Consensus\n\n传统共识机制如PoW功耗很高，不合适。因此我们使用Proof-of-Device（PoD）通过限制哈希操作数量来减少过多的一致性开销。为了避免通过多个假身份（也称为Sybil）进行攻击，需要一个防篡改的依赖于硬件的ID。这样ID可以是RF指纹、与硬件相关的不可变字符串及其组合。\n\nPoD开销依然很大，所以B-RAN维护人员可以部署各种智能算法来提出最佳方案，就像维护人员之间组织的机器学习竞赛一样。只有提出最佳解决方案的人才能确定调度方案，并被提升为下一个区块的赢家，以及相应的区块奖励，如图3d所示。区块链随着过程的重复而扩展和增长。这类机器学习竞赛的组织和实施可以从本文提出的学习一致性证明协议中得到启示。\n\n分布式边缘节点和多中心云服务器作为维护者，将协作保持B-RAN的一致性，并进一步在子网上构建智能共识层。这些维护人员将B-RAN作为一组分布式智能控制器组织起来，提高其效率。作为一个有见地的例子：B-RAN在参与者之间建立并传播可信的智能，而分布式智能反过来又加强了B-RAN的管理和进化。\n\n### Two-Tier Chain Structure双链式结构\n\n考虑到RAN的协作主要发生在地理接近的地区，我们发明了一种Two-Tier的双链结构来解决B-RAN的伸缩性问题。\n\n由于地理临近的特点所以就不需要将一个记录全局更新，可以将一些记录保留本子，如图3e，我们给不同的域多个子链，并用主链去管理子链。主链的作用就像是联邦政府，为子链指定一个全局的政策。这些子链虽然由主链控制但是享有高度的自由权，因此可以大大减少管理的工作和成本。在不违反主链核心政策的前提下，子链可以根据本地的具体情况制定自己的本地策略。不同子链的交互将会启动主链并记录。子链的哈希能力可能是不平衡的，因此为了安全考虑，子链需要接受一个可以由主链部署的允许共识。主链可以记录子链中区块的哈希值来降低遭受恶意攻击的风险。\n\n## B-RAN Case Study\n\n### Platform of Subnetworks\n\n这里使用（[9]\tX. Ling et al., “Practical Modeling and Analysis of Blockchain Radio Access Network,” arXiv preprint arXiv:1911.12537, Nov. 2019.[14]Y. Le et al., “Prototype Design and Test of Blockchain Radio Access Network,” Proc. IEEE Int’l. Conf. Commun. Work-shops (ICC’19), Shanghai, P.R. China, May 2019.）文章中的实验室原型来评估B-RAN性能。在此考虑一个有着多个子网络和多个客户的域。B-RAN是一个由子网络组成的网络所以可以用子网络数量k来反应B-RAN的大小。每个子网络可以同时给最多l个客户端提供连接服务。假设客户端的连接请求遵循泊松过程，速率为$\\lambda^a$，服务时间是以平均$\\frac{1}{\\lambda^c}$指数分布的，那流量强度就定义为：\n$$\n\\rho = \\frac{\\lambda^a}{kl\\lambda^c} \n$$\n这里，$kl$代表了连接到B-RAN网络的最大客户端数量。B-RAN中平均的区块产生相对平均服务时间是0.05，并且这里l=4，每个请求需要N个顶层区块链的区块来确认（N=4 in fig.4）\n\n![image-20210406152814624](https://img-blog.csdnimg.cn/img_convert/72ecbe92c8f6343ee1dff0e3dce3ea1f.png)\n\n在图4中，我们说明了不同网络流量下网络大小的积极影响程度。我们通过有效吞吐量（满足最大时延$D_m$条件下的请求速率）来衡量B-RAN性能。我们画出了$D_m = 0.08$（由B-RAN中连接数标准化）的有效吞吐量以及$D_m = 0.06$、$D_m = 0.1$的误差线来避免由$D_m$引起的误差。如图所示，可以看出在相同的业务流量$\\rho$下，B-RAN结合越多的子网络，可以达到更高的有效吞吐，并且取不同的$D_m$依然如此。这表明更大的网络更有效率，所以为了获得更好的性能，B-RAN有很强的的扩展和成长为一个有大量子网构成的大型网络的动机。\n\n### Latency-Security Trade-off（延时与安全权衡）\n\n![image-20210406153907493](https://img-blog.csdnimg.cn/img_convert/1f81011d20a34364ce332b623933dd34.png)\n\n上图演示了B-RAN的服务延迟和安全属性，参数如图4。图5中红色表面上的线是在具有固定哈希能力的对手（相对于其他$\\beta = 20\\%$网络）面前不同业务流量$\\rho$下存在的。我们将他们投影到$L-N$平面，这样更清楚。我们可以看到较高的业务量会引起网络阻塞和较高的延时$L$，延时$L$也表现出和确认区块数$N$近似线性关系。\n\n然后，我们根据对手成功攻击已确认区块链的概率来评估安全性，如从对手具有不同哈希能力的案例中获得的蓝线所示。我们还将这些线投影到$S-N$平面。随着对手哈希能力的提高，成功攻击的概率也相应增加。如图5所示，我们需要设置一个更大的确认区块数$N$以降低风险并保护B-RAN。\n\n图5的三维图显示，延时和安全性与确认区块数量$N$密切相关。更多的$N$更大的延时$L$可以获得更强的安全性优势。所以需要结合实际选择确认区块数来保持一个延时和安全性都比较好的情况。延时与安全权衡可以看做是B-RAN能实现性能的全貌。本质上，延迟安全权衡揭示了分布式系统本身的汇集速度和确认可靠性之间的内在关系。它可以为B-RAN的设计和实现提供更好的理解和更深入的见解。\n\n### Rogue's Dilemma\n\n![image-20210406160408927](https://img-blog.csdnimg.cn/img_convert/26c11a58071f3fb2b17ac7993be7885c.png)\n\n在图6a中，我们将哈希连接（Hash Access）的性能和Aloha协议进行比较。Aloha协议采用基于均匀分布退避的竞争解决方案，最大窗口为100个slot。在无恶意设备的安全环境下，Aloha和哈希连接的吞吐量相当。在5%设备是流氓设备的情况下并可能自私跳过退避的场景中，吞吐量受到较大影响。同时，不平衡的条件下（子网负载不平衡75%-25%），Aloha协议由于SP不能平衡流量所以产生严重的性能下降。B-RAN可以卸载不平衡流量并实现子网上的有机集成。\n\n图6b我们采用物联网中的经验数据来评估哈希连接的性能，可以看出哈希访问可以处理实际的波动包流并保持高吞吐量。\n\n## 总结和见解\n\n我们提出了B-RAN的工作模式，用于Beyond 5G的无线传输。通过网络效应的视角，我们说明了B-RAN是如何提高效率和生产力的。我们通过在不可信任的参与者之间建立信任来证明B-RAN作为MSP的力量。在技术上，我们开发了一个由六层组成的层次结构作为B-RAN的总体框架，并研究了关键的使能技术。基于我们实验室构建的B-RAN原型，我们阐述了B-RAN中的几种现象：网络池效应、延迟安全权衡和盗贼困境。\n\n几个有趣的见解：\n\n- B-RAN需要面临一个临界启动问题，B-RAN怎么获得足够的新客户呢？并吸引更多的人加入。\n- 网络规模大了之后可能面临拥挤。\n- 民主和集权的网络各有利弊","source":"_posts/BRAN.md","raw":"---\ntitle: BRAN\ndate: 2021-04-05 15:56:26\ntags: Study\ncategories: Blockchain\nauthor: Lcy\n---\n# Blockchain Radio Access Network Beyond 5G阅读笔记\n\n## 摘要\n\n提出一种先进的无线网接入模式B-RAN，B-RAN利用区块链，将大规模的免信任子网络连接成大规模可信任合作网络。关于增长的B-RAN网络，我们引入了一个网络经济学的概念。B-RAN可以通过连接多边平台以及多个群组来创造价值。为了在不同的群组中建立深度整合且健康的multi-fold信任，我们将B-RAN划分成了6个层结构，从底层建立信任关系，并提供了一系列的关键技术来克服中间的主要障碍。最后通过三个案例来研究B-RAN网络的性能。\n\n\n\n## 介绍\n\nbalabala 由于现今情况下应用程序和用户服务接入网络很复杂，拓展性不足，费用高昂，企业活个人接入点不协调，利用率不高，所以超越5G需要思考一种新的无线接入模式。\n\n主机间网络（inter-host network）协作可以经济高效地对未来网络进行转变。构建一个跨服务提供商（SP，service providers）共享的动态有机网络平台可以利用一个主机池中的网络元素，并且可以将不协调的AP合并到RAN网络之中，以此来实现高效率、低成本、强可靠性和广泛覆盖。在这种扁平化的主机间网络客户除了可以访问除自己的SP下的AP（access point）外，还可以访问一定范围内的AP。这样就可以在自己的SP阻塞的时候访问范围内不阻塞的AP，或者连接到一个专用AP池。因此，从客户机角度看，大规模网络用较低的成本给了更好的选择。从网络角度看，更低的复杂性的协调减少了对基础资源的投资，同时提高了网络的效率和平衡负载。用这种方法，每个人都可以讲自己的AP合并到共享网络，并将他们的资产商品化到一个无处不在的、不断发展的网络中。\n\n整合这个主机间网络平台并保持公平高效的运行是很难的。主要障碍是缺乏信任，<font color = red>这也导致期待已久的共享无线电技术（如认知无线电CR，cognitive radio）的商业化部署</font>。如图1a所示几个主要的缺乏信任的地方如下：\n\n![image-20210405151406284](https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png)\n\n- SP-Client：在一个动态的多主机网络中，简历并保持一个SP-client信任这一个最基础的关系是非常麻烦的。通常情况下，不信任是双向的。SP受到提供服务的报酬影响，同时客户端要考虑支付后得到的服务和体验(QoS & QoE)。另外，买卖双方都存在隐私问题，特别是个人AP提供的服务。\n- SP-SP：为下一代网络服务的3GPP协议中已经强调了SP之间建立互信。这样的互信可以基于比如商业协，但是把全球700多个主要的移动网络提供商（MNO）纳入一个可信网络而不是我们提到的私人SP非常困难。这导致大多数SP宁愿让网络负载为空也不愿意提供服务给未知的人。\n- Client-Client：多主机网络平台在多个客户端之间存在信任问题，不来自一个公共实体。自私的客户端可能不遵守协议然后过多的占用资源。这会导致无授权上行网络共同悲剧并带来网络阻塞。为了建立并保持健康的不同网络参与者之间的关系，我们提出了先进的B-RAN网络用于5G网络之外。B-RAN是一种**去中心化的，可信赖的，无线**接入模式，利用区块链去链接不同参与者，并为所有的参与者创造一个互利的局面。从以下五个方面总结：\n\n  + 可信(Trustworthiness)：B-RAN可以在不同的各方之间建立互信，并通过底层区块链在不可信的环境中解决授权、授权和会计（AAA）问题。\n\n  + 去中心化(Decentralization)：利用区块链的去中心化特点，B-RAN将无线网络转化为健壮的弹性网络去分布网络元素并避免单节点的故障。\n  + 效率(Efficiency)：B-RAN可以充分利用没组织的低成本自组的AP并通过共享、卸载（offloading）、聚合来提供高的效率。\n  + 灵活性(Flexibility)：B-RAN通过智能合约支持可插拔功能，以便灵活管理异构服务，并与传统网络和新兴的应用兼容。\n  + 开放性(Openness)：作为一个凝聚的实体，B-RAN提供了一个开方并且可拓展的生态系统，供组织个人来接入，并保证了安全性和管理性。\n\n\n后面主要介绍：<font color = blue>为什么使用B-RAN，如何构造B-RAN，以及B-RAN如何执行</font>\n\n## B-RAN Motivations\n\n### Network Effects\n\n网络效应描述了一种随着参与者数量增加而导致服务或者产品价值升高的现象。在B-RAN中，随着客户的增加，SP将会加入经济激励( economic incentives )，又称作跨集团网络效应。因此，大量的SP将提高服务质量，吸引更多客户，又导致更大规模的跨集团网络效应。这种正反馈能让B-RAN更快成长balabala。\n\nbalabala规模很大的网络比小网络好。\n\n#### Multi-Sided Platform(MSP)\n\n传统RAN是单边业务，SP主要二点收入来自于直接给客户提供服务。单边业务是封闭的，线性的单向价值链。这所以现在数据爆炸但是传统SP无法获得更多利润。\n\n为了改变现状我们除了可以横向招募更多SP来整合网络还可以吸引更多方面纵向整合网络成为MSP。如图1c所示，MSP是一个平台，允许多边团队加入并且多边团队能够互动。并且MSP的参与者保留了对剩余交互权的控制。B-RAN是一种典型的MSP，支持SP、客户端交互直连。B-RAN的大规模互联可以重塑原本的单项价值链。\n\n### Multi-Sidedness多边性？多面性，就那个意思。\n\n目前传统的移动网络服务提供者同时扮演多重角色如SP、频谱持有和基础设施持有等。所以陷入寡头垄断，市场缺乏竞争和创新。因此为了吸引更多的参与者，B-RAN会将这些功能打散呗，是的降低进入壁垒。B-RAN的多边性可以导致更广泛的更丰富的网络效应。同时引入多样的收入来源。下面列举几个比较重要的边\n\n![image-20210405151406284](https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png)\n\n- 频谱拥有者Spectrum Holders：频谱持有者可以直接将其数字化频谱资产（DSA）租赁给SP甚至客户端，而不必自己是SP，以实现灵活的频谱管理。\n- 基础设施所有者Infrastruc Owners：B-RAN中的基础设施包括所有类型的ap、集中式云、存储、回程、边缘节点、物联网传感器等等。许多制造商可以通过直接提供和共享基础设施来加入B-RAN。\n- 应用开发者Application Developers：软件开发人员通过提供各种去中心化的应用程序（dapp）和智能合约参与B-RAN。同时，开发人员可以通过B-RAN获得可追踪的数据和证书。\n- 内容提供者Content Providers：内容提供商是B-RAN中的关键参与者，他们创建和销售各种内容，如视频流、广告、众感知（crowdsensing）等，所有这些都向不同方向传递了价值转移。\n- 维护者Maintainers：严格地说，维护者是市场监管者，而不是MSP中的参与者；然而，它也表现出网络效应。随着B-RAN的发展，更多的维护者将加入到经济激励的行列中，这反过来又加强了B-RAN的中立性和民主化。\n\n### Trusted Intelligence\n\nB-RAN作为信任守护者来保障多边之间的信任。B-RAN不仅擅长提供数据，还擅长将信任作为服务。B-RAN连接了大量的实体，使交互超越了数据传输的范围，扩展到更高级的服务，如计算、缓存、众感知等。例如，边缘节点可以基于B-RAN中的免信任链接向客户端提供计算和缓存服务。\n\n目前，机器学习任务包括计算储存传播，事实上，B-RAN也会支持这些功能和任务。B-RAN支持前沿的联合式(federated-style)学习并实现基于网络代理的强大可信智能，而不是单个设备上的有限智能。与传统技术相比，人工智能具有更强的适应性，可以通过实践进行学习。B-RAN通过保持从源到所有操作器的数据跟踪，为分布式学习模型提供更强大的数据安全性，以保证安全性、可信和可解释性。因此，B-RAN适用于需要智能和高安全性的领域，如网络物理控制和自动驾驶。\n\n## B-RAN Hierarchical Architecture\n\nB-RAN不是RAN和区块链的直接结合，而是融合了无线网络和分布式账本技术（distributed ledger technologies. ）的新架构。在这个架构中可信关系十分重要，下面将给出六个层级：\n\n![image-20210405205254682](https://img-blog.csdnimg.cn/img_convert/e36b24075ac8a80988b64521e6535e8a.png)\n\n- 数据层(Data layer)：数据层申明基本的数据结构如区块、数字操作、加密密钥，并且用区块链，交易池（transaction pool），钱包的形式来组织，并且负责各种数据操作功能如（读、写、缓存、加密、解密）\n\n- 连接层(Link Layer)：连接层利用hash-timelocked-contract（HTLC）的原理，通过在两个节点之间内置的安全机制来保证免信任的服务连接，保证双方利益\n\n- 网络层(Network Layer)：网络层由在相同或不同结构上运行的多个子网组成（图2）。网络层由大量的节点和它们之间的链路组成，负责建立、维护和终止子网间和子网内的连接\n\n- 共识层(Consensus Layer)：共识层包括验证数字操作有效的网络维护者并为系统共识生成新的区块。作为安全和花费之间的权衡特点，共识机制可以分为两类\n\t\n\t+ 对于未许可的共识，任何实体都可以是维护者。未许可共识可以加强网络的中立性和民主性，但是也会导致巨大的开销\n\t+ 对于许可的共识，维护者被限制在一些认证过的实体中。例如：主要的MNO和政府机构。这样的许可共识效率高花费低，并且支持更高的产出，然而，竞争者之间的公平治理（fair governance）可能是一个问题。\n\t\n\tB-RAN是一个有许可共识的，始终开放可访问的网络。像Prsim这种区块链中的先进协议可以用来在B-RAN中提高共识层的表现。\n\t\n- 交易层(Trade Layer)：交易层提供智能合约支持的服务级别协议（SLA, service level agreement）以及实体间资源和资产的公平交换。此外，它支持跨网的资源分配和负载均衡，来实现深度集成。\n\n- 应用层(Application Layer)：应用层为用户、SP、开发者提供可信的应用程序接口（API），并支持各种DApps包括随时访问（ubiquitous access）、边缘服务和可信智能。\n\n例子：首先，客户和SP在应用层发出带有特定服务需求的请求。经过交易层，请求以智能合约的形式与服务、资源和资产相关联。智能合约形成一个区块，随后被添加到共识层的区块链中。网络层采取区块链中智能合约规定的数字行动，并为共识层提供物理网络连接。连接层支持两个实体之间的免信任交互，并为网络层建立点到点链路。数据层为上述层定义分组结构和基本操作。因此，在客户和SP之间建立服务关系。\n\n## B-RAN: Enabling Technologies\n\n### Trust-free Services\n\n客户端和SP之间想要达成一个公平的交换就需要可信的中介。因此我们可以考虑在连接层内置一个免信任服务过程(Trust-free sevice process)用来保护双方利益消除顾虑。\n\n![image-20210406120356952](https://img-blog.csdnimg.cn/img_convert/ef5cb98e526af88d476d490573495ef6.png)\n\n如上图所示：一个嵌入了哈希锁和时间锁的智能合约（HTLC）可以解决这个问题。B-RAN中，SP生成一个结构化随机码c，作为这个SP下的ap在设置中的访问服务授权。一旦SP和客户达成交易，SP就用客户的公钥加密c得到K（c），并在客户向合约支付包括服务费在内的费用之前初始化一个仅包含哈希值H(K(c))的HTLC。支付之后，SP必须在K（c）被回收之前把它解出来。否则，HTLC会退还客户服务费。获得K（c）之后，客户通过私钥恢复出c用来访问相应的AP，哈希锁可以确保长时间不响应的交易和免信任服务，同时只在合约中宣布H（K（c））而不揭示任何与c相关的信息。时间锁严格限制进程来组织长时间的延时和无响应的服务。码c需要被结构化如包含客户身份，以免被他人误用。\n\nHTLC允许基于非连锁渠道的免信任服务和支付。我们注意到零知识条件支付<font color = red>（zero-knowledge contingent (service) payment (ZKCP & ZKCSP)）</font>是一种零知识证明（zero-knowledge proof (ZKP)）的变体，也是免信任服务的前景。ZKCP/ZKCSP可以在完全不可信的情况下实现服务和支付的公平交换，也有助于SP和客户之间建立信任。\n\n### Inter-Host Coordination（主机间协调）\n\n以前协调的时候，以多点协调为例（Coordinated Multi-Point (CoMP)）通常是要求同一SP下的AP进行协调，他们可以无私共享资源和信息并且为流量负载均衡而考虑是否卸载子网。实践中不同的SP之间并不信任，所以如图1a，B-RAN可以有助于实现主机间的协调，并形成一个可信的子网络，如图3b所示，可以打破子网络的限制，扩大调度可行空间，在B-RAN中引发显著的网络效应。\n\n主机间协调包括资源共享和负载均衡。B-RAN的协调包含各种元素，例如频谱资源以及各种基础设施。他们再区块链中被**虚拟化以及资产化**，并在SP之间进行共享。另外，用户数据是有价值的隐含资源，客户数据的跨实体共享可以帮助B-RAN发展，但是需要更多的隐私保护。除此之外，可信只能和相应的能力如计算和存储等都可以通过子网络进行共享来加强。还有，B-RAN可以增强主机间无缝卸载来适应不平衡的流量。内置的account可以帮助SP更加愿意参与协作去帮助别的SP。在一个市场平台上，B-RAN将会激励SP和他人合作，形成一个具有生产力和成本效益的网络。多个子网的共享以及卸载可以很大的提高网络效率，这需要一个强大的只能控制器。\n\n### Trustworthy Access（可信链接）\n\n在一个不可信网络中，客户可能会不遵守协议竞争资源。在授信访问中，SP可以预先分配好资源来阻止非必要访问。但是对于那些免授权的如IOT的上行链接来说，这就很麻烦了。因为恶意设备可能会故意摄取更多的资源，当恶意设备变多成规模之后就会导致Rogue's Dilemma现象。Rogue困境意味着即使区块链在上层建立了信任，但是由于底层信任不够仍然可能协调失败。\n\n我们开发了一个叫**Hash Access**的可信访问方案来消除客户端间的不信任。如图3c所示，用于无授权场景。在传输数据包之前，客户机应通过找到低于给定阈值的哈希值来解决哈希问题。否则，客户端必须在当前slot中等待。哈希问题由当前时间戳、其唯一标识符（ID）和访问合约组成。由于哈希函数的前像性，哈希问题的答案很容易验证，但很难伪造。流氓设备很难通过生成假哈希值成功欺骗。由于每个哈希计算都可以看作是一个独立的二项式试验，因此在哈希访问中嵌入了一个随机退避，以减少冲突。哈希访问协议在连接层中建立并强制客户端之间的信任。\n\n### Intelligent Consensus\n\n传统共识机制如PoW功耗很高，不合适。因此我们使用Proof-of-Device（PoD）通过限制哈希操作数量来减少过多的一致性开销。为了避免通过多个假身份（也称为Sybil）进行攻击，需要一个防篡改的依赖于硬件的ID。这样ID可以是RF指纹、与硬件相关的不可变字符串及其组合。\n\nPoD开销依然很大，所以B-RAN维护人员可以部署各种智能算法来提出最佳方案，就像维护人员之间组织的机器学习竞赛一样。只有提出最佳解决方案的人才能确定调度方案，并被提升为下一个区块的赢家，以及相应的区块奖励，如图3d所示。区块链随着过程的重复而扩展和增长。这类机器学习竞赛的组织和实施可以从本文提出的学习一致性证明协议中得到启示。\n\n分布式边缘节点和多中心云服务器作为维护者，将协作保持B-RAN的一致性，并进一步在子网上构建智能共识层。这些维护人员将B-RAN作为一组分布式智能控制器组织起来，提高其效率。作为一个有见地的例子：B-RAN在参与者之间建立并传播可信的智能，而分布式智能反过来又加强了B-RAN的管理和进化。\n\n### Two-Tier Chain Structure双链式结构\n\n考虑到RAN的协作主要发生在地理接近的地区，我们发明了一种Two-Tier的双链结构来解决B-RAN的伸缩性问题。\n\n由于地理临近的特点所以就不需要将一个记录全局更新，可以将一些记录保留本子，如图3e，我们给不同的域多个子链，并用主链去管理子链。主链的作用就像是联邦政府，为子链指定一个全局的政策。这些子链虽然由主链控制但是享有高度的自由权，因此可以大大减少管理的工作和成本。在不违反主链核心政策的前提下，子链可以根据本地的具体情况制定自己的本地策略。不同子链的交互将会启动主链并记录。子链的哈希能力可能是不平衡的，因此为了安全考虑，子链需要接受一个可以由主链部署的允许共识。主链可以记录子链中区块的哈希值来降低遭受恶意攻击的风险。\n\n## B-RAN Case Study\n\n### Platform of Subnetworks\n\n这里使用（[9]\tX. Ling et al., “Practical Modeling and Analysis of Blockchain Radio Access Network,” arXiv preprint arXiv:1911.12537, Nov. 2019.[14]Y. Le et al., “Prototype Design and Test of Blockchain Radio Access Network,” Proc. IEEE Int’l. Conf. Commun. Work-shops (ICC’19), Shanghai, P.R. China, May 2019.）文章中的实验室原型来评估B-RAN性能。在此考虑一个有着多个子网络和多个客户的域。B-RAN是一个由子网络组成的网络所以可以用子网络数量k来反应B-RAN的大小。每个子网络可以同时给最多l个客户端提供连接服务。假设客户端的连接请求遵循泊松过程，速率为$\\lambda^a$，服务时间是以平均$\\frac{1}{\\lambda^c}$指数分布的，那流量强度就定义为：\n$$\n\\rho = \\frac{\\lambda^a}{kl\\lambda^c} \n$$\n这里，$kl$代表了连接到B-RAN网络的最大客户端数量。B-RAN中平均的区块产生相对平均服务时间是0.05，并且这里l=4，每个请求需要N个顶层区块链的区块来确认（N=4 in fig.4）\n\n![image-20210406152814624](https://img-blog.csdnimg.cn/img_convert/72ecbe92c8f6343ee1dff0e3dce3ea1f.png)\n\n在图4中，我们说明了不同网络流量下网络大小的积极影响程度。我们通过有效吞吐量（满足最大时延$D_m$条件下的请求速率）来衡量B-RAN性能。我们画出了$D_m = 0.08$（由B-RAN中连接数标准化）的有效吞吐量以及$D_m = 0.06$、$D_m = 0.1$的误差线来避免由$D_m$引起的误差。如图所示，可以看出在相同的业务流量$\\rho$下，B-RAN结合越多的子网络，可以达到更高的有效吞吐，并且取不同的$D_m$依然如此。这表明更大的网络更有效率，所以为了获得更好的性能，B-RAN有很强的的扩展和成长为一个有大量子网构成的大型网络的动机。\n\n### Latency-Security Trade-off（延时与安全权衡）\n\n![image-20210406153907493](https://img-blog.csdnimg.cn/img_convert/1f81011d20a34364ce332b623933dd34.png)\n\n上图演示了B-RAN的服务延迟和安全属性，参数如图4。图5中红色表面上的线是在具有固定哈希能力的对手（相对于其他$\\beta = 20\\%$网络）面前不同业务流量$\\rho$下存在的。我们将他们投影到$L-N$平面，这样更清楚。我们可以看到较高的业务量会引起网络阻塞和较高的延时$L$，延时$L$也表现出和确认区块数$N$近似线性关系。\n\n然后，我们根据对手成功攻击已确认区块链的概率来评估安全性，如从对手具有不同哈希能力的案例中获得的蓝线所示。我们还将这些线投影到$S-N$平面。随着对手哈希能力的提高，成功攻击的概率也相应增加。如图5所示，我们需要设置一个更大的确认区块数$N$以降低风险并保护B-RAN。\n\n图5的三维图显示，延时和安全性与确认区块数量$N$密切相关。更多的$N$更大的延时$L$可以获得更强的安全性优势。所以需要结合实际选择确认区块数来保持一个延时和安全性都比较好的情况。延时与安全权衡可以看做是B-RAN能实现性能的全貌。本质上，延迟安全权衡揭示了分布式系统本身的汇集速度和确认可靠性之间的内在关系。它可以为B-RAN的设计和实现提供更好的理解和更深入的见解。\n\n### Rogue's Dilemma\n\n![image-20210406160408927](https://img-blog.csdnimg.cn/img_convert/26c11a58071f3fb2b17ac7993be7885c.png)\n\n在图6a中，我们将哈希连接（Hash Access）的性能和Aloha协议进行比较。Aloha协议采用基于均匀分布退避的竞争解决方案，最大窗口为100个slot。在无恶意设备的安全环境下，Aloha和哈希连接的吞吐量相当。在5%设备是流氓设备的情况下并可能自私跳过退避的场景中，吞吐量受到较大影响。同时，不平衡的条件下（子网负载不平衡75%-25%），Aloha协议由于SP不能平衡流量所以产生严重的性能下降。B-RAN可以卸载不平衡流量并实现子网上的有机集成。\n\n图6b我们采用物联网中的经验数据来评估哈希连接的性能，可以看出哈希访问可以处理实际的波动包流并保持高吞吐量。\n\n## 总结和见解\n\n我们提出了B-RAN的工作模式，用于Beyond 5G的无线传输。通过网络效应的视角，我们说明了B-RAN是如何提高效率和生产力的。我们通过在不可信任的参与者之间建立信任来证明B-RAN作为MSP的力量。在技术上，我们开发了一个由六层组成的层次结构作为B-RAN的总体框架，并研究了关键的使能技术。基于我们实验室构建的B-RAN原型，我们阐述了B-RAN中的几种现象：网络池效应、延迟安全权衡和盗贼困境。\n\n几个有趣的见解：\n\n- B-RAN需要面临一个临界启动问题，B-RAN怎么获得足够的新客户呢？并吸引更多的人加入。\n- 网络规模大了之后可能面临拥挤。\n- 民主和集权的网络各有利弊","slug":"BRAN","published":1,"updated":"2022-07-02T15:49:59.937Z","_id":"cl3iqqerz0029l0em8jcmbk67","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Blockchain-Radio-Access-Network-Beyond-5G阅读笔记\"><a href=\"#Blockchain-Radio-Access-Network-Beyond-5G阅读笔记\" class=\"headerlink\" title=\"Blockchain Radio Access Network Beyond 5G阅读笔记\"></a>Blockchain Radio Access Network Beyond 5G阅读笔记</h1><h2 id=\"摘要\"><a href=\"#摘要\" class=\"headerlink\" title=\"摘要\"></a>摘要</h2><div class=\"story post-story\"><p>提出一种先进的无线网接入模式B-RAN，B-RAN利用区块链，将大规模的免信任子网络连接成大规模可信任合作网络。关于增长的B-RAN网络，我们引入了一个网络经济学的概念。B-RAN可以通过连接多边平台以及多个群组来创造价值。为了在不同的群组中建立深度整合且健康的multi-fold信任，我们将B-RAN划分成了6个层结构，从底层建立信任关系，并提供了一系列的关键技术来克服中间的主要障碍。最后通过三个案例来研究B-RAN网络的性能。</p>\n</div><h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><div class=\"story post-story\"><p>balabala 由于现今情况下应用程序和用户服务接入网络很复杂，拓展性不足，费用高昂，企业活个人接入点不协调，利用率不高，所以超越5G需要思考一种新的无线接入模式。</p>\n<p>主机间网络（inter-host network）协作可以经济高效地对未来网络进行转变。构建一个跨服务提供商（SP，service providers）共享的动态有机网络平台可以利用一个主机池中的网络元素，并且可以将不协调的AP合并到RAN网络之中，以此来实现高效率、低成本、强可靠性和广泛覆盖。在这种扁平化的主机间网络客户除了可以访问除自己的SP下的AP（access point）外，还可以访问一定范围内的AP。这样就可以在自己的SP阻塞的时候访问范围内不阻塞的AP，或者连接到一个专用AP池。因此，从客户机角度看，大规模网络用较低的成本给了更好的选择。从网络角度看，更低的复杂性的协调减少了对基础资源的投资，同时提高了网络的效率和平衡负载。用这种方法，每个人都可以讲自己的AP合并到共享网络，并将他们的资产商品化到一个无处不在的、不断发展的网络中。</p>\n<p>整合这个主机间网络平台并保持公平高效的运行是很难的。主要障碍是缺乏信任，<font color = red>这也导致期待已久的共享无线电技术（如认知无线电CR，cognitive radio）的商业化部署</font>。如图1a所示几个主要的缺乏信任的地方如下：</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210405151406284\"></p>\n<ul>\n<li><p>SP-Client：在一个动态的多主机网络中，简历并保持一个SP-client信任这一个最基础的关系是非常麻烦的。通常情况下，不信任是双向的。SP受到提供服务的报酬影响，同时客户端要考虑支付后得到的服务和体验(QoS &amp; QoE)。另外，买卖双方都存在隐私问题，特别是个人AP提供的服务。</p>\n</li>\n<li><p>SP-SP：为下一代网络服务的3GPP协议中已经强调了SP之间建立互信。这样的互信可以基于比如商业协，但是把全球700多个主要的移动网络提供商（MNO）纳入一个可信网络而不是我们提到的私人SP非常困难。这导致大多数SP宁愿让网络负载为空也不愿意提供服务给未知的人。</p>\n</li>\n<li><p>Client-Client：多主机网络平台在多个客户端之间存在信任问题，不来自一个公共实体。自私的客户端可能不遵守协议然后过多的占用资源。这会导致无授权上行网络共同悲剧并带来网络阻塞。为了建立并保持健康的不同网络参与者之间的关系，我们提出了先进的B-RAN网络用于5G网络之外。B-RAN是一种<strong>去中心化的，可信赖的，无线</strong>接入模式，利用区块链去链接不同参与者，并为所有的参与者创造一个互利的局面。从以下五个方面总结：</p>\n<ul>\n<li><p>可信(Trustworthiness)：B-RAN可以在不同的各方之间建立互信，并通过底层区块链在不可信的环境中解决授权、授权和会计（AAA）问题。</p>\n</li>\n<li><p>去中心化(Decentralization)：利用区块链的去中心化特点，B-RAN将无线网络转化为健壮的弹性网络去分布网络元素并避免单节点的故障。</p>\n</li>\n<li><p>效率(Efficiency)：B-RAN可以充分利用没组织的低成本自组的AP并通过共享、卸载（offloading）、聚合来提供高的效率。</p>\n</li>\n<li><p>灵活性(Flexibility)：B-RAN通过智能合约支持可插拔功能，以便灵活管理异构服务，并与传统网络和新兴的应用兼容。</p>\n</li>\n<li><p>开放性(Openness)：作为一个凝聚的实体，B-RAN提供了一个开方并且可拓展的生态系统，供组织个人来接入，并保证了安全性和管理性。</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>后面主要介绍：<font color = blue>为什么使用B-RAN，如何构造B-RAN，以及B-RAN如何执行</font></p>\n</div><h2 id=\"B-RAN-Motivations\"><a href=\"#B-RAN-Motivations\" class=\"headerlink\" title=\"B-RAN Motivations\"></a>B-RAN Motivations</h2><div class=\"story post-story\"><h3 id=\"Network-Effects\"><a href=\"#Network-Effects\" class=\"headerlink\" title=\"Network Effects\"></a>Network Effects</h3><p>网络效应描述了一种随着参与者数量增加而导致服务或者产品价值升高的现象。在B-RAN中，随着客户的增加，SP将会加入经济激励( economic incentives )，又称作跨集团网络效应。因此，大量的SP将提高服务质量，吸引更多客户，又导致更大规模的跨集团网络效应。这种正反馈能让B-RAN更快成长balabala。</p>\n<p>balabala规模很大的网络比小网络好。</p>\n<h4 id=\"Multi-Sided-Platform-MSP\"><a href=\"#Multi-Sided-Platform-MSP\" class=\"headerlink\" title=\"Multi-Sided Platform(MSP)\"></a>Multi-Sided Platform(MSP)</h4><p>传统RAN是单边业务，SP主要二点收入来自于直接给客户提供服务。单边业务是封闭的，线性的单向价值链。这所以现在数据爆炸但是传统SP无法获得更多利润。</p>\n<p>为了改变现状我们除了可以横向招募更多SP来整合网络还可以吸引更多方面纵向整合网络成为MSP。如图1c所示，MSP是一个平台，允许多边团队加入并且多边团队能够互动。并且MSP的参与者保留了对剩余交互权的控制。B-RAN是一种典型的MSP，支持SP、客户端交互直连。B-RAN的大规模互联可以重塑原本的单项价值链。</p>\n<h3 id=\"Multi-Sidedness多边性？多面性，就那个意思。\"><a href=\"#Multi-Sidedness多边性？多面性，就那个意思。\" class=\"headerlink\" title=\"Multi-Sidedness多边性？多面性，就那个意思。\"></a>Multi-Sidedness多边性？多面性，就那个意思。</h3><p>目前传统的移动网络服务提供者同时扮演多重角色如SP、频谱持有和基础设施持有等。所以陷入寡头垄断，市场缺乏竞争和创新。因此为了吸引更多的参与者，B-RAN会将这些功能打散呗，是的降低进入壁垒。B-RAN的多边性可以导致更广泛的更丰富的网络效应。同时引入多样的收入来源。下面列举几个比较重要的边</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210405151406284\"></p>\n<ul>\n<li>频谱拥有者Spectrum Holders：频谱持有者可以直接将其数字化频谱资产（DSA）租赁给SP甚至客户端，而不必自己是SP，以实现灵活的频谱管理。</li>\n<li>基础设施所有者Infrastruc Owners：B-RAN中的基础设施包括所有类型的ap、集中式云、存储、回程、边缘节点、物联网传感器等等。许多制造商可以通过直接提供和共享基础设施来加入B-RAN。</li>\n<li>应用开发者Application Developers：软件开发人员通过提供各种去中心化的应用程序（dapp）和智能合约参与B-RAN。同时，开发人员可以通过B-RAN获得可追踪的数据和证书。</li>\n<li>内容提供者Content Providers：内容提供商是B-RAN中的关键参与者，他们创建和销售各种内容，如视频流、广告、众感知（crowdsensing）等，所有这些都向不同方向传递了价值转移。</li>\n<li>维护者Maintainers：严格地说，维护者是市场监管者，而不是MSP中的参与者；然而，它也表现出网络效应。随着B-RAN的发展，更多的维护者将加入到经济激励的行列中，这反过来又加强了B-RAN的中立性和民主化。</li>\n</ul>\n<h3 id=\"Trusted-Intelligence\"><a href=\"#Trusted-Intelligence\" class=\"headerlink\" title=\"Trusted Intelligence\"></a>Trusted Intelligence</h3><p>B-RAN作为信任守护者来保障多边之间的信任。B-RAN不仅擅长提供数据，还擅长将信任作为服务。B-RAN连接了大量的实体，使交互超越了数据传输的范围，扩展到更高级的服务，如计算、缓存、众感知等。例如，边缘节点可以基于B-RAN中的免信任链接向客户端提供计算和缓存服务。</p>\n<p>目前，机器学习任务包括计算储存传播，事实上，B-RAN也会支持这些功能和任务。B-RAN支持前沿的联合式(federated-style)学习并实现基于网络代理的强大可信智能，而不是单个设备上的有限智能。与传统技术相比，人工智能具有更强的适应性，可以通过实践进行学习。B-RAN通过保持从源到所有操作器的数据跟踪，为分布式学习模型提供更强大的数据安全性，以保证安全性、可信和可解释性。因此，B-RAN适用于需要智能和高安全性的领域，如网络物理控制和自动驾驶。</p>\n</div><h2 id=\"B-RAN-Hierarchical-Architecture\"><a href=\"#B-RAN-Hierarchical-Architecture\" class=\"headerlink\" title=\"B-RAN Hierarchical Architecture\"></a>B-RAN Hierarchical Architecture</h2><div class=\"story post-story\"><p>B-RAN不是RAN和区块链的直接结合，而是融合了无线网络和分布式账本技术（distributed ledger technologies. ）的新架构。在这个架构中可信关系十分重要，下面将给出六个层级：</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e36b24075ac8a80988b64521e6535e8a.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/e36b24075ac8a80988b64521e6535e8a.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210405205254682\"></p>\n<ul>\n<li><p>数据层(Data layer)：数据层申明基本的数据结构如区块、数字操作、加密密钥，并且用区块链，交易池（transaction pool），钱包的形式来组织，并且负责各种数据操作功能如（读、写、缓存、加密、解密）</p>\n</li>\n<li><p>连接层(Link Layer)：连接层利用hash-timelocked-contract（HTLC）的原理，通过在两个节点之间内置的安全机制来保证免信任的服务连接，保证双方利益</p>\n</li>\n<li><p>网络层(Network Layer)：网络层由在相同或不同结构上运行的多个子网组成（图2）。网络层由大量的节点和它们之间的链路组成，负责建立、维护和终止子网间和子网内的连接</p>\n</li>\n<li><p>共识层(Consensus Layer)：共识层包括验证数字操作有效的网络维护者并为系统共识生成新的区块。作为安全和花费之间的权衡特点，共识机制可以分为两类</p>\n<ul>\n<li><p>对于未许可的共识，任何实体都可以是维护者。未许可共识可以加强网络的中立性和民主性，但是也会导致巨大的开销</p>\n</li>\n<li><p>对于许可的共识，维护者被限制在一些认证过的实体中。例如：主要的MNO和政府机构。这样的许可共识效率高花费低，并且支持更高的产出，然而，竞争者之间的公平治理（fair governance）可能是一个问题。</p>\n<p>B-RAN是一个有许可共识的，始终开放可访问的网络。像Prsim这种区块链中的先进协议可以用来在B-RAN中提高共识层的表现。</p>\n</li>\n</ul>\n</li>\n<li><p>交易层(Trade Layer)：交易层提供智能合约支持的服务级别协议（SLA, service level agreement）以及实体间资源和资产的公平交换。此外，它支持跨网的资源分配和负载均衡，来实现深度集成。</p>\n</li>\n<li><p>应用层(Application Layer)：应用层为用户、SP、开发者提供可信的应用程序接口（API），并支持各种DApps包括随时访问（ubiquitous access）、边缘服务和可信智能。</p>\n</li>\n</ul>\n<p>例子：首先，客户和SP在应用层发出带有特定服务需求的请求。经过交易层，请求以智能合约的形式与服务、资源和资产相关联。智能合约形成一个区块，随后被添加到共识层的区块链中。网络层采取区块链中智能合约规定的数字行动，并为共识层提供物理网络连接。连接层支持两个实体之间的免信任交互，并为网络层建立点到点链路。数据层为上述层定义分组结构和基本操作。因此，在客户和SP之间建立服务关系。</p>\n</div><h2 id=\"B-RAN-Enabling-Technologies\"><a href=\"#B-RAN-Enabling-Technologies\" class=\"headerlink\" title=\"B-RAN: Enabling Technologies\"></a>B-RAN: Enabling Technologies</h2><div class=\"story post-story\"><h3 id=\"Trust-free-Services\"><a href=\"#Trust-free-Services\" class=\"headerlink\" title=\"Trust-free Services\"></a>Trust-free Services</h3><p>客户端和SP之间想要达成一个公平的交换就需要可信的中介。因此我们可以考虑在连接层内置一个免信任服务过程(Trust-free sevice process)用来保护双方利益消除顾虑。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/ef5cb98e526af88d476d490573495ef6.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/ef5cb98e526af88d476d490573495ef6.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210406120356952\"></p>\n<p>如上图所示：一个嵌入了哈希锁和时间锁的智能合约（HTLC）可以解决这个问题。B-RAN中，SP生成一个结构化随机码c，作为这个SP下的ap在设置中的访问服务授权。一旦SP和客户达成交易，SP就用客户的公钥加密c得到K（c），并在客户向合约支付包括服务费在内的费用之前初始化一个仅包含哈希值H(K(c))的HTLC。支付之后，SP必须在K（c）被回收之前把它解出来。否则，HTLC会退还客户服务费。获得K（c）之后，客户通过私钥恢复出c用来访问相应的AP，哈希锁可以确保长时间不响应的交易和免信任服务，同时只在合约中宣布H（K（c））而不揭示任何与c相关的信息。时间锁严格限制进程来组织长时间的延时和无响应的服务。码c需要被结构化如包含客户身份，以免被他人误用。</p>\n<p>HTLC允许基于非连锁渠道的免信任服务和支付。我们注意到零知识条件支付<font color = red>（zero-knowledge contingent (service) payment (ZKCP &amp; ZKCSP)）</font>是一种零知识证明（zero-knowledge proof (ZKP)）的变体，也是免信任服务的前景。ZKCP/ZKCSP可以在完全不可信的情况下实现服务和支付的公平交换，也有助于SP和客户之间建立信任。</p>\n<h3 id=\"Inter-Host-Coordination（主机间协调）\"><a href=\"#Inter-Host-Coordination（主机间协调）\" class=\"headerlink\" title=\"Inter-Host Coordination（主机间协调）\"></a>Inter-Host Coordination（主机间协调）</h3><p>以前协调的时候，以多点协调为例（Coordinated Multi-Point (CoMP)）通常是要求同一SP下的AP进行协调，他们可以无私共享资源和信息并且为流量负载均衡而考虑是否卸载子网。实践中不同的SP之间并不信任，所以如图1a，B-RAN可以有助于实现主机间的协调，并形成一个可信的子网络，如图3b所示，可以打破子网络的限制，扩大调度可行空间，在B-RAN中引发显著的网络效应。</p>\n<p>主机间协调包括资源共享和负载均衡。B-RAN的协调包含各种元素，例如频谱资源以及各种基础设施。他们再区块链中被<strong>虚拟化以及资产化</strong>，并在SP之间进行共享。另外，用户数据是有价值的隐含资源，客户数据的跨实体共享可以帮助B-RAN发展，但是需要更多的隐私保护。除此之外，可信只能和相应的能力如计算和存储等都可以通过子网络进行共享来加强。还有，B-RAN可以增强主机间无缝卸载来适应不平衡的流量。内置的account可以帮助SP更加愿意参与协作去帮助别的SP。在一个市场平台上，B-RAN将会激励SP和他人合作，形成一个具有生产力和成本效益的网络。多个子网的共享以及卸载可以很大的提高网络效率，这需要一个强大的只能控制器。</p>\n<h3 id=\"Trustworthy-Access（可信链接）\"><a href=\"#Trustworthy-Access（可信链接）\" class=\"headerlink\" title=\"Trustworthy Access（可信链接）\"></a>Trustworthy Access（可信链接）</h3><p>在一个不可信网络中，客户可能会不遵守协议竞争资源。在授信访问中，SP可以预先分配好资源来阻止非必要访问。但是对于那些免授权的如IOT的上行链接来说，这就很麻烦了。因为恶意设备可能会故意摄取更多的资源，当恶意设备变多成规模之后就会导致Rogue’s Dilemma现象。Rogue困境意味着即使区块链在上层建立了信任，但是由于底层信任不够仍然可能协调失败。</p>\n<p>我们开发了一个叫<strong>Hash Access</strong>的可信访问方案来消除客户端间的不信任。如图3c所示，用于无授权场景。在传输数据包之前，客户机应通过找到低于给定阈值的哈希值来解决哈希问题。否则，客户端必须在当前slot中等待。哈希问题由当前时间戳、其唯一标识符（ID）和访问合约组成。由于哈希函数的前像性，哈希问题的答案很容易验证，但很难伪造。流氓设备很难通过生成假哈希值成功欺骗。由于每个哈希计算都可以看作是一个独立的二项式试验，因此在哈希访问中嵌入了一个随机退避，以减少冲突。哈希访问协议在连接层中建立并强制客户端之间的信任。</p>\n<h3 id=\"Intelligent-Consensus\"><a href=\"#Intelligent-Consensus\" class=\"headerlink\" title=\"Intelligent Consensus\"></a>Intelligent Consensus</h3><p>传统共识机制如PoW功耗很高，不合适。因此我们使用Proof-of-Device（PoD）通过限制哈希操作数量来减少过多的一致性开销。为了避免通过多个假身份（也称为Sybil）进行攻击，需要一个防篡改的依赖于硬件的ID。这样ID可以是RF指纹、与硬件相关的不可变字符串及其组合。</p>\n<p>PoD开销依然很大，所以B-RAN维护人员可以部署各种智能算法来提出最佳方案，就像维护人员之间组织的机器学习竞赛一样。只有提出最佳解决方案的人才能确定调度方案，并被提升为下一个区块的赢家，以及相应的区块奖励，如图3d所示。区块链随着过程的重复而扩展和增长。这类机器学习竞赛的组织和实施可以从本文提出的学习一致性证明协议中得到启示。</p>\n<p>分布式边缘节点和多中心云服务器作为维护者，将协作保持B-RAN的一致性，并进一步在子网上构建智能共识层。这些维护人员将B-RAN作为一组分布式智能控制器组织起来，提高其效率。作为一个有见地的例子：B-RAN在参与者之间建立并传播可信的智能，而分布式智能反过来又加强了B-RAN的管理和进化。</p>\n<h3 id=\"Two-Tier-Chain-Structure双链式结构\"><a href=\"#Two-Tier-Chain-Structure双链式结构\" class=\"headerlink\" title=\"Two-Tier Chain Structure双链式结构\"></a>Two-Tier Chain Structure双链式结构</h3><p>考虑到RAN的协作主要发生在地理接近的地区，我们发明了一种Two-Tier的双链结构来解决B-RAN的伸缩性问题。</p>\n<p>由于地理临近的特点所以就不需要将一个记录全局更新，可以将一些记录保留本子，如图3e，我们给不同的域多个子链，并用主链去管理子链。主链的作用就像是联邦政府，为子链指定一个全局的政策。这些子链虽然由主链控制但是享有高度的自由权，因此可以大大减少管理的工作和成本。在不违反主链核心政策的前提下，子链可以根据本地的具体情况制定自己的本地策略。不同子链的交互将会启动主链并记录。子链的哈希能力可能是不平衡的，因此为了安全考虑，子链需要接受一个可以由主链部署的允许共识。主链可以记录子链中区块的哈希值来降低遭受恶意攻击的风险。</p>\n</div><h2 id=\"B-RAN-Case-Study\"><a href=\"#B-RAN-Case-Study\" class=\"headerlink\" title=\"B-RAN Case Study\"></a>B-RAN Case Study</h2><div class=\"story post-story\"><h3 id=\"Platform-of-Subnetworks\"><a href=\"#Platform-of-Subnetworks\" class=\"headerlink\" title=\"Platform of Subnetworks\"></a>Platform of Subnetworks</h3><p>这里使用（[9]    X. Ling et al., “Practical Modeling and Analysis of Blockchain Radio Access Network,” arXiv preprint arXiv:1911.12537, Nov. 2019.[14]Y. Le et al., “Prototype Design and Test of Blockchain Radio Access Network,” Proc. IEEE Int’l. Conf. Commun. Work-shops (ICC’19), Shanghai, P.R. China, May 2019.）文章中的实验室原型来评估B-RAN性能。在此考虑一个有着多个子网络和多个客户的域。B-RAN是一个由子网络组成的网络所以可以用子网络数量k来反应B-RAN的大小。每个子网络可以同时给最多l个客户端提供连接服务。假设客户端的连接请求遵循泊松过程，速率为$\\lambda^a$，服务时间是以平均$\\frac{1}{\\lambda^c}$指数分布的，那流量强度就定义为：<br>$$<br>\\rho = \\frac{\\lambda^a}{kl\\lambda^c}<br>$$<br>这里，$kl$代表了连接到B-RAN网络的最大客户端数量。B-RAN中平均的区块产生相对平均服务时间是0.05，并且这里l=4，每个请求需要N个顶层区块链的区块来确认（N=4 in fig.4）</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/72ecbe92c8f6343ee1dff0e3dce3ea1f.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/72ecbe92c8f6343ee1dff0e3dce3ea1f.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210406152814624\"></p>\n<p>在图4中，我们说明了不同网络流量下网络大小的积极影响程度。我们通过有效吞吐量（满足最大时延$D_m$条件下的请求速率）来衡量B-RAN性能。我们画出了$D_m = 0.08$（由B-RAN中连接数标准化）的有效吞吐量以及$D_m = 0.06$、$D_m = 0.1$的误差线来避免由$D_m$引起的误差。如图所示，可以看出在相同的业务流量$\\rho$下，B-RAN结合越多的子网络，可以达到更高的有效吞吐，并且取不同的$D_m$依然如此。这表明更大的网络更有效率，所以为了获得更好的性能，B-RAN有很强的的扩展和成长为一个有大量子网构成的大型网络的动机。</p>\n<h3 id=\"Latency-Security-Trade-off（延时与安全权衡）\"><a href=\"#Latency-Security-Trade-off（延时与安全权衡）\" class=\"headerlink\" title=\"Latency-Security Trade-off（延时与安全权衡）\"></a>Latency-Security Trade-off（延时与安全权衡）</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/1f81011d20a34364ce332b623933dd34.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/1f81011d20a34364ce332b623933dd34.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210406153907493\"></p>\n<p>上图演示了B-RAN的服务延迟和安全属性，参数如图4。图5中红色表面上的线是在具有固定哈希能力的对手（相对于其他$\\beta = 20%$网络）面前不同业务流量$\\rho$下存在的。我们将他们投影到$L-N$平面，这样更清楚。我们可以看到较高的业务量会引起网络阻塞和较高的延时$L$，延时$L$也表现出和确认区块数$N$近似线性关系。</p>\n<p>然后，我们根据对手成功攻击已确认区块链的概率来评估安全性，如从对手具有不同哈希能力的案例中获得的蓝线所示。我们还将这些线投影到$S-N$平面。随着对手哈希能力的提高，成功攻击的概率也相应增加。如图5所示，我们需要设置一个更大的确认区块数$N$以降低风险并保护B-RAN。</p>\n<p>图5的三维图显示，延时和安全性与确认区块数量$N$密切相关。更多的$N$更大的延时$L$可以获得更强的安全性优势。所以需要结合实际选择确认区块数来保持一个延时和安全性都比较好的情况。延时与安全权衡可以看做是B-RAN能实现性能的全貌。本质上，延迟安全权衡揭示了分布式系统本身的汇集速度和确认可靠性之间的内在关系。它可以为B-RAN的设计和实现提供更好的理解和更深入的见解。</p>\n<h3 id=\"Rogue’s-Dilemma\"><a href=\"#Rogue’s-Dilemma\" class=\"headerlink\" title=\"Rogue’s Dilemma\"></a>Rogue’s Dilemma</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/26c11a58071f3fb2b17ac7993be7885c.png\" class=\"lazyload\" data-srcset=\"https://img-blog.csdnimg.cn/img_convert/26c11a58071f3fb2b17ac7993be7885c.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20210406160408927\"></p>\n<p>在图6a中，我们将哈希连接（Hash Access）的性能和Aloha协议进行比较。Aloha协议采用基于均匀分布退避的竞争解决方案，最大窗口为100个slot。在无恶意设备的安全环境下，Aloha和哈希连接的吞吐量相当。在5%设备是流氓设备的情况下并可能自私跳过退避的场景中，吞吐量受到较大影响。同时，不平衡的条件下（子网负载不平衡75%-25%），Aloha协议由于SP不能平衡流量所以产生严重的性能下降。B-RAN可以卸载不平衡流量并实现子网上的有机集成。</p>\n<p>图6b我们采用物联网中的经验数据来评估哈希连接的性能，可以看出哈希访问可以处理实际的波动包流并保持高吞吐量。</p>\n</div><h2 id=\"总结和见解\"><a href=\"#总结和见解\" class=\"headerlink\" title=\"总结和见解\"></a>总结和见解</h2><div class=\"story post-story\"><p>我们提出了B-RAN的工作模式，用于Beyond 5G的无线传输。通过网络效应的视角，我们说明了B-RAN是如何提高效率和生产力的。我们通过在不可信任的参与者之间建立信任来证明B-RAN作为MSP的力量。在技术上，我们开发了一个由六层组成的层次结构作为B-RAN的总体框架，并研究了关键的使能技术。基于我们实验室构建的B-RAN原型，我们阐述了B-RAN中的几种现象：网络池效应、延迟安全权衡和盗贼困境。</p>\n<p>几个有趣的见解：</p>\n<ul>\n<li>B-RAN需要面临一个临界启动问题，B-RAN怎么获得足够的新客户呢？并吸引更多的人加入。</li>\n<li>网络规模大了之后可能面临拥挤。</li>\n<li>民主和集权的网络各有利弊</li>\n</ul>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Blockchain-Radio-Access-Network-Beyond-5G阅读笔记\"><a href=\"#Blockchain-Radio-Access-Network-Beyond-5G阅读笔记\" class=\"headerlink\" title=\"Blockchain Radio Access Network Beyond 5G阅读笔记\"></a>Blockchain Radio Access Network Beyond 5G阅读笔记</h1><h2 id=\"摘要\"><a href=\"#摘要\" class=\"headerlink\" title=\"摘要\"></a>摘要</h2><p>提出一种先进的无线网接入模式B-RAN，B-RAN利用区块链，将大规模的免信任子网络连接成大规模可信任合作网络。关于增长的B-RAN网络，我们引入了一个网络经济学的概念。B-RAN可以通过连接多边平台以及多个群组来创造价值。为了在不同的群组中建立深度整合且健康的multi-fold信任，我们将B-RAN划分成了6个层结构，从底层建立信任关系，并提供了一系列的关键技术来克服中间的主要障碍。最后通过三个案例来研究B-RAN网络的性能。</p>\n<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>balabala 由于现今情况下应用程序和用户服务接入网络很复杂，拓展性不足，费用高昂，企业活个人接入点不协调，利用率不高，所以超越5G需要思考一种新的无线接入模式。</p>\n<p>主机间网络（inter-host network）协作可以经济高效地对未来网络进行转变。构建一个跨服务提供商（SP，service providers）共享的动态有机网络平台可以利用一个主机池中的网络元素，并且可以将不协调的AP合并到RAN网络之中，以此来实现高效率、低成本、强可靠性和广泛覆盖。在这种扁平化的主机间网络客户除了可以访问除自己的SP下的AP（access point）外，还可以访问一定范围内的AP。这样就可以在自己的SP阻塞的时候访问范围内不阻塞的AP，或者连接到一个专用AP池。因此，从客户机角度看，大规模网络用较低的成本给了更好的选择。从网络角度看，更低的复杂性的协调减少了对基础资源的投资，同时提高了网络的效率和平衡负载。用这种方法，每个人都可以讲自己的AP合并到共享网络，并将他们的资产商品化到一个无处不在的、不断发展的网络中。</p>\n<p>整合这个主机间网络平台并保持公平高效的运行是很难的。主要障碍是缺乏信任，<font color = red>这也导致期待已久的共享无线电技术（如认知无线电CR，cognitive radio）的商业化部署</font>。如图1a所示几个主要的缺乏信任的地方如下：</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" alt=\"image-20210405151406284\"></p>\n<ul>\n<li><p>SP-Client：在一个动态的多主机网络中，简历并保持一个SP-client信任这一个最基础的关系是非常麻烦的。通常情况下，不信任是双向的。SP受到提供服务的报酬影响，同时客户端要考虑支付后得到的服务和体验(QoS &amp; QoE)。另外，买卖双方都存在隐私问题，特别是个人AP提供的服务。</p>\n</li>\n<li><p>SP-SP：为下一代网络服务的3GPP协议中已经强调了SP之间建立互信。这样的互信可以基于比如商业协，但是把全球700多个主要的移动网络提供商（MNO）纳入一个可信网络而不是我们提到的私人SP非常困难。这导致大多数SP宁愿让网络负载为空也不愿意提供服务给未知的人。</p>\n</li>\n<li><p>Client-Client：多主机网络平台在多个客户端之间存在信任问题，不来自一个公共实体。自私的客户端可能不遵守协议然后过多的占用资源。这会导致无授权上行网络共同悲剧并带来网络阻塞。为了建立并保持健康的不同网络参与者之间的关系，我们提出了先进的B-RAN网络用于5G网络之外。B-RAN是一种<strong>去中心化的，可信赖的，无线</strong>接入模式，利用区块链去链接不同参与者，并为所有的参与者创造一个互利的局面。从以下五个方面总结：</p>\n<ul>\n<li><p>可信(Trustworthiness)：B-RAN可以在不同的各方之间建立互信，并通过底层区块链在不可信的环境中解决授权、授权和会计（AAA）问题。</p>\n</li>\n<li><p>去中心化(Decentralization)：利用区块链的去中心化特点，B-RAN将无线网络转化为健壮的弹性网络去分布网络元素并避免单节点的故障。</p>\n</li>\n<li><p>效率(Efficiency)：B-RAN可以充分利用没组织的低成本自组的AP并通过共享、卸载（offloading）、聚合来提供高的效率。</p>\n</li>\n<li><p>灵活性(Flexibility)：B-RAN通过智能合约支持可插拔功能，以便灵活管理异构服务，并与传统网络和新兴的应用兼容。</p>\n</li>\n<li><p>开放性(Openness)：作为一个凝聚的实体，B-RAN提供了一个开方并且可拓展的生态系统，供组织个人来接入，并保证了安全性和管理性。</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>后面主要介绍：<font color = blue>为什么使用B-RAN，如何构造B-RAN，以及B-RAN如何执行</font></p>\n<h2 id=\"B-RAN-Motivations\"><a href=\"#B-RAN-Motivations\" class=\"headerlink\" title=\"B-RAN Motivations\"></a>B-RAN Motivations</h2><h3 id=\"Network-Effects\"><a href=\"#Network-Effects\" class=\"headerlink\" title=\"Network Effects\"></a>Network Effects</h3><p>网络效应描述了一种随着参与者数量增加而导致服务或者产品价值升高的现象。在B-RAN中，随着客户的增加，SP将会加入经济激励( economic incentives )，又称作跨集团网络效应。因此，大量的SP将提高服务质量，吸引更多客户，又导致更大规模的跨集团网络效应。这种正反馈能让B-RAN更快成长balabala。</p>\n<p>balabala规模很大的网络比小网络好。</p>\n<h4 id=\"Multi-Sided-Platform-MSP\"><a href=\"#Multi-Sided-Platform-MSP\" class=\"headerlink\" title=\"Multi-Sided Platform(MSP)\"></a>Multi-Sided Platform(MSP)</h4><p>传统RAN是单边业务，SP主要二点收入来自于直接给客户提供服务。单边业务是封闭的，线性的单向价值链。这所以现在数据爆炸但是传统SP无法获得更多利润。</p>\n<p>为了改变现状我们除了可以横向招募更多SP来整合网络还可以吸引更多方面纵向整合网络成为MSP。如图1c所示，MSP是一个平台，允许多边团队加入并且多边团队能够互动。并且MSP的参与者保留了对剩余交互权的控制。B-RAN是一种典型的MSP，支持SP、客户端交互直连。B-RAN的大规模互联可以重塑原本的单项价值链。</p>\n<h3 id=\"Multi-Sidedness多边性？多面性，就那个意思。\"><a href=\"#Multi-Sidedness多边性？多面性，就那个意思。\" class=\"headerlink\" title=\"Multi-Sidedness多边性？多面性，就那个意思。\"></a>Multi-Sidedness多边性？多面性，就那个意思。</h3><p>目前传统的移动网络服务提供者同时扮演多重角色如SP、频谱持有和基础设施持有等。所以陷入寡头垄断，市场缺乏竞争和创新。因此为了吸引更多的参与者，B-RAN会将这些功能打散呗，是的降低进入壁垒。B-RAN的多边性可以导致更广泛的更丰富的网络效应。同时引入多样的收入来源。下面列举几个比较重要的边</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e2a699a20eb2d2aaa5fc335cd91741b6.png\" alt=\"image-20210405151406284\"></p>\n<ul>\n<li>频谱拥有者Spectrum Holders：频谱持有者可以直接将其数字化频谱资产（DSA）租赁给SP甚至客户端，而不必自己是SP，以实现灵活的频谱管理。</li>\n<li>基础设施所有者Infrastruc Owners：B-RAN中的基础设施包括所有类型的ap、集中式云、存储、回程、边缘节点、物联网传感器等等。许多制造商可以通过直接提供和共享基础设施来加入B-RAN。</li>\n<li>应用开发者Application Developers：软件开发人员通过提供各种去中心化的应用程序（dapp）和智能合约参与B-RAN。同时，开发人员可以通过B-RAN获得可追踪的数据和证书。</li>\n<li>内容提供者Content Providers：内容提供商是B-RAN中的关键参与者，他们创建和销售各种内容，如视频流、广告、众感知（crowdsensing）等，所有这些都向不同方向传递了价值转移。</li>\n<li>维护者Maintainers：严格地说，维护者是市场监管者，而不是MSP中的参与者；然而，它也表现出网络效应。随着B-RAN的发展，更多的维护者将加入到经济激励的行列中，这反过来又加强了B-RAN的中立性和民主化。</li>\n</ul>\n<h3 id=\"Trusted-Intelligence\"><a href=\"#Trusted-Intelligence\" class=\"headerlink\" title=\"Trusted Intelligence\"></a>Trusted Intelligence</h3><p>B-RAN作为信任守护者来保障多边之间的信任。B-RAN不仅擅长提供数据，还擅长将信任作为服务。B-RAN连接了大量的实体，使交互超越了数据传输的范围，扩展到更高级的服务，如计算、缓存、众感知等。例如，边缘节点可以基于B-RAN中的免信任链接向客户端提供计算和缓存服务。</p>\n<p>目前，机器学习任务包括计算储存传播，事实上，B-RAN也会支持这些功能和任务。B-RAN支持前沿的联合式(federated-style)学习并实现基于网络代理的强大可信智能，而不是单个设备上的有限智能。与传统技术相比，人工智能具有更强的适应性，可以通过实践进行学习。B-RAN通过保持从源到所有操作器的数据跟踪，为分布式学习模型提供更强大的数据安全性，以保证安全性、可信和可解释性。因此，B-RAN适用于需要智能和高安全性的领域，如网络物理控制和自动驾驶。</p>\n<h2 id=\"B-RAN-Hierarchical-Architecture\"><a href=\"#B-RAN-Hierarchical-Architecture\" class=\"headerlink\" title=\"B-RAN Hierarchical Architecture\"></a>B-RAN Hierarchical Architecture</h2><p>B-RAN不是RAN和区块链的直接结合，而是融合了无线网络和分布式账本技术（distributed ledger technologies. ）的新架构。在这个架构中可信关系十分重要，下面将给出六个层级：</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e36b24075ac8a80988b64521e6535e8a.png\" alt=\"image-20210405205254682\"></p>\n<ul>\n<li><p>数据层(Data layer)：数据层申明基本的数据结构如区块、数字操作、加密密钥，并且用区块链，交易池（transaction pool），钱包的形式来组织，并且负责各种数据操作功能如（读、写、缓存、加密、解密）</p>\n</li>\n<li><p>连接层(Link Layer)：连接层利用hash-timelocked-contract（HTLC）的原理，通过在两个节点之间内置的安全机制来保证免信任的服务连接，保证双方利益</p>\n</li>\n<li><p>网络层(Network Layer)：网络层由在相同或不同结构上运行的多个子网组成（图2）。网络层由大量的节点和它们之间的链路组成，负责建立、维护和终止子网间和子网内的连接</p>\n</li>\n<li><p>共识层(Consensus Layer)：共识层包括验证数字操作有效的网络维护者并为系统共识生成新的区块。作为安全和花费之间的权衡特点，共识机制可以分为两类</p>\n<ul>\n<li><p>对于未许可的共识，任何实体都可以是维护者。未许可共识可以加强网络的中立性和民主性，但是也会导致巨大的开销</p>\n</li>\n<li><p>对于许可的共识，维护者被限制在一些认证过的实体中。例如：主要的MNO和政府机构。这样的许可共识效率高花费低，并且支持更高的产出，然而，竞争者之间的公平治理（fair governance）可能是一个问题。</p>\n<p>B-RAN是一个有许可共识的，始终开放可访问的网络。像Prsim这种区块链中的先进协议可以用来在B-RAN中提高共识层的表现。</p>\n</li>\n</ul>\n</li>\n<li><p>交易层(Trade Layer)：交易层提供智能合约支持的服务级别协议（SLA, service level agreement）以及实体间资源和资产的公平交换。此外，它支持跨网的资源分配和负载均衡，来实现深度集成。</p>\n</li>\n<li><p>应用层(Application Layer)：应用层为用户、SP、开发者提供可信的应用程序接口（API），并支持各种DApps包括随时访问（ubiquitous access）、边缘服务和可信智能。</p>\n</li>\n</ul>\n<p>例子：首先，客户和SP在应用层发出带有特定服务需求的请求。经过交易层，请求以智能合约的形式与服务、资源和资产相关联。智能合约形成一个区块，随后被添加到共识层的区块链中。网络层采取区块链中智能合约规定的数字行动，并为共识层提供物理网络连接。连接层支持两个实体之间的免信任交互，并为网络层建立点到点链路。数据层为上述层定义分组结构和基本操作。因此，在客户和SP之间建立服务关系。</p>\n<h2 id=\"B-RAN-Enabling-Technologies\"><a href=\"#B-RAN-Enabling-Technologies\" class=\"headerlink\" title=\"B-RAN: Enabling Technologies\"></a>B-RAN: Enabling Technologies</h2><h3 id=\"Trust-free-Services\"><a href=\"#Trust-free-Services\" class=\"headerlink\" title=\"Trust-free Services\"></a>Trust-free Services</h3><p>客户端和SP之间想要达成一个公平的交换就需要可信的中介。因此我们可以考虑在连接层内置一个免信任服务过程(Trust-free sevice process)用来保护双方利益消除顾虑。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/ef5cb98e526af88d476d490573495ef6.png\" alt=\"image-20210406120356952\"></p>\n<p>如上图所示：一个嵌入了哈希锁和时间锁的智能合约（HTLC）可以解决这个问题。B-RAN中，SP生成一个结构化随机码c，作为这个SP下的ap在设置中的访问服务授权。一旦SP和客户达成交易，SP就用客户的公钥加密c得到K（c），并在客户向合约支付包括服务费在内的费用之前初始化一个仅包含哈希值H(K(c))的HTLC。支付之后，SP必须在K（c）被回收之前把它解出来。否则，HTLC会退还客户服务费。获得K（c）之后，客户通过私钥恢复出c用来访问相应的AP，哈希锁可以确保长时间不响应的交易和免信任服务，同时只在合约中宣布H（K（c））而不揭示任何与c相关的信息。时间锁严格限制进程来组织长时间的延时和无响应的服务。码c需要被结构化如包含客户身份，以免被他人误用。</p>\n<p>HTLC允许基于非连锁渠道的免信任服务和支付。我们注意到零知识条件支付<font color = red>（zero-knowledge contingent (service) payment (ZKCP &amp; ZKCSP)）</font>是一种零知识证明（zero-knowledge proof (ZKP)）的变体，也是免信任服务的前景。ZKCP/ZKCSP可以在完全不可信的情况下实现服务和支付的公平交换，也有助于SP和客户之间建立信任。</p>\n<h3 id=\"Inter-Host-Coordination（主机间协调）\"><a href=\"#Inter-Host-Coordination（主机间协调）\" class=\"headerlink\" title=\"Inter-Host Coordination（主机间协调）\"></a>Inter-Host Coordination（主机间协调）</h3><p>以前协调的时候，以多点协调为例（Coordinated Multi-Point (CoMP)）通常是要求同一SP下的AP进行协调，他们可以无私共享资源和信息并且为流量负载均衡而考虑是否卸载子网。实践中不同的SP之间并不信任，所以如图1a，B-RAN可以有助于实现主机间的协调，并形成一个可信的子网络，如图3b所示，可以打破子网络的限制，扩大调度可行空间，在B-RAN中引发显著的网络效应。</p>\n<p>主机间协调包括资源共享和负载均衡。B-RAN的协调包含各种元素，例如频谱资源以及各种基础设施。他们再区块链中被<strong>虚拟化以及资产化</strong>，并在SP之间进行共享。另外，用户数据是有价值的隐含资源，客户数据的跨实体共享可以帮助B-RAN发展，但是需要更多的隐私保护。除此之外，可信只能和相应的能力如计算和存储等都可以通过子网络进行共享来加强。还有，B-RAN可以增强主机间无缝卸载来适应不平衡的流量。内置的account可以帮助SP更加愿意参与协作去帮助别的SP。在一个市场平台上，B-RAN将会激励SP和他人合作，形成一个具有生产力和成本效益的网络。多个子网的共享以及卸载可以很大的提高网络效率，这需要一个强大的只能控制器。</p>\n<h3 id=\"Trustworthy-Access（可信链接）\"><a href=\"#Trustworthy-Access（可信链接）\" class=\"headerlink\" title=\"Trustworthy Access（可信链接）\"></a>Trustworthy Access（可信链接）</h3><p>在一个不可信网络中，客户可能会不遵守协议竞争资源。在授信访问中，SP可以预先分配好资源来阻止非必要访问。但是对于那些免授权的如IOT的上行链接来说，这就很麻烦了。因为恶意设备可能会故意摄取更多的资源，当恶意设备变多成规模之后就会导致Rogue’s Dilemma现象。Rogue困境意味着即使区块链在上层建立了信任，但是由于底层信任不够仍然可能协调失败。</p>\n<p>我们开发了一个叫<strong>Hash Access</strong>的可信访问方案来消除客户端间的不信任。如图3c所示，用于无授权场景。在传输数据包之前，客户机应通过找到低于给定阈值的哈希值来解决哈希问题。否则，客户端必须在当前slot中等待。哈希问题由当前时间戳、其唯一标识符（ID）和访问合约组成。由于哈希函数的前像性，哈希问题的答案很容易验证，但很难伪造。流氓设备很难通过生成假哈希值成功欺骗。由于每个哈希计算都可以看作是一个独立的二项式试验，因此在哈希访问中嵌入了一个随机退避，以减少冲突。哈希访问协议在连接层中建立并强制客户端之间的信任。</p>\n<h3 id=\"Intelligent-Consensus\"><a href=\"#Intelligent-Consensus\" class=\"headerlink\" title=\"Intelligent Consensus\"></a>Intelligent Consensus</h3><p>传统共识机制如PoW功耗很高，不合适。因此我们使用Proof-of-Device（PoD）通过限制哈希操作数量来减少过多的一致性开销。为了避免通过多个假身份（也称为Sybil）进行攻击，需要一个防篡改的依赖于硬件的ID。这样ID可以是RF指纹、与硬件相关的不可变字符串及其组合。</p>\n<p>PoD开销依然很大，所以B-RAN维护人员可以部署各种智能算法来提出最佳方案，就像维护人员之间组织的机器学习竞赛一样。只有提出最佳解决方案的人才能确定调度方案，并被提升为下一个区块的赢家，以及相应的区块奖励，如图3d所示。区块链随着过程的重复而扩展和增长。这类机器学习竞赛的组织和实施可以从本文提出的学习一致性证明协议中得到启示。</p>\n<p>分布式边缘节点和多中心云服务器作为维护者，将协作保持B-RAN的一致性，并进一步在子网上构建智能共识层。这些维护人员将B-RAN作为一组分布式智能控制器组织起来，提高其效率。作为一个有见地的例子：B-RAN在参与者之间建立并传播可信的智能，而分布式智能反过来又加强了B-RAN的管理和进化。</p>\n<h3 id=\"Two-Tier-Chain-Structure双链式结构\"><a href=\"#Two-Tier-Chain-Structure双链式结构\" class=\"headerlink\" title=\"Two-Tier Chain Structure双链式结构\"></a>Two-Tier Chain Structure双链式结构</h3><p>考虑到RAN的协作主要发生在地理接近的地区，我们发明了一种Two-Tier的双链结构来解决B-RAN的伸缩性问题。</p>\n<p>由于地理临近的特点所以就不需要将一个记录全局更新，可以将一些记录保留本子，如图3e，我们给不同的域多个子链，并用主链去管理子链。主链的作用就像是联邦政府，为子链指定一个全局的政策。这些子链虽然由主链控制但是享有高度的自由权，因此可以大大减少管理的工作和成本。在不违反主链核心政策的前提下，子链可以根据本地的具体情况制定自己的本地策略。不同子链的交互将会启动主链并记录。子链的哈希能力可能是不平衡的，因此为了安全考虑，子链需要接受一个可以由主链部署的允许共识。主链可以记录子链中区块的哈希值来降低遭受恶意攻击的风险。</p>\n<h2 id=\"B-RAN-Case-Study\"><a href=\"#B-RAN-Case-Study\" class=\"headerlink\" title=\"B-RAN Case Study\"></a>B-RAN Case Study</h2><h3 id=\"Platform-of-Subnetworks\"><a href=\"#Platform-of-Subnetworks\" class=\"headerlink\" title=\"Platform of Subnetworks\"></a>Platform of Subnetworks</h3><p>这里使用（[9]    X. Ling et al., “Practical Modeling and Analysis of Blockchain Radio Access Network,” arXiv preprint arXiv:1911.12537, Nov. 2019.[14]Y. Le et al., “Prototype Design and Test of Blockchain Radio Access Network,” Proc. IEEE Int’l. Conf. Commun. Work-shops (ICC’19), Shanghai, P.R. China, May 2019.）文章中的实验室原型来评估B-RAN性能。在此考虑一个有着多个子网络和多个客户的域。B-RAN是一个由子网络组成的网络所以可以用子网络数量k来反应B-RAN的大小。每个子网络可以同时给最多l个客户端提供连接服务。假设客户端的连接请求遵循泊松过程，速率为$\\lambda^a$，服务时间是以平均$\\frac{1}{\\lambda^c}$指数分布的，那流量强度就定义为：<br>$$<br>\\rho = \\frac{\\lambda^a}{kl\\lambda^c}<br>$$<br>这里，$kl$代表了连接到B-RAN网络的最大客户端数量。B-RAN中平均的区块产生相对平均服务时间是0.05，并且这里l=4，每个请求需要N个顶层区块链的区块来确认（N=4 in fig.4）</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/72ecbe92c8f6343ee1dff0e3dce3ea1f.png\" alt=\"image-20210406152814624\"></p>\n<p>在图4中，我们说明了不同网络流量下网络大小的积极影响程度。我们通过有效吞吐量（满足最大时延$D_m$条件下的请求速率）来衡量B-RAN性能。我们画出了$D_m = 0.08$（由B-RAN中连接数标准化）的有效吞吐量以及$D_m = 0.06$、$D_m = 0.1$的误差线来避免由$D_m$引起的误差。如图所示，可以看出在相同的业务流量$\\rho$下，B-RAN结合越多的子网络，可以达到更高的有效吞吐，并且取不同的$D_m$依然如此。这表明更大的网络更有效率，所以为了获得更好的性能，B-RAN有很强的的扩展和成长为一个有大量子网构成的大型网络的动机。</p>\n<h3 id=\"Latency-Security-Trade-off（延时与安全权衡）\"><a href=\"#Latency-Security-Trade-off（延时与安全权衡）\" class=\"headerlink\" title=\"Latency-Security Trade-off（延时与安全权衡）\"></a>Latency-Security Trade-off（延时与安全权衡）</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/1f81011d20a34364ce332b623933dd34.png\" alt=\"image-20210406153907493\"></p>\n<p>上图演示了B-RAN的服务延迟和安全属性，参数如图4。图5中红色表面上的线是在具有固定哈希能力的对手（相对于其他$\\beta = 20%$网络）面前不同业务流量$\\rho$下存在的。我们将他们投影到$L-N$平面，这样更清楚。我们可以看到较高的业务量会引起网络阻塞和较高的延时$L$，延时$L$也表现出和确认区块数$N$近似线性关系。</p>\n<p>然后，我们根据对手成功攻击已确认区块链的概率来评估安全性，如从对手具有不同哈希能力的案例中获得的蓝线所示。我们还将这些线投影到$S-N$平面。随着对手哈希能力的提高，成功攻击的概率也相应增加。如图5所示，我们需要设置一个更大的确认区块数$N$以降低风险并保护B-RAN。</p>\n<p>图5的三维图显示，延时和安全性与确认区块数量$N$密切相关。更多的$N$更大的延时$L$可以获得更强的安全性优势。所以需要结合实际选择确认区块数来保持一个延时和安全性都比较好的情况。延时与安全权衡可以看做是B-RAN能实现性能的全貌。本质上，延迟安全权衡揭示了分布式系统本身的汇集速度和确认可靠性之间的内在关系。它可以为B-RAN的设计和实现提供更好的理解和更深入的见解。</p>\n<h3 id=\"Rogue’s-Dilemma\"><a href=\"#Rogue’s-Dilemma\" class=\"headerlink\" title=\"Rogue’s Dilemma\"></a>Rogue’s Dilemma</h3><p><img src=\"https://img-blog.csdnimg.cn/img_convert/26c11a58071f3fb2b17ac7993be7885c.png\" alt=\"image-20210406160408927\"></p>\n<p>在图6a中，我们将哈希连接（Hash Access）的性能和Aloha协议进行比较。Aloha协议采用基于均匀分布退避的竞争解决方案，最大窗口为100个slot。在无恶意设备的安全环境下，Aloha和哈希连接的吞吐量相当。在5%设备是流氓设备的情况下并可能自私跳过退避的场景中，吞吐量受到较大影响。同时，不平衡的条件下（子网负载不平衡75%-25%），Aloha协议由于SP不能平衡流量所以产生严重的性能下降。B-RAN可以卸载不平衡流量并实现子网上的有机集成。</p>\n<p>图6b我们采用物联网中的经验数据来评估哈希连接的性能，可以看出哈希访问可以处理实际的波动包流并保持高吞吐量。</p>\n<h2 id=\"总结和见解\"><a href=\"#总结和见解\" class=\"headerlink\" title=\"总结和见解\"></a>总结和见解</h2><p>我们提出了B-RAN的工作模式，用于Beyond 5G的无线传输。通过网络效应的视角，我们说明了B-RAN是如何提高效率和生产力的。我们通过在不可信任的参与者之间建立信任来证明B-RAN作为MSP的力量。在技术上，我们开发了一个由六层组成的层次结构作为B-RAN的总体框架，并研究了关键的使能技术。基于我们实验室构建的B-RAN原型，我们阐述了B-RAN中的几种现象：网络池效应、延迟安全权衡和盗贼困境。</p>\n<p>几个有趣的见解：</p>\n<ul>\n<li>B-RAN需要面临一个临界启动问题，B-RAN怎么获得足够的新客户呢？并吸引更多的人加入。</li>\n<li>网络规模大了之后可能面临拥挤。</li>\n<li>民主和集权的网络各有利弊</li>\n</ul>\n"},{"title":"Centos Nginx 解决跨域问题","date":"2021-12-13T12:05:26.000Z","author":"Lcy","_content":"\n# Nginx解决跨域问题\n\n问题描述：后端在本机127.0.0.1:9090端口开展服务，但是前端不在本机部署，访问出现跨域问题无法解决。\n\n## 安装Nginx并配置\n\n```shell\n# Step1： 下载编译工具和库文件\nyum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel\n\n# Step2:  安装PCRE\n# 下载\ncd /usr/local/src/\nwget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz\n# 解压\ntar zxvf pcre-8.35.tar.gz\n# 进入目录\ncd pcre-8.35\n# 编译安装\n./configure\nmake && make install\n# 查看版本无误\npcre-config --version\n\n# Step3：  安装Nginx\n# 下载\ncd /usr/local/src/\nwget https://nginx.org/download/nginx-1.20.2.tar.gz\n# 解压安装包\ntar zxvf nginx-1.20.2.tar.gz\n# 进入安装目录\ncd nginx-1.20.2\n# 编译安装\n./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35\n\nmake\nmake install\n# 查看Nginx版本\n/usr/local/webserver/nginx/sbin/nginx -v\n```\n\n## 配置Nginx的文件\n\n实现：将9091端口跨域请求放通，映射本机9090端口\n\n```shell\nvim /usr/local/webserver/nginx/conf/nginx.conf\n```\n\n```conf\n\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n    server\n    {\n        listen       9091;\n        server_name  localhost;\n        location /api {\n                root   html;\n                index  index.html index.htm;\n                add_header Access-Control-Allow-Origin *;\n                add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n                add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n                if ($request_method = 'OPTIONS') {\n                        return 204;\n                }\n\t\tproxy_pass   http://127.0.0.1:9090;\n         }\n    }\n}\n```\n\n## 检查配置文件并启动\n\n```shell\n# 检查文件正确性\n/usr/local/webserver/nginx/sbin/nginx -t\n# 启动\n/usr/local/webserver/nginx/sbin/nginx\n###################\n/usr/local/webserver/nginx/sbin/nginx -s reload            # 重新载入配置文件\n/usr/local/webserver/nginx/sbin/nginx -s reopen            # 重启 Nginx\n/usr/local/webserver/nginx/sbin/nginx -s stop              # 停止 Nginx\n```\n","source":"_posts/解决跨域问题.md","raw":"---\ntitle: Centos Nginx 解决跨域问题\ndate: 2021-12-13 20:05:26\ntags: Study-Devops\ncategories: Titanium Tech\nauthor: Lcy\n\n---\n\n# Nginx解决跨域问题\n\n问题描述：后端在本机127.0.0.1:9090端口开展服务，但是前端不在本机部署，访问出现跨域问题无法解决。\n\n## 安装Nginx并配置\n\n```shell\n# Step1： 下载编译工具和库文件\nyum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel\n\n# Step2:  安装PCRE\n# 下载\ncd /usr/local/src/\nwget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz\n# 解压\ntar zxvf pcre-8.35.tar.gz\n# 进入目录\ncd pcre-8.35\n# 编译安装\n./configure\nmake && make install\n# 查看版本无误\npcre-config --version\n\n# Step3：  安装Nginx\n# 下载\ncd /usr/local/src/\nwget https://nginx.org/download/nginx-1.20.2.tar.gz\n# 解压安装包\ntar zxvf nginx-1.20.2.tar.gz\n# 进入安装目录\ncd nginx-1.20.2\n# 编译安装\n./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35\n\nmake\nmake install\n# 查看Nginx版本\n/usr/local/webserver/nginx/sbin/nginx -v\n```\n\n## 配置Nginx的文件\n\n实现：将9091端口跨域请求放通，映射本机9090端口\n\n```shell\nvim /usr/local/webserver/nginx/conf/nginx.conf\n```\n\n```conf\n\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n    server\n    {\n        listen       9091;\n        server_name  localhost;\n        location /api {\n                root   html;\n                index  index.html index.htm;\n                add_header Access-Control-Allow-Origin *;\n                add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';\n                add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';\n                if ($request_method = 'OPTIONS') {\n                        return 204;\n                }\n\t\tproxy_pass   http://127.0.0.1:9090;\n         }\n    }\n}\n```\n\n## 检查配置文件并启动\n\n```shell\n# 检查文件正确性\n/usr/local/webserver/nginx/sbin/nginx -t\n# 启动\n/usr/local/webserver/nginx/sbin/nginx\n###################\n/usr/local/webserver/nginx/sbin/nginx -s reload            # 重新载入配置文件\n/usr/local/webserver/nginx/sbin/nginx -s reopen            # 重启 Nginx\n/usr/local/webserver/nginx/sbin/nginx -s stop              # 停止 Nginx\n```\n","slug":"解决跨域问题","published":1,"updated":"2022-07-02T15:49:59.947Z","_id":"cl3iqqes30031l0em4d26a10t","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Nginx解决跨域问题\"><a href=\"#Nginx解决跨域问题\" class=\"headerlink\" title=\"Nginx解决跨域问题\"></a>Nginx解决跨域问题</h1><p>问题描述：后端在本机127.0.0.1:9090端口开展服务，但是前端不在本机部署，访问出现跨域问题无法解决。</p>\n<h2 id=\"安装Nginx并配置\"><a href=\"#安装Nginx并配置\" class=\"headerlink\" title=\"安装Nginx并配置\"></a>安装Nginx并配置</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step1： 下载编译工具和库文件</span></span><br><span class=\"line\">yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step2:  安装PCRE</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载</span></span><br><span class=\"line\">cd /usr/local/src/</span><br><span class=\"line\">wget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span></span><br><span class=\"line\">tar zxvf pcre-8.35.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入目录</span></span><br><span class=\"line\">cd pcre-8.35</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译安装</span></span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看版本无误</span></span><br><span class=\"line\">pcre-config --version</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step3：  安装Nginx</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载</span></span><br><span class=\"line\">cd /usr/local/src/</span><br><span class=\"line\">wget https://nginx.org/download/nginx-1.20.2.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压安装包</span></span><br><span class=\"line\">tar zxvf nginx-1.20.2.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入安装目录</span></span><br><span class=\"line\">cd nginx-1.20.2</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译安装</span></span><br><span class=\"line\">./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35</span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看Nginx版本</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -v</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"配置Nginx的文件\"><a href=\"#配置Nginx的文件\" class=\"headerlink\" title=\"配置Nginx的文件\"></a>配置Nginx的文件</h2><div class=\"story post-story\"><p>实现：将9091端口跨域请求放通，映射本机9090端口</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/local/webserver/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#user  nobody;</span><br><span class=\"line\">worker_processes  1;</span><br><span class=\"line\"></span><br><span class=\"line\">#error_log  logs/error.log;</span><br><span class=\"line\">#error_log  logs/error.log  notice;</span><br><span class=\"line\">#error_log  logs/error.log  info;</span><br><span class=\"line\"></span><br><span class=\"line\">#pid        logs/nginx.pid;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">    #access_log  logs/access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">    sendfile        on;</span><br><span class=\"line\">    #tcp_nopush     on;</span><br><span class=\"line\"></span><br><span class=\"line\">    #keepalive_timeout  0;</span><br><span class=\"line\">    keepalive_timeout  65;</span><br><span class=\"line\"></span><br><span class=\"line\">    #gzip  on;</span><br><span class=\"line\">    server</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        listen       9091;</span><br><span class=\"line\">        server_name  localhost;</span><br><span class=\"line\">        location /api &#123;</span><br><span class=\"line\">                root   html;</span><br><span class=\"line\">                index  index.html index.htm;</span><br><span class=\"line\">                add_header Access-Control-Allow-Origin *;</span><br><span class=\"line\">                add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class=\"line\">                add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span><br><span class=\"line\">                if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span><br><span class=\"line\">                        return 204;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">\t\tproxy_pass   http://127.0.0.1:9090;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"检查配置文件并启动\"><a href=\"#检查配置文件并启动\" class=\"headerlink\" title=\"检查配置文件并启动\"></a>检查配置文件并启动</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查文件正确性</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -t</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">##################</span></span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s reload            # 重新载入配置文件</span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s reopen            # 重启 Nginx</span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s stop              # 停止 Nginx</span><br></pre></td></tr></table></figure>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Nginx解决跨域问题\"><a href=\"#Nginx解决跨域问题\" class=\"headerlink\" title=\"Nginx解决跨域问题\"></a>Nginx解决跨域问题</h1><p>问题描述：后端在本机127.0.0.1:9090端口开展服务，但是前端不在本机部署，访问出现跨域问题无法解决。</p>\n<h2 id=\"安装Nginx并配置\"><a href=\"#安装Nginx并配置\" class=\"headerlink\" title=\"安装Nginx并配置\"></a>安装Nginx并配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step1： 下载编译工具和库文件</span></span><br><span class=\"line\">yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step2:  安装PCRE</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载</span></span><br><span class=\"line\">cd /usr/local/src/</span><br><span class=\"line\">wget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span></span><br><span class=\"line\">tar zxvf pcre-8.35.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入目录</span></span><br><span class=\"line\">cd pcre-8.35</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译安装</span></span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看版本无误</span></span><br><span class=\"line\">pcre-config --version</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Step3：  安装Nginx</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载</span></span><br><span class=\"line\">cd /usr/local/src/</span><br><span class=\"line\">wget https://nginx.org/download/nginx-1.20.2.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压安装包</span></span><br><span class=\"line\">tar zxvf nginx-1.20.2.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入安装目录</span></span><br><span class=\"line\">cd nginx-1.20.2</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译安装</span></span><br><span class=\"line\">./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35</span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看Nginx版本</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -v</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置Nginx的文件\"><a href=\"#配置Nginx的文件\" class=\"headerlink\" title=\"配置Nginx的文件\"></a>配置Nginx的文件</h2><p>实现：将9091端口跨域请求放通，映射本机9090端口</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/local/webserver/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#user  nobody;</span><br><span class=\"line\">worker_processes  1;</span><br><span class=\"line\"></span><br><span class=\"line\">#error_log  logs/error.log;</span><br><span class=\"line\">#error_log  logs/error.log  notice;</span><br><span class=\"line\">#error_log  logs/error.log  info;</span><br><span class=\"line\"></span><br><span class=\"line\">#pid        logs/nginx.pid;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">    #access_log  logs/access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">    sendfile        on;</span><br><span class=\"line\">    #tcp_nopush     on;</span><br><span class=\"line\"></span><br><span class=\"line\">    #keepalive_timeout  0;</span><br><span class=\"line\">    keepalive_timeout  65;</span><br><span class=\"line\"></span><br><span class=\"line\">    #gzip  on;</span><br><span class=\"line\">    server</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        listen       9091;</span><br><span class=\"line\">        server_name  localhost;</span><br><span class=\"line\">        location /api &#123;</span><br><span class=\"line\">                root   html;</span><br><span class=\"line\">                index  index.html index.htm;</span><br><span class=\"line\">                add_header Access-Control-Allow-Origin *;</span><br><span class=\"line\">                add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class=\"line\">                add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span><br><span class=\"line\">                if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span><br><span class=\"line\">                        return 204;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">\t\tproxy_pass   http://127.0.0.1:9090;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"检查配置文件并启动\"><a href=\"#检查配置文件并启动\" class=\"headerlink\" title=\"检查配置文件并启动\"></a>检查配置文件并启动</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查文件正确性</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -t</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">##################</span></span></span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s reload            # 重新载入配置文件</span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s reopen            # 重启 Nginx</span><br><span class=\"line\">/usr/local/webserver/nginx/sbin/nginx -s stop              # 停止 Nginx</span><br></pre></td></tr></table></figure>\n"},{"title":"DeFi Learning Beginner","date":"2022-04-15T07:45:05.000Z","author":"Lcy","_content":"\nA reading note for 《How to DeFi Beginner》\n# Part One: Centralized & Decentralized Finance\n\n## 第一章 中心化和去中心化金融\n\n从传统的角度看，银行显然是我们最为熟悉的中心化的金融机构。但是啊，这个08年金融危机吧，也可以看出来银行是有一定的风险的，体现了一定的金融系统缺陷。\n\nDefi想要构建什么？\n\nDefi想要用区块链&互联网去重构银行系统中的：\n\n- 支付和清算系统，也就是简单来说汇款\n- 可访问性\n- 集中化和透明度\n\n### 1. 支付清算系统\n\n如果我们只考虑国内的支付，那，显然没啥意思，但是对于跨境支付的话，这就很麻烦了，不论从时效性还是各种文件balabala都很烦，以及隐私等等都太烦了，这时候Defi来了，加密货币的支付时很快的，同时手续费也会很低。\n\n### 2. 可访问性\n\n这点也是我开始并不理解的，事实上很多人因为信用问题又或者仅仅是某些国家的地理及贫困，到2017年还有17亿人没有储蓄账户，但其中2/3的人可以使用手机，因此DeFi可以为他们提供一个不需要银行储蓄账户的，无国界的无审查但可访问的金融账户。\n\n### 3. 集中化和透明性\n\n传统银行是中心化的，08年雷诺银行倒闭引起金融危机，包括美国也有500家银行倒闭过，这都是巨大的金融风险。另外从我们现在的角度看很多基金、银行是缺乏透明性的，我们不知道我们的资产在哪里。但是DeFi可以解决这个问题，本身是在区块链之上构建的，他就是一行行的代码，是透明的，同时代码对每个人都是公平的，他不会歧视，不会性别歧视、地域歧视、种族歧视、什么都不会。\n\n### 去中心化金融对比传统金融\n\n> The DeFi movement is about bridging these gaps and making finance accessible to  everyone without any form of censorship. In short, DeFi opens up huge windows of  opportunities and allows users to access various financial instruments without  any restriction on race, religion, age, nationality, or geography. When  comparing both traditional and decentralized financial products, there will be  pros and cons on each side. In this book, we will walk you through the concepts  and possibilities of decentralized finance so that you will know how to use its  best features to solve real-world problems.\n\n## 第二章 DeFi是什么\n\nDeFi 即 Decentralized Finance\n\n是一种允许用户在不需要依赖中心化实体的情况下利用借贷和交易等金融服务的运动。这些金融服务是通过去中心化应用程序（Decentralized Applications，Dapps）提供的，其中大部分部署在以太坊平台上。\n\n为了更好的理解一下DeFi的去中心化，将去中心化程度做了三层次的分层，他们的特点如下：\n\n|      | 中心化                                                       | 半中心化                                                     | 去中心化               |\n| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------------- |\n| 特征 | 托管，使用集中的价格馈送，集中确定的利率，集中提供的追加保证金流动性 | 非托管、去中心化的价格反馈、无需许可的追加保证金通知、无需许可的保证金流动性、去中心化利率确定、去中心化平台开发/更新 | 所有东西都是去中心化的 |\n| 例子 | Salt, BlockFi, Nexo and Celsius                              | Compound, MakerDAO, dYdX, and bZx                            | 现在还没有             |\n\n### DeFi的九大类别\n\n#### 1. 稳定货币 Stablecoins\n\n比如USDT是锚定1美元的这种稳定货币\n\n#### 2. 借贷\n\n传统金融系统要求用户拥有银行账户才能使用他们的服务，这是目前  17  亿人所没有的奢侈品。从银行借款还有其他限制，例如具有良好的信用评分和有足够的抵押品以使银行相信其信誉良好且能够偿还贷款。去中心化借贷消除了这一障碍，允许任何人抵押他们的**数字资产**并使用它来获得贷款。人们还可以通过**为贷款池做出贡献**并从这些资产中赚取利息来获得资产收益并参与贷款市场。通过去中心化借贷，不需要银行账户，也不需要检查信用度。\n\n#### 3. 交易所\n\n要将一种加密货币换成另一种，可以使用 Coinbase 或 Binance  等交易所。像这样的交易所是中心化交易所，这意味着它们既是交易资产的中介又是托管人。这些交易所的用户无法完全控制他们的资产，如果交易所被黑客入侵并且无法偿还债务，他们的资产就会面临风险。\n\n去中心化交易所旨在通过允许用户在不放弃对其资产的保管权的情况下交换加密货币来解决这个问题。通过**不在中心化交易所存储任何资金**，用户无需信任交易所就能保持偿付能力。\n\n#### 4. 衍生品\n\n衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。交易者可以使用衍生品来对冲风险。例如，假设您是一家手套制造商，想要对冲橡胶价格意外上涨的风险。您可以从您的供应商处购买一份期货合约，以便在特定的未来交割日期以今天的约定价格交割特定数量的橡胶。衍生品合约主要在中心化平台上交易。\n\nDeFi 平台同样也要建立去中心化的衍生品市场。（Chapter 8）\n\n#### 5. 基金管理\n\n基金管理是监督资产并管理其现金流以产生投资回报的过程。在 DeFi 中，一些项目已经开始允许以去中心化的方式进行被动资金管理。  DeFi 的透明性使用户可以轻松跟踪其资金的管理方式并了解他们将支付的成本。\n\n#### 6. 彩票\n\n好家伙彩票也算，有意思。这个就不用解释了。\n\n#### 7. 支付\n\nDeFi想要创造一种规模更大，准确性更高的即用即付方式。\n\n#### 8. 保险\n\n去中心化的代币可能受到黑客的攻击所以DeFi也想要提供一种去中心化的保险，毕竟智能合约是不是永远安全的没人知道。代码的安全性度量一直是一个问题，无法量化解决。\n\n#### 9. 治理\n\n治理本质上是加密的业务管理理念。为了让  DeFi 协议管理项目，通常会引入治理令牌以赋予用户投票权并在协议的路线图中拥有发言权。自然，还开发了多个工具包和 Dapps  以促进有效治理和补充现有系统。\n\n# Part Two: Getting into DeFi\n\n## 第三章 去中心化层：以太坊\n\n其实以太坊对于了解区块链的人来说并不陌生，所以这一章看看就简单过去了，感兴趣的去了解一下以太坊基础知识也就足够。\n\n### Dapp的特点：\n\n- 不变性：一旦智能合约在区块链上部署了那必然是不会再变的。==然而这也会导致不可避免的错误被保存下来搞出大问题==\n- 防篡改：链上智能合约不可能在大家不知道的情况下被私自篡改\n- 透明性：链上智能合约是公开可审计的。==这可能会让黑客审计代码发现漏洞然后攻击，比如THE DAO==\n- 可用性：只要以太坊不GG，就一直可用\n- 可扩展性：==通常DAPP仅限于所处的链，当然现在跨链非常的火热，另当别论了==\n\n### 代币协议标准\n\n以太坊上流行的代币协议有ERC-20和ERC-721。ERC-20 代币是可替代的，这意味着它们可以互换并且具有相同的价值。另一方面，ERC-721  代币是不可替代的，这意味着它们是唯一且不可互换的。一个简单的类比是将 ERC-20 视为金钱，将 ERC-721 视为可动人偶或棒球卡等收藏品。\n\n现在很火的NFT就是ERC-721协议下的。\n\n\n\n## 第四章 以太坊钱包\n\n钱包的本质就是一个公私钥对，主要分为托管钱包和非托管钱包：\n\n- 托管钱包（custodial wallet）：第三方代为保留并保持对加密货币的控制权，比如交易所啊啥的，有被盗风险，比如Mt. Gox就损失了超过85W个Bitcoin\n- 非托管钱包（non-custodial wallet）：自己保存自己的公私钥对\n\n我很久前自己创建过ethereum的钱包，不过也确实早已不记得自己的钱包信息了，这篇文章也给了两个比较适合DeFi学习的创建自己钱包的方式。\n\n一个是手机端的[Argent](https://argent.link/coingecko)，作为安卓用户，阿不，鸿蒙用户，似乎有点 GG，欸，先去搞个桌面端的。\n\n桌面端是[Metamask](https://metamask.io)，一个谷歌浏览器的插件，同样也是非托管的钱包。\n\n注册完是这个样子：\n\n![image-20220416102554883](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416102554883.png)\n\n助记词一定要记好，不然的话账户可能就找不到了。\n\n然后你能得到你的公钥比如：0xB6EC82B364ade9451D106998a9DB8584d924a306\n\n这个地址欢迎打钱谢谢！\n\n# Part Three: Deep Diving into DeFi\n\n## 第五章 去中心化的稳定货币\n\n截止22.4.16有81个稳定的货币，市值前五的有：\n\n![image-20220416143324880](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416143324880.png)\n\n想要看的话可以去[Top Stablecoins by Market Capitalization - CoinGecko](https://www.coingecko.com/en/categories/stablecoins)这个网站去自行查询一下。\n\n### USDT\n\nUSDT是与美刀挂钩的，每一美元可以换取1USDT，当然Tether储备金是保存在金融机构中的，我们作为用户想要用的话就需要信任Tether。\n\n### DAI\n\n> Dai 由 MakerDAO 开发并管理，是第一个去中心化基础稳定货币。Dai 由数字资产足额抵押担保发行，和美元保持1:1锚定，1 Dai = 1 美元。\n\nDAI也同样是和一美元挂钩，但是他和USDT不一样的地方在于它可以使用ETH进行抵押。\n\n### Maker \n\nMaker 是一个运行在以太坊区块链上的智能合约平台，拥有两个代币：DAI（在算法上都与 1 美元挂钩）和它的治理代币——Maker（MKR）。\n\n三个需要知道的关键参数：\n\n#### 1. Collateral Ratio 抵押比率\n\n可以铸造的 DAI 数量取决于抵押品比率。\n\n比如：\n\n- Wrapped Bitcoin (wBTC) collateral ratio = 150%\n- Basic Attention Token (BAT) collateral ratio = 150%\n\n因此，150%  的抵押比率意味着要铸造 100 美元，您需要存入至少价值 150 美元的 wBTC 或 BAT。\n\n#### 2. 稳定费\n\n截至 2021 年 4 月，BAT 目前的稳定费为 6.0%。（可以理解为管理费，或者说借贷的利息）\n\n#### 3. DAI Saving Rate (DSR)\n\nDAI  储蓄率 (DSR) 是随着时间的推移持有 DAI 所赚取的利息。它还充当影响 DAI 需求的货币工具。截至 2021 年 4 月，DSR 利率设定为  0.01%。\n\n### 为什么我们要质押ETH换DAI而不是直接换美元呢？\n\n有三种可能的情况：  \n\n-  您现在需要现金，并且您拥有一项您认为将来会更值钱的资产。  在这种情况下，您可以将您的资产保存在 Maker 保险库中，并通过发行 DAI  立即获得资金。\n- 您现在需要现金，但不想在出售资产时冒险触发应税事件。 相反，您将通过发行 DAI 来提取贷款。\n- 投资杠杆，如果您认为您的资产价值会上升，您可以对您的资产进行投资杠杆。\n\n### 如何获得DAI\n\n![image-20220416191157684](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191157684.png)\n\n实际上就是在智能合约中质押ETH来铸造DAI。\n\n在[Oasis.app](https://oasis.app)这个网站上可以去铸造属于自己的DAI，他是可以直接关联Metamask的钱包的。\n\n![image-20220416191812985](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191812985.png)\n\n可以看到这里的质押率以及费率。还挺高的，草。\n\n## 第六章 去中心化的借贷\n\n在 DeFi 环境中，也就是一个去中心化的环境下，并没有银行，所以没有法律、门槛、融资标准等等一系列的繁琐的东西。只要有足够的抵押物就可以获得贷款资金来做自己想做的事情。\n\n这本书介绍了Compound和Avae两种比较牛逼的DeFi借贷协议。\n\n### Compound\n\nCompound Finance 是一种基于以太坊的开源货币市场协议，任何人都可以无摩擦地借出或借入加密货币。\n\n现在在[Compound平台上](https://compound.finance/markets)已经有20中可以借贷的加密货币。\n\n> Compound作为建立在以太坊区块链上的流动资金池运作。供应商向流动性池提供资产以赚取利息，而借款人从流动性池中获得贷款并支付债务利息。从本质上讲，Compound弥合了希望从闲置资金中累积利息的贷方和希望借入资金用于生产或投资用途的借款人之间的差距。在 Compound 中，利率以**年收益率 (APY)**  表示，并且资产之间的利率不同。 Compound 通过考虑资产供需的算法得出利率。从本质上讲，Compound  允许供应商/借款人直接与利率协议交互，而无需协商贷款条款（例如：到期日、利率、抵押品等），从而降低了借贷的摩擦，从而创建了一个更有效的货币市场.\n\n以当前的行情来看，给一下平台上借贷双方能获得/需支付的利息年利率APY：\n\n![image-20220416214703265](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416214703265.png)\n\n#### Compound的管理\n\nCompound已经越来越去中心化了，实际上提出治理提案的人需要有超过1%的总共的COMP（Compound的币，1%就是10W个COMP）进行委托，进入治理的Alpha阶段。\n\n后续会经过三天的投票期，必须获得超过4%的投票。一旦收到最低投票门槛，通过的提案将在时间锁中排队。在通过的提案被实施到  Compound 协议中之前，将有 2 天的宽限期。用户可以通过在二级市场上购买 COMP 代币来获得 COMP 代币，或者通过在 Compound  协议上借出或借入 COMP 代币进行收益耕作。 COMP 代币根据 Compound 上借贷活动的利率按比例分配。\n\n这里可以治理些什么呢，比如利率的计算和调整这样。\n\n在compound里钱包里的资产比如DAI放进去会变成cDAI，Ether会变成cEther，假设您在 2020 年 1 月 1 日提供了 1,000 DAI，并且 APY 在整个 2020 年一直保持在 10%。\n\n2020 年 1 月 1 日，在存入 1,000 DAI 后，将获得 1,000 cDAI。在这种情况下，DAI 和 cDAI 之间的汇率为 1:1。  2021 年 1 月 1 日，一年后，您的 1,000 cDAI 现在将增值 10%。 DAI 和 cDAI 之间的新汇率为 1:1.1。您的 1,000  cDAI 现在可以兑换 1,100 DAI。\n\n### Avae\n\nAvae相比Compound更加复杂，主要有8个关键特征：\n\n- 支持更多的不同资产\n- 贷款的稳定利率和可变利率：借款人可以灵活地选择稳定利率或可变利率\n- 利率转换：借款人还能够在稳定利率和可变利率之间进行转换\n- 抵押品互换(Collateral Swap)：借款人可以将其抵押品换成另一种资产。这有助于防止贷款低于最低抵押率并面临清算。\n- 用抵押品还款：借款人可以通过在一笔交易中直接用抵押品支付来关闭他们的贷款头寸\n- 闪电贷款(Flash loans)：如果借款人在同一笔交易中偿还贷款以及任何额外的利息和闪电贷款费用，借款人可以接受零抵押贷款。闪电贷款对套利交易者很有用，因为它们在跨各种 DeFi Dapp  进行套利交易时具有资本效率。\n- 闪电清算(Flash Liquidations)：清算人可以利用闪电贷款借入资金作为清算债券的一部分，并在不使用其资金的情况下获得清算奖金。\n- 本地信用授权(Native Credit Delegation)：借款人可以将他们的信用额度扩展到其他希望在没有抵押品的情况下借款以获得更高利率的用户。\n\nAvae中的借贷利率也是由算法决定的，跟供需关系有关。\n\nAvae中存在：\n\n- Stable Annual Percentage Rate(APR)：稳定利率类似于固定利率，但如果市场条件变得糟糕，它可能会随着时间而改变。选择稳定利率的借款人更愿意知道要偿还的确切利息金额，并且不太可能受到各个流动资金池中流动性波动的影响。\n- Variable Annual Percentage Rate(APR)：可变利率是根据 Aave 协议中资产的供需情况通过算法确定的。浮动利率的波动与储备中可用的流动性数量相对应。\n\n在Avae里，你获得的是aToken，Compound里面是cToken。Avae也可以在其[网站](https://app.aave.com/)上直接连接Metamask的钱包，非常的方便。\n\n![image-20220416235651244](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416235651244.png)\n\n#### Avae的治理\n\nAave  于 2020 年 12 月重新启动了其协议的第二次迭代（Aave V2）。其原生治理令牌被称为 AAVE。任何人都可以自由地为 Aave  的改进和调整提出想法。以下是关于如何提出提案的概述。 \n\n1. 在 Aave 治理论坛上准备一份 Aave 征求意见 (ARC) 提案。社区将对此进行反馈。 \n2. 如果 ARC 没有争议，可以提交 Aave Improvement Proposal (AIP)。 \n3. AIP提交协议去等待投票\n\n## 第七章 去中心化的交易所（DEX）\n\nDEX的两种类型：\n\n1. 基于订单簿地DEX Order book-based DEX\n2. 基于流动性池的DEX Liquidity pool-based DEX\n\nDEX的局限性：\n\n1. 较低的流动性：目前大多是交易还是在中心化的交易所上进行的。在CEX里面毕竟大家的交易量是比较大的，对应到DEX里面价差就会较大，买卖双方可能由较大损失。\n2. 功能有限：中心化交易所包括许多高级交易功能，例如限价单、止损单、追踪止损等。大多数这些交易功能在 DEX 上不可用。一些 DEX现在提供限价单，从而提供更好的交易体验。然而，越来越多的 DEX 正在寻求引入这些高级交易功能，以更有效地与 CEX 竞争。\n3. 区块链的互操作性：大多数DEX只允许交易者在同一个区块链生态系统内交换代币。例如，基于以太坊的DEX只允许用户交易以太坊和 ERC-20代币。它不允许交易者交易在Polkadot或Cosmos等其他区块链上发行的代币。 CEX允许用户轻松地在各种区块链上交易代币。正在努力构建**跨链 DEX**，未来，在 DEX  上跨多个区块链交易代币将成为可能。\n4. 费用：随着DeFi的流行，这会导致以太坊网络的拥挤。以太坊交易量的增加，也就会相应的引起Gas的增加带来成本费用的上升。也就是高峰期的时候DEX上的交易大多是昂贵的交易，这在矿难或者大跌的时候是能够经常看到的，交易手续费大幅度上升。\n\n### Uniswap\n\nUniswap 是一种基于以太坊的去中心化代币交换协议，允许直接交换代币，而无需使用中心化交易所。\n\n**流动资金池**\n\n流动性池是位于Uniswap智能合约上的代币储备，可供用户交换代币。例如，使用流动性储备中有100ETH和20,000DAI的ETHDAI交易对，想要使用DAI 购买ETH的用户可以向 Uniswap 智能合约发送 202.02DAI以获得1ETH 作为回报。交换完成后，流动资金池将剩下99ETH和20,202.02DAI。流动性池的准备金由流动性提供者提供，他们被激励获得 Uniswap 0.3% 交易费的相应费用。Uniswap上的每次代币交换都会收取此费用。\n\n任何人都可以提供流动性资金。\n\n**自动的商市机制 Automated Market Maker Mechanism**\n\n资金池中资产的价格是使用Automated Market Maker(AMM) 算法确定的。AMM 的工作原理是根据池两侧的流动性计算。\n\n用 100 ETH 和 20,000 DAI 的  ETH-DAI 流动性池示例。为了计算恒定乘积，Uniswap 会将这两个金额相乘。\n\n![image-20220417140956310](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417140956310.png)\n\nAMM要求这个乘积保持不变。\n\n![image-20220417143109793](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417143109793.png)\n\n所以换的越多费率越高。\n\n想要尝试一下可以去[Uniswap](https://app.uniswap.org/)了解一波。\n\n### DEX 聚合器\n\n简单来说就是现在很多的DEX由自己的流动性资金池所以想要换的比较多的话就会面临较高的费率。而DEX聚合器就是自动将你想要换取的路由到多个DEX中，拆分掉你的大宗交易，以此来获得最有的价格。例如[1inch]( https://1inch.exchange/)就是一个DEX聚合器。\n\n## 第八章 去中心化的衍生品\n\n衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。每种类型的衍生品，无论是期货、期权还是掉期，都有不同的用途，每个投资者出于各种原因购买或出售它们。投资者交易衍生品的一些原因是为了对冲标的资产的波动性、推测标的资产的方向移动或利用其持有的资产。衍生品风险极大，交易时必须具备强大的金融知识和策略。  DeFi 衍生品 Dapp 的市值为 58.2 亿美元，占 DeFi 生态系统的 8.2%。\n\n这本书主要关注了Synthesix和Opyn两种衍生品协议\n\n### Synthetix\n\nSynthetix包含两个部分，一个是Synthetic Asset（Synths），一个是Synthetic.Exchange。\n\nSynthetix资产是Synths，现在有两种不同的Synths：\n\n- Normal Synths：与标的资产正相关\n- Inverse Synths：与表弟资产负相关\n\n一个Synths的例子是Synthetic Gold （sXAU），就是跟踪黄金的价格表现。反向Synths资产的例子是iBTC，跟踪的是BTC的反向价格表现。\n\n> 以反向合成比特币（iBTC）为例。假设在创建时，比特币 (BTC) 的价格为 10,600 美元——这将是入场价格。如果比特币下跌 400 美元至 10,200  美元，则 iBTC Synth 将额外价值 400 美元，售价为 11,000 美元，去中心化衍生品也是如此。相反，如果比特币升至 11,000  美元，iBTC Synth 现在将价值 10,200 美元。\n\nSynths 让交易者无需持有标的资产即可获得资产的价格敞口。与传统的黄金经纪公司相比，Synthetic Gold (sXAU)  允许交易者以更少的麻烦（无需注册、无需旅行、无需中间人等）参与市场。Synthsc还有另一个用途——它们可以在彼此之间无摩擦地进行交易，这意味着可以在  Synthetix.Exchange  上轻松地将合成黄金转换为合成日元、合成白银或合成比特币。这也意味着任何拥有以太坊钱包的人现在都可以开放访问任何现实世界的资产！\n\n当前支持的资产可以去[List - Synthetix System Documentation](https://docs.synthetix.io/tokens/list/)查看\n\n#### Index Synths\n\n这是一篮子货币，可以理解为，指数。\n\n#### Synthetic Exchange\n\nSynthetix Exchange 是一个去中心化的交易平台，专为 SNX 和 Synths 的交易而设计。 Synthetix 交易所没有订单簿，也没有像  Uniswap 这样的流动资金池。 Synthetix Exchange  允许用户直接与保持持续充足流动性的智能合约进行交易，从而从理论上降低滑点或缺乏流动性的风险。由于用户购买的是合成合约而不是交易标的资产，因此用户最多可以购买系统中的抵押品总额，而不会影响合约的价格。\n\n\n\nFor more information or mining Synth:[Home | Synthetix Staking](https://staking.synthetix.io/)\n\n### Opyn\n\nOpyn 为资产价格波动提供保护，并为智能合约提供保险。用户可以获得以太坊 (ETH)、Wrapped Bitcoin (WBTC)、Yearn  Finance (YFI)、Uniswap (UNI)、DeFiPulseIndex (DPI) 以及 Compound (COMP) 上的 USDC 和  DAI 存款的保护。\n\n除了智能合约失败之外，Opyn  还可以防范财务和管理风险等其他风险。 Opyn 通过利用金融衍生品（即期权）来做到这一点。\n\nFor more information：https://v1.opyn.co/#/\n\n## 第九章 去中心化的基金管理\n\n基金管理是监督资产并管理其现金流以产生投资回报的过程。我们已经开始看到创新的  DeFi  团队为用户构建了以去中心化方式更好地管理资金的方法。\n\n去中心化的基金管理是在没有投资经理的情况下进行的。相反，算法可以帮助您自动进行交易。这使您可以选择最适合您的财务目标并减少支付费用的资产管理策略。\n\n### TokenSets\n\nTokenSets 是一个允许加密用户购买启用策略的代币 (SET)  的平台。这些代币具有自动化的资产管理策略，使您能够轻松管理您的加密货币投资组合，而无需手动执行交易策略。使用自动交易策略，您无需手动 24/7  监控市场，从而减少因情绪交易而错失的机会和风险。\n\n#### Index Sets 指数组合\n\n指数集允许用户通过购买单个代币而不是单独购买多个资产来接触更多资产并降低汽油费。最受欢迎的指数集是  DeFiPulse 指数（DPI），该指数基于市值加权指数跟踪 DeFi 代币的表现\n\n#### Yield Farming Set \n\nYield  Farming Sets 使用户无需不断地进行多个智能合约交易来产生收益农业协议，从而节省燃料。这些 Sets 的策略将定期索取流动性提供者 (LP)  奖励，将其出售以换取策划资产，并质押这些资产以产生更多的LP奖励。本质上，这是 DeFi 采取复利的一个例子！\n\n可以去[TokenSets – Asset Management Simplified](https://www.tokensets.com/)了解情况。\n\n## 第十章 去中心化的彩票\n\n2020 年 2 月，一位仅存入 10 美元的用户在 PoolTogether 的每周 DAI 奖池中赢得了 1,648 美元，获胜机会为 69,738  分之一。 PoolTogether 彩票最好的部分是，如果参与者没有中奖，他们可以获得 10 美元押金的退款。这场博弈没有输家，只有机会成本。\n\n？？？？有这种好事？\n\n### Pool Together\n\nPoolTogether  是一个去中心化的无损彩票或去中心化的奖金储蓄应用程序，用户可以在抽奖后保留他们的初始存款金额。不是使用购买的彩票来资助奖金，而是使用汇集的用户存款在  Compound 协议上赚取的利息来资助奖金。对于每一轮 PoolTogether，所有用户存款都会发送到 Compound  以赚取利息。每个间隔结束时将随机抽取一名幸运获胜者，以赢取累积的全部利息作为奖金\n\nhttps://pooltogether.com/zh\n\n可以去上面网站上看看，我没找到支持的货币列表。但是DAI, USDC, UNI,  COMP是肯定可以支持的。\n\n## 第十一章 去中心化支付\n\n### Sabiler \n\nSablier  是一个支付流应用程序——这意味着它允许在不同方之间以小增量（以秒为单位！）实时进行支付和取款。考虑在工作和进展过程中实时支付的每小时咨询工作、每日合同工或每月租金支付。与在  Spotify 上流式传输音乐的方式类似，也可以在 Sablier 上流式传输资金！\n\n**什么是流式付款？**\n\n付款人现在可以在双方定义和同意的期限内实时发送付款，而不是等待固定期限（例如，每月、每两周）付款。通过  Sablier，收款人现在可以实时收到他们的付款并随时提取。比如60/h的咨询服务可以在Sablier签订协议后一分钟一分钟的自己付款，即使返回了损失也非常小。\n\n官网：[Sablier](https://sablier.finance/)\n\n等于是形成了一个支付流，一步步付款。\n\n## 第十二章 去中心化保险\n\n参与DeFi的过程中，必须将代币锁定在智能合约中，但是显然即使是审计过的智能合约也有可能存在缺陷而被黑客攻击。所以就有了去中心化的保险。\n\n所以使用DeFi必须要面对：\n\n1. 技术风险：智能合约可能被黑客攻击或漏洞被利用\n2. 流动性风险：借贷协议（如 Compound）可能耗尽流动性\n3. 管理密钥风险：协议的公私钥可能被泄露\n\n###  Nexus Mutual\n\nNexus Mutual  是建立在以太坊上的去中心化保险协议，为以太坊区块链上的智能合约提供保障，并为中心化贷方和交易所（如Celsius、Blockfi、Nexo、Binance、Coinbase、Kraken  和 Gemini）提供托管保障。\n\n保险的保护范围是智能合约的意外，如果只是自己丢了私钥那没救了。\n\nNXM是Nexus Mutual的原生代币\n\n[Nexus Mutual | A decentralised alternative to insurance](https://nexusmutual.io/)\n\n### Armor\n\nArmor  是 DeFi 的第一个保险聚合器。利用 Nexus Mutual 的承保能力，它提供现收现付保险产品以及无需 KYC 即可购买保险的能力。不想进行 KYC 或因 Nexus Mutual 的地域限制无法购买保险的用户可以通过 Armor 获得保险。\n\n[Armor.Fi](https://armor.fi/)\n\n### Nsure Network\n\nNsure Network  是一个去中心化的保险项目，它借鉴了伦敦劳合社的理念，这是一个交易保险风险的市场。保费价格使用动态定价模型确定，其中资本供需共同决定保费，类似于自由市场的定价机制。\n\nNsure  Network 的治理代币 (NSURE) 由购买的政策支持。价格可根据资本供求的变动自行调整，但受基础模型的稳定。与遵循互惠模式的 Nexus Mutual  不同，Nsure Network 遵循股东模式，其中 Nsure Network 的代币类似于持有网络的一部分。\n\n### Cover Protocol\n\nCover Protocol 是一个点对点保险市场，其运作类似于预测市场。与其他保险协议不同，治理代币不用于承保风险。为了引导这一新协议的覆盖范围，做市商被激励将  DAI 或 yDAI 抵押品用于铸造 CLAIM 和 NOCLAIM 代币。 Cover Protocol  保险涵盖选定的协议，并且都有指定的到期日。在到期日期间，CLAIM 或 NOCLAIM 代币将拥有抵押品的全部权利。\n\n例如，如果在设定的到期日之前使用 100 DAI 为 Compound 协议提供保障，它将产生 100 CLAIM 和 100 NOCLAIM  代币。在到期日，如果有有效的索赔事件，所有 CLAIM 代币将获得 1 DAI，而所有 NOCLAIM 代币将一文不值。相反，如果没有有效的索赔事件，所有  NOCLAIM 代币将收到 1 DAI，而所有 CLAIM 代币到期时一文不值。要获得价值 100 DAI 的保险，用户需要从交易所购买 100 CLAIM  代币，因为如果发生有效索赔，这将过期至 100 DAI。购买 100 个 CLAIM 代币的成本将是保险费。\n\n\n\n**Conclusion**\n\n保险在 DeFi  中仍然是一个非常小众的细分市场，通常吸引的零售市场参与者很少。然而，随着更成熟的参与者加入市场，他们无疑将需要更好的风险管理工具。归根结底，投保或不投保的选择最终取决于您。但是，我们  CoinGecko 肯定会推荐购买保险，因为在 DeFi 中任何事情都可能发生。\n\n## 第十三章 治理\n\n与中心化传统公司不同，DeFi  协议不需要遵循除链上编码之外的任何规则。这通常被称为“代码就是法律”。\n\n### Aragon\n\n[Aragon](https://client.aragon.org/#/)是一个社区驱动的项目，其使命是通过为去中心化组织的繁荣创造工具来赋予自由。随着技术以前所未有的速度发展，人们担心它在创建全球集中控制、监视和压迫制度中的作用。  Aragon 决心创建一个自由、开放、公平的社会。\n\nAragon Court 是 Aragon  创建的解决方案，它模仿了传统商业世界中法院的功能。当发生冲突时，参与者可以将其升级到Aragon Court，由陪审员决定是否应惩罚任何一方。\n\n陪审员从陪审员池中随机选择，通过锁定  ANJ  代币来审查和裁决争议。与传统法院不同，陪审员在投票支持多数结果时会获得争议费用补偿。因此，该系统不适合不偏不倚的决策，而是依靠社会共识。投票支持少数派结果的陪审员将被带走一部分  ANJ  代币，并奖励给投票支持多数派的陪审员。如果结果不令人满意，任何一方都可以支付费用对争议提出上诉，并由大量陪审员进行审查。这个过程可以重复，直到整个陪审员池对争议做出裁决。\n\n### Snapshot\n\n由于以太坊汽油费上涨，链上投票的成本变得难以承受，阻碍了小代币持有者参与治理过程。 Snapshot试图通过在链下拍摄投票快照来解决这个问题，从而有效地使投票过程无气体。Snapshot 已经看到许多 DeFi 项目利用其工具来建立治理流程。截至 2021  年 1 月，Snapshot 可免费使用，已有多达 418 个不同的项目注册使用 Snapshot。\n\n缺点：链下投票不受智能合约约束。\n\nhttps://snapshot.page/#/\n\n## 第十四章 DeFi仪表盘\n\n[Zapper - Your Home to Web3](https://zapper.fi/zh)\n\n仪表板是一个简单的平台，可将您的所有 DeFi 活动聚合在一个地方。这是一个有用的工具，可以可视化和跟踪您的资产在不同 DeFi  协议中的位置。仪表板能够将您的资产分为不同的类别，例如存款、债务和投资。\n\n# Part Four： DeFi in Action\n\n## 第十五章 DeFi in Action\n\n### 案例一 Surviving Argentina’s High Inflation\n\n就是阿根廷的货币贬值太猛，但是DAI是和美元挂钩的， 即使DeFi有风险，但是相比阿根廷货币的风险来说不值一提，所以有人用DAI来规避自己资金的风险。（不能直接换美元因为政府不允许。）\n\n[Mariano Conti · Living on Defi: How I Survive Argentina's 50% Inflation · SlidesLive](https://slideslive.com/38920018/living-on-defi-how-i-survive-argentinas-50-inflation)\n\n### 案例二 Uniswap Ban\n\n就是有一段时间Uniswap团队为了遵守美国法律然后ban掉了一些地方的ip。但是实际上只能禁止网站访问不能禁止Uniswap协议，因此呢他就重新建了一些站点用于被banIP的地方的人访问。\n\n## 第十六章 DeFi就是未来！！！\n\nDeFi：\n\n- 透明！\n- 可接入！\n- 高效！\n- 便捷！\n\nDeFi目前的痛点：\n\n- **Wallet** - [Argent](https://www.argent.xyz/) is creating a radically better user-focused crypto wallet  experience, with state-of-the-art security, native integration with DeFi Dapps  such as Compound and others, as well as not needing seed keys. \n- **Participation of  products** - [Zapper](https://zapper.fi/) abstracts away many of the complexities and steps involved  with DeFi products. It also allows users to access multiple financial products  in one transaction, saving time and effort. \n- **User-friendly development** - [Gelato  Finance]([play.gelato.finance](https://play.gelato.finance/)) recently launched their“If this, then that” for crypto. It allows users  to set actions that will be done once certain conditions are met, such as“Buy  ETH when it is $200” or“Send some money to Alice when it’s her birthday.”  \n- **Insurance** - Financial market effectively facilitates the transfer of risk - one  man’s hedge against his position is another man’s profit. Insurance is now  available via DeFi insurers such as [Nexus Mutual](https://nexusmutual.io/). If you are willing to accept a  lower yield on the money you have placed on lending protocols such as Compound  in exchange for peace of mind, it can now be done. \n- **Aggregation of liquidity** -  There are many different decentralized exchanges (DEXs) in the market with  varying liquidity. It is a headache for users to choose which one is the best  for their trade. This is slowly becoming a thing of the past with liquidity  aggregators such as [1inch.exchange](https://app.1inch.io/#/), Paraswap, and Matcha helping users to automatically split orders across DEXs to  ensure the best possible execution prices.\n- **Yield optimization** - Remember switching around different banks for the best  rates for fixed deposits? You don’t have to do that in DeFi - yield aggregators  such as Yearn.finance, idle.finance, and DeFiSaver automatically allocate your  cryptoassets to places with the best yield opportunities.\n\n# 浅浅小结一下\n\nHow to DeFi: Begginer 这本书其实让我认识到了炒币这种事情属于是太low了，DeFi所展望的远远不是简单的炒币，而是真的带来了一种全新的去中心化的金融模式。\n\n完善的借贷、基金、彩票、衍生品等等DeFi合约属于是让人对目前加密货币的发展有了全新的认识。\n","source":"_posts/DeFi-Learning-Beginner.md","raw":"---\ntitle: DeFi Learning Beginner\ndate: 2022-04-15 15:45:05\ntags: Study\ncategories: DeFi\nauthor: Lcy\n---\n\nA reading note for 《How to DeFi Beginner》\n# Part One: Centralized & Decentralized Finance\n\n## 第一章 中心化和去中心化金融\n\n从传统的角度看，银行显然是我们最为熟悉的中心化的金融机构。但是啊，这个08年金融危机吧，也可以看出来银行是有一定的风险的，体现了一定的金融系统缺陷。\n\nDefi想要构建什么？\n\nDefi想要用区块链&互联网去重构银行系统中的：\n\n- 支付和清算系统，也就是简单来说汇款\n- 可访问性\n- 集中化和透明度\n\n### 1. 支付清算系统\n\n如果我们只考虑国内的支付，那，显然没啥意思，但是对于跨境支付的话，这就很麻烦了，不论从时效性还是各种文件balabala都很烦，以及隐私等等都太烦了，这时候Defi来了，加密货币的支付时很快的，同时手续费也会很低。\n\n### 2. 可访问性\n\n这点也是我开始并不理解的，事实上很多人因为信用问题又或者仅仅是某些国家的地理及贫困，到2017年还有17亿人没有储蓄账户，但其中2/3的人可以使用手机，因此DeFi可以为他们提供一个不需要银行储蓄账户的，无国界的无审查但可访问的金融账户。\n\n### 3. 集中化和透明性\n\n传统银行是中心化的，08年雷诺银行倒闭引起金融危机，包括美国也有500家银行倒闭过，这都是巨大的金融风险。另外从我们现在的角度看很多基金、银行是缺乏透明性的，我们不知道我们的资产在哪里。但是DeFi可以解决这个问题，本身是在区块链之上构建的，他就是一行行的代码，是透明的，同时代码对每个人都是公平的，他不会歧视，不会性别歧视、地域歧视、种族歧视、什么都不会。\n\n### 去中心化金融对比传统金融\n\n> The DeFi movement is about bridging these gaps and making finance accessible to  everyone without any form of censorship. In short, DeFi opens up huge windows of  opportunities and allows users to access various financial instruments without  any restriction on race, religion, age, nationality, or geography. When  comparing both traditional and decentralized financial products, there will be  pros and cons on each side. In this book, we will walk you through the concepts  and possibilities of decentralized finance so that you will know how to use its  best features to solve real-world problems.\n\n## 第二章 DeFi是什么\n\nDeFi 即 Decentralized Finance\n\n是一种允许用户在不需要依赖中心化实体的情况下利用借贷和交易等金融服务的运动。这些金融服务是通过去中心化应用程序（Decentralized Applications，Dapps）提供的，其中大部分部署在以太坊平台上。\n\n为了更好的理解一下DeFi的去中心化，将去中心化程度做了三层次的分层，他们的特点如下：\n\n|      | 中心化                                                       | 半中心化                                                     | 去中心化               |\n| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------------- |\n| 特征 | 托管，使用集中的价格馈送，集中确定的利率，集中提供的追加保证金流动性 | 非托管、去中心化的价格反馈、无需许可的追加保证金通知、无需许可的保证金流动性、去中心化利率确定、去中心化平台开发/更新 | 所有东西都是去中心化的 |\n| 例子 | Salt, BlockFi, Nexo and Celsius                              | Compound, MakerDAO, dYdX, and bZx                            | 现在还没有             |\n\n### DeFi的九大类别\n\n#### 1. 稳定货币 Stablecoins\n\n比如USDT是锚定1美元的这种稳定货币\n\n#### 2. 借贷\n\n传统金融系统要求用户拥有银行账户才能使用他们的服务，这是目前  17  亿人所没有的奢侈品。从银行借款还有其他限制，例如具有良好的信用评分和有足够的抵押品以使银行相信其信誉良好且能够偿还贷款。去中心化借贷消除了这一障碍，允许任何人抵押他们的**数字资产**并使用它来获得贷款。人们还可以通过**为贷款池做出贡献**并从这些资产中赚取利息来获得资产收益并参与贷款市场。通过去中心化借贷，不需要银行账户，也不需要检查信用度。\n\n#### 3. 交易所\n\n要将一种加密货币换成另一种，可以使用 Coinbase 或 Binance  等交易所。像这样的交易所是中心化交易所，这意味着它们既是交易资产的中介又是托管人。这些交易所的用户无法完全控制他们的资产，如果交易所被黑客入侵并且无法偿还债务，他们的资产就会面临风险。\n\n去中心化交易所旨在通过允许用户在不放弃对其资产的保管权的情况下交换加密货币来解决这个问题。通过**不在中心化交易所存储任何资金**，用户无需信任交易所就能保持偿付能力。\n\n#### 4. 衍生品\n\n衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。交易者可以使用衍生品来对冲风险。例如，假设您是一家手套制造商，想要对冲橡胶价格意外上涨的风险。您可以从您的供应商处购买一份期货合约，以便在特定的未来交割日期以今天的约定价格交割特定数量的橡胶。衍生品合约主要在中心化平台上交易。\n\nDeFi 平台同样也要建立去中心化的衍生品市场。（Chapter 8）\n\n#### 5. 基金管理\n\n基金管理是监督资产并管理其现金流以产生投资回报的过程。在 DeFi 中，一些项目已经开始允许以去中心化的方式进行被动资金管理。  DeFi 的透明性使用户可以轻松跟踪其资金的管理方式并了解他们将支付的成本。\n\n#### 6. 彩票\n\n好家伙彩票也算，有意思。这个就不用解释了。\n\n#### 7. 支付\n\nDeFi想要创造一种规模更大，准确性更高的即用即付方式。\n\n#### 8. 保险\n\n去中心化的代币可能受到黑客的攻击所以DeFi也想要提供一种去中心化的保险，毕竟智能合约是不是永远安全的没人知道。代码的安全性度量一直是一个问题，无法量化解决。\n\n#### 9. 治理\n\n治理本质上是加密的业务管理理念。为了让  DeFi 协议管理项目，通常会引入治理令牌以赋予用户投票权并在协议的路线图中拥有发言权。自然，还开发了多个工具包和 Dapps  以促进有效治理和补充现有系统。\n\n# Part Two: Getting into DeFi\n\n## 第三章 去中心化层：以太坊\n\n其实以太坊对于了解区块链的人来说并不陌生，所以这一章看看就简单过去了，感兴趣的去了解一下以太坊基础知识也就足够。\n\n### Dapp的特点：\n\n- 不变性：一旦智能合约在区块链上部署了那必然是不会再变的。==然而这也会导致不可避免的错误被保存下来搞出大问题==\n- 防篡改：链上智能合约不可能在大家不知道的情况下被私自篡改\n- 透明性：链上智能合约是公开可审计的。==这可能会让黑客审计代码发现漏洞然后攻击，比如THE DAO==\n- 可用性：只要以太坊不GG，就一直可用\n- 可扩展性：==通常DAPP仅限于所处的链，当然现在跨链非常的火热，另当别论了==\n\n### 代币协议标准\n\n以太坊上流行的代币协议有ERC-20和ERC-721。ERC-20 代币是可替代的，这意味着它们可以互换并且具有相同的价值。另一方面，ERC-721  代币是不可替代的，这意味着它们是唯一且不可互换的。一个简单的类比是将 ERC-20 视为金钱，将 ERC-721 视为可动人偶或棒球卡等收藏品。\n\n现在很火的NFT就是ERC-721协议下的。\n\n\n\n## 第四章 以太坊钱包\n\n钱包的本质就是一个公私钥对，主要分为托管钱包和非托管钱包：\n\n- 托管钱包（custodial wallet）：第三方代为保留并保持对加密货币的控制权，比如交易所啊啥的，有被盗风险，比如Mt. Gox就损失了超过85W个Bitcoin\n- 非托管钱包（non-custodial wallet）：自己保存自己的公私钥对\n\n我很久前自己创建过ethereum的钱包，不过也确实早已不记得自己的钱包信息了，这篇文章也给了两个比较适合DeFi学习的创建自己钱包的方式。\n\n一个是手机端的[Argent](https://argent.link/coingecko)，作为安卓用户，阿不，鸿蒙用户，似乎有点 GG，欸，先去搞个桌面端的。\n\n桌面端是[Metamask](https://metamask.io)，一个谷歌浏览器的插件，同样也是非托管的钱包。\n\n注册完是这个样子：\n\n![image-20220416102554883](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416102554883.png)\n\n助记词一定要记好，不然的话账户可能就找不到了。\n\n然后你能得到你的公钥比如：0xB6EC82B364ade9451D106998a9DB8584d924a306\n\n这个地址欢迎打钱谢谢！\n\n# Part Three: Deep Diving into DeFi\n\n## 第五章 去中心化的稳定货币\n\n截止22.4.16有81个稳定的货币，市值前五的有：\n\n![image-20220416143324880](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416143324880.png)\n\n想要看的话可以去[Top Stablecoins by Market Capitalization - CoinGecko](https://www.coingecko.com/en/categories/stablecoins)这个网站去自行查询一下。\n\n### USDT\n\nUSDT是与美刀挂钩的，每一美元可以换取1USDT，当然Tether储备金是保存在金融机构中的，我们作为用户想要用的话就需要信任Tether。\n\n### DAI\n\n> Dai 由 MakerDAO 开发并管理，是第一个去中心化基础稳定货币。Dai 由数字资产足额抵押担保发行，和美元保持1:1锚定，1 Dai = 1 美元。\n\nDAI也同样是和一美元挂钩，但是他和USDT不一样的地方在于它可以使用ETH进行抵押。\n\n### Maker \n\nMaker 是一个运行在以太坊区块链上的智能合约平台，拥有两个代币：DAI（在算法上都与 1 美元挂钩）和它的治理代币——Maker（MKR）。\n\n三个需要知道的关键参数：\n\n#### 1. Collateral Ratio 抵押比率\n\n可以铸造的 DAI 数量取决于抵押品比率。\n\n比如：\n\n- Wrapped Bitcoin (wBTC) collateral ratio = 150%\n- Basic Attention Token (BAT) collateral ratio = 150%\n\n因此，150%  的抵押比率意味着要铸造 100 美元，您需要存入至少价值 150 美元的 wBTC 或 BAT。\n\n#### 2. 稳定费\n\n截至 2021 年 4 月，BAT 目前的稳定费为 6.0%。（可以理解为管理费，或者说借贷的利息）\n\n#### 3. DAI Saving Rate (DSR)\n\nDAI  储蓄率 (DSR) 是随着时间的推移持有 DAI 所赚取的利息。它还充当影响 DAI 需求的货币工具。截至 2021 年 4 月，DSR 利率设定为  0.01%。\n\n### 为什么我们要质押ETH换DAI而不是直接换美元呢？\n\n有三种可能的情况：  \n\n-  您现在需要现金，并且您拥有一项您认为将来会更值钱的资产。  在这种情况下，您可以将您的资产保存在 Maker 保险库中，并通过发行 DAI  立即获得资金。\n- 您现在需要现金，但不想在出售资产时冒险触发应税事件。 相反，您将通过发行 DAI 来提取贷款。\n- 投资杠杆，如果您认为您的资产价值会上升，您可以对您的资产进行投资杠杆。\n\n### 如何获得DAI\n\n![image-20220416191157684](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191157684.png)\n\n实际上就是在智能合约中质押ETH来铸造DAI。\n\n在[Oasis.app](https://oasis.app)这个网站上可以去铸造属于自己的DAI，他是可以直接关联Metamask的钱包的。\n\n![image-20220416191812985](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191812985.png)\n\n可以看到这里的质押率以及费率。还挺高的，草。\n\n## 第六章 去中心化的借贷\n\n在 DeFi 环境中，也就是一个去中心化的环境下，并没有银行，所以没有法律、门槛、融资标准等等一系列的繁琐的东西。只要有足够的抵押物就可以获得贷款资金来做自己想做的事情。\n\n这本书介绍了Compound和Avae两种比较牛逼的DeFi借贷协议。\n\n### Compound\n\nCompound Finance 是一种基于以太坊的开源货币市场协议，任何人都可以无摩擦地借出或借入加密货币。\n\n现在在[Compound平台上](https://compound.finance/markets)已经有20中可以借贷的加密货币。\n\n> Compound作为建立在以太坊区块链上的流动资金池运作。供应商向流动性池提供资产以赚取利息，而借款人从流动性池中获得贷款并支付债务利息。从本质上讲，Compound弥合了希望从闲置资金中累积利息的贷方和希望借入资金用于生产或投资用途的借款人之间的差距。在 Compound 中，利率以**年收益率 (APY)**  表示，并且资产之间的利率不同。 Compound 通过考虑资产供需的算法得出利率。从本质上讲，Compound  允许供应商/借款人直接与利率协议交互，而无需协商贷款条款（例如：到期日、利率、抵押品等），从而降低了借贷的摩擦，从而创建了一个更有效的货币市场.\n\n以当前的行情来看，给一下平台上借贷双方能获得/需支付的利息年利率APY：\n\n![image-20220416214703265](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416214703265.png)\n\n#### Compound的管理\n\nCompound已经越来越去中心化了，实际上提出治理提案的人需要有超过1%的总共的COMP（Compound的币，1%就是10W个COMP）进行委托，进入治理的Alpha阶段。\n\n后续会经过三天的投票期，必须获得超过4%的投票。一旦收到最低投票门槛，通过的提案将在时间锁中排队。在通过的提案被实施到  Compound 协议中之前，将有 2 天的宽限期。用户可以通过在二级市场上购买 COMP 代币来获得 COMP 代币，或者通过在 Compound  协议上借出或借入 COMP 代币进行收益耕作。 COMP 代币根据 Compound 上借贷活动的利率按比例分配。\n\n这里可以治理些什么呢，比如利率的计算和调整这样。\n\n在compound里钱包里的资产比如DAI放进去会变成cDAI，Ether会变成cEther，假设您在 2020 年 1 月 1 日提供了 1,000 DAI，并且 APY 在整个 2020 年一直保持在 10%。\n\n2020 年 1 月 1 日，在存入 1,000 DAI 后，将获得 1,000 cDAI。在这种情况下，DAI 和 cDAI 之间的汇率为 1:1。  2021 年 1 月 1 日，一年后，您的 1,000 cDAI 现在将增值 10%。 DAI 和 cDAI 之间的新汇率为 1:1.1。您的 1,000  cDAI 现在可以兑换 1,100 DAI。\n\n### Avae\n\nAvae相比Compound更加复杂，主要有8个关键特征：\n\n- 支持更多的不同资产\n- 贷款的稳定利率和可变利率：借款人可以灵活地选择稳定利率或可变利率\n- 利率转换：借款人还能够在稳定利率和可变利率之间进行转换\n- 抵押品互换(Collateral Swap)：借款人可以将其抵押品换成另一种资产。这有助于防止贷款低于最低抵押率并面临清算。\n- 用抵押品还款：借款人可以通过在一笔交易中直接用抵押品支付来关闭他们的贷款头寸\n- 闪电贷款(Flash loans)：如果借款人在同一笔交易中偿还贷款以及任何额外的利息和闪电贷款费用，借款人可以接受零抵押贷款。闪电贷款对套利交易者很有用，因为它们在跨各种 DeFi Dapp  进行套利交易时具有资本效率。\n- 闪电清算(Flash Liquidations)：清算人可以利用闪电贷款借入资金作为清算债券的一部分，并在不使用其资金的情况下获得清算奖金。\n- 本地信用授权(Native Credit Delegation)：借款人可以将他们的信用额度扩展到其他希望在没有抵押品的情况下借款以获得更高利率的用户。\n\nAvae中的借贷利率也是由算法决定的，跟供需关系有关。\n\nAvae中存在：\n\n- Stable Annual Percentage Rate(APR)：稳定利率类似于固定利率，但如果市场条件变得糟糕，它可能会随着时间而改变。选择稳定利率的借款人更愿意知道要偿还的确切利息金额，并且不太可能受到各个流动资金池中流动性波动的影响。\n- Variable Annual Percentage Rate(APR)：可变利率是根据 Aave 协议中资产的供需情况通过算法确定的。浮动利率的波动与储备中可用的流动性数量相对应。\n\n在Avae里，你获得的是aToken，Compound里面是cToken。Avae也可以在其[网站](https://app.aave.com/)上直接连接Metamask的钱包，非常的方便。\n\n![image-20220416235651244](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416235651244.png)\n\n#### Avae的治理\n\nAave  于 2020 年 12 月重新启动了其协议的第二次迭代（Aave V2）。其原生治理令牌被称为 AAVE。任何人都可以自由地为 Aave  的改进和调整提出想法。以下是关于如何提出提案的概述。 \n\n1. 在 Aave 治理论坛上准备一份 Aave 征求意见 (ARC) 提案。社区将对此进行反馈。 \n2. 如果 ARC 没有争议，可以提交 Aave Improvement Proposal (AIP)。 \n3. AIP提交协议去等待投票\n\n## 第七章 去中心化的交易所（DEX）\n\nDEX的两种类型：\n\n1. 基于订单簿地DEX Order book-based DEX\n2. 基于流动性池的DEX Liquidity pool-based DEX\n\nDEX的局限性：\n\n1. 较低的流动性：目前大多是交易还是在中心化的交易所上进行的。在CEX里面毕竟大家的交易量是比较大的，对应到DEX里面价差就会较大，买卖双方可能由较大损失。\n2. 功能有限：中心化交易所包括许多高级交易功能，例如限价单、止损单、追踪止损等。大多数这些交易功能在 DEX 上不可用。一些 DEX现在提供限价单，从而提供更好的交易体验。然而，越来越多的 DEX 正在寻求引入这些高级交易功能，以更有效地与 CEX 竞争。\n3. 区块链的互操作性：大多数DEX只允许交易者在同一个区块链生态系统内交换代币。例如，基于以太坊的DEX只允许用户交易以太坊和 ERC-20代币。它不允许交易者交易在Polkadot或Cosmos等其他区块链上发行的代币。 CEX允许用户轻松地在各种区块链上交易代币。正在努力构建**跨链 DEX**，未来，在 DEX  上跨多个区块链交易代币将成为可能。\n4. 费用：随着DeFi的流行，这会导致以太坊网络的拥挤。以太坊交易量的增加，也就会相应的引起Gas的增加带来成本费用的上升。也就是高峰期的时候DEX上的交易大多是昂贵的交易，这在矿难或者大跌的时候是能够经常看到的，交易手续费大幅度上升。\n\n### Uniswap\n\nUniswap 是一种基于以太坊的去中心化代币交换协议，允许直接交换代币，而无需使用中心化交易所。\n\n**流动资金池**\n\n流动性池是位于Uniswap智能合约上的代币储备，可供用户交换代币。例如，使用流动性储备中有100ETH和20,000DAI的ETHDAI交易对，想要使用DAI 购买ETH的用户可以向 Uniswap 智能合约发送 202.02DAI以获得1ETH 作为回报。交换完成后，流动资金池将剩下99ETH和20,202.02DAI。流动性池的准备金由流动性提供者提供，他们被激励获得 Uniswap 0.3% 交易费的相应费用。Uniswap上的每次代币交换都会收取此费用。\n\n任何人都可以提供流动性资金。\n\n**自动的商市机制 Automated Market Maker Mechanism**\n\n资金池中资产的价格是使用Automated Market Maker(AMM) 算法确定的。AMM 的工作原理是根据池两侧的流动性计算。\n\n用 100 ETH 和 20,000 DAI 的  ETH-DAI 流动性池示例。为了计算恒定乘积，Uniswap 会将这两个金额相乘。\n\n![image-20220417140956310](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417140956310.png)\n\nAMM要求这个乘积保持不变。\n\n![image-20220417143109793](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417143109793.png)\n\n所以换的越多费率越高。\n\n想要尝试一下可以去[Uniswap](https://app.uniswap.org/)了解一波。\n\n### DEX 聚合器\n\n简单来说就是现在很多的DEX由自己的流动性资金池所以想要换的比较多的话就会面临较高的费率。而DEX聚合器就是自动将你想要换取的路由到多个DEX中，拆分掉你的大宗交易，以此来获得最有的价格。例如[1inch]( https://1inch.exchange/)就是一个DEX聚合器。\n\n## 第八章 去中心化的衍生品\n\n衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。每种类型的衍生品，无论是期货、期权还是掉期，都有不同的用途，每个投资者出于各种原因购买或出售它们。投资者交易衍生品的一些原因是为了对冲标的资产的波动性、推测标的资产的方向移动或利用其持有的资产。衍生品风险极大，交易时必须具备强大的金融知识和策略。  DeFi 衍生品 Dapp 的市值为 58.2 亿美元，占 DeFi 生态系统的 8.2%。\n\n这本书主要关注了Synthesix和Opyn两种衍生品协议\n\n### Synthetix\n\nSynthetix包含两个部分，一个是Synthetic Asset（Synths），一个是Synthetic.Exchange。\n\nSynthetix资产是Synths，现在有两种不同的Synths：\n\n- Normal Synths：与标的资产正相关\n- Inverse Synths：与表弟资产负相关\n\n一个Synths的例子是Synthetic Gold （sXAU），就是跟踪黄金的价格表现。反向Synths资产的例子是iBTC，跟踪的是BTC的反向价格表现。\n\n> 以反向合成比特币（iBTC）为例。假设在创建时，比特币 (BTC) 的价格为 10,600 美元——这将是入场价格。如果比特币下跌 400 美元至 10,200  美元，则 iBTC Synth 将额外价值 400 美元，售价为 11,000 美元，去中心化衍生品也是如此。相反，如果比特币升至 11,000  美元，iBTC Synth 现在将价值 10,200 美元。\n\nSynths 让交易者无需持有标的资产即可获得资产的价格敞口。与传统的黄金经纪公司相比，Synthetic Gold (sXAU)  允许交易者以更少的麻烦（无需注册、无需旅行、无需中间人等）参与市场。Synthsc还有另一个用途——它们可以在彼此之间无摩擦地进行交易，这意味着可以在  Synthetix.Exchange  上轻松地将合成黄金转换为合成日元、合成白银或合成比特币。这也意味着任何拥有以太坊钱包的人现在都可以开放访问任何现实世界的资产！\n\n当前支持的资产可以去[List - Synthetix System Documentation](https://docs.synthetix.io/tokens/list/)查看\n\n#### Index Synths\n\n这是一篮子货币，可以理解为，指数。\n\n#### Synthetic Exchange\n\nSynthetix Exchange 是一个去中心化的交易平台，专为 SNX 和 Synths 的交易而设计。 Synthetix 交易所没有订单簿，也没有像  Uniswap 这样的流动资金池。 Synthetix Exchange  允许用户直接与保持持续充足流动性的智能合约进行交易，从而从理论上降低滑点或缺乏流动性的风险。由于用户购买的是合成合约而不是交易标的资产，因此用户最多可以购买系统中的抵押品总额，而不会影响合约的价格。\n\n\n\nFor more information or mining Synth:[Home | Synthetix Staking](https://staking.synthetix.io/)\n\n### Opyn\n\nOpyn 为资产价格波动提供保护，并为智能合约提供保险。用户可以获得以太坊 (ETH)、Wrapped Bitcoin (WBTC)、Yearn  Finance (YFI)、Uniswap (UNI)、DeFiPulseIndex (DPI) 以及 Compound (COMP) 上的 USDC 和  DAI 存款的保护。\n\n除了智能合约失败之外，Opyn  还可以防范财务和管理风险等其他风险。 Opyn 通过利用金融衍生品（即期权）来做到这一点。\n\nFor more information：https://v1.opyn.co/#/\n\n## 第九章 去中心化的基金管理\n\n基金管理是监督资产并管理其现金流以产生投资回报的过程。我们已经开始看到创新的  DeFi  团队为用户构建了以去中心化方式更好地管理资金的方法。\n\n去中心化的基金管理是在没有投资经理的情况下进行的。相反，算法可以帮助您自动进行交易。这使您可以选择最适合您的财务目标并减少支付费用的资产管理策略。\n\n### TokenSets\n\nTokenSets 是一个允许加密用户购买启用策略的代币 (SET)  的平台。这些代币具有自动化的资产管理策略，使您能够轻松管理您的加密货币投资组合，而无需手动执行交易策略。使用自动交易策略，您无需手动 24/7  监控市场，从而减少因情绪交易而错失的机会和风险。\n\n#### Index Sets 指数组合\n\n指数集允许用户通过购买单个代币而不是单独购买多个资产来接触更多资产并降低汽油费。最受欢迎的指数集是  DeFiPulse 指数（DPI），该指数基于市值加权指数跟踪 DeFi 代币的表现\n\n#### Yield Farming Set \n\nYield  Farming Sets 使用户无需不断地进行多个智能合约交易来产生收益农业协议，从而节省燃料。这些 Sets 的策略将定期索取流动性提供者 (LP)  奖励，将其出售以换取策划资产，并质押这些资产以产生更多的LP奖励。本质上，这是 DeFi 采取复利的一个例子！\n\n可以去[TokenSets – Asset Management Simplified](https://www.tokensets.com/)了解情况。\n\n## 第十章 去中心化的彩票\n\n2020 年 2 月，一位仅存入 10 美元的用户在 PoolTogether 的每周 DAI 奖池中赢得了 1,648 美元，获胜机会为 69,738  分之一。 PoolTogether 彩票最好的部分是，如果参与者没有中奖，他们可以获得 10 美元押金的退款。这场博弈没有输家，只有机会成本。\n\n？？？？有这种好事？\n\n### Pool Together\n\nPoolTogether  是一个去中心化的无损彩票或去中心化的奖金储蓄应用程序，用户可以在抽奖后保留他们的初始存款金额。不是使用购买的彩票来资助奖金，而是使用汇集的用户存款在  Compound 协议上赚取的利息来资助奖金。对于每一轮 PoolTogether，所有用户存款都会发送到 Compound  以赚取利息。每个间隔结束时将随机抽取一名幸运获胜者，以赢取累积的全部利息作为奖金\n\nhttps://pooltogether.com/zh\n\n可以去上面网站上看看，我没找到支持的货币列表。但是DAI, USDC, UNI,  COMP是肯定可以支持的。\n\n## 第十一章 去中心化支付\n\n### Sabiler \n\nSablier  是一个支付流应用程序——这意味着它允许在不同方之间以小增量（以秒为单位！）实时进行支付和取款。考虑在工作和进展过程中实时支付的每小时咨询工作、每日合同工或每月租金支付。与在  Spotify 上流式传输音乐的方式类似，也可以在 Sablier 上流式传输资金！\n\n**什么是流式付款？**\n\n付款人现在可以在双方定义和同意的期限内实时发送付款，而不是等待固定期限（例如，每月、每两周）付款。通过  Sablier，收款人现在可以实时收到他们的付款并随时提取。比如60/h的咨询服务可以在Sablier签订协议后一分钟一分钟的自己付款，即使返回了损失也非常小。\n\n官网：[Sablier](https://sablier.finance/)\n\n等于是形成了一个支付流，一步步付款。\n\n## 第十二章 去中心化保险\n\n参与DeFi的过程中，必须将代币锁定在智能合约中，但是显然即使是审计过的智能合约也有可能存在缺陷而被黑客攻击。所以就有了去中心化的保险。\n\n所以使用DeFi必须要面对：\n\n1. 技术风险：智能合约可能被黑客攻击或漏洞被利用\n2. 流动性风险：借贷协议（如 Compound）可能耗尽流动性\n3. 管理密钥风险：协议的公私钥可能被泄露\n\n###  Nexus Mutual\n\nNexus Mutual  是建立在以太坊上的去中心化保险协议，为以太坊区块链上的智能合约提供保障，并为中心化贷方和交易所（如Celsius、Blockfi、Nexo、Binance、Coinbase、Kraken  和 Gemini）提供托管保障。\n\n保险的保护范围是智能合约的意外，如果只是自己丢了私钥那没救了。\n\nNXM是Nexus Mutual的原生代币\n\n[Nexus Mutual | A decentralised alternative to insurance](https://nexusmutual.io/)\n\n### Armor\n\nArmor  是 DeFi 的第一个保险聚合器。利用 Nexus Mutual 的承保能力，它提供现收现付保险产品以及无需 KYC 即可购买保险的能力。不想进行 KYC 或因 Nexus Mutual 的地域限制无法购买保险的用户可以通过 Armor 获得保险。\n\n[Armor.Fi](https://armor.fi/)\n\n### Nsure Network\n\nNsure Network  是一个去中心化的保险项目，它借鉴了伦敦劳合社的理念，这是一个交易保险风险的市场。保费价格使用动态定价模型确定，其中资本供需共同决定保费，类似于自由市场的定价机制。\n\nNsure  Network 的治理代币 (NSURE) 由购买的政策支持。价格可根据资本供求的变动自行调整，但受基础模型的稳定。与遵循互惠模式的 Nexus Mutual  不同，Nsure Network 遵循股东模式，其中 Nsure Network 的代币类似于持有网络的一部分。\n\n### Cover Protocol\n\nCover Protocol 是一个点对点保险市场，其运作类似于预测市场。与其他保险协议不同，治理代币不用于承保风险。为了引导这一新协议的覆盖范围，做市商被激励将  DAI 或 yDAI 抵押品用于铸造 CLAIM 和 NOCLAIM 代币。 Cover Protocol  保险涵盖选定的协议，并且都有指定的到期日。在到期日期间，CLAIM 或 NOCLAIM 代币将拥有抵押品的全部权利。\n\n例如，如果在设定的到期日之前使用 100 DAI 为 Compound 协议提供保障，它将产生 100 CLAIM 和 100 NOCLAIM  代币。在到期日，如果有有效的索赔事件，所有 CLAIM 代币将获得 1 DAI，而所有 NOCLAIM 代币将一文不值。相反，如果没有有效的索赔事件，所有  NOCLAIM 代币将收到 1 DAI，而所有 CLAIM 代币到期时一文不值。要获得价值 100 DAI 的保险，用户需要从交易所购买 100 CLAIM  代币，因为如果发生有效索赔，这将过期至 100 DAI。购买 100 个 CLAIM 代币的成本将是保险费。\n\n\n\n**Conclusion**\n\n保险在 DeFi  中仍然是一个非常小众的细分市场，通常吸引的零售市场参与者很少。然而，随着更成熟的参与者加入市场，他们无疑将需要更好的风险管理工具。归根结底，投保或不投保的选择最终取决于您。但是，我们  CoinGecko 肯定会推荐购买保险，因为在 DeFi 中任何事情都可能发生。\n\n## 第十三章 治理\n\n与中心化传统公司不同，DeFi  协议不需要遵循除链上编码之外的任何规则。这通常被称为“代码就是法律”。\n\n### Aragon\n\n[Aragon](https://client.aragon.org/#/)是一个社区驱动的项目，其使命是通过为去中心化组织的繁荣创造工具来赋予自由。随着技术以前所未有的速度发展，人们担心它在创建全球集中控制、监视和压迫制度中的作用。  Aragon 决心创建一个自由、开放、公平的社会。\n\nAragon Court 是 Aragon  创建的解决方案，它模仿了传统商业世界中法院的功能。当发生冲突时，参与者可以将其升级到Aragon Court，由陪审员决定是否应惩罚任何一方。\n\n陪审员从陪审员池中随机选择，通过锁定  ANJ  代币来审查和裁决争议。与传统法院不同，陪审员在投票支持多数结果时会获得争议费用补偿。因此，该系统不适合不偏不倚的决策，而是依靠社会共识。投票支持少数派结果的陪审员将被带走一部分  ANJ  代币，并奖励给投票支持多数派的陪审员。如果结果不令人满意，任何一方都可以支付费用对争议提出上诉，并由大量陪审员进行审查。这个过程可以重复，直到整个陪审员池对争议做出裁决。\n\n### Snapshot\n\n由于以太坊汽油费上涨，链上投票的成本变得难以承受，阻碍了小代币持有者参与治理过程。 Snapshot试图通过在链下拍摄投票快照来解决这个问题，从而有效地使投票过程无气体。Snapshot 已经看到许多 DeFi 项目利用其工具来建立治理流程。截至 2021  年 1 月，Snapshot 可免费使用，已有多达 418 个不同的项目注册使用 Snapshot。\n\n缺点：链下投票不受智能合约约束。\n\nhttps://snapshot.page/#/\n\n## 第十四章 DeFi仪表盘\n\n[Zapper - Your Home to Web3](https://zapper.fi/zh)\n\n仪表板是一个简单的平台，可将您的所有 DeFi 活动聚合在一个地方。这是一个有用的工具，可以可视化和跟踪您的资产在不同 DeFi  协议中的位置。仪表板能够将您的资产分为不同的类别，例如存款、债务和投资。\n\n# Part Four： DeFi in Action\n\n## 第十五章 DeFi in Action\n\n### 案例一 Surviving Argentina’s High Inflation\n\n就是阿根廷的货币贬值太猛，但是DAI是和美元挂钩的， 即使DeFi有风险，但是相比阿根廷货币的风险来说不值一提，所以有人用DAI来规避自己资金的风险。（不能直接换美元因为政府不允许。）\n\n[Mariano Conti · Living on Defi: How I Survive Argentina's 50% Inflation · SlidesLive](https://slideslive.com/38920018/living-on-defi-how-i-survive-argentinas-50-inflation)\n\n### 案例二 Uniswap Ban\n\n就是有一段时间Uniswap团队为了遵守美国法律然后ban掉了一些地方的ip。但是实际上只能禁止网站访问不能禁止Uniswap协议，因此呢他就重新建了一些站点用于被banIP的地方的人访问。\n\n## 第十六章 DeFi就是未来！！！\n\nDeFi：\n\n- 透明！\n- 可接入！\n- 高效！\n- 便捷！\n\nDeFi目前的痛点：\n\n- **Wallet** - [Argent](https://www.argent.xyz/) is creating a radically better user-focused crypto wallet  experience, with state-of-the-art security, native integration with DeFi Dapps  such as Compound and others, as well as not needing seed keys. \n- **Participation of  products** - [Zapper](https://zapper.fi/) abstracts away many of the complexities and steps involved  with DeFi products. It also allows users to access multiple financial products  in one transaction, saving time and effort. \n- **User-friendly development** - [Gelato  Finance]([play.gelato.finance](https://play.gelato.finance/)) recently launched their“If this, then that” for crypto. It allows users  to set actions that will be done once certain conditions are met, such as“Buy  ETH when it is $200” or“Send some money to Alice when it’s her birthday.”  \n- **Insurance** - Financial market effectively facilitates the transfer of risk - one  man’s hedge against his position is another man’s profit. Insurance is now  available via DeFi insurers such as [Nexus Mutual](https://nexusmutual.io/). If you are willing to accept a  lower yield on the money you have placed on lending protocols such as Compound  in exchange for peace of mind, it can now be done. \n- **Aggregation of liquidity** -  There are many different decentralized exchanges (DEXs) in the market with  varying liquidity. It is a headache for users to choose which one is the best  for their trade. This is slowly becoming a thing of the past with liquidity  aggregators such as [1inch.exchange](https://app.1inch.io/#/), Paraswap, and Matcha helping users to automatically split orders across DEXs to  ensure the best possible execution prices.\n- **Yield optimization** - Remember switching around different banks for the best  rates for fixed deposits? You don’t have to do that in DeFi - yield aggregators  such as Yearn.finance, idle.finance, and DeFiSaver automatically allocate your  cryptoassets to places with the best yield opportunities.\n\n# 浅浅小结一下\n\nHow to DeFi: Begginer 这本书其实让我认识到了炒币这种事情属于是太low了，DeFi所展望的远远不是简单的炒币，而是真的带来了一种全新的去中心化的金融模式。\n\n完善的借贷、基金、彩票、衍生品等等DeFi合约属于是让人对目前加密货币的发展有了全新的认识。\n","slug":"DeFi-Learning-Beginner","published":1,"updated":"2022-07-02T15:49:59.938Z","_id":"cl3iqqes40035l0em6fvsftgs","comments":1,"layout":"post","photos":[],"link":"","content":"<p>A reading note for 《How to DeFi Beginner》</p>\n<h1 id=\"Part-One-Centralized-amp-Decentralized-Finance\"><a href=\"#Part-One-Centralized-amp-Decentralized-Finance\" class=\"headerlink\" title=\"Part One: Centralized &amp; Decentralized Finance\"></a>Part One: Centralized &amp; Decentralized Finance</h1><h2 id=\"第一章-中心化和去中心化金融\"><a href=\"#第一章-中心化和去中心化金融\" class=\"headerlink\" title=\"第一章 中心化和去中心化金融\"></a>第一章 中心化和去中心化金融</h2><div class=\"story post-story\"><p>从传统的角度看，银行显然是我们最为熟悉的中心化的金融机构。但是啊，这个08年金融危机吧，也可以看出来银行是有一定的风险的，体现了一定的金融系统缺陷。</p>\n<p>Defi想要构建什么？</p>\n<p>Defi想要用区块链&amp;互联网去重构银行系统中的：</p>\n<ul>\n<li>支付和清算系统，也就是简单来说汇款</li>\n<li>可访问性</li>\n<li>集中化和透明度</li>\n</ul>\n<h3 id=\"1-支付清算系统\"><a href=\"#1-支付清算系统\" class=\"headerlink\" title=\"1. 支付清算系统\"></a>1. 支付清算系统</h3><p>如果我们只考虑国内的支付，那，显然没啥意思，但是对于跨境支付的话，这就很麻烦了，不论从时效性还是各种文件balabala都很烦，以及隐私等等都太烦了，这时候Defi来了，加密货币的支付时很快的，同时手续费也会很低。</p>\n<h3 id=\"2-可访问性\"><a href=\"#2-可访问性\" class=\"headerlink\" title=\"2. 可访问性\"></a>2. 可访问性</h3><p>这点也是我开始并不理解的，事实上很多人因为信用问题又或者仅仅是某些国家的地理及贫困，到2017年还有17亿人没有储蓄账户，但其中2/3的人可以使用手机，因此DeFi可以为他们提供一个不需要银行储蓄账户的，无国界的无审查但可访问的金融账户。</p>\n<h3 id=\"3-集中化和透明性\"><a href=\"#3-集中化和透明性\" class=\"headerlink\" title=\"3. 集中化和透明性\"></a>3. 集中化和透明性</h3><p>传统银行是中心化的，08年雷诺银行倒闭引起金融危机，包括美国也有500家银行倒闭过，这都是巨大的金融风险。另外从我们现在的角度看很多基金、银行是缺乏透明性的，我们不知道我们的资产在哪里。但是DeFi可以解决这个问题，本身是在区块链之上构建的，他就是一行行的代码，是透明的，同时代码对每个人都是公平的，他不会歧视，不会性别歧视、地域歧视、种族歧视、什么都不会。</p>\n<h3 id=\"去中心化金融对比传统金融\"><a href=\"#去中心化金融对比传统金融\" class=\"headerlink\" title=\"去中心化金融对比传统金融\"></a>去中心化金融对比传统金融</h3><blockquote>\n<p>The DeFi movement is about bridging these gaps and making finance accessible to  everyone without any form of censorship. In short, DeFi opens up huge windows of  opportunities and allows users to access various financial instruments without  any restriction on race, religion, age, nationality, or geography. When  comparing both traditional and decentralized financial products, there will be  pros and cons on each side. In this book, we will walk you through the concepts  and possibilities of decentralized finance so that you will know how to use its  best features to solve real-world problems.</p>\n</blockquote>\n</div><h2 id=\"第二章-DeFi是什么\"><a href=\"#第二章-DeFi是什么\" class=\"headerlink\" title=\"第二章 DeFi是什么\"></a>第二章 DeFi是什么</h2><div class=\"story post-story\"><p>DeFi 即 Decentralized Finance</p>\n<p>是一种允许用户在不需要依赖中心化实体的情况下利用借贷和交易等金融服务的运动。这些金融服务是通过去中心化应用程序（Decentralized Applications，Dapps）提供的，其中大部分部署在以太坊平台上。</p>\n<p>为了更好的理解一下DeFi的去中心化，将去中心化程度做了三层次的分层，他们的特点如下：</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>中心化</th>\n<th>半中心化</th>\n<th>去中心化</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>特征</td>\n<td>托管，使用集中的价格馈送，集中确定的利率，集中提供的追加保证金流动性</td>\n<td>非托管、去中心化的价格反馈、无需许可的追加保证金通知、无需许可的保证金流动性、去中心化利率确定、去中心化平台开发/更新</td>\n<td>所有东西都是去中心化的</td>\n</tr>\n<tr>\n<td>例子</td>\n<td>Salt, BlockFi, Nexo and Celsius</td>\n<td>Compound, MakerDAO, dYdX, and bZx</td>\n<td>现在还没有</td>\n</tr>\n</tbody></table>\n<h3 id=\"DeFi的九大类别\"><a href=\"#DeFi的九大类别\" class=\"headerlink\" title=\"DeFi的九大类别\"></a>DeFi的九大类别</h3><h4 id=\"1-稳定货币-Stablecoins\"><a href=\"#1-稳定货币-Stablecoins\" class=\"headerlink\" title=\"1. 稳定货币 Stablecoins\"></a>1. 稳定货币 Stablecoins</h4><p>比如USDT是锚定1美元的这种稳定货币</p>\n<h4 id=\"2-借贷\"><a href=\"#2-借贷\" class=\"headerlink\" title=\"2. 借贷\"></a>2. 借贷</h4><p>传统金融系统要求用户拥有银行账户才能使用他们的服务，这是目前  17  亿人所没有的奢侈品。从银行借款还有其他限制，例如具有良好的信用评分和有足够的抵押品以使银行相信其信誉良好且能够偿还贷款。去中心化借贷消除了这一障碍，允许任何人抵押他们的<strong>数字资产</strong>并使用它来获得贷款。人们还可以通过<strong>为贷款池做出贡献</strong>并从这些资产中赚取利息来获得资产收益并参与贷款市场。通过去中心化借贷，不需要银行账户，也不需要检查信用度。</p>\n<h4 id=\"3-交易所\"><a href=\"#3-交易所\" class=\"headerlink\" title=\"3. 交易所\"></a>3. 交易所</h4><p>要将一种加密货币换成另一种，可以使用 Coinbase 或 Binance  等交易所。像这样的交易所是中心化交易所，这意味着它们既是交易资产的中介又是托管人。这些交易所的用户无法完全控制他们的资产，如果交易所被黑客入侵并且无法偿还债务，他们的资产就会面临风险。</p>\n<p>去中心化交易所旨在通过允许用户在不放弃对其资产的保管权的情况下交换加密货币来解决这个问题。通过<strong>不在中心化交易所存储任何资金</strong>，用户无需信任交易所就能保持偿付能力。</p>\n<h4 id=\"4-衍生品\"><a href=\"#4-衍生品\" class=\"headerlink\" title=\"4. 衍生品\"></a>4. 衍生品</h4><p>衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。交易者可以使用衍生品来对冲风险。例如，假设您是一家手套制造商，想要对冲橡胶价格意外上涨的风险。您可以从您的供应商处购买一份期货合约，以便在特定的未来交割日期以今天的约定价格交割特定数量的橡胶。衍生品合约主要在中心化平台上交易。</p>\n<p>DeFi 平台同样也要建立去中心化的衍生品市场。（Chapter 8）</p>\n<h4 id=\"5-基金管理\"><a href=\"#5-基金管理\" class=\"headerlink\" title=\"5. 基金管理\"></a>5. 基金管理</h4><p>基金管理是监督资产并管理其现金流以产生投资回报的过程。在 DeFi 中，一些项目已经开始允许以去中心化的方式进行被动资金管理。  DeFi 的透明性使用户可以轻松跟踪其资金的管理方式并了解他们将支付的成本。</p>\n<h4 id=\"6-彩票\"><a href=\"#6-彩票\" class=\"headerlink\" title=\"6. 彩票\"></a>6. 彩票</h4><p>好家伙彩票也算，有意思。这个就不用解释了。</p>\n<h4 id=\"7-支付\"><a href=\"#7-支付\" class=\"headerlink\" title=\"7. 支付\"></a>7. 支付</h4><p>DeFi想要创造一种规模更大，准确性更高的即用即付方式。</p>\n<h4 id=\"8-保险\"><a href=\"#8-保险\" class=\"headerlink\" title=\"8. 保险\"></a>8. 保险</h4><p>去中心化的代币可能受到黑客的攻击所以DeFi也想要提供一种去中心化的保险，毕竟智能合约是不是永远安全的没人知道。代码的安全性度量一直是一个问题，无法量化解决。</p>\n<h4 id=\"9-治理\"><a href=\"#9-治理\" class=\"headerlink\" title=\"9. 治理\"></a>9. 治理</h4><p>治理本质上是加密的业务管理理念。为了让  DeFi 协议管理项目，通常会引入治理令牌以赋予用户投票权并在协议的路线图中拥有发言权。自然，还开发了多个工具包和 Dapps  以促进有效治理和补充现有系统。</p>\n<h1 id=\"Part-Two-Getting-into-DeFi\"><a href=\"#Part-Two-Getting-into-DeFi\" class=\"headerlink\" title=\"Part Two: Getting into DeFi\"></a>Part Two: Getting into DeFi</h1></div><h2 id=\"第三章-去中心化层：以太坊\"><a href=\"#第三章-去中心化层：以太坊\" class=\"headerlink\" title=\"第三章 去中心化层：以太坊\"></a>第三章 去中心化层：以太坊</h2><div class=\"story post-story\"><p>其实以太坊对于了解区块链的人来说并不陌生，所以这一章看看就简单过去了，感兴趣的去了解一下以太坊基础知识也就足够。</p>\n<h3 id=\"Dapp的特点：\"><a href=\"#Dapp的特点：\" class=\"headerlink\" title=\"Dapp的特点：\"></a>Dapp的特点：</h3><ul>\n<li>不变性：一旦智能合约在区块链上部署了那必然是不会再变的。==然而这也会导致不可避免的错误被保存下来搞出大问题==</li>\n<li>防篡改：链上智能合约不可能在大家不知道的情况下被私自篡改</li>\n<li>透明性：链上智能合约是公开可审计的。==这可能会让黑客审计代码发现漏洞然后攻击，比如THE DAO==</li>\n<li>可用性：只要以太坊不GG，就一直可用</li>\n<li>可扩展性：==通常DAPP仅限于所处的链，当然现在跨链非常的火热，另当别论了==</li>\n</ul>\n<h3 id=\"代币协议标准\"><a href=\"#代币协议标准\" class=\"headerlink\" title=\"代币协议标准\"></a>代币协议标准</h3><p>以太坊上流行的代币协议有ERC-20和ERC-721。ERC-20 代币是可替代的，这意味着它们可以互换并且具有相同的价值。另一方面，ERC-721  代币是不可替代的，这意味着它们是唯一且不可互换的。一个简单的类比是将 ERC-20 视为金钱，将 ERC-721 视为可动人偶或棒球卡等收藏品。</p>\n<p>现在很火的NFT就是ERC-721协议下的。</p>\n</div><h2 id=\"第四章-以太坊钱包\"><a href=\"#第四章-以太坊钱包\" class=\"headerlink\" title=\"第四章 以太坊钱包\"></a>第四章 以太坊钱包</h2><div class=\"story post-story\"><p>钱包的本质就是一个公私钥对，主要分为托管钱包和非托管钱包：</p>\n<ul>\n<li>托管钱包（custodial wallet）：第三方代为保留并保持对加密货币的控制权，比如交易所啊啥的，有被盗风险，比如Mt. Gox就损失了超过85W个Bitcoin</li>\n<li>非托管钱包（non-custodial wallet）：自己保存自己的公私钥对</li>\n</ul>\n<p>我很久前自己创建过ethereum的钱包，不过也确实早已不记得自己的钱包信息了，这篇文章也给了两个比较适合DeFi学习的创建自己钱包的方式。</p>\n<p>一个是手机端的<a href=\"https://argent.link/coingecko\">Argent</a>，作为安卓用户，阿不，鸿蒙用户，似乎有点 GG，欸，先去搞个桌面端的。</p>\n<p>桌面端是<a href=\"https://metamask.io/\">Metamask</a>，一个谷歌浏览器的插件，同样也是非托管的钱包。</p>\n<p>注册完是这个样子：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416102554883.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416102554883.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416102554883\"></p>\n<p>助记词一定要记好，不然的话账户可能就找不到了。</p>\n<p>然后你能得到你的公钥比如：0xB6EC82B364ade9451D106998a9DB8584d924a306</p>\n<p>这个地址欢迎打钱谢谢！</p>\n<h1 id=\"Part-Three-Deep-Diving-into-DeFi\"><a href=\"#Part-Three-Deep-Diving-into-DeFi\" class=\"headerlink\" title=\"Part Three: Deep Diving into DeFi\"></a>Part Three: Deep Diving into DeFi</h1></div><h2 id=\"第五章-去中心化的稳定货币\"><a href=\"#第五章-去中心化的稳定货币\" class=\"headerlink\" title=\"第五章 去中心化的稳定货币\"></a>第五章 去中心化的稳定货币</h2><div class=\"story post-story\"><p>截止22.4.16有81个稳定的货币，市值前五的有：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416143324880.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416143324880.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416143324880\"></p>\n<p>想要看的话可以去<a href=\"https://www.coingecko.com/en/categories/stablecoins\">Top Stablecoins by Market Capitalization - CoinGecko</a>这个网站去自行查询一下。</p>\n<h3 id=\"USDT\"><a href=\"#USDT\" class=\"headerlink\" title=\"USDT\"></a>USDT</h3><p>USDT是与美刀挂钩的，每一美元可以换取1USDT，当然Tether储备金是保存在金融机构中的，我们作为用户想要用的话就需要信任Tether。</p>\n<h3 id=\"DAI\"><a href=\"#DAI\" class=\"headerlink\" title=\"DAI\"></a>DAI</h3><blockquote>\n<p>Dai 由 MakerDAO 开发并管理，是第一个去中心化基础稳定货币。Dai 由数字资产足额抵押担保发行，和美元保持1:1锚定，1 Dai = 1 美元。</p>\n</blockquote>\n<p>DAI也同样是和一美元挂钩，但是他和USDT不一样的地方在于它可以使用ETH进行抵押。</p>\n<h3 id=\"Maker\"><a href=\"#Maker\" class=\"headerlink\" title=\"Maker\"></a>Maker</h3><p>Maker 是一个运行在以太坊区块链上的智能合约平台，拥有两个代币：DAI（在算法上都与 1 美元挂钩）和它的治理代币——Maker（MKR）。</p>\n<p>三个需要知道的关键参数：</p>\n<h4 id=\"1-Collateral-Ratio-抵押比率\"><a href=\"#1-Collateral-Ratio-抵押比率\" class=\"headerlink\" title=\"1. Collateral Ratio 抵押比率\"></a>1. Collateral Ratio 抵押比率</h4><p>可以铸造的 DAI 数量取决于抵押品比率。</p>\n<p>比如：</p>\n<ul>\n<li>Wrapped Bitcoin (wBTC) collateral ratio = 150%</li>\n<li>Basic Attention Token (BAT) collateral ratio = 150%</li>\n</ul>\n<p>因此，150%  的抵押比率意味着要铸造 100 美元，您需要存入至少价值 150 美元的 wBTC 或 BAT。</p>\n<h4 id=\"2-稳定费\"><a href=\"#2-稳定费\" class=\"headerlink\" title=\"2. 稳定费\"></a>2. 稳定费</h4><p>截至 2021 年 4 月，BAT 目前的稳定费为 6.0%。（可以理解为管理费，或者说借贷的利息）</p>\n<h4 id=\"3-DAI-Saving-Rate-DSR\"><a href=\"#3-DAI-Saving-Rate-DSR\" class=\"headerlink\" title=\"3. DAI Saving Rate (DSR)\"></a>3. DAI Saving Rate (DSR)</h4><p>DAI  储蓄率 (DSR) 是随着时间的推移持有 DAI 所赚取的利息。它还充当影响 DAI 需求的货币工具。截至 2021 年 4 月，DSR 利率设定为  0.01%。</p>\n<h3 id=\"为什么我们要质押ETH换DAI而不是直接换美元呢？\"><a href=\"#为什么我们要质押ETH换DAI而不是直接换美元呢？\" class=\"headerlink\" title=\"为什么我们要质押ETH换DAI而不是直接换美元呢？\"></a>为什么我们要质押ETH换DAI而不是直接换美元呢？</h3><p>有三种可能的情况：  </p>\n<ul>\n<li> 您现在需要现金，并且您拥有一项您认为将来会更值钱的资产。  在这种情况下，您可以将您的资产保存在 Maker 保险库中，并通过发行 DAI  立即获得资金。</li>\n<li>您现在需要现金，但不想在出售资产时冒险触发应税事件。 相反，您将通过发行 DAI 来提取贷款。</li>\n<li>投资杠杆，如果您认为您的资产价值会上升，您可以对您的资产进行投资杠杆。</li>\n</ul>\n<h3 id=\"如何获得DAI\"><a href=\"#如何获得DAI\" class=\"headerlink\" title=\"如何获得DAI\"></a>如何获得DAI</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191157684.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191157684.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416191157684\"></p>\n<p>实际上就是在智能合约中质押ETH来铸造DAI。</p>\n<p>在<a href=\"https://oasis.app/\">Oasis.app</a>这个网站上可以去铸造属于自己的DAI，他是可以直接关联Metamask的钱包的。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191812985.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191812985.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416191812985\"></p>\n<p>可以看到这里的质押率以及费率。还挺高的，草。</p>\n</div><h2 id=\"第六章-去中心化的借贷\"><a href=\"#第六章-去中心化的借贷\" class=\"headerlink\" title=\"第六章 去中心化的借贷\"></a>第六章 去中心化的借贷</h2><div class=\"story post-story\"><p>在 DeFi 环境中，也就是一个去中心化的环境下，并没有银行，所以没有法律、门槛、融资标准等等一系列的繁琐的东西。只要有足够的抵押物就可以获得贷款资金来做自己想做的事情。</p>\n<p>这本书介绍了Compound和Avae两种比较牛逼的DeFi借贷协议。</p>\n<h3 id=\"Compound\"><a href=\"#Compound\" class=\"headerlink\" title=\"Compound\"></a>Compound</h3><p>Compound Finance 是一种基于以太坊的开源货币市场协议，任何人都可以无摩擦地借出或借入加密货币。</p>\n<p>现在在<a href=\"https://compound.finance/markets\">Compound平台上</a>已经有20中可以借贷的加密货币。</p>\n<blockquote>\n<p>Compound作为建立在以太坊区块链上的流动资金池运作。供应商向流动性池提供资产以赚取利息，而借款人从流动性池中获得贷款并支付债务利息。从本质上讲，Compound弥合了希望从闲置资金中累积利息的贷方和希望借入资金用于生产或投资用途的借款人之间的差距。在 Compound 中，利率以<strong>年收益率 (APY)</strong>  表示，并且资产之间的利率不同。 Compound 通过考虑资产供需的算法得出利率。从本质上讲，Compound  允许供应商/借款人直接与利率协议交互，而无需协商贷款条款（例如：到期日、利率、抵押品等），从而降低了借贷的摩擦，从而创建了一个更有效的货币市场.</p>\n</blockquote>\n<p>以当前的行情来看，给一下平台上借贷双方能获得/需支付的利息年利率APY：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416214703265.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416214703265.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416214703265\"></p>\n<h4 id=\"Compound的管理\"><a href=\"#Compound的管理\" class=\"headerlink\" title=\"Compound的管理\"></a>Compound的管理</h4><p>Compound已经越来越去中心化了，实际上提出治理提案的人需要有超过1%的总共的COMP（Compound的币，1%就是10W个COMP）进行委托，进入治理的Alpha阶段。</p>\n<p>后续会经过三天的投票期，必须获得超过4%的投票。一旦收到最低投票门槛，通过的提案将在时间锁中排队。在通过的提案被实施到  Compound 协议中之前，将有 2 天的宽限期。用户可以通过在二级市场上购买 COMP 代币来获得 COMP 代币，或者通过在 Compound  协议上借出或借入 COMP 代币进行收益耕作。 COMP 代币根据 Compound 上借贷活动的利率按比例分配。</p>\n<p>这里可以治理些什么呢，比如利率的计算和调整这样。</p>\n<p>在compound里钱包里的资产比如DAI放进去会变成cDAI，Ether会变成cEther，假设您在 2020 年 1 月 1 日提供了 1,000 DAI，并且 APY 在整个 2020 年一直保持在 10%。</p>\n<p>2020 年 1 月 1 日，在存入 1,000 DAI 后，将获得 1,000 cDAI。在这种情况下，DAI 和 cDAI 之间的汇率为 1:1。  2021 年 1 月 1 日，一年后，您的 1,000 cDAI 现在将增值 10%。 DAI 和 cDAI 之间的新汇率为 1:1.1。您的 1,000  cDAI 现在可以兑换 1,100 DAI。</p>\n<h3 id=\"Avae\"><a href=\"#Avae\" class=\"headerlink\" title=\"Avae\"></a>Avae</h3><p>Avae相比Compound更加复杂，主要有8个关键特征：</p>\n<ul>\n<li>支持更多的不同资产</li>\n<li>贷款的稳定利率和可变利率：借款人可以灵活地选择稳定利率或可变利率</li>\n<li>利率转换：借款人还能够在稳定利率和可变利率之间进行转换</li>\n<li>抵押品互换(Collateral Swap)：借款人可以将其抵押品换成另一种资产。这有助于防止贷款低于最低抵押率并面临清算。</li>\n<li>用抵押品还款：借款人可以通过在一笔交易中直接用抵押品支付来关闭他们的贷款头寸</li>\n<li>闪电贷款(Flash loans)：如果借款人在同一笔交易中偿还贷款以及任何额外的利息和闪电贷款费用，借款人可以接受零抵押贷款。闪电贷款对套利交易者很有用，因为它们在跨各种 DeFi Dapp  进行套利交易时具有资本效率。</li>\n<li>闪电清算(Flash Liquidations)：清算人可以利用闪电贷款借入资金作为清算债券的一部分，并在不使用其资金的情况下获得清算奖金。</li>\n<li>本地信用授权(Native Credit Delegation)：借款人可以将他们的信用额度扩展到其他希望在没有抵押品的情况下借款以获得更高利率的用户。</li>\n</ul>\n<p>Avae中的借贷利率也是由算法决定的，跟供需关系有关。</p>\n<p>Avae中存在：</p>\n<ul>\n<li>Stable Annual Percentage Rate(APR)：稳定利率类似于固定利率，但如果市场条件变得糟糕，它可能会随着时间而改变。选择稳定利率的借款人更愿意知道要偿还的确切利息金额，并且不太可能受到各个流动资金池中流动性波动的影响。</li>\n<li>Variable Annual Percentage Rate(APR)：可变利率是根据 Aave 协议中资产的供需情况通过算法确定的。浮动利率的波动与储备中可用的流动性数量相对应。</li>\n</ul>\n<p>在Avae里，你获得的是aToken，Compound里面是cToken。Avae也可以在其<a href=\"https://app.aave.com/\">网站</a>上直接连接Metamask的钱包，非常的方便。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416235651244.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416235651244.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220416235651244\"></p>\n<h4 id=\"Avae的治理\"><a href=\"#Avae的治理\" class=\"headerlink\" title=\"Avae的治理\"></a>Avae的治理</h4><p>Aave  于 2020 年 12 月重新启动了其协议的第二次迭代（Aave V2）。其原生治理令牌被称为 AAVE。任何人都可以自由地为 Aave  的改进和调整提出想法。以下是关于如何提出提案的概述。 </p>\n<ol>\n<li>在 Aave 治理论坛上准备一份 Aave 征求意见 (ARC) 提案。社区将对此进行反馈。 </li>\n<li>如果 ARC 没有争议，可以提交 Aave Improvement Proposal (AIP)。 </li>\n<li>AIP提交协议去等待投票</li>\n</ol>\n</div><h2 id=\"第七章-去中心化的交易所（DEX）\"><a href=\"#第七章-去中心化的交易所（DEX）\" class=\"headerlink\" title=\"第七章 去中心化的交易所（DEX）\"></a>第七章 去中心化的交易所（DEX）</h2><div class=\"story post-story\"><p>DEX的两种类型：</p>\n<ol>\n<li>基于订单簿地DEX Order book-based DEX</li>\n<li>基于流动性池的DEX Liquidity pool-based DEX</li>\n</ol>\n<p>DEX的局限性：</p>\n<ol>\n<li>较低的流动性：目前大多是交易还是在中心化的交易所上进行的。在CEX里面毕竟大家的交易量是比较大的，对应到DEX里面价差就会较大，买卖双方可能由较大损失。</li>\n<li>功能有限：中心化交易所包括许多高级交易功能，例如限价单、止损单、追踪止损等。大多数这些交易功能在 DEX 上不可用。一些 DEX现在提供限价单，从而提供更好的交易体验。然而，越来越多的 DEX 正在寻求引入这些高级交易功能，以更有效地与 CEX 竞争。</li>\n<li>区块链的互操作性：大多数DEX只允许交易者在同一个区块链生态系统内交换代币。例如，基于以太坊的DEX只允许用户交易以太坊和 ERC-20代币。它不允许交易者交易在Polkadot或Cosmos等其他区块链上发行的代币。 CEX允许用户轻松地在各种区块链上交易代币。正在努力构建<strong>跨链 DEX</strong>，未来，在 DEX  上跨多个区块链交易代币将成为可能。</li>\n<li>费用：随着DeFi的流行，这会导致以太坊网络的拥挤。以太坊交易量的增加，也就会相应的引起Gas的增加带来成本费用的上升。也就是高峰期的时候DEX上的交易大多是昂贵的交易，这在矿难或者大跌的时候是能够经常看到的，交易手续费大幅度上升。</li>\n</ol>\n<h3 id=\"Uniswap\"><a href=\"#Uniswap\" class=\"headerlink\" title=\"Uniswap\"></a>Uniswap</h3><p>Uniswap 是一种基于以太坊的去中心化代币交换协议，允许直接交换代币，而无需使用中心化交易所。</p>\n<p><strong>流动资金池</strong></p>\n<p>流动性池是位于Uniswap智能合约上的代币储备，可供用户交换代币。例如，使用流动性储备中有100ETH和20,000DAI的ETHDAI交易对，想要使用DAI 购买ETH的用户可以向 Uniswap 智能合约发送 202.02DAI以获得1ETH 作为回报。交换完成后，流动资金池将剩下99ETH和20,202.02DAI。流动性池的准备金由流动性提供者提供，他们被激励获得 Uniswap 0.3% 交易费的相应费用。Uniswap上的每次代币交换都会收取此费用。</p>\n<p>任何人都可以提供流动性资金。</p>\n<p><strong>自动的商市机制 Automated Market Maker Mechanism</strong></p>\n<p>资金池中资产的价格是使用Automated Market Maker(AMM) 算法确定的。AMM 的工作原理是根据池两侧的流动性计算。</p>\n<p>用 100 ETH 和 20,000 DAI 的  ETH-DAI 流动性池示例。为了计算恒定乘积，Uniswap 会将这两个金额相乘。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417140956310.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417140956310.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220417140956310\"></p>\n<p>AMM要求这个乘积保持不变。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417143109793.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417143109793.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220417143109793\"></p>\n<p>所以换的越多费率越高。</p>\n<p>想要尝试一下可以去<a href=\"https://app.uniswap.org/\">Uniswap</a>了解一波。</p>\n<h3 id=\"DEX-聚合器\"><a href=\"#DEX-聚合器\" class=\"headerlink\" title=\"DEX 聚合器\"></a>DEX 聚合器</h3><p>简单来说就是现在很多的DEX由自己的流动性资金池所以想要换的比较多的话就会面临较高的费率。而DEX聚合器就是自动将你想要换取的路由到多个DEX中，拆分掉你的大宗交易，以此来获得最有的价格。例如<a href=\"https://1inch.exchange/\">1inch</a>就是一个DEX聚合器。</p>\n</div><h2 id=\"第八章-去中心化的衍生品\"><a href=\"#第八章-去中心化的衍生品\" class=\"headerlink\" title=\"第八章 去中心化的衍生品\"></a>第八章 去中心化的衍生品</h2><div class=\"story post-story\"><p>衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。每种类型的衍生品，无论是期货、期权还是掉期，都有不同的用途，每个投资者出于各种原因购买或出售它们。投资者交易衍生品的一些原因是为了对冲标的资产的波动性、推测标的资产的方向移动或利用其持有的资产。衍生品风险极大，交易时必须具备强大的金融知识和策略。  DeFi 衍生品 Dapp 的市值为 58.2 亿美元，占 DeFi 生态系统的 8.2%。</p>\n<p>这本书主要关注了Synthesix和Opyn两种衍生品协议</p>\n<h3 id=\"Synthetix\"><a href=\"#Synthetix\" class=\"headerlink\" title=\"Synthetix\"></a>Synthetix</h3><p>Synthetix包含两个部分，一个是Synthetic Asset（Synths），一个是Synthetic.Exchange。</p>\n<p>Synthetix资产是Synths，现在有两种不同的Synths：</p>\n<ul>\n<li>Normal Synths：与标的资产正相关</li>\n<li>Inverse Synths：与表弟资产负相关</li>\n</ul>\n<p>一个Synths的例子是Synthetic Gold （sXAU），就是跟踪黄金的价格表现。反向Synths资产的例子是iBTC，跟踪的是BTC的反向价格表现。</p>\n<blockquote>\n<p>以反向合成比特币（iBTC）为例。假设在创建时，比特币 (BTC) 的价格为 10,600 美元——这将是入场价格。如果比特币下跌 400 美元至 10,200  美元，则 iBTC Synth 将额外价值 400 美元，售价为 11,000 美元，去中心化衍生品也是如此。相反，如果比特币升至 11,000  美元，iBTC Synth 现在将价值 10,200 美元。</p>\n</blockquote>\n<p>Synths 让交易者无需持有标的资产即可获得资产的价格敞口。与传统的黄金经纪公司相比，Synthetic Gold (sXAU)  允许交易者以更少的麻烦（无需注册、无需旅行、无需中间人等）参与市场。Synthsc还有另一个用途——它们可以在彼此之间无摩擦地进行交易，这意味着可以在  Synthetix.Exchange  上轻松地将合成黄金转换为合成日元、合成白银或合成比特币。这也意味着任何拥有以太坊钱包的人现在都可以开放访问任何现实世界的资产！</p>\n<p>当前支持的资产可以去<a href=\"https://docs.synthetix.io/tokens/list/\">List - Synthetix System Documentation</a>查看</p>\n<h4 id=\"Index-Synths\"><a href=\"#Index-Synths\" class=\"headerlink\" title=\"Index Synths\"></a>Index Synths</h4><p>这是一篮子货币，可以理解为，指数。</p>\n<h4 id=\"Synthetic-Exchange\"><a href=\"#Synthetic-Exchange\" class=\"headerlink\" title=\"Synthetic Exchange\"></a>Synthetic Exchange</h4><p>Synthetix Exchange 是一个去中心化的交易平台，专为 SNX 和 Synths 的交易而设计。 Synthetix 交易所没有订单簿，也没有像  Uniswap 这样的流动资金池。 Synthetix Exchange  允许用户直接与保持持续充足流动性的智能合约进行交易，从而从理论上降低滑点或缺乏流动性的风险。由于用户购买的是合成合约而不是交易标的资产，因此用户最多可以购买系统中的抵押品总额，而不会影响合约的价格。</p>\n<p>For more information or mining Synth:<a href=\"https://staking.synthetix.io/\">Home | Synthetix Staking</a></p>\n<h3 id=\"Opyn\"><a href=\"#Opyn\" class=\"headerlink\" title=\"Opyn\"></a>Opyn</h3><p>Opyn 为资产价格波动提供保护，并为智能合约提供保险。用户可以获得以太坊 (ETH)、Wrapped Bitcoin (WBTC)、Yearn  Finance (YFI)、Uniswap (UNI)、DeFiPulseIndex (DPI) 以及 Compound (COMP) 上的 USDC 和  DAI 存款的保护。</p>\n<p>除了智能合约失败之外，Opyn  还可以防范财务和管理风险等其他风险。 Opyn 通过利用金融衍生品（即期权）来做到这一点。</p>\n<p>For more information：<a href=\"https://v1.opyn.co/#/\">https://v1.opyn.co/#/</a></p>\n</div><h2 id=\"第九章-去中心化的基金管理\"><a href=\"#第九章-去中心化的基金管理\" class=\"headerlink\" title=\"第九章 去中心化的基金管理\"></a>第九章 去中心化的基金管理</h2><div class=\"story post-story\"><p>基金管理是监督资产并管理其现金流以产生投资回报的过程。我们已经开始看到创新的  DeFi  团队为用户构建了以去中心化方式更好地管理资金的方法。</p>\n<p>去中心化的基金管理是在没有投资经理的情况下进行的。相反，算法可以帮助您自动进行交易。这使您可以选择最适合您的财务目标并减少支付费用的资产管理策略。</p>\n<h3 id=\"TokenSets\"><a href=\"#TokenSets\" class=\"headerlink\" title=\"TokenSets\"></a>TokenSets</h3><p>TokenSets 是一个允许加密用户购买启用策略的代币 (SET)  的平台。这些代币具有自动化的资产管理策略，使您能够轻松管理您的加密货币投资组合，而无需手动执行交易策略。使用自动交易策略，您无需手动 24/7  监控市场，从而减少因情绪交易而错失的机会和风险。</p>\n<h4 id=\"Index-Sets-指数组合\"><a href=\"#Index-Sets-指数组合\" class=\"headerlink\" title=\"Index Sets 指数组合\"></a>Index Sets 指数组合</h4><p>指数集允许用户通过购买单个代币而不是单独购买多个资产来接触更多资产并降低汽油费。最受欢迎的指数集是  DeFiPulse 指数（DPI），该指数基于市值加权指数跟踪 DeFi 代币的表现</p>\n<h4 id=\"Yield-Farming-Set\"><a href=\"#Yield-Farming-Set\" class=\"headerlink\" title=\"Yield Farming Set\"></a>Yield Farming Set</h4><p>Yield  Farming Sets 使用户无需不断地进行多个智能合约交易来产生收益农业协议，从而节省燃料。这些 Sets 的策略将定期索取流动性提供者 (LP)  奖励，将其出售以换取策划资产，并质押这些资产以产生更多的LP奖励。本质上，这是 DeFi 采取复利的一个例子！</p>\n<p>可以去<a href=\"https://www.tokensets.com/\">TokenSets – Asset Management Simplified</a>了解情况。</p>\n</div><h2 id=\"第十章-去中心化的彩票\"><a href=\"#第十章-去中心化的彩票\" class=\"headerlink\" title=\"第十章 去中心化的彩票\"></a>第十章 去中心化的彩票</h2><div class=\"story post-story\"><p>2020 年 2 月，一位仅存入 10 美元的用户在 PoolTogether 的每周 DAI 奖池中赢得了 1,648 美元，获胜机会为 69,738  分之一。 PoolTogether 彩票最好的部分是，如果参与者没有中奖，他们可以获得 10 美元押金的退款。这场博弈没有输家，只有机会成本。</p>\n<p>？？？？有这种好事？</p>\n<h3 id=\"Pool-Together\"><a href=\"#Pool-Together\" class=\"headerlink\" title=\"Pool Together\"></a>Pool Together</h3><p>PoolTogether  是一个去中心化的无损彩票或去中心化的奖金储蓄应用程序，用户可以在抽奖后保留他们的初始存款金额。不是使用购买的彩票来资助奖金，而是使用汇集的用户存款在  Compound 协议上赚取的利息来资助奖金。对于每一轮 PoolTogether，所有用户存款都会发送到 Compound  以赚取利息。每个间隔结束时将随机抽取一名幸运获胜者，以赢取累积的全部利息作为奖金</p>\n<p><a href=\"https://pooltogether.com/zh\">https://pooltogether.com/zh</a></p>\n<p>可以去上面网站上看看，我没找到支持的货币列表。但是DAI, USDC, UNI,  COMP是肯定可以支持的。</p>\n</div><h2 id=\"第十一章-去中心化支付\"><a href=\"#第十一章-去中心化支付\" class=\"headerlink\" title=\"第十一章 去中心化支付\"></a>第十一章 去中心化支付</h2><div class=\"story post-story\"><h3 id=\"Sabiler\"><a href=\"#Sabiler\" class=\"headerlink\" title=\"Sabiler\"></a>Sabiler</h3><p>Sablier  是一个支付流应用程序——这意味着它允许在不同方之间以小增量（以秒为单位！）实时进行支付和取款。考虑在工作和进展过程中实时支付的每小时咨询工作、每日合同工或每月租金支付。与在  Spotify 上流式传输音乐的方式类似，也可以在 Sablier 上流式传输资金！</p>\n<p><strong>什么是流式付款？</strong></p>\n<p>付款人现在可以在双方定义和同意的期限内实时发送付款，而不是等待固定期限（例如，每月、每两周）付款。通过  Sablier，收款人现在可以实时收到他们的付款并随时提取。比如60/h的咨询服务可以在Sablier签订协议后一分钟一分钟的自己付款，即使返回了损失也非常小。</p>\n<p>官网：<a href=\"https://sablier.finance/\">Sablier</a></p>\n<p>等于是形成了一个支付流，一步步付款。</p>\n</div><h2 id=\"第十二章-去中心化保险\"><a href=\"#第十二章-去中心化保险\" class=\"headerlink\" title=\"第十二章 去中心化保险\"></a>第十二章 去中心化保险</h2><div class=\"story post-story\"><p>参与DeFi的过程中，必须将代币锁定在智能合约中，但是显然即使是审计过的智能合约也有可能存在缺陷而被黑客攻击。所以就有了去中心化的保险。</p>\n<p>所以使用DeFi必须要面对：</p>\n<ol>\n<li>技术风险：智能合约可能被黑客攻击或漏洞被利用</li>\n<li>流动性风险：借贷协议（如 Compound）可能耗尽流动性</li>\n<li>管理密钥风险：协议的公私钥可能被泄露</li>\n</ol>\n<h3 id=\"Nexus-Mutual\"><a href=\"#Nexus-Mutual\" class=\"headerlink\" title=\"Nexus Mutual\"></a>Nexus Mutual</h3><p>Nexus Mutual  是建立在以太坊上的去中心化保险协议，为以太坊区块链上的智能合约提供保障，并为中心化贷方和交易所（如Celsius、Blockfi、Nexo、Binance、Coinbase、Kraken  和 Gemini）提供托管保障。</p>\n<p>保险的保护范围是智能合约的意外，如果只是自己丢了私钥那没救了。</p>\n<p>NXM是Nexus Mutual的原生代币</p>\n<p><a href=\"https://nexusmutual.io/\">Nexus Mutual | A decentralised alternative to insurance</a></p>\n<h3 id=\"Armor\"><a href=\"#Armor\" class=\"headerlink\" title=\"Armor\"></a>Armor</h3><p>Armor  是 DeFi 的第一个保险聚合器。利用 Nexus Mutual 的承保能力，它提供现收现付保险产品以及无需 KYC 即可购买保险的能力。不想进行 KYC 或因 Nexus Mutual 的地域限制无法购买保险的用户可以通过 Armor 获得保险。</p>\n<p><a href=\"https://armor.fi/\">Armor.Fi</a></p>\n<h3 id=\"Nsure-Network\"><a href=\"#Nsure-Network\" class=\"headerlink\" title=\"Nsure Network\"></a>Nsure Network</h3><p>Nsure Network  是一个去中心化的保险项目，它借鉴了伦敦劳合社的理念，这是一个交易保险风险的市场。保费价格使用动态定价模型确定，其中资本供需共同决定保费，类似于自由市场的定价机制。</p>\n<p>Nsure  Network 的治理代币 (NSURE) 由购买的政策支持。价格可根据资本供求的变动自行调整，但受基础模型的稳定。与遵循互惠模式的 Nexus Mutual  不同，Nsure Network 遵循股东模式，其中 Nsure Network 的代币类似于持有网络的一部分。</p>\n<h3 id=\"Cover-Protocol\"><a href=\"#Cover-Protocol\" class=\"headerlink\" title=\"Cover Protocol\"></a>Cover Protocol</h3><p>Cover Protocol 是一个点对点保险市场，其运作类似于预测市场。与其他保险协议不同，治理代币不用于承保风险。为了引导这一新协议的覆盖范围，做市商被激励将  DAI 或 yDAI 抵押品用于铸造 CLAIM 和 NOCLAIM 代币。 Cover Protocol  保险涵盖选定的协议，并且都有指定的到期日。在到期日期间，CLAIM 或 NOCLAIM 代币将拥有抵押品的全部权利。</p>\n<p>例如，如果在设定的到期日之前使用 100 DAI 为 Compound 协议提供保障，它将产生 100 CLAIM 和 100 NOCLAIM  代币。在到期日，如果有有效的索赔事件，所有 CLAIM 代币将获得 1 DAI，而所有 NOCLAIM 代币将一文不值。相反，如果没有有效的索赔事件，所有  NOCLAIM 代币将收到 1 DAI，而所有 CLAIM 代币到期时一文不值。要获得价值 100 DAI 的保险，用户需要从交易所购买 100 CLAIM  代币，因为如果发生有效索赔，这将过期至 100 DAI。购买 100 个 CLAIM 代币的成本将是保险费。</p>\n<p><strong>Conclusion</strong></p>\n<p>保险在 DeFi  中仍然是一个非常小众的细分市场，通常吸引的零售市场参与者很少。然而，随着更成熟的参与者加入市场，他们无疑将需要更好的风险管理工具。归根结底，投保或不投保的选择最终取决于您。但是，我们  CoinGecko 肯定会推荐购买保险，因为在 DeFi 中任何事情都可能发生。</p>\n</div><h2 id=\"第十三章-治理\"><a href=\"#第十三章-治理\" class=\"headerlink\" title=\"第十三章 治理\"></a>第十三章 治理</h2><div class=\"story post-story\"><p>与中心化传统公司不同，DeFi  协议不需要遵循除链上编码之外的任何规则。这通常被称为“代码就是法律”。</p>\n<h3 id=\"Aragon\"><a href=\"#Aragon\" class=\"headerlink\" title=\"Aragon\"></a>Aragon</h3><p><a href=\"https://client.aragon.org/#/\">Aragon</a>是一个社区驱动的项目，其使命是通过为去中心化组织的繁荣创造工具来赋予自由。随着技术以前所未有的速度发展，人们担心它在创建全球集中控制、监视和压迫制度中的作用。  Aragon 决心创建一个自由、开放、公平的社会。</p>\n<p>Aragon Court 是 Aragon  创建的解决方案，它模仿了传统商业世界中法院的功能。当发生冲突时，参与者可以将其升级到Aragon Court，由陪审员决定是否应惩罚任何一方。</p>\n<p>陪审员从陪审员池中随机选择，通过锁定  ANJ  代币来审查和裁决争议。与传统法院不同，陪审员在投票支持多数结果时会获得争议费用补偿。因此，该系统不适合不偏不倚的决策，而是依靠社会共识。投票支持少数派结果的陪审员将被带走一部分  ANJ  代币，并奖励给投票支持多数派的陪审员。如果结果不令人满意，任何一方都可以支付费用对争议提出上诉，并由大量陪审员进行审查。这个过程可以重复，直到整个陪审员池对争议做出裁决。</p>\n<h3 id=\"Snapshot\"><a href=\"#Snapshot\" class=\"headerlink\" title=\"Snapshot\"></a>Snapshot</h3><p>由于以太坊汽油费上涨，链上投票的成本变得难以承受，阻碍了小代币持有者参与治理过程。 Snapshot试图通过在链下拍摄投票快照来解决这个问题，从而有效地使投票过程无气体。Snapshot 已经看到许多 DeFi 项目利用其工具来建立治理流程。截至 2021  年 1 月，Snapshot 可免费使用，已有多达 418 个不同的项目注册使用 Snapshot。</p>\n<p>缺点：链下投票不受智能合约约束。</p>\n<p><a href=\"https://snapshot.page/#/\">https://snapshot.page/#/</a></p>\n</div><h2 id=\"第十四章-DeFi仪表盘\"><a href=\"#第十四章-DeFi仪表盘\" class=\"headerlink\" title=\"第十四章 DeFi仪表盘\"></a>第十四章 DeFi仪表盘</h2><div class=\"story post-story\"><p><a href=\"https://zapper.fi/zh\">Zapper - Your Home to Web3</a></p>\n<p>仪表板是一个简单的平台，可将您的所有 DeFi 活动聚合在一个地方。这是一个有用的工具，可以可视化和跟踪您的资产在不同 DeFi  协议中的位置。仪表板能够将您的资产分为不同的类别，例如存款、债务和投资。</p>\n<h1 id=\"Part-Four：-DeFi-in-Action\"><a href=\"#Part-Four：-DeFi-in-Action\" class=\"headerlink\" title=\"Part Four： DeFi in Action\"></a>Part Four： DeFi in Action</h1></div><h2 id=\"第十五章-DeFi-in-Action\"><a href=\"#第十五章-DeFi-in-Action\" class=\"headerlink\" title=\"第十五章 DeFi in Action\"></a>第十五章 DeFi in Action</h2><div class=\"story post-story\"><h3 id=\"案例一-Surviving-Argentina’s-High-Inflation\"><a href=\"#案例一-Surviving-Argentina’s-High-Inflation\" class=\"headerlink\" title=\"案例一 Surviving Argentina’s High Inflation\"></a>案例一 Surviving Argentina’s High Inflation</h3><p>就是阿根廷的货币贬值太猛，但是DAI是和美元挂钩的， 即使DeFi有风险，但是相比阿根廷货币的风险来说不值一提，所以有人用DAI来规避自己资金的风险。（不能直接换美元因为政府不允许。）</p>\n<p><a href=\"https://slideslive.com/38920018/living-on-defi-how-i-survive-argentinas-50-inflation\">Mariano Conti · Living on Defi: How I Survive Argentina’s 50% Inflation · SlidesLive</a></p>\n<h3 id=\"案例二-Uniswap-Ban\"><a href=\"#案例二-Uniswap-Ban\" class=\"headerlink\" title=\"案例二 Uniswap Ban\"></a>案例二 Uniswap Ban</h3><p>就是有一段时间Uniswap团队为了遵守美国法律然后ban掉了一些地方的ip。但是实际上只能禁止网站访问不能禁止Uniswap协议，因此呢他就重新建了一些站点用于被banIP的地方的人访问。</p>\n</div><h2 id=\"第十六章-DeFi就是未来！！！\"><a href=\"#第十六章-DeFi就是未来！！！\" class=\"headerlink\" title=\"第十六章 DeFi就是未来！！！\"></a>第十六章 DeFi就是未来！！！</h2><div class=\"story post-story\"><p>DeFi：</p>\n<ul>\n<li>透明！</li>\n<li>可接入！</li>\n<li>高效！</li>\n<li>便捷！</li>\n</ul>\n<p>DeFi目前的痛点：</p>\n<ul>\n<li><strong>Wallet</strong> - <a href=\"https://www.argent.xyz/\">Argent</a> is creating a radically better user-focused crypto wallet  experience, with state-of-the-art security, native integration with DeFi Dapps  such as Compound and others, as well as not needing seed keys. </li>\n<li><strong>Participation of  products</strong> - <a href=\"https://zapper.fi/\">Zapper</a> abstracts away many of the complexities and steps involved  with DeFi products. It also allows users to access multiple financial products  in one transaction, saving time and effort. </li>\n<li><strong>User-friendly development</strong> - <a href=\"%5Bplay.gelato.finance%5D(https://play.gelato.finance/)\">Gelato  Finance</a> recently launched their“If this, then that” for crypto. It allows users  to set actions that will be done once certain conditions are met, such as“Buy  ETH when it is $200” or“Send some money to Alice when it’s her birthday.”  </li>\n<li><strong>Insurance</strong> - Financial market effectively facilitates the transfer of risk - one  man’s hedge against his position is another man’s profit. Insurance is now  available via DeFi insurers such as <a href=\"https://nexusmutual.io/\">Nexus Mutual</a>. If you are willing to accept a  lower yield on the money you have placed on lending protocols such as Compound  in exchange for peace of mind, it can now be done. </li>\n<li><strong>Aggregation of liquidity</strong> -  There are many different decentralized exchanges (DEXs) in the market with  varying liquidity. It is a headache for users to choose which one is the best  for their trade. This is slowly becoming a thing of the past with liquidity  aggregators such as <a href=\"https://app.1inch.io/#/\">1inch.exchange</a>, Paraswap, and Matcha helping users to automatically split orders across DEXs to  ensure the best possible execution prices.</li>\n<li><strong>Yield optimization</strong> - Remember switching around different banks for the best  rates for fixed deposits? You don’t have to do that in DeFi - yield aggregators  such as Yearn.finance, idle.finance, and DeFiSaver automatically allocate your  cryptoassets to places with the best yield opportunities.</li>\n</ul>\n<h1 id=\"浅浅小结一下\"><a href=\"#浅浅小结一下\" class=\"headerlink\" title=\"浅浅小结一下\"></a>浅浅小结一下</h1><p>How to DeFi: Begginer 这本书其实让我认识到了炒币这种事情属于是太low了，DeFi所展望的远远不是简单的炒币，而是真的带来了一种全新的去中心化的金融模式。</p>\n<p>完善的借贷、基金、彩票、衍生品等等DeFi合约属于是让人对目前加密货币的发展有了全新的认识。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>A reading note for 《How to DeFi Beginner》</p>\n<h1 id=\"Part-One-Centralized-amp-Decentralized-Finance\"><a href=\"#Part-One-Centralized-amp-Decentralized-Finance\" class=\"headerlink\" title=\"Part One: Centralized &amp; Decentralized Finance\"></a>Part One: Centralized &amp; Decentralized Finance</h1><h2 id=\"第一章-中心化和去中心化金融\"><a href=\"#第一章-中心化和去中心化金融\" class=\"headerlink\" title=\"第一章 中心化和去中心化金融\"></a>第一章 中心化和去中心化金融</h2><p>从传统的角度看，银行显然是我们最为熟悉的中心化的金融机构。但是啊，这个08年金融危机吧，也可以看出来银行是有一定的风险的，体现了一定的金融系统缺陷。</p>\n<p>Defi想要构建什么？</p>\n<p>Defi想要用区块链&amp;互联网去重构银行系统中的：</p>\n<ul>\n<li>支付和清算系统，也就是简单来说汇款</li>\n<li>可访问性</li>\n<li>集中化和透明度</li>\n</ul>\n<h3 id=\"1-支付清算系统\"><a href=\"#1-支付清算系统\" class=\"headerlink\" title=\"1. 支付清算系统\"></a>1. 支付清算系统</h3><p>如果我们只考虑国内的支付，那，显然没啥意思，但是对于跨境支付的话，这就很麻烦了，不论从时效性还是各种文件balabala都很烦，以及隐私等等都太烦了，这时候Defi来了，加密货币的支付时很快的，同时手续费也会很低。</p>\n<h3 id=\"2-可访问性\"><a href=\"#2-可访问性\" class=\"headerlink\" title=\"2. 可访问性\"></a>2. 可访问性</h3><p>这点也是我开始并不理解的，事实上很多人因为信用问题又或者仅仅是某些国家的地理及贫困，到2017年还有17亿人没有储蓄账户，但其中2/3的人可以使用手机，因此DeFi可以为他们提供一个不需要银行储蓄账户的，无国界的无审查但可访问的金融账户。</p>\n<h3 id=\"3-集中化和透明性\"><a href=\"#3-集中化和透明性\" class=\"headerlink\" title=\"3. 集中化和透明性\"></a>3. 集中化和透明性</h3><p>传统银行是中心化的，08年雷诺银行倒闭引起金融危机，包括美国也有500家银行倒闭过，这都是巨大的金融风险。另外从我们现在的角度看很多基金、银行是缺乏透明性的，我们不知道我们的资产在哪里。但是DeFi可以解决这个问题，本身是在区块链之上构建的，他就是一行行的代码，是透明的，同时代码对每个人都是公平的，他不会歧视，不会性别歧视、地域歧视、种族歧视、什么都不会。</p>\n<h3 id=\"去中心化金融对比传统金融\"><a href=\"#去中心化金融对比传统金融\" class=\"headerlink\" title=\"去中心化金融对比传统金融\"></a>去中心化金融对比传统金融</h3><blockquote>\n<p>The DeFi movement is about bridging these gaps and making finance accessible to  everyone without any form of censorship. In short, DeFi opens up huge windows of  opportunities and allows users to access various financial instruments without  any restriction on race, religion, age, nationality, or geography. When  comparing both traditional and decentralized financial products, there will be  pros and cons on each side. In this book, we will walk you through the concepts  and possibilities of decentralized finance so that you will know how to use its  best features to solve real-world problems.</p>\n</blockquote>\n<h2 id=\"第二章-DeFi是什么\"><a href=\"#第二章-DeFi是什么\" class=\"headerlink\" title=\"第二章 DeFi是什么\"></a>第二章 DeFi是什么</h2><p>DeFi 即 Decentralized Finance</p>\n<p>是一种允许用户在不需要依赖中心化实体的情况下利用借贷和交易等金融服务的运动。这些金融服务是通过去中心化应用程序（Decentralized Applications，Dapps）提供的，其中大部分部署在以太坊平台上。</p>\n<p>为了更好的理解一下DeFi的去中心化，将去中心化程度做了三层次的分层，他们的特点如下：</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>中心化</th>\n<th>半中心化</th>\n<th>去中心化</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>特征</td>\n<td>托管，使用集中的价格馈送，集中确定的利率，集中提供的追加保证金流动性</td>\n<td>非托管、去中心化的价格反馈、无需许可的追加保证金通知、无需许可的保证金流动性、去中心化利率确定、去中心化平台开发/更新</td>\n<td>所有东西都是去中心化的</td>\n</tr>\n<tr>\n<td>例子</td>\n<td>Salt, BlockFi, Nexo and Celsius</td>\n<td>Compound, MakerDAO, dYdX, and bZx</td>\n<td>现在还没有</td>\n</tr>\n</tbody></table>\n<h3 id=\"DeFi的九大类别\"><a href=\"#DeFi的九大类别\" class=\"headerlink\" title=\"DeFi的九大类别\"></a>DeFi的九大类别</h3><h4 id=\"1-稳定货币-Stablecoins\"><a href=\"#1-稳定货币-Stablecoins\" class=\"headerlink\" title=\"1. 稳定货币 Stablecoins\"></a>1. 稳定货币 Stablecoins</h4><p>比如USDT是锚定1美元的这种稳定货币</p>\n<h4 id=\"2-借贷\"><a href=\"#2-借贷\" class=\"headerlink\" title=\"2. 借贷\"></a>2. 借贷</h4><p>传统金融系统要求用户拥有银行账户才能使用他们的服务，这是目前  17  亿人所没有的奢侈品。从银行借款还有其他限制，例如具有良好的信用评分和有足够的抵押品以使银行相信其信誉良好且能够偿还贷款。去中心化借贷消除了这一障碍，允许任何人抵押他们的<strong>数字资产</strong>并使用它来获得贷款。人们还可以通过<strong>为贷款池做出贡献</strong>并从这些资产中赚取利息来获得资产收益并参与贷款市场。通过去中心化借贷，不需要银行账户，也不需要检查信用度。</p>\n<h4 id=\"3-交易所\"><a href=\"#3-交易所\" class=\"headerlink\" title=\"3. 交易所\"></a>3. 交易所</h4><p>要将一种加密货币换成另一种，可以使用 Coinbase 或 Binance  等交易所。像这样的交易所是中心化交易所，这意味着它们既是交易资产的中介又是托管人。这些交易所的用户无法完全控制他们的资产，如果交易所被黑客入侵并且无法偿还债务，他们的资产就会面临风险。</p>\n<p>去中心化交易所旨在通过允许用户在不放弃对其资产的保管权的情况下交换加密货币来解决这个问题。通过<strong>不在中心化交易所存储任何资金</strong>，用户无需信任交易所就能保持偿付能力。</p>\n<h4 id=\"4-衍生品\"><a href=\"#4-衍生品\" class=\"headerlink\" title=\"4. 衍生品\"></a>4. 衍生品</h4><p>衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。交易者可以使用衍生品来对冲风险。例如，假设您是一家手套制造商，想要对冲橡胶价格意外上涨的风险。您可以从您的供应商处购买一份期货合约，以便在特定的未来交割日期以今天的约定价格交割特定数量的橡胶。衍生品合约主要在中心化平台上交易。</p>\n<p>DeFi 平台同样也要建立去中心化的衍生品市场。（Chapter 8）</p>\n<h4 id=\"5-基金管理\"><a href=\"#5-基金管理\" class=\"headerlink\" title=\"5. 基金管理\"></a>5. 基金管理</h4><p>基金管理是监督资产并管理其现金流以产生投资回报的过程。在 DeFi 中，一些项目已经开始允许以去中心化的方式进行被动资金管理。  DeFi 的透明性使用户可以轻松跟踪其资金的管理方式并了解他们将支付的成本。</p>\n<h4 id=\"6-彩票\"><a href=\"#6-彩票\" class=\"headerlink\" title=\"6. 彩票\"></a>6. 彩票</h4><p>好家伙彩票也算，有意思。这个就不用解释了。</p>\n<h4 id=\"7-支付\"><a href=\"#7-支付\" class=\"headerlink\" title=\"7. 支付\"></a>7. 支付</h4><p>DeFi想要创造一种规模更大，准确性更高的即用即付方式。</p>\n<h4 id=\"8-保险\"><a href=\"#8-保险\" class=\"headerlink\" title=\"8. 保险\"></a>8. 保险</h4><p>去中心化的代币可能受到黑客的攻击所以DeFi也想要提供一种去中心化的保险，毕竟智能合约是不是永远安全的没人知道。代码的安全性度量一直是一个问题，无法量化解决。</p>\n<h4 id=\"9-治理\"><a href=\"#9-治理\" class=\"headerlink\" title=\"9. 治理\"></a>9. 治理</h4><p>治理本质上是加密的业务管理理念。为了让  DeFi 协议管理项目，通常会引入治理令牌以赋予用户投票权并在协议的路线图中拥有发言权。自然，还开发了多个工具包和 Dapps  以促进有效治理和补充现有系统。</p>\n<h1 id=\"Part-Two-Getting-into-DeFi\"><a href=\"#Part-Two-Getting-into-DeFi\" class=\"headerlink\" title=\"Part Two: Getting into DeFi\"></a>Part Two: Getting into DeFi</h1><h2 id=\"第三章-去中心化层：以太坊\"><a href=\"#第三章-去中心化层：以太坊\" class=\"headerlink\" title=\"第三章 去中心化层：以太坊\"></a>第三章 去中心化层：以太坊</h2><p>其实以太坊对于了解区块链的人来说并不陌生，所以这一章看看就简单过去了，感兴趣的去了解一下以太坊基础知识也就足够。</p>\n<h3 id=\"Dapp的特点：\"><a href=\"#Dapp的特点：\" class=\"headerlink\" title=\"Dapp的特点：\"></a>Dapp的特点：</h3><ul>\n<li>不变性：一旦智能合约在区块链上部署了那必然是不会再变的。==然而这也会导致不可避免的错误被保存下来搞出大问题==</li>\n<li>防篡改：链上智能合约不可能在大家不知道的情况下被私自篡改</li>\n<li>透明性：链上智能合约是公开可审计的。==这可能会让黑客审计代码发现漏洞然后攻击，比如THE DAO==</li>\n<li>可用性：只要以太坊不GG，就一直可用</li>\n<li>可扩展性：==通常DAPP仅限于所处的链，当然现在跨链非常的火热，另当别论了==</li>\n</ul>\n<h3 id=\"代币协议标准\"><a href=\"#代币协议标准\" class=\"headerlink\" title=\"代币协议标准\"></a>代币协议标准</h3><p>以太坊上流行的代币协议有ERC-20和ERC-721。ERC-20 代币是可替代的，这意味着它们可以互换并且具有相同的价值。另一方面，ERC-721  代币是不可替代的，这意味着它们是唯一且不可互换的。一个简单的类比是将 ERC-20 视为金钱，将 ERC-721 视为可动人偶或棒球卡等收藏品。</p>\n<p>现在很火的NFT就是ERC-721协议下的。</p>\n<h2 id=\"第四章-以太坊钱包\"><a href=\"#第四章-以太坊钱包\" class=\"headerlink\" title=\"第四章 以太坊钱包\"></a>第四章 以太坊钱包</h2><p>钱包的本质就是一个公私钥对，主要分为托管钱包和非托管钱包：</p>\n<ul>\n<li>托管钱包（custodial wallet）：第三方代为保留并保持对加密货币的控制权，比如交易所啊啥的，有被盗风险，比如Mt. Gox就损失了超过85W个Bitcoin</li>\n<li>非托管钱包（non-custodial wallet）：自己保存自己的公私钥对</li>\n</ul>\n<p>我很久前自己创建过ethereum的钱包，不过也确实早已不记得自己的钱包信息了，这篇文章也给了两个比较适合DeFi学习的创建自己钱包的方式。</p>\n<p>一个是手机端的<a href=\"https://argent.link/coingecko\">Argent</a>，作为安卓用户，阿不，鸿蒙用户，似乎有点 GG，欸，先去搞个桌面端的。</p>\n<p>桌面端是<a href=\"https://metamask.io/\">Metamask</a>，一个谷歌浏览器的插件，同样也是非托管的钱包。</p>\n<p>注册完是这个样子：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416102554883.png\" alt=\"image-20220416102554883\"></p>\n<p>助记词一定要记好，不然的话账户可能就找不到了。</p>\n<p>然后你能得到你的公钥比如：0xB6EC82B364ade9451D106998a9DB8584d924a306</p>\n<p>这个地址欢迎打钱谢谢！</p>\n<h1 id=\"Part-Three-Deep-Diving-into-DeFi\"><a href=\"#Part-Three-Deep-Diving-into-DeFi\" class=\"headerlink\" title=\"Part Three: Deep Diving into DeFi\"></a>Part Three: Deep Diving into DeFi</h1><h2 id=\"第五章-去中心化的稳定货币\"><a href=\"#第五章-去中心化的稳定货币\" class=\"headerlink\" title=\"第五章 去中心化的稳定货币\"></a>第五章 去中心化的稳定货币</h2><p>截止22.4.16有81个稳定的货币，市值前五的有：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416143324880.png\" alt=\"image-20220416143324880\"></p>\n<p>想要看的话可以去<a href=\"https://www.coingecko.com/en/categories/stablecoins\">Top Stablecoins by Market Capitalization - CoinGecko</a>这个网站去自行查询一下。</p>\n<h3 id=\"USDT\"><a href=\"#USDT\" class=\"headerlink\" title=\"USDT\"></a>USDT</h3><p>USDT是与美刀挂钩的，每一美元可以换取1USDT，当然Tether储备金是保存在金融机构中的，我们作为用户想要用的话就需要信任Tether。</p>\n<h3 id=\"DAI\"><a href=\"#DAI\" class=\"headerlink\" title=\"DAI\"></a>DAI</h3><blockquote>\n<p>Dai 由 MakerDAO 开发并管理，是第一个去中心化基础稳定货币。Dai 由数字资产足额抵押担保发行，和美元保持1:1锚定，1 Dai = 1 美元。</p>\n</blockquote>\n<p>DAI也同样是和一美元挂钩，但是他和USDT不一样的地方在于它可以使用ETH进行抵押。</p>\n<h3 id=\"Maker\"><a href=\"#Maker\" class=\"headerlink\" title=\"Maker\"></a>Maker</h3><p>Maker 是一个运行在以太坊区块链上的智能合约平台，拥有两个代币：DAI（在算法上都与 1 美元挂钩）和它的治理代币——Maker（MKR）。</p>\n<p>三个需要知道的关键参数：</p>\n<h4 id=\"1-Collateral-Ratio-抵押比率\"><a href=\"#1-Collateral-Ratio-抵押比率\" class=\"headerlink\" title=\"1. Collateral Ratio 抵押比率\"></a>1. Collateral Ratio 抵押比率</h4><p>可以铸造的 DAI 数量取决于抵押品比率。</p>\n<p>比如：</p>\n<ul>\n<li>Wrapped Bitcoin (wBTC) collateral ratio = 150%</li>\n<li>Basic Attention Token (BAT) collateral ratio = 150%</li>\n</ul>\n<p>因此，150%  的抵押比率意味着要铸造 100 美元，您需要存入至少价值 150 美元的 wBTC 或 BAT。</p>\n<h4 id=\"2-稳定费\"><a href=\"#2-稳定费\" class=\"headerlink\" title=\"2. 稳定费\"></a>2. 稳定费</h4><p>截至 2021 年 4 月，BAT 目前的稳定费为 6.0%。（可以理解为管理费，或者说借贷的利息）</p>\n<h4 id=\"3-DAI-Saving-Rate-DSR\"><a href=\"#3-DAI-Saving-Rate-DSR\" class=\"headerlink\" title=\"3. DAI Saving Rate (DSR)\"></a>3. DAI Saving Rate (DSR)</h4><p>DAI  储蓄率 (DSR) 是随着时间的推移持有 DAI 所赚取的利息。它还充当影响 DAI 需求的货币工具。截至 2021 年 4 月，DSR 利率设定为  0.01%。</p>\n<h3 id=\"为什么我们要质押ETH换DAI而不是直接换美元呢？\"><a href=\"#为什么我们要质押ETH换DAI而不是直接换美元呢？\" class=\"headerlink\" title=\"为什么我们要质押ETH换DAI而不是直接换美元呢？\"></a>为什么我们要质押ETH换DAI而不是直接换美元呢？</h3><p>有三种可能的情况：  </p>\n<ul>\n<li> 您现在需要现金，并且您拥有一项您认为将来会更值钱的资产。  在这种情况下，您可以将您的资产保存在 Maker 保险库中，并通过发行 DAI  立即获得资金。</li>\n<li>您现在需要现金，但不想在出售资产时冒险触发应税事件。 相反，您将通过发行 DAI 来提取贷款。</li>\n<li>投资杠杆，如果您认为您的资产价值会上升，您可以对您的资产进行投资杠杆。</li>\n</ul>\n<h3 id=\"如何获得DAI\"><a href=\"#如何获得DAI\" class=\"headerlink\" title=\"如何获得DAI\"></a>如何获得DAI</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191157684.png\" alt=\"image-20220416191157684\"></p>\n<p>实际上就是在智能合约中质押ETH来铸造DAI。</p>\n<p>在<a href=\"https://oasis.app/\">Oasis.app</a>这个网站上可以去铸造属于自己的DAI，他是可以直接关联Metamask的钱包的。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416191812985.png\" alt=\"image-20220416191812985\"></p>\n<p>可以看到这里的质押率以及费率。还挺高的，草。</p>\n<h2 id=\"第六章-去中心化的借贷\"><a href=\"#第六章-去中心化的借贷\" class=\"headerlink\" title=\"第六章 去中心化的借贷\"></a>第六章 去中心化的借贷</h2><p>在 DeFi 环境中，也就是一个去中心化的环境下，并没有银行，所以没有法律、门槛、融资标准等等一系列的繁琐的东西。只要有足够的抵押物就可以获得贷款资金来做自己想做的事情。</p>\n<p>这本书介绍了Compound和Avae两种比较牛逼的DeFi借贷协议。</p>\n<h3 id=\"Compound\"><a href=\"#Compound\" class=\"headerlink\" title=\"Compound\"></a>Compound</h3><p>Compound Finance 是一种基于以太坊的开源货币市场协议，任何人都可以无摩擦地借出或借入加密货币。</p>\n<p>现在在<a href=\"https://compound.finance/markets\">Compound平台上</a>已经有20中可以借贷的加密货币。</p>\n<blockquote>\n<p>Compound作为建立在以太坊区块链上的流动资金池运作。供应商向流动性池提供资产以赚取利息，而借款人从流动性池中获得贷款并支付债务利息。从本质上讲，Compound弥合了希望从闲置资金中累积利息的贷方和希望借入资金用于生产或投资用途的借款人之间的差距。在 Compound 中，利率以<strong>年收益率 (APY)</strong>  表示，并且资产之间的利率不同。 Compound 通过考虑资产供需的算法得出利率。从本质上讲，Compound  允许供应商/借款人直接与利率协议交互，而无需协商贷款条款（例如：到期日、利率、抵押品等），从而降低了借贷的摩擦，从而创建了一个更有效的货币市场.</p>\n</blockquote>\n<p>以当前的行情来看，给一下平台上借贷双方能获得/需支付的利息年利率APY：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416214703265.png\" alt=\"image-20220416214703265\"></p>\n<h4 id=\"Compound的管理\"><a href=\"#Compound的管理\" class=\"headerlink\" title=\"Compound的管理\"></a>Compound的管理</h4><p>Compound已经越来越去中心化了，实际上提出治理提案的人需要有超过1%的总共的COMP（Compound的币，1%就是10W个COMP）进行委托，进入治理的Alpha阶段。</p>\n<p>后续会经过三天的投票期，必须获得超过4%的投票。一旦收到最低投票门槛，通过的提案将在时间锁中排队。在通过的提案被实施到  Compound 协议中之前，将有 2 天的宽限期。用户可以通过在二级市场上购买 COMP 代币来获得 COMP 代币，或者通过在 Compound  协议上借出或借入 COMP 代币进行收益耕作。 COMP 代币根据 Compound 上借贷活动的利率按比例分配。</p>\n<p>这里可以治理些什么呢，比如利率的计算和调整这样。</p>\n<p>在compound里钱包里的资产比如DAI放进去会变成cDAI，Ether会变成cEther，假设您在 2020 年 1 月 1 日提供了 1,000 DAI，并且 APY 在整个 2020 年一直保持在 10%。</p>\n<p>2020 年 1 月 1 日，在存入 1,000 DAI 后，将获得 1,000 cDAI。在这种情况下，DAI 和 cDAI 之间的汇率为 1:1。  2021 年 1 月 1 日，一年后，您的 1,000 cDAI 现在将增值 10%。 DAI 和 cDAI 之间的新汇率为 1:1.1。您的 1,000  cDAI 现在可以兑换 1,100 DAI。</p>\n<h3 id=\"Avae\"><a href=\"#Avae\" class=\"headerlink\" title=\"Avae\"></a>Avae</h3><p>Avae相比Compound更加复杂，主要有8个关键特征：</p>\n<ul>\n<li>支持更多的不同资产</li>\n<li>贷款的稳定利率和可变利率：借款人可以灵活地选择稳定利率或可变利率</li>\n<li>利率转换：借款人还能够在稳定利率和可变利率之间进行转换</li>\n<li>抵押品互换(Collateral Swap)：借款人可以将其抵押品换成另一种资产。这有助于防止贷款低于最低抵押率并面临清算。</li>\n<li>用抵押品还款：借款人可以通过在一笔交易中直接用抵押品支付来关闭他们的贷款头寸</li>\n<li>闪电贷款(Flash loans)：如果借款人在同一笔交易中偿还贷款以及任何额外的利息和闪电贷款费用，借款人可以接受零抵押贷款。闪电贷款对套利交易者很有用，因为它们在跨各种 DeFi Dapp  进行套利交易时具有资本效率。</li>\n<li>闪电清算(Flash Liquidations)：清算人可以利用闪电贷款借入资金作为清算债券的一部分，并在不使用其资金的情况下获得清算奖金。</li>\n<li>本地信用授权(Native Credit Delegation)：借款人可以将他们的信用额度扩展到其他希望在没有抵押品的情况下借款以获得更高利率的用户。</li>\n</ul>\n<p>Avae中的借贷利率也是由算法决定的，跟供需关系有关。</p>\n<p>Avae中存在：</p>\n<ul>\n<li>Stable Annual Percentage Rate(APR)：稳定利率类似于固定利率，但如果市场条件变得糟糕，它可能会随着时间而改变。选择稳定利率的借款人更愿意知道要偿还的确切利息金额，并且不太可能受到各个流动资金池中流动性波动的影响。</li>\n<li>Variable Annual Percentage Rate(APR)：可变利率是根据 Aave 协议中资产的供需情况通过算法确定的。浮动利率的波动与储备中可用的流动性数量相对应。</li>\n</ul>\n<p>在Avae里，你获得的是aToken，Compound里面是cToken。Avae也可以在其<a href=\"https://app.aave.com/\">网站</a>上直接连接Metamask的钱包，非常的方便。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220416235651244.png\" alt=\"image-20220416235651244\"></p>\n<h4 id=\"Avae的治理\"><a href=\"#Avae的治理\" class=\"headerlink\" title=\"Avae的治理\"></a>Avae的治理</h4><p>Aave  于 2020 年 12 月重新启动了其协议的第二次迭代（Aave V2）。其原生治理令牌被称为 AAVE。任何人都可以自由地为 Aave  的改进和调整提出想法。以下是关于如何提出提案的概述。 </p>\n<ol>\n<li>在 Aave 治理论坛上准备一份 Aave 征求意见 (ARC) 提案。社区将对此进行反馈。 </li>\n<li>如果 ARC 没有争议，可以提交 Aave Improvement Proposal (AIP)。 </li>\n<li>AIP提交协议去等待投票</li>\n</ol>\n<h2 id=\"第七章-去中心化的交易所（DEX）\"><a href=\"#第七章-去中心化的交易所（DEX）\" class=\"headerlink\" title=\"第七章 去中心化的交易所（DEX）\"></a>第七章 去中心化的交易所（DEX）</h2><p>DEX的两种类型：</p>\n<ol>\n<li>基于订单簿地DEX Order book-based DEX</li>\n<li>基于流动性池的DEX Liquidity pool-based DEX</li>\n</ol>\n<p>DEX的局限性：</p>\n<ol>\n<li>较低的流动性：目前大多是交易还是在中心化的交易所上进行的。在CEX里面毕竟大家的交易量是比较大的，对应到DEX里面价差就会较大，买卖双方可能由较大损失。</li>\n<li>功能有限：中心化交易所包括许多高级交易功能，例如限价单、止损单、追踪止损等。大多数这些交易功能在 DEX 上不可用。一些 DEX现在提供限价单，从而提供更好的交易体验。然而，越来越多的 DEX 正在寻求引入这些高级交易功能，以更有效地与 CEX 竞争。</li>\n<li>区块链的互操作性：大多数DEX只允许交易者在同一个区块链生态系统内交换代币。例如，基于以太坊的DEX只允许用户交易以太坊和 ERC-20代币。它不允许交易者交易在Polkadot或Cosmos等其他区块链上发行的代币。 CEX允许用户轻松地在各种区块链上交易代币。正在努力构建<strong>跨链 DEX</strong>，未来，在 DEX  上跨多个区块链交易代币将成为可能。</li>\n<li>费用：随着DeFi的流行，这会导致以太坊网络的拥挤。以太坊交易量的增加，也就会相应的引起Gas的增加带来成本费用的上升。也就是高峰期的时候DEX上的交易大多是昂贵的交易，这在矿难或者大跌的时候是能够经常看到的，交易手续费大幅度上升。</li>\n</ol>\n<h3 id=\"Uniswap\"><a href=\"#Uniswap\" class=\"headerlink\" title=\"Uniswap\"></a>Uniswap</h3><p>Uniswap 是一种基于以太坊的去中心化代币交换协议，允许直接交换代币，而无需使用中心化交易所。</p>\n<p><strong>流动资金池</strong></p>\n<p>流动性池是位于Uniswap智能合约上的代币储备，可供用户交换代币。例如，使用流动性储备中有100ETH和20,000DAI的ETHDAI交易对，想要使用DAI 购买ETH的用户可以向 Uniswap 智能合约发送 202.02DAI以获得1ETH 作为回报。交换完成后，流动资金池将剩下99ETH和20,202.02DAI。流动性池的准备金由流动性提供者提供，他们被激励获得 Uniswap 0.3% 交易费的相应费用。Uniswap上的每次代币交换都会收取此费用。</p>\n<p>任何人都可以提供流动性资金。</p>\n<p><strong>自动的商市机制 Automated Market Maker Mechanism</strong></p>\n<p>资金池中资产的价格是使用Automated Market Maker(AMM) 算法确定的。AMM 的工作原理是根据池两侧的流动性计算。</p>\n<p>用 100 ETH 和 20,000 DAI 的  ETH-DAI 流动性池示例。为了计算恒定乘积，Uniswap 会将这两个金额相乘。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417140956310.png\" alt=\"image-20220417140956310\"></p>\n<p>AMM要求这个乘积保持不变。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220417143109793.png\" alt=\"image-20220417143109793\"></p>\n<p>所以换的越多费率越高。</p>\n<p>想要尝试一下可以去<a href=\"https://app.uniswap.org/\">Uniswap</a>了解一波。</p>\n<h3 id=\"DEX-聚合器\"><a href=\"#DEX-聚合器\" class=\"headerlink\" title=\"DEX 聚合器\"></a>DEX 聚合器</h3><p>简单来说就是现在很多的DEX由自己的流动性资金池所以想要换的比较多的话就会面临较高的费率。而DEX聚合器就是自动将你想要换取的路由到多个DEX中，拆分掉你的大宗交易，以此来获得最有的价格。例如<a href=\"https://1inch.exchange/\">1inch</a>就是一个DEX聚合器。</p>\n<h2 id=\"第八章-去中心化的衍生品\"><a href=\"#第八章-去中心化的衍生品\" class=\"headerlink\" title=\"第八章 去中心化的衍生品\"></a>第八章 去中心化的衍生品</h2><p>衍生品是一种合约，其价值来自另一种标的资产，例如股票、商品、货币、指数、债券或利率。每种类型的衍生品，无论是期货、期权还是掉期，都有不同的用途，每个投资者出于各种原因购买或出售它们。投资者交易衍生品的一些原因是为了对冲标的资产的波动性、推测标的资产的方向移动或利用其持有的资产。衍生品风险极大，交易时必须具备强大的金融知识和策略。  DeFi 衍生品 Dapp 的市值为 58.2 亿美元，占 DeFi 生态系统的 8.2%。</p>\n<p>这本书主要关注了Synthesix和Opyn两种衍生品协议</p>\n<h3 id=\"Synthetix\"><a href=\"#Synthetix\" class=\"headerlink\" title=\"Synthetix\"></a>Synthetix</h3><p>Synthetix包含两个部分，一个是Synthetic Asset（Synths），一个是Synthetic.Exchange。</p>\n<p>Synthetix资产是Synths，现在有两种不同的Synths：</p>\n<ul>\n<li>Normal Synths：与标的资产正相关</li>\n<li>Inverse Synths：与表弟资产负相关</li>\n</ul>\n<p>一个Synths的例子是Synthetic Gold （sXAU），就是跟踪黄金的价格表现。反向Synths资产的例子是iBTC，跟踪的是BTC的反向价格表现。</p>\n<blockquote>\n<p>以反向合成比特币（iBTC）为例。假设在创建时，比特币 (BTC) 的价格为 10,600 美元——这将是入场价格。如果比特币下跌 400 美元至 10,200  美元，则 iBTC Synth 将额外价值 400 美元，售价为 11,000 美元，去中心化衍生品也是如此。相反，如果比特币升至 11,000  美元，iBTC Synth 现在将价值 10,200 美元。</p>\n</blockquote>\n<p>Synths 让交易者无需持有标的资产即可获得资产的价格敞口。与传统的黄金经纪公司相比，Synthetic Gold (sXAU)  允许交易者以更少的麻烦（无需注册、无需旅行、无需中间人等）参与市场。Synthsc还有另一个用途——它们可以在彼此之间无摩擦地进行交易，这意味着可以在  Synthetix.Exchange  上轻松地将合成黄金转换为合成日元、合成白银或合成比特币。这也意味着任何拥有以太坊钱包的人现在都可以开放访问任何现实世界的资产！</p>\n<p>当前支持的资产可以去<a href=\"https://docs.synthetix.io/tokens/list/\">List - Synthetix System Documentation</a>查看</p>\n<h4 id=\"Index-Synths\"><a href=\"#Index-Synths\" class=\"headerlink\" title=\"Index Synths\"></a>Index Synths</h4><p>这是一篮子货币，可以理解为，指数。</p>\n<h4 id=\"Synthetic-Exchange\"><a href=\"#Synthetic-Exchange\" class=\"headerlink\" title=\"Synthetic Exchange\"></a>Synthetic Exchange</h4><p>Synthetix Exchange 是一个去中心化的交易平台，专为 SNX 和 Synths 的交易而设计。 Synthetix 交易所没有订单簿，也没有像  Uniswap 这样的流动资金池。 Synthetix Exchange  允许用户直接与保持持续充足流动性的智能合约进行交易，从而从理论上降低滑点或缺乏流动性的风险。由于用户购买的是合成合约而不是交易标的资产，因此用户最多可以购买系统中的抵押品总额，而不会影响合约的价格。</p>\n<p>For more information or mining Synth:<a href=\"https://staking.synthetix.io/\">Home | Synthetix Staking</a></p>\n<h3 id=\"Opyn\"><a href=\"#Opyn\" class=\"headerlink\" title=\"Opyn\"></a>Opyn</h3><p>Opyn 为资产价格波动提供保护，并为智能合约提供保险。用户可以获得以太坊 (ETH)、Wrapped Bitcoin (WBTC)、Yearn  Finance (YFI)、Uniswap (UNI)、DeFiPulseIndex (DPI) 以及 Compound (COMP) 上的 USDC 和  DAI 存款的保护。</p>\n<p>除了智能合约失败之外，Opyn  还可以防范财务和管理风险等其他风险。 Opyn 通过利用金融衍生品（即期权）来做到这一点。</p>\n<p>For more information：<a href=\"https://v1.opyn.co/#/\">https://v1.opyn.co/#/</a></p>\n<h2 id=\"第九章-去中心化的基金管理\"><a href=\"#第九章-去中心化的基金管理\" class=\"headerlink\" title=\"第九章 去中心化的基金管理\"></a>第九章 去中心化的基金管理</h2><p>基金管理是监督资产并管理其现金流以产生投资回报的过程。我们已经开始看到创新的  DeFi  团队为用户构建了以去中心化方式更好地管理资金的方法。</p>\n<p>去中心化的基金管理是在没有投资经理的情况下进行的。相反，算法可以帮助您自动进行交易。这使您可以选择最适合您的财务目标并减少支付费用的资产管理策略。</p>\n<h3 id=\"TokenSets\"><a href=\"#TokenSets\" class=\"headerlink\" title=\"TokenSets\"></a>TokenSets</h3><p>TokenSets 是一个允许加密用户购买启用策略的代币 (SET)  的平台。这些代币具有自动化的资产管理策略，使您能够轻松管理您的加密货币投资组合，而无需手动执行交易策略。使用自动交易策略，您无需手动 24/7  监控市场，从而减少因情绪交易而错失的机会和风险。</p>\n<h4 id=\"Index-Sets-指数组合\"><a href=\"#Index-Sets-指数组合\" class=\"headerlink\" title=\"Index Sets 指数组合\"></a>Index Sets 指数组合</h4><p>指数集允许用户通过购买单个代币而不是单独购买多个资产来接触更多资产并降低汽油费。最受欢迎的指数集是  DeFiPulse 指数（DPI），该指数基于市值加权指数跟踪 DeFi 代币的表现</p>\n<h4 id=\"Yield-Farming-Set\"><a href=\"#Yield-Farming-Set\" class=\"headerlink\" title=\"Yield Farming Set\"></a>Yield Farming Set</h4><p>Yield  Farming Sets 使用户无需不断地进行多个智能合约交易来产生收益农业协议，从而节省燃料。这些 Sets 的策略将定期索取流动性提供者 (LP)  奖励，将其出售以换取策划资产，并质押这些资产以产生更多的LP奖励。本质上，这是 DeFi 采取复利的一个例子！</p>\n<p>可以去<a href=\"https://www.tokensets.com/\">TokenSets – Asset Management Simplified</a>了解情况。</p>\n<h2 id=\"第十章-去中心化的彩票\"><a href=\"#第十章-去中心化的彩票\" class=\"headerlink\" title=\"第十章 去中心化的彩票\"></a>第十章 去中心化的彩票</h2><p>2020 年 2 月，一位仅存入 10 美元的用户在 PoolTogether 的每周 DAI 奖池中赢得了 1,648 美元，获胜机会为 69,738  分之一。 PoolTogether 彩票最好的部分是，如果参与者没有中奖，他们可以获得 10 美元押金的退款。这场博弈没有输家，只有机会成本。</p>\n<p>？？？？有这种好事？</p>\n<h3 id=\"Pool-Together\"><a href=\"#Pool-Together\" class=\"headerlink\" title=\"Pool Together\"></a>Pool Together</h3><p>PoolTogether  是一个去中心化的无损彩票或去中心化的奖金储蓄应用程序，用户可以在抽奖后保留他们的初始存款金额。不是使用购买的彩票来资助奖金，而是使用汇集的用户存款在  Compound 协议上赚取的利息来资助奖金。对于每一轮 PoolTogether，所有用户存款都会发送到 Compound  以赚取利息。每个间隔结束时将随机抽取一名幸运获胜者，以赢取累积的全部利息作为奖金</p>\n<p><a href=\"https://pooltogether.com/zh\">https://pooltogether.com/zh</a></p>\n<p>可以去上面网站上看看，我没找到支持的货币列表。但是DAI, USDC, UNI,  COMP是肯定可以支持的。</p>\n<h2 id=\"第十一章-去中心化支付\"><a href=\"#第十一章-去中心化支付\" class=\"headerlink\" title=\"第十一章 去中心化支付\"></a>第十一章 去中心化支付</h2><h3 id=\"Sabiler\"><a href=\"#Sabiler\" class=\"headerlink\" title=\"Sabiler\"></a>Sabiler</h3><p>Sablier  是一个支付流应用程序——这意味着它允许在不同方之间以小增量（以秒为单位！）实时进行支付和取款。考虑在工作和进展过程中实时支付的每小时咨询工作、每日合同工或每月租金支付。与在  Spotify 上流式传输音乐的方式类似，也可以在 Sablier 上流式传输资金！</p>\n<p><strong>什么是流式付款？</strong></p>\n<p>付款人现在可以在双方定义和同意的期限内实时发送付款，而不是等待固定期限（例如，每月、每两周）付款。通过  Sablier，收款人现在可以实时收到他们的付款并随时提取。比如60/h的咨询服务可以在Sablier签订协议后一分钟一分钟的自己付款，即使返回了损失也非常小。</p>\n<p>官网：<a href=\"https://sablier.finance/\">Sablier</a></p>\n<p>等于是形成了一个支付流，一步步付款。</p>\n<h2 id=\"第十二章-去中心化保险\"><a href=\"#第十二章-去中心化保险\" class=\"headerlink\" title=\"第十二章 去中心化保险\"></a>第十二章 去中心化保险</h2><p>参与DeFi的过程中，必须将代币锁定在智能合约中，但是显然即使是审计过的智能合约也有可能存在缺陷而被黑客攻击。所以就有了去中心化的保险。</p>\n<p>所以使用DeFi必须要面对：</p>\n<ol>\n<li>技术风险：智能合约可能被黑客攻击或漏洞被利用</li>\n<li>流动性风险：借贷协议（如 Compound）可能耗尽流动性</li>\n<li>管理密钥风险：协议的公私钥可能被泄露</li>\n</ol>\n<h3 id=\"Nexus-Mutual\"><a href=\"#Nexus-Mutual\" class=\"headerlink\" title=\"Nexus Mutual\"></a>Nexus Mutual</h3><p>Nexus Mutual  是建立在以太坊上的去中心化保险协议，为以太坊区块链上的智能合约提供保障，并为中心化贷方和交易所（如Celsius、Blockfi、Nexo、Binance、Coinbase、Kraken  和 Gemini）提供托管保障。</p>\n<p>保险的保护范围是智能合约的意外，如果只是自己丢了私钥那没救了。</p>\n<p>NXM是Nexus Mutual的原生代币</p>\n<p><a href=\"https://nexusmutual.io/\">Nexus Mutual | A decentralised alternative to insurance</a></p>\n<h3 id=\"Armor\"><a href=\"#Armor\" class=\"headerlink\" title=\"Armor\"></a>Armor</h3><p>Armor  是 DeFi 的第一个保险聚合器。利用 Nexus Mutual 的承保能力，它提供现收现付保险产品以及无需 KYC 即可购买保险的能力。不想进行 KYC 或因 Nexus Mutual 的地域限制无法购买保险的用户可以通过 Armor 获得保险。</p>\n<p><a href=\"https://armor.fi/\">Armor.Fi</a></p>\n<h3 id=\"Nsure-Network\"><a href=\"#Nsure-Network\" class=\"headerlink\" title=\"Nsure Network\"></a>Nsure Network</h3><p>Nsure Network  是一个去中心化的保险项目，它借鉴了伦敦劳合社的理念，这是一个交易保险风险的市场。保费价格使用动态定价模型确定，其中资本供需共同决定保费，类似于自由市场的定价机制。</p>\n<p>Nsure  Network 的治理代币 (NSURE) 由购买的政策支持。价格可根据资本供求的变动自行调整，但受基础模型的稳定。与遵循互惠模式的 Nexus Mutual  不同，Nsure Network 遵循股东模式，其中 Nsure Network 的代币类似于持有网络的一部分。</p>\n<h3 id=\"Cover-Protocol\"><a href=\"#Cover-Protocol\" class=\"headerlink\" title=\"Cover Protocol\"></a>Cover Protocol</h3><p>Cover Protocol 是一个点对点保险市场，其运作类似于预测市场。与其他保险协议不同，治理代币不用于承保风险。为了引导这一新协议的覆盖范围，做市商被激励将  DAI 或 yDAI 抵押品用于铸造 CLAIM 和 NOCLAIM 代币。 Cover Protocol  保险涵盖选定的协议，并且都有指定的到期日。在到期日期间，CLAIM 或 NOCLAIM 代币将拥有抵押品的全部权利。</p>\n<p>例如，如果在设定的到期日之前使用 100 DAI 为 Compound 协议提供保障，它将产生 100 CLAIM 和 100 NOCLAIM  代币。在到期日，如果有有效的索赔事件，所有 CLAIM 代币将获得 1 DAI，而所有 NOCLAIM 代币将一文不值。相反，如果没有有效的索赔事件，所有  NOCLAIM 代币将收到 1 DAI，而所有 CLAIM 代币到期时一文不值。要获得价值 100 DAI 的保险，用户需要从交易所购买 100 CLAIM  代币，因为如果发生有效索赔，这将过期至 100 DAI。购买 100 个 CLAIM 代币的成本将是保险费。</p>\n<p><strong>Conclusion</strong></p>\n<p>保险在 DeFi  中仍然是一个非常小众的细分市场，通常吸引的零售市场参与者很少。然而，随着更成熟的参与者加入市场，他们无疑将需要更好的风险管理工具。归根结底，投保或不投保的选择最终取决于您。但是，我们  CoinGecko 肯定会推荐购买保险，因为在 DeFi 中任何事情都可能发生。</p>\n<h2 id=\"第十三章-治理\"><a href=\"#第十三章-治理\" class=\"headerlink\" title=\"第十三章 治理\"></a>第十三章 治理</h2><p>与中心化传统公司不同，DeFi  协议不需要遵循除链上编码之外的任何规则。这通常被称为“代码就是法律”。</p>\n<h3 id=\"Aragon\"><a href=\"#Aragon\" class=\"headerlink\" title=\"Aragon\"></a>Aragon</h3><p><a href=\"https://client.aragon.org/#/\">Aragon</a>是一个社区驱动的项目，其使命是通过为去中心化组织的繁荣创造工具来赋予自由。随着技术以前所未有的速度发展，人们担心它在创建全球集中控制、监视和压迫制度中的作用。  Aragon 决心创建一个自由、开放、公平的社会。</p>\n<p>Aragon Court 是 Aragon  创建的解决方案，它模仿了传统商业世界中法院的功能。当发生冲突时，参与者可以将其升级到Aragon Court，由陪审员决定是否应惩罚任何一方。</p>\n<p>陪审员从陪审员池中随机选择，通过锁定  ANJ  代币来审查和裁决争议。与传统法院不同，陪审员在投票支持多数结果时会获得争议费用补偿。因此，该系统不适合不偏不倚的决策，而是依靠社会共识。投票支持少数派结果的陪审员将被带走一部分  ANJ  代币，并奖励给投票支持多数派的陪审员。如果结果不令人满意，任何一方都可以支付费用对争议提出上诉，并由大量陪审员进行审查。这个过程可以重复，直到整个陪审员池对争议做出裁决。</p>\n<h3 id=\"Snapshot\"><a href=\"#Snapshot\" class=\"headerlink\" title=\"Snapshot\"></a>Snapshot</h3><p>由于以太坊汽油费上涨，链上投票的成本变得难以承受，阻碍了小代币持有者参与治理过程。 Snapshot试图通过在链下拍摄投票快照来解决这个问题，从而有效地使投票过程无气体。Snapshot 已经看到许多 DeFi 项目利用其工具来建立治理流程。截至 2021  年 1 月，Snapshot 可免费使用，已有多达 418 个不同的项目注册使用 Snapshot。</p>\n<p>缺点：链下投票不受智能合约约束。</p>\n<p><a href=\"https://snapshot.page/#/\">https://snapshot.page/#/</a></p>\n<h2 id=\"第十四章-DeFi仪表盘\"><a href=\"#第十四章-DeFi仪表盘\" class=\"headerlink\" title=\"第十四章 DeFi仪表盘\"></a>第十四章 DeFi仪表盘</h2><p><a href=\"https://zapper.fi/zh\">Zapper - Your Home to Web3</a></p>\n<p>仪表板是一个简单的平台，可将您的所有 DeFi 活动聚合在一个地方。这是一个有用的工具，可以可视化和跟踪您的资产在不同 DeFi  协议中的位置。仪表板能够将您的资产分为不同的类别，例如存款、债务和投资。</p>\n<h1 id=\"Part-Four：-DeFi-in-Action\"><a href=\"#Part-Four：-DeFi-in-Action\" class=\"headerlink\" title=\"Part Four： DeFi in Action\"></a>Part Four： DeFi in Action</h1><h2 id=\"第十五章-DeFi-in-Action\"><a href=\"#第十五章-DeFi-in-Action\" class=\"headerlink\" title=\"第十五章 DeFi in Action\"></a>第十五章 DeFi in Action</h2><h3 id=\"案例一-Surviving-Argentina’s-High-Inflation\"><a href=\"#案例一-Surviving-Argentina’s-High-Inflation\" class=\"headerlink\" title=\"案例一 Surviving Argentina’s High Inflation\"></a>案例一 Surviving Argentina’s High Inflation</h3><p>就是阿根廷的货币贬值太猛，但是DAI是和美元挂钩的， 即使DeFi有风险，但是相比阿根廷货币的风险来说不值一提，所以有人用DAI来规避自己资金的风险。（不能直接换美元因为政府不允许。）</p>\n<p><a href=\"https://slideslive.com/38920018/living-on-defi-how-i-survive-argentinas-50-inflation\">Mariano Conti · Living on Defi: How I Survive Argentina’s 50% Inflation · SlidesLive</a></p>\n<h3 id=\"案例二-Uniswap-Ban\"><a href=\"#案例二-Uniswap-Ban\" class=\"headerlink\" title=\"案例二 Uniswap Ban\"></a>案例二 Uniswap Ban</h3><p>就是有一段时间Uniswap团队为了遵守美国法律然后ban掉了一些地方的ip。但是实际上只能禁止网站访问不能禁止Uniswap协议，因此呢他就重新建了一些站点用于被banIP的地方的人访问。</p>\n<h2 id=\"第十六章-DeFi就是未来！！！\"><a href=\"#第十六章-DeFi就是未来！！！\" class=\"headerlink\" title=\"第十六章 DeFi就是未来！！！\"></a>第十六章 DeFi就是未来！！！</h2><p>DeFi：</p>\n<ul>\n<li>透明！</li>\n<li>可接入！</li>\n<li>高效！</li>\n<li>便捷！</li>\n</ul>\n<p>DeFi目前的痛点：</p>\n<ul>\n<li><strong>Wallet</strong> - <a href=\"https://www.argent.xyz/\">Argent</a> is creating a radically better user-focused crypto wallet  experience, with state-of-the-art security, native integration with DeFi Dapps  such as Compound and others, as well as not needing seed keys. </li>\n<li><strong>Participation of  products</strong> - <a href=\"https://zapper.fi/\">Zapper</a> abstracts away many of the complexities and steps involved  with DeFi products. It also allows users to access multiple financial products  in one transaction, saving time and effort. </li>\n<li><strong>User-friendly development</strong> - <a href=\"%5Bplay.gelato.finance%5D(https://play.gelato.finance/)\">Gelato  Finance</a> recently launched their“If this, then that” for crypto. It allows users  to set actions that will be done once certain conditions are met, such as“Buy  ETH when it is $200” or“Send some money to Alice when it’s her birthday.”  </li>\n<li><strong>Insurance</strong> - Financial market effectively facilitates the transfer of risk - one  man’s hedge against his position is another man’s profit. Insurance is now  available via DeFi insurers such as <a href=\"https://nexusmutual.io/\">Nexus Mutual</a>. If you are willing to accept a  lower yield on the money you have placed on lending protocols such as Compound  in exchange for peace of mind, it can now be done. </li>\n<li><strong>Aggregation of liquidity</strong> -  There are many different decentralized exchanges (DEXs) in the market with  varying liquidity. It is a headache for users to choose which one is the best  for their trade. This is slowly becoming a thing of the past with liquidity  aggregators such as <a href=\"https://app.1inch.io/#/\">1inch.exchange</a>, Paraswap, and Matcha helping users to automatically split orders across DEXs to  ensure the best possible execution prices.</li>\n<li><strong>Yield optimization</strong> - Remember switching around different banks for the best  rates for fixed deposits? You don’t have to do that in DeFi - yield aggregators  such as Yearn.finance, idle.finance, and DeFiSaver automatically allocate your  cryptoassets to places with the best yield opportunities.</li>\n</ul>\n<h1 id=\"浅浅小结一下\"><a href=\"#浅浅小结一下\" class=\"headerlink\" title=\"浅浅小结一下\"></a>浅浅小结一下</h1><p>How to DeFi: Begginer 这本书其实让我认识到了炒币这种事情属于是太low了，DeFi所展望的远远不是简单的炒币，而是真的带来了一种全新的去中心化的金融模式。</p>\n<p>完善的借贷、基金、彩票、衍生品等等DeFi合约属于是让人对目前加密货币的发展有了全新的认识。</p>\n"},{"title":"DeFi Learning Advance","date":"2022-05-14T02:02:55.000Z","author":"Lcy","comments":1,"plugins":["mathjax","katex"],"_content":"\nA reading note for 《How to DeFi Advance》\n# Part One： State of DeFi\n\n## 第一章 DeFi Snapshot\n\nDeFi 是在2020年夏季开始崛起的。之后发展的就非常迅速了，那个夏天，DeFi协议的市值峰值增长了12倍。\n\n2021年4月，DeFi的总锁定价值（TVL）突破了860.5亿美刀。\n\n总之吧就是说了一下DeFi目前极受关注，有很大的发展前景。但他有一个地方错了，这本书说中国的对这种另类加密货币的看好，实际上，现在看来并不存在这种事情，封杀的挺彻底的。\n\n## 第二章 DeFi Activities\n\n介绍一些我们能够参与DeFi的方式。\n\n### Yield Farming\n\nYield Farming指的是将资金分配给DeFi协议去获取收益。\n\n一些Yield Farming的例子：\n\n- 交易所Exchanges：为去中心化交易所做市提供资金，赚取交易手续费。\n- 借钱Lending\n- 保险Insurance：承保保险，赚取保费，同时承担灾害期间赔付的风险。\n- 期权Options：通过卖出看涨和看跌期权来承销期权以赚取收益。\n- 合成资产Synthetic Assets：铸造稳定币或其他合成资产，赚取费用作为回报。\n\n### Liquidity Mining\n\n流动性挖矿就是你提供一定你持有的加密货币为某个DeFi协议提供流动性支持以换取代币。\n\n### Airdrops\n\n空投，这应该经常听到了。就是免费发的代币，有时候空投就是一种营销策略。存在稀释代币所有权的风险 。如果当年参与了Uniswap的空投等于白赚一大笔。。。。\n\n### Initial DEX Offerings (IDO)\n\n加密项目必须在其代币发布和分发策略上具有创造性。随着去中心化交易所 (DEX)  的日益普及，项目现在有一个可行的选择，即无需支付高额费用即可在中心化交易所上市，直接面向用户。加密项目团队现在可以在不需要这些 DEX  许可的情况下列出他们的代币。\n\n### Initial Bonding Curve Offering (IBCO)\n\n初始债券曲线发行（IBCO）是一个相当新的概念，旨在防止抢先交易行为。本质上，随着越来越多的投资者提供资本进入联合曲线，代币价格将从其初始值增加。但是，您何时选择出资并不重要，因为所有投资者都将根据相同的最终结算价格进行支付。根据 IBCO  结束时的价格，每个投资者将根据他们在投资总资本中的份额获得一部分代币。\n\nExample: Hegic & Aavegotchi\n\n### Liquidity Bootstrapping Pool (LBP)\n\n流动性引导池：项目使用可配置的自动做市出售代币的一种方式。通常，这些池将包含项目代币和抵押代币，通常以稳定币计价。智能池的控制器可以更改其参数并在销售中引入各种功能，例如随着时间的推移价格下降以及由于高需求或外部漏洞而暂停任何进一步的交换。\n\n### Initial Farm Offering (IFO)\n\nPancakeSwap 首次推出的初始农场产品 (IFO) 允许用户质押他们的流动性提供者 (LP)  代币以换取项目的代币。使用溢出机制，用户可以随心所欲地质押。在超额认购的情况下，任何多余的代币都将退还给投标人。 PancakeSwap 上的 IFO 使用  CAKE-BNB LP 代币，项目接收 BNB 代币以换取他们新铸造的协议代币，而剩余的 CAKE 代币被烧毁。\n\n有用的链接：Yield Farming: https://zapper.fi/dashboard\n\n### 风险\n\n- 一个是注意APY是不是动态的，可能有的看起来很高但是随着参与人的增加会下降到一个很普通的值\n- 一个是注意投资的风险 ，包括值不值得投资，毕竟项目太多了，可以投资的太多了，这个市场变化太快，你把握不住\n\n# Part Two： Evaluation DeFi Sectors\n\n## 第三章 去中心化的交易所\n\n### DEX种类：\n\n- 基于订单的DEX：感觉和股市挺像的。\n- 基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）\n\n### AMM算法：\n\n![image-20220425231949161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png)\n\n流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。\n\n当前一些著名的AMM算法：\n\n#### 恒乘积\n\n$$\nx*y = k\n$$\n\nUniswap用的就是常数乘积。\n\n#### 恒和\n\n$$\nx+y=k\n$$\n\n这个模型有缺陷，不能提供无限的流动性。\n\n#### 恒定平均\n\n$$\nv = \\Pi_tB_t^{w_t}\n$$\n\n恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。\n\n#### 稳定交换不变量\n\n$$\nAn^n\\sum X_i+D=ADn^n+\\frac{D^{n+1}}{n^n\\Pi x_i}\n$$\n\n![image-20220425232558126](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png)\n\n### 流动性池类型\n\n- 公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。\n- 私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。\n- 智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。\n\n### AMM的风险\n\n- 价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。\n- Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。\n\n![image-20220425234523467](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png)\n\n- 无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。\n\n### Conclusion\n\nDEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。\n\n## 第四章 DEX聚合器\n\n之前说过DEX聚合器的作用，毕竟在AMM算法的加持下，比如说Uniswap的恒乘积策略下，当交易金额很高的时候对应的手续费也就越高。这显然对于哦我们交易者来说是不可接受的。所以就有了DEX聚合器就是DEX Aggregators。DEX聚合器能够将一笔较大的交易拆分，去不同的去中心化交易所交易，相当于综合了所有的去中心化交易所的流动性，而不用单纯的看一个交易所的流动性，大幅度降低了你作为一个用户来说在一家交易所交易大额所面临的高额手续费又或者减少了你自己去找哪里便宜这种麻烦事。\n\n评价DEX聚合器的四个指标：\n\n- 路由算法\n- 流动性资源\n- 当前的市场状态\n- 交易规模\n\n![image-20220426145303291](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png)\n\n![image-20220426145317120](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png)\n\n### 风险提示\n\n咱就是说有时候DEX聚合器不一定靠谱，对于部分小的交易可能直接去DEX比较方便，成本也是更低的。\n\n## 第五章 去中心化的借贷\n\n比较著名的几个借贷协议：Compound、Maker、Avae、Cream\n\n这些在beginner一书里面说过。\n\n### 风险提示\n\n注意智能合约漏洞等技术风险。\n\n黑客可能会利用并耗尽这些协议上的抵押品。此外，许多借贷协议依赖价格预言机（第 12  章会详细介绍）来提供链上价格数据。价格预言可能会失败或被利用。 2020 年 11 月，Compound 的价格预言被利用，将 Coinbase Pro 上的  DAI 价格推高了 30%，导致价值 8900 万美元的贷款被清算。25  但是，作为借款人，主要风险包括因管理不善而失去抵押品抵押率。加密货币以其极端的价格波动而闻名，您的贷款可能会低于其最低抵押品比率并被清算。这不是一个理想的结果，因为您将承担相当大的损失并支付清算费用。因此，持续监控和维持健康的贷款抵押比率至关重要。\n\n## 第六章 去中心化的稳定币和稳定资产\n\nUSDT就不用再介绍了，太常见了。Tether就是1美元换1USDT。\n\nDAI也不用说了，是Maker发行的，现在稳如老狗。\n\n### 算法稳定币\n\n算法稳定币就是用算法来控制稳定币的市场结构和基础经济。大多数算法稳定币都与美元挂钩，有些是浮动挂钩，形成了算法稳定资产。与算法稳定币不同，算法稳定资产可以被视为另一种形式的抵押品。\n\n![image-20220426155420044](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png)\n\n### Rebase Model\n\n变基模型通过改变稳定币的全部供应来控制价格。根据稳定币的价格是高于还是低于预期挂钩，协议将在固定期限内自动增加或减少每个持有者钱包中的供应量。这样做的原因是，通过强制控制供应，可以根据简单的通货膨胀/通货紧缩经济理论来影响稳定币的价格。该模型的开创性协议是 Ampleforth ——AMPL。\n\n### Seigniorage Model铸币税模型\n\n铸币税模型通过引入影响市场动态的奖励系统来控制价格。如果价格高于挂钩，则铸造新的代币并提供给提供流动性或持有代币的参与者。如果价格低于挂钩，则停止铸造代币，并引入机制以减少供应。用户可以购买优惠券来燃烧底层代币以将其从供应中移除。这些优惠券可能会在未来兑换更多代币，但前提是不亏。\n\n三种基础的铸币税模型例子。\n\n1. Empty Set Dollar（ESD）\n\n2. Basis Cash\n\n3. Frax Finance\n\n可惜啊，梦想是美好的现实是骨感的。实际上的表现并不是那么尽如人意。这些币最终都跌的一塌糊涂，就UST、sUSD、FRAX最终还能保持和美元的挂钩。\n\n### 风险提示\n\n- 目前算法稳定币仍处于试验阶段\n- 稳定币需要一个比较强大的社区\n- 建议使用较多的时间来了解之后再考虑投资\n\n## 第七章 去中心化衍生品\n\n### 永续协议\n\n永续协议是一种提供永续合约交易的去中心化协议，允许用户在各种加密资产上开立高达十倍的杠杆多头或空头头寸。为了实现这一点，Perpetual Protocol  使用了一种独特的虚拟自动做市商 (vAMM) 方法。功能类似于 Uniswap 和 Balancer 的 AMM，交易者可以直接通过 vAMM  执行交易。主要区别在于“虚拟”部分。在传统的  AMM 中，资产存储在智能合约中，每种资产的交易价格通过特定的数学函数确定。永续协议中的 vAMM 不存储任何资产。取而代之的是，实物资产存储在一个以 USDC  计价的智能合约保险库中，成为用户开设杠杆头寸的抵押品。保险库中的资金总额基本上构成了交易者利润的上限。每个永续合约都有自己特定的  vAMM，但它们都受到协议保险基金的保护。 Perpetual Protocol 能够通过使用 xDai 链进行交易执行来提供更高的交易速度和最少的 gas  交易。使用 vAMM，用户将能够获得高流动性和低滑点来满足他们的交易需求。\n\n### 合成资产\n\n合成资产是与另一种资产具有相同价值或效果的资产或资产组合。合成资产跟踪标的资产的价值，并允许在无需持有实际资产本身的情况下接触资产。\n\n### 风险提示\n\n- 注意杠杆，别玩火\n- 可能缺乏流动性\n\n## 第八章 去中心化的保险\n\n保险基于两个假设运作：\n\n1. 大数定律：保险承保的损失事件必须是独立的。如果事件足够频繁地重复，结果将收敛到预期值。\n2. 风险池：损失事件具有频率低、影响大的特点。因此，一大群人支付的保险费补贴了几笔大额索赔的损失。\n\n现在的DeFi行业，毕竟很多代码上的漏洞是很难发现的，所以保险怎么说呢，也算是一种比较必要的东西吧。\n\n**三种保险协议**\n\n### 1. Nexus Mutual\n\n当前最大的保险协议。\n\n提供两种保险：\n\n1. 智能合约遭受攻击时的资金损失，比如遇到经济设计失败、严重的预言机失败、治理攻击等\n2. 监护权保障，承担资金被黑客入侵或停止提款的风险。\n\n代币：NXM\n\n### 2. Armor Protocol\n\nArmor 通过加密原生的动态智能覆盖聚合使对 DeFi 的投资尽可能安全。\n\n提供的三种主要保险：\n\n- arNXM\n- arCore\n- arNFT\n\n### 3. Cover Protocol\n\nCover Protocol 由 Yearn Finance 孵化，最初是提供 yInsure 的 Safe Protocol。但由于创始人 Alan 和著名社区成员 Azeem Ahmed 之间的一些内讧，该项目被取消。 Azeem 接管了 yInsure 产品并发布了 Armor Protocol，而 Alan 继续发布 Cover Protocol。\n\n![image-20220514095759994](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514095759994.png)\n\n### 相关风险\n\n索赔赔付很大程度上取决于保险提供商和购买者之间的协议。在解释协议时总是存在细微差别，尤其是在涉及大额索赔的高风险场景。每个保险协议都会有自己的方式来决定支付什么，这可能不一定对所有买家都公平。购买者应了解保险产品提供的当前限制。作为保险协议的资金提供者是一项复杂的操作，用户在决定参与之前应该对风险有一个完整的了解。如果索赔的概率高于预期，Stakers 可能会蒙受损失。\n\n# Part Three：Emerging DeFi Categories\n\n## 第九章 去中心化指数\n\n可以把去中心化指数看成ETF\n\n### 指数协议：Index Cooperative\n\nIndex Coop 使用户能够广泛接触加密货币行业不同主题的不同协议。指数代币持有者可以拥有、接触并可以直接赎回构成指数的基础资产。\n\n### 指数协议：Indexed Finance（NDX）\n\nIndexed Finance 是一种专注于投资组合管理的协议。用户可以铸造、交换或销毁指数代币和基础资产，Balancer 分叉的集成自动做市商 (AMM) 机制会自动重新平衡其指数。\n\n### 指数协议：PowerPool Concentrated Voting Power (CVP)\n\nPowerPool 的指数是基于 Balancer 的自动做市商 (AMM) 的智能池，具有附加功能。其主要目的是将治理代币汇集在一起，用于借贷和执行元治理。此外，用户可以直接将一种治理代币换成另一种。\n\n### 协议比较\n\n协议费用：\n\n![image-20220514102110851](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102110851.png)\n\n基金权重：\n\n![image-20220514102332048](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102332048.png)\n\n一般有三种权重计算方式：\n\n- Market Cap Weighted：该方法动态跟踪每项资产的市值，其中每项资产的分配与其相对于指数中其他资产的市值成正比。相对于较小的，使用这种方法的指数将集中在市值较大的代币上，从而使该指数能够密切模仿实际的市场表现。\n- Square Root of Market Cap Weighted:Indexed Finance 上的所有指数均基于相对于每个标的资产的市值的平方根。这种方法抑制了市场表现倾向于更大市值硬币的影响。\n- Equally-Weighted Market Cap Weighted:\n- This method sets asset allocation equally. For example, there are \n  eight underlying assets in PIPT. Hence each of the assets is set to \n  12.5% weightage. An equal-weighted strategy is driven by price \n  momentum and would favor smaller market capitalization coins. \n  Smaller market capitalization coins are given the same importance \n  as large market capitalization coins. \n\n### 风险提示\n\n1. 代码就是法律，防不住黑客，尽管代码确实都经过了审计\n2. Mercenary Capital，大多数指数协议都有流动性挖掘计划，以激励流动性提供者并引导指数代币的流动性。然而，这些资本中的大部分通常被称为“雇佣资本”。这些资金纯粹是在寻求高回报，一旦出现另一个收益率更高的协议，就会退出。因此，一旦流动性挖矿奖励枯竭，可能会导致大量提款，从而导致指数协议呈螺旋式下降。\n3. 系统性风险：在 DeFi 中，协议可以像金钱乐高一样堆叠在一起。然而，可组合性可能是一把双刃剑，因为它引入了系统性风险。例如，PowerPool 的 Yearn Lazy APE (YLA) 从其五个基础 Yearn 的稳定币保险库中有十种不同的风险敞口。\n\n## 第十章 去中心化的预测市场\n\n预测市场是为参与者对未来事件的结果进行投注而创建的市场。传统预测市场的一个很好的例子是体育博彩平台。去中心化预测市场利用区块链技术在几乎任何事物上创建预测市场。例如，可以根据比特币价格何时超过 100,000 美元或下一任美国总统是谁来制定预测市场。去中心化预测市场的支持者认为，中心化平台使用户处于不利地位。标准做法包括高额交易费用、延迟提款和冻结账户。此外，当今大多数传统博彩平台都专注于体育博彩，限制了公众可用的预测市场类型。去中心化预测市场协议旨在通过允许用户创建自己的市场来赋予用户权力。\n\nWhatever就是 菠菜\n\n### Augur\n\n[Augur 在以太坊网络上运行，并使用决议模型，通过奖励和惩罚来激励用户准确报告信息。](https://augur.net/blog/prediction-markets)市场收盘后，它将进入市场创建者或其他人（取决于市场谁）的报告期指定为指定报告者的创建者）可以提供信息以验证结果。\n\n### Omen\n\n[Omen 是由 DXdao 开发并由 Gnosis 协议提供支持的预测协议 - 它在以太坊和 xDai 侧链上运行。]( https://omen.eth.link/)Gnosis 允许 Omen 用户使用他们的代币框架，这是一个基于事件的资产类别，包含预测市场的构建块.\n\n### 区别 \n\nAugur 通过创建一个激励和惩罚生态系统来规范报告信息的可靠性，从而解决了预言机问题。 Omen 将他们的报告需求外包给外部 DAO（使用与 Augur 方法类似的原则）。从这个意义上说，Augur 更加自给自足。\n\n### 风险提示\n\n预测市场最大的担忧是数据的可靠性。虽然有多种基于利润的激励措施可以最大限度地减少数据操纵，但非理性行为者可能会试图危及结果。此外，受挑战的结果可能会导致耗时且成本高昂的情况。\n\n## 第十一章 去中心化的固定利率协议\n\n固定利率协议：Fixed-Interest Rate Protocols（FIRPs）\n\n1. 借贷\n2. 收益聚合\n\n### Yield\n\nYield 是一个去中心化借贷系统，它使用一种名为“fyTokens”的新型代币提供固定利率借贷和利率市场。当前迭代（版本 1）包括 DAI 稳定币的 fyToken。这种被称为“fyDai”的新型代币可以在 DAI 中实现完全抵押的固定利率借贷。\n\nfyDai 代币是基于以太坊的代币 (ERC20)，可以在预定的到期日后兑换为 DAI。 fyDai 类似于零息票或贴现债券。要铸造或出售 fyDai，借款人必须提供目前遵循与 MakerDao 相同的抵押率（150%）的 ETH 抵押品。贷方购买 fyDai，其定价通常低于 DAI。贴现值与 1 DAI（到期值）之间的差额代表贷方的借贷利率或借款人的借贷利率。\n\n### Saffron.Finance\n\nSaffron Finance 是面向流动性提供者的去中心化收益聚合器，是最早使用基于批次的系统的协议之一。 批次是从流动性池中创建的部分，按风险、到期时间或其他可销售的特征进行划分不同的投资者。\n\n### Horizon Finance\n\n与传统的收益聚合器不同，Horizon 允许用户根据博弈论原则创建自己的市场。博弈论设想了一个只有理性参与者的环境。在这种假设情况下，买卖双方将根据可用信息做出最佳决策。\n\n### 风险提示\n\n最重要的风险之一是 FIRP 提供固定利率的能力。这些协议中的大多数都依赖于外部代理或其他用户积极参与协议来驱动市场功能。如果存在不活跃的社区或用户配置文件和流动性不成比例的数量（例如，Yield 的贷方多于借款人，或者 Saffron Finance 的 A 部分参与者多于 AA 部分），FIRP 可能无法支持其固定利息率。\n\n## 第十二章 去中心化的收益聚合器\n\n### Yearn Finance\n\nYearn Finance 旨在自动化借贷平台之间的资本转换，以寻找 DeFi 借贷平台提供的最佳收益。大多数 DeFi 借贷平台提供浮动利率而不是固定利率。随着这些协议之间的利率变化，资金会在 dYdX、Aave 和 Compound 之间自动转移。该服务包括主要的美元稳定币，如 DAI、USDT、USDC 和 TUSD。例如，如果用户将 DAI 存入 Yearn Finance，则用户将收到一个 yDAI 代币作为回报，这是一个产生收益的 DAI 代币。后来，Yearn Finance 与 Curve Finance 合作发布了一个名为 yUSD 的具有收益的美元代币池。 \n\n### Alpha Finance\n\nAlpha Finance 通过他们的第一个产品 Alpha Homora 引入了杠杆收益农业，允许用户使用借来的资金来增加他们在收益农业活动中的曝光率。从本质上讲，它既充当借贷协议又充当收益聚合协议。\n\n### Badger Finance\n\nBadger DAO 旨在创建一个 DeFi 产品生态系统，最终目标是将比特币带入以太坊。这是第一个选择将比特币作为主要储备资产而不是使用以太坊的 DeFi 项目。\n\n### Harvest Finance\n\n从 Yearn Finance 的分支开始，Harvest Finance 采用了快速推进策略。它一直在比其他收益聚合器协议更快地发布新策略，即使是那些被认为是高风险的协议\n\n### 风险提示\n\n由于收益聚合器从风险更高的协议中寻求高收益的性质，它们面临着很高的黑客风险。在四种协议中，只有 Badger DAO 尚未被黑客入侵（截至 2021 年 4 月）。与保险协议的整合仍然乏善可陈，这可能是进一步增长该行业锁定的总价值的最大瓶颈。随着更多保险协议的推出，未来我们可能会看到保险收益聚合器产品的推出。\n\n# Part Four: Technology Underpinning DeFi\n\n## 第十三章 预言机和数据聚合器\n\nDeFi 由智能合约提供支持。产生输出所需的输入包括未存储在区块链上的真实数据，例如天气状况或交通信息。需要协议通过将链下数据中继到区块链上来弥合差距，以便智能合约与数据进行交互。\n\n链下信息是 DeFi 不可或缺的一部分，应始终有效且准确。拥有虚假数据将完全歪曲特定项目并给 DeFi 带来重大问题。但是，我们如何确保所提供的数据始终准确且值得信赖？一些协议旨在通过在不被操纵或篡改的情况下将数据传输和广播到区块链上来实现这一点。这通常通过投票或共识机制完成，验证者同意最准确的数据。如果没有预言机或数据聚合器作为主要的“真相来源”，不良行为者可以利用虚假信息来利用毫无戒心的用户。\n\n所以，需要想办法弥补区块链和现实之间的数据误差。\n\n### Oracle Protocol：Chainlink\n\nChainlink 是用于构建去中心化预言机网络的框架和基础设施，可将任何区块链网络上的智能合约安全地连接到外部数据资源和链下计算。每个预言机网络都由独立且抗 Sybil 的节点运营商保护，这些节点运营商从众多链下数据提供者那里获取数据，将信息聚合成一个值，然后在链上交付以供智能合约执行。\n\n### Oracle Protocol: Band Protocol\n\nBand Protocol 是一个跨链预言机平台，将智能合约与外部数据和 API 连接起来。与 Band Protocol 集成的去中心化应用程序通过 Band Protocol 的智能合约数据点接收数据，而不是直接从链下预言机接收数据。\n\n\n\n如果预言机将现实世界的数据连接到区块链，那么数据聚合器可以帮助用户读取它。这些协议将区块链数据编译为简化格式，使项目和个人用户更容易创建他们的分析仪表板。\n\n### Data Aggregators: The Graph Protocol\n\nThe Graph 是一种去中心化协议，用于从以太坊、Polkadot 和 Solana 等区块链查询和接收数据。虽然通过读取区块链上的合约地址直接检索查询更简单，但具有更高特异性和粒度的数据更难找到。 Graph 通过将区块链数据索引到“子图”或可以使用标准 GraphQL API 查询的开放 API 来解决这个问题。\n\n### Data Aggregators: Covalent \n\nCovalent 是一个区块链数据提供商，它提供了一个统一的 API 来访问看似无穷无尽的链上数据。可以使用单个 API 检索来自各种区块链的代币余额和钱包活动的详细信息，从而使开发人员更容易创建分析仪表板或收集有关区块链活动的见解。 \n\n### 风险提示\n\n随着越来越多的协议开始依赖在最恶劣环境中经过实战考验的长期产品，记住这些产品可能并非完全万无一失也很重要。如果发生黑天鹅事件，预言机可能无法有效地提供数据，从而导致做出不准确的决策。在 2020 年 3 月，也称为黑色星期四，Chainlink 和 MakerDAO 的“Medianizer”等预言机未能足够快地更新其价格信息，导致价格严重错误。 MakerDAO 的价格失败引发了一系列灾难性事件，导致 CDP 所有者损失了价值超过 800 万美元的 ETH 抵押品。\n\n## 第十四章 多链和跨链协议\n\n### Ren Project\n\nRen Project 是一个无需许可的协议，允许用户在区块链之间匿名交互和传输代币。 Ren 协议通过 Ren 虚拟机 (RenVM) 提供支持的 RenBridge 实现这一点。\n\n### ThorChain\n\nThorChain 是一个去中心化的流动性网络，具有可互操作的区块链，允许以非托管方式进行跨链代币交换。它不固定或包装资产，但允许用户在各种第 1 层区块链之间交换代币。例如，ThorChain 上的交易者可以将他们的资产从比特币无缝转移到以太坊，而无需注册或通过中心化交易所的 KYC 流程。\n\n### Binance Bridge\n\n使用 Binance Bridge，用户可以在各种区块链之间转移资金，例如 Ethereum、Tron 或 Binance Smart Chain (BSC) 网络。每个特定资产仅支持特定的区块链。例如，Cosmos (ATOM) 和 Ontology (ONT) 等其他区块链的原生代币仅限于币安智能链、币安链或其原生网络之间的转账。每个区块链每天可以转账的数量有限制资产。\n\n### Anyswap\n\nAnyswap 是一个去中心化的跨链交易所，支持以太坊、币安智能链、Fantom 等八种不同的区块链。它为用户提供了一个多合一的平台，可以将他们的资产交换或转换到其他区块链上。用户可以选择将其资产存入铸币包装代币的传统方法，或直接执行跨链交换以将其代币换成不同区块链上的另一个代币。\n\n### Terra Bridge\n\nTerra Bridge 是一个应用程序，供用户将 Terra 区块链上支持的 Terra 资产发送到以太坊和币安智能链网络。这些资产包括 LUNA（Terra 的原生代币）、UST（Terra USD）等 Terra 稳定币，以及 mTSLA（Tesla）和 mAAPL（Apple Inc.）等镜像资产。\n\n## 第十五章 DeFi Exploits\n\n参与DeFi有风险，2020年的时候啊，就出现了12起黑客事件，总共损失了$121m。\n\nDeFi 的最大风险在于，随着项目利用 DeFi 的可组合性并相互构建，DeFi 应用程序的复杂性呈指数级增长，这使得智能合约审计人员更难发现弱点。 DeFi 应用程序开发人员必须确保网络安全审计人员不断检查他们的代码，以减少任何被利用的可能性，因为错误的后果将是巨大的经济损失。\n\n1. 经济漏洞/闪电贷款：只要借款人在同一笔交易中偿还贷款，闪电贷允许用户利用几乎无限的资金进行金融交易。它是一种强大的工具，可以让人们操纵过去受资本要求限制的经济攻击。对于闪电贷款，拥有正确的策略是利用机会的唯一要求。几乎所有的 DeFi 黑客都使用了闪电贷。\n2. 项目审计：不是所有项目都负担的起审计，这就会给黑客可乘之机\n3. 编码草率 审计不足：在牛市中，许多项目团队感到有压力快速行动并采取捷径更快地发布他们的产品。有些人可能会决定完全跳过审核以获得先发优势，并且仅在产品上线几个月后进行审核。还有很多“分叉”——使用与其他已建立项目相同的代码的新项目。在没有完全了解代码工作原理的情况下启动它们，它们被视为快速现金攫取，导致许多漏洞。\n4. Rug Pull：在 DeFi 领域，由匿名团队发起的项目并不少见。有些人这样做是为了避免由于不确定的监管环境而受到监管机构的审查。这就导致如果遇到恶意的项目开发者你追溯不到\n5. 预言机攻击：DeFi 协议需要知道资产价格才能正常运行。例如，借贷协议需要知道资产价格来决定是否清算借款人的头寸。因此，作为 DeFi 基础设施不可或缺的一部分，预言机可能会受到重度操纵。例如，我们在第 12 章中提到了 MakerDao 的金库被利用如何导致不必要的金库清算，造成总计超过 800 万美元的 ETH 损失。\n6. Metamask攻击：就是攻击你的钱包，不过他们安全团队比较牛逼目前没有出事。\n\n### 闪电贷款\n\n闪贷是指用户可以在没有任何抵押品的情况下借入资金的贷款，只要用户在同一笔交易中偿还贷款。如果用户没有在同一笔交易中偿还闪贷，交易将自动失败，造成交易费用损失，并确保闪贷不会发生。闪贷由各种 DeFi 协议提供，例如 Aave和 dYdX。\n\n闪电贷主要用于套利目的。套利是利用市场之间的价格差异来获利的行为。例如，假设我们在两个不同的去中心化交易所发现 WBTC 的价格差异很大。我们可以使用闪电贷在没有任何抵押品的情况下借入大量 WBTC，从而从差价中获利。\n\n闪贷的第二种用途是清算贷款。如果借款人让协议清算他们的头寸，他们通常会受到惩罚。当市场价格波动较大时，借款人可以选择获得闪贷并自行平仓，避免罚款。让我们看一个例子，我们从 Maker 那里借用 DAI 并以 ETH 作为抵押品。当 ETH 的价格大幅下跌时，它可能会接近我们 DAI 贷款的清算水平。我们可能没有 ETH 来增加我们的抵押品，也没有 DAI 来偿还贷款。我们能做的就是通过 DAI 闪贷来偿还 Maker 贷款。然后，我们可以将部分提取的 ETH 抵押品换成 DAI，以立即偿还闪电贷。\n\n### 闪贷协议：Furucombo\n\nFurucombo是一个平台，允许任何人使用闪贷创建套利策略。由于其拖放工具使最终用户能够构建和自定义不同的 DeFi 组合，降低了组装货币乐高的门槛。请注意，Furucombo 不会为您找到套利机会。要使用 Furucombo，用户需要设置输入/输出和交易的顺序，它将所有立方体捆绑到一个交易中执行。\n\n### 闪贷黑客案例： bZx\n\n2020 年 2 月 15 日，以太坊区块链上发生了一笔交易。在不到一分钟的时间内，在一个区块和一次交易中实现了大约 360,000 美元的利润。\n\n这笔交易引起了加密社区的关注并得到了广泛的分析。收益是通过以闪电贷形式进行的最初几乎无风险的贷款实现的，随后是不同去中心化交易所之间的一系列套利。\n\n![image-20220514141112852](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514141112852.png)\n\n1. 先从dYdX借了10000ETH闪贷\n2. 将5500个质押在Compound来借了112WBTC\n3. 1,300 ETH 存入 bZx 以使用 5 倍杠杆做空 ETH 支持 WBTC。从 bZx 借出的 5,637 ETH 用于使用 KyberSwap 兑换 51 BTC。根据 KyberSwap 算法，Uniswap 提供了最优惠的价格。然而，由于流动性低，掉期将 1 WBTC 的汇率推高至 109.8 WETH 左右，约为期间正常兑换率的三倍。\n4. 攻击者在价格上涨后将借来的 112 WBTC 在 Uniswap 中出售，产生 6,871 ETH，兑换率为 1 WBTC = 61.2 WETH。\n5. 攻击者用未使用的 3,200 ETH 和 6,871 ETH 出售，以 71 ETH 的利润偿还了 10,000 ETH 的闪电贷款\n\n上述事件不仅证明了通过操纵其他资产的价格获得极端资本收益的可能性，而且除了相对较低的协议费用外，借款人也没有其他成本。借款人面临的唯一条件是贷款要在同一笔交易中偿还。因此，无抵押贷款的概念在该领域开辟了广泛的机会。\n\n## 第十六章 金融未来\n\nDeFi 的使命很明确：以更高的透明度、可访问性、效率、便利性和互操作性重塑传统金融的基础设施和界面。\n","source":"_posts/DeFi-Learning-Advance.md","raw":"---\ntitle: DeFi Learning Advance\ndate: 2022-05-14 10:02:55\ntags: Study\ncategories: DeFi\nauthor: Lcy\ncomments: true\nplugins: \n- mathjax\n- katex\n---\n\nA reading note for 《How to DeFi Advance》\n# Part One： State of DeFi\n\n## 第一章 DeFi Snapshot\n\nDeFi 是在2020年夏季开始崛起的。之后发展的就非常迅速了，那个夏天，DeFi协议的市值峰值增长了12倍。\n\n2021年4月，DeFi的总锁定价值（TVL）突破了860.5亿美刀。\n\n总之吧就是说了一下DeFi目前极受关注，有很大的发展前景。但他有一个地方错了，这本书说中国的对这种另类加密货币的看好，实际上，现在看来并不存在这种事情，封杀的挺彻底的。\n\n## 第二章 DeFi Activities\n\n介绍一些我们能够参与DeFi的方式。\n\n### Yield Farming\n\nYield Farming指的是将资金分配给DeFi协议去获取收益。\n\n一些Yield Farming的例子：\n\n- 交易所Exchanges：为去中心化交易所做市提供资金，赚取交易手续费。\n- 借钱Lending\n- 保险Insurance：承保保险，赚取保费，同时承担灾害期间赔付的风险。\n- 期权Options：通过卖出看涨和看跌期权来承销期权以赚取收益。\n- 合成资产Synthetic Assets：铸造稳定币或其他合成资产，赚取费用作为回报。\n\n### Liquidity Mining\n\n流动性挖矿就是你提供一定你持有的加密货币为某个DeFi协议提供流动性支持以换取代币。\n\n### Airdrops\n\n空投，这应该经常听到了。就是免费发的代币，有时候空投就是一种营销策略。存在稀释代币所有权的风险 。如果当年参与了Uniswap的空投等于白赚一大笔。。。。\n\n### Initial DEX Offerings (IDO)\n\n加密项目必须在其代币发布和分发策略上具有创造性。随着去中心化交易所 (DEX)  的日益普及，项目现在有一个可行的选择，即无需支付高额费用即可在中心化交易所上市，直接面向用户。加密项目团队现在可以在不需要这些 DEX  许可的情况下列出他们的代币。\n\n### Initial Bonding Curve Offering (IBCO)\n\n初始债券曲线发行（IBCO）是一个相当新的概念，旨在防止抢先交易行为。本质上，随着越来越多的投资者提供资本进入联合曲线，代币价格将从其初始值增加。但是，您何时选择出资并不重要，因为所有投资者都将根据相同的最终结算价格进行支付。根据 IBCO  结束时的价格，每个投资者将根据他们在投资总资本中的份额获得一部分代币。\n\nExample: Hegic & Aavegotchi\n\n### Liquidity Bootstrapping Pool (LBP)\n\n流动性引导池：项目使用可配置的自动做市出售代币的一种方式。通常，这些池将包含项目代币和抵押代币，通常以稳定币计价。智能池的控制器可以更改其参数并在销售中引入各种功能，例如随着时间的推移价格下降以及由于高需求或外部漏洞而暂停任何进一步的交换。\n\n### Initial Farm Offering (IFO)\n\nPancakeSwap 首次推出的初始农场产品 (IFO) 允许用户质押他们的流动性提供者 (LP)  代币以换取项目的代币。使用溢出机制，用户可以随心所欲地质押。在超额认购的情况下，任何多余的代币都将退还给投标人。 PancakeSwap 上的 IFO 使用  CAKE-BNB LP 代币，项目接收 BNB 代币以换取他们新铸造的协议代币，而剩余的 CAKE 代币被烧毁。\n\n有用的链接：Yield Farming: https://zapper.fi/dashboard\n\n### 风险\n\n- 一个是注意APY是不是动态的，可能有的看起来很高但是随着参与人的增加会下降到一个很普通的值\n- 一个是注意投资的风险 ，包括值不值得投资，毕竟项目太多了，可以投资的太多了，这个市场变化太快，你把握不住\n\n# Part Two： Evaluation DeFi Sectors\n\n## 第三章 去中心化的交易所\n\n### DEX种类：\n\n- 基于订单的DEX：感觉和股市挺像的。\n- 基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）\n\n### AMM算法：\n\n![image-20220425231949161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png)\n\n流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。\n\n当前一些著名的AMM算法：\n\n#### 恒乘积\n\n$$\nx*y = k\n$$\n\nUniswap用的就是常数乘积。\n\n#### 恒和\n\n$$\nx+y=k\n$$\n\n这个模型有缺陷，不能提供无限的流动性。\n\n#### 恒定平均\n\n$$\nv = \\Pi_tB_t^{w_t}\n$$\n\n恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。\n\n#### 稳定交换不变量\n\n$$\nAn^n\\sum X_i+D=ADn^n+\\frac{D^{n+1}}{n^n\\Pi x_i}\n$$\n\n![image-20220425232558126](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png)\n\n### 流动性池类型\n\n- 公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。\n- 私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。\n- 智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。\n\n### AMM的风险\n\n- 价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。\n- Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。\n\n![image-20220425234523467](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png)\n\n- 无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。\n\n### Conclusion\n\nDEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。\n\n## 第四章 DEX聚合器\n\n之前说过DEX聚合器的作用，毕竟在AMM算法的加持下，比如说Uniswap的恒乘积策略下，当交易金额很高的时候对应的手续费也就越高。这显然对于哦我们交易者来说是不可接受的。所以就有了DEX聚合器就是DEX Aggregators。DEX聚合器能够将一笔较大的交易拆分，去不同的去中心化交易所交易，相当于综合了所有的去中心化交易所的流动性，而不用单纯的看一个交易所的流动性，大幅度降低了你作为一个用户来说在一家交易所交易大额所面临的高额手续费又或者减少了你自己去找哪里便宜这种麻烦事。\n\n评价DEX聚合器的四个指标：\n\n- 路由算法\n- 流动性资源\n- 当前的市场状态\n- 交易规模\n\n![image-20220426145303291](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png)\n\n![image-20220426145317120](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png)\n\n### 风险提示\n\n咱就是说有时候DEX聚合器不一定靠谱，对于部分小的交易可能直接去DEX比较方便，成本也是更低的。\n\n## 第五章 去中心化的借贷\n\n比较著名的几个借贷协议：Compound、Maker、Avae、Cream\n\n这些在beginner一书里面说过。\n\n### 风险提示\n\n注意智能合约漏洞等技术风险。\n\n黑客可能会利用并耗尽这些协议上的抵押品。此外，许多借贷协议依赖价格预言机（第 12  章会详细介绍）来提供链上价格数据。价格预言可能会失败或被利用。 2020 年 11 月，Compound 的价格预言被利用，将 Coinbase Pro 上的  DAI 价格推高了 30%，导致价值 8900 万美元的贷款被清算。25  但是，作为借款人，主要风险包括因管理不善而失去抵押品抵押率。加密货币以其极端的价格波动而闻名，您的贷款可能会低于其最低抵押品比率并被清算。这不是一个理想的结果，因为您将承担相当大的损失并支付清算费用。因此，持续监控和维持健康的贷款抵押比率至关重要。\n\n## 第六章 去中心化的稳定币和稳定资产\n\nUSDT就不用再介绍了，太常见了。Tether就是1美元换1USDT。\n\nDAI也不用说了，是Maker发行的，现在稳如老狗。\n\n### 算法稳定币\n\n算法稳定币就是用算法来控制稳定币的市场结构和基础经济。大多数算法稳定币都与美元挂钩，有些是浮动挂钩，形成了算法稳定资产。与算法稳定币不同，算法稳定资产可以被视为另一种形式的抵押品。\n\n![image-20220426155420044](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png)\n\n### Rebase Model\n\n变基模型通过改变稳定币的全部供应来控制价格。根据稳定币的价格是高于还是低于预期挂钩，协议将在固定期限内自动增加或减少每个持有者钱包中的供应量。这样做的原因是，通过强制控制供应，可以根据简单的通货膨胀/通货紧缩经济理论来影响稳定币的价格。该模型的开创性协议是 Ampleforth ——AMPL。\n\n### Seigniorage Model铸币税模型\n\n铸币税模型通过引入影响市场动态的奖励系统来控制价格。如果价格高于挂钩，则铸造新的代币并提供给提供流动性或持有代币的参与者。如果价格低于挂钩，则停止铸造代币，并引入机制以减少供应。用户可以购买优惠券来燃烧底层代币以将其从供应中移除。这些优惠券可能会在未来兑换更多代币，但前提是不亏。\n\n三种基础的铸币税模型例子。\n\n1. Empty Set Dollar（ESD）\n\n2. Basis Cash\n\n3. Frax Finance\n\n可惜啊，梦想是美好的现实是骨感的。实际上的表现并不是那么尽如人意。这些币最终都跌的一塌糊涂，就UST、sUSD、FRAX最终还能保持和美元的挂钩。\n\n### 风险提示\n\n- 目前算法稳定币仍处于试验阶段\n- 稳定币需要一个比较强大的社区\n- 建议使用较多的时间来了解之后再考虑投资\n\n## 第七章 去中心化衍生品\n\n### 永续协议\n\n永续协议是一种提供永续合约交易的去中心化协议，允许用户在各种加密资产上开立高达十倍的杠杆多头或空头头寸。为了实现这一点，Perpetual Protocol  使用了一种独特的虚拟自动做市商 (vAMM) 方法。功能类似于 Uniswap 和 Balancer 的 AMM，交易者可以直接通过 vAMM  执行交易。主要区别在于“虚拟”部分。在传统的  AMM 中，资产存储在智能合约中，每种资产的交易价格通过特定的数学函数确定。永续协议中的 vAMM 不存储任何资产。取而代之的是，实物资产存储在一个以 USDC  计价的智能合约保险库中，成为用户开设杠杆头寸的抵押品。保险库中的资金总额基本上构成了交易者利润的上限。每个永续合约都有自己特定的  vAMM，但它们都受到协议保险基金的保护。 Perpetual Protocol 能够通过使用 xDai 链进行交易执行来提供更高的交易速度和最少的 gas  交易。使用 vAMM，用户将能够获得高流动性和低滑点来满足他们的交易需求。\n\n### 合成资产\n\n合成资产是与另一种资产具有相同价值或效果的资产或资产组合。合成资产跟踪标的资产的价值，并允许在无需持有实际资产本身的情况下接触资产。\n\n### 风险提示\n\n- 注意杠杆，别玩火\n- 可能缺乏流动性\n\n## 第八章 去中心化的保险\n\n保险基于两个假设运作：\n\n1. 大数定律：保险承保的损失事件必须是独立的。如果事件足够频繁地重复，结果将收敛到预期值。\n2. 风险池：损失事件具有频率低、影响大的特点。因此，一大群人支付的保险费补贴了几笔大额索赔的损失。\n\n现在的DeFi行业，毕竟很多代码上的漏洞是很难发现的，所以保险怎么说呢，也算是一种比较必要的东西吧。\n\n**三种保险协议**\n\n### 1. Nexus Mutual\n\n当前最大的保险协议。\n\n提供两种保险：\n\n1. 智能合约遭受攻击时的资金损失，比如遇到经济设计失败、严重的预言机失败、治理攻击等\n2. 监护权保障，承担资金被黑客入侵或停止提款的风险。\n\n代币：NXM\n\n### 2. Armor Protocol\n\nArmor 通过加密原生的动态智能覆盖聚合使对 DeFi 的投资尽可能安全。\n\n提供的三种主要保险：\n\n- arNXM\n- arCore\n- arNFT\n\n### 3. Cover Protocol\n\nCover Protocol 由 Yearn Finance 孵化，最初是提供 yInsure 的 Safe Protocol。但由于创始人 Alan 和著名社区成员 Azeem Ahmed 之间的一些内讧，该项目被取消。 Azeem 接管了 yInsure 产品并发布了 Armor Protocol，而 Alan 继续发布 Cover Protocol。\n\n![image-20220514095759994](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514095759994.png)\n\n### 相关风险\n\n索赔赔付很大程度上取决于保险提供商和购买者之间的协议。在解释协议时总是存在细微差别，尤其是在涉及大额索赔的高风险场景。每个保险协议都会有自己的方式来决定支付什么，这可能不一定对所有买家都公平。购买者应了解保险产品提供的当前限制。作为保险协议的资金提供者是一项复杂的操作，用户在决定参与之前应该对风险有一个完整的了解。如果索赔的概率高于预期，Stakers 可能会蒙受损失。\n\n# Part Three：Emerging DeFi Categories\n\n## 第九章 去中心化指数\n\n可以把去中心化指数看成ETF\n\n### 指数协议：Index Cooperative\n\nIndex Coop 使用户能够广泛接触加密货币行业不同主题的不同协议。指数代币持有者可以拥有、接触并可以直接赎回构成指数的基础资产。\n\n### 指数协议：Indexed Finance（NDX）\n\nIndexed Finance 是一种专注于投资组合管理的协议。用户可以铸造、交换或销毁指数代币和基础资产，Balancer 分叉的集成自动做市商 (AMM) 机制会自动重新平衡其指数。\n\n### 指数协议：PowerPool Concentrated Voting Power (CVP)\n\nPowerPool 的指数是基于 Balancer 的自动做市商 (AMM) 的智能池，具有附加功能。其主要目的是将治理代币汇集在一起，用于借贷和执行元治理。此外，用户可以直接将一种治理代币换成另一种。\n\n### 协议比较\n\n协议费用：\n\n![image-20220514102110851](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102110851.png)\n\n基金权重：\n\n![image-20220514102332048](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102332048.png)\n\n一般有三种权重计算方式：\n\n- Market Cap Weighted：该方法动态跟踪每项资产的市值，其中每项资产的分配与其相对于指数中其他资产的市值成正比。相对于较小的，使用这种方法的指数将集中在市值较大的代币上，从而使该指数能够密切模仿实际的市场表现。\n- Square Root of Market Cap Weighted:Indexed Finance 上的所有指数均基于相对于每个标的资产的市值的平方根。这种方法抑制了市场表现倾向于更大市值硬币的影响。\n- Equally-Weighted Market Cap Weighted:\n- This method sets asset allocation equally. For example, there are \n  eight underlying assets in PIPT. Hence each of the assets is set to \n  12.5% weightage. An equal-weighted strategy is driven by price \n  momentum and would favor smaller market capitalization coins. \n  Smaller market capitalization coins are given the same importance \n  as large market capitalization coins. \n\n### 风险提示\n\n1. 代码就是法律，防不住黑客，尽管代码确实都经过了审计\n2. Mercenary Capital，大多数指数协议都有流动性挖掘计划，以激励流动性提供者并引导指数代币的流动性。然而，这些资本中的大部分通常被称为“雇佣资本”。这些资金纯粹是在寻求高回报，一旦出现另一个收益率更高的协议，就会退出。因此，一旦流动性挖矿奖励枯竭，可能会导致大量提款，从而导致指数协议呈螺旋式下降。\n3. 系统性风险：在 DeFi 中，协议可以像金钱乐高一样堆叠在一起。然而，可组合性可能是一把双刃剑，因为它引入了系统性风险。例如，PowerPool 的 Yearn Lazy APE (YLA) 从其五个基础 Yearn 的稳定币保险库中有十种不同的风险敞口。\n\n## 第十章 去中心化的预测市场\n\n预测市场是为参与者对未来事件的结果进行投注而创建的市场。传统预测市场的一个很好的例子是体育博彩平台。去中心化预测市场利用区块链技术在几乎任何事物上创建预测市场。例如，可以根据比特币价格何时超过 100,000 美元或下一任美国总统是谁来制定预测市场。去中心化预测市场的支持者认为，中心化平台使用户处于不利地位。标准做法包括高额交易费用、延迟提款和冻结账户。此外，当今大多数传统博彩平台都专注于体育博彩，限制了公众可用的预测市场类型。去中心化预测市场协议旨在通过允许用户创建自己的市场来赋予用户权力。\n\nWhatever就是 菠菜\n\n### Augur\n\n[Augur 在以太坊网络上运行，并使用决议模型，通过奖励和惩罚来激励用户准确报告信息。](https://augur.net/blog/prediction-markets)市场收盘后，它将进入市场创建者或其他人（取决于市场谁）的报告期指定为指定报告者的创建者）可以提供信息以验证结果。\n\n### Omen\n\n[Omen 是由 DXdao 开发并由 Gnosis 协议提供支持的预测协议 - 它在以太坊和 xDai 侧链上运行。]( https://omen.eth.link/)Gnosis 允许 Omen 用户使用他们的代币框架，这是一个基于事件的资产类别，包含预测市场的构建块.\n\n### 区别 \n\nAugur 通过创建一个激励和惩罚生态系统来规范报告信息的可靠性，从而解决了预言机问题。 Omen 将他们的报告需求外包给外部 DAO（使用与 Augur 方法类似的原则）。从这个意义上说，Augur 更加自给自足。\n\n### 风险提示\n\n预测市场最大的担忧是数据的可靠性。虽然有多种基于利润的激励措施可以最大限度地减少数据操纵，但非理性行为者可能会试图危及结果。此外，受挑战的结果可能会导致耗时且成本高昂的情况。\n\n## 第十一章 去中心化的固定利率协议\n\n固定利率协议：Fixed-Interest Rate Protocols（FIRPs）\n\n1. 借贷\n2. 收益聚合\n\n### Yield\n\nYield 是一个去中心化借贷系统，它使用一种名为“fyTokens”的新型代币提供固定利率借贷和利率市场。当前迭代（版本 1）包括 DAI 稳定币的 fyToken。这种被称为“fyDai”的新型代币可以在 DAI 中实现完全抵押的固定利率借贷。\n\nfyDai 代币是基于以太坊的代币 (ERC20)，可以在预定的到期日后兑换为 DAI。 fyDai 类似于零息票或贴现债券。要铸造或出售 fyDai，借款人必须提供目前遵循与 MakerDao 相同的抵押率（150%）的 ETH 抵押品。贷方购买 fyDai，其定价通常低于 DAI。贴现值与 1 DAI（到期值）之间的差额代表贷方的借贷利率或借款人的借贷利率。\n\n### Saffron.Finance\n\nSaffron Finance 是面向流动性提供者的去中心化收益聚合器，是最早使用基于批次的系统的协议之一。 批次是从流动性池中创建的部分，按风险、到期时间或其他可销售的特征进行划分不同的投资者。\n\n### Horizon Finance\n\n与传统的收益聚合器不同，Horizon 允许用户根据博弈论原则创建自己的市场。博弈论设想了一个只有理性参与者的环境。在这种假设情况下，买卖双方将根据可用信息做出最佳决策。\n\n### 风险提示\n\n最重要的风险之一是 FIRP 提供固定利率的能力。这些协议中的大多数都依赖于外部代理或其他用户积极参与协议来驱动市场功能。如果存在不活跃的社区或用户配置文件和流动性不成比例的数量（例如，Yield 的贷方多于借款人，或者 Saffron Finance 的 A 部分参与者多于 AA 部分），FIRP 可能无法支持其固定利息率。\n\n## 第十二章 去中心化的收益聚合器\n\n### Yearn Finance\n\nYearn Finance 旨在自动化借贷平台之间的资本转换，以寻找 DeFi 借贷平台提供的最佳收益。大多数 DeFi 借贷平台提供浮动利率而不是固定利率。随着这些协议之间的利率变化，资金会在 dYdX、Aave 和 Compound 之间自动转移。该服务包括主要的美元稳定币，如 DAI、USDT、USDC 和 TUSD。例如，如果用户将 DAI 存入 Yearn Finance，则用户将收到一个 yDAI 代币作为回报，这是一个产生收益的 DAI 代币。后来，Yearn Finance 与 Curve Finance 合作发布了一个名为 yUSD 的具有收益的美元代币池。 \n\n### Alpha Finance\n\nAlpha Finance 通过他们的第一个产品 Alpha Homora 引入了杠杆收益农业，允许用户使用借来的资金来增加他们在收益农业活动中的曝光率。从本质上讲，它既充当借贷协议又充当收益聚合协议。\n\n### Badger Finance\n\nBadger DAO 旨在创建一个 DeFi 产品生态系统，最终目标是将比特币带入以太坊。这是第一个选择将比特币作为主要储备资产而不是使用以太坊的 DeFi 项目。\n\n### Harvest Finance\n\n从 Yearn Finance 的分支开始，Harvest Finance 采用了快速推进策略。它一直在比其他收益聚合器协议更快地发布新策略，即使是那些被认为是高风险的协议\n\n### 风险提示\n\n由于收益聚合器从风险更高的协议中寻求高收益的性质，它们面临着很高的黑客风险。在四种协议中，只有 Badger DAO 尚未被黑客入侵（截至 2021 年 4 月）。与保险协议的整合仍然乏善可陈，这可能是进一步增长该行业锁定的总价值的最大瓶颈。随着更多保险协议的推出，未来我们可能会看到保险收益聚合器产品的推出。\n\n# Part Four: Technology Underpinning DeFi\n\n## 第十三章 预言机和数据聚合器\n\nDeFi 由智能合约提供支持。产生输出所需的输入包括未存储在区块链上的真实数据，例如天气状况或交通信息。需要协议通过将链下数据中继到区块链上来弥合差距，以便智能合约与数据进行交互。\n\n链下信息是 DeFi 不可或缺的一部分，应始终有效且准确。拥有虚假数据将完全歪曲特定项目并给 DeFi 带来重大问题。但是，我们如何确保所提供的数据始终准确且值得信赖？一些协议旨在通过在不被操纵或篡改的情况下将数据传输和广播到区块链上来实现这一点。这通常通过投票或共识机制完成，验证者同意最准确的数据。如果没有预言机或数据聚合器作为主要的“真相来源”，不良行为者可以利用虚假信息来利用毫无戒心的用户。\n\n所以，需要想办法弥补区块链和现实之间的数据误差。\n\n### Oracle Protocol：Chainlink\n\nChainlink 是用于构建去中心化预言机网络的框架和基础设施，可将任何区块链网络上的智能合约安全地连接到外部数据资源和链下计算。每个预言机网络都由独立且抗 Sybil 的节点运营商保护，这些节点运营商从众多链下数据提供者那里获取数据，将信息聚合成一个值，然后在链上交付以供智能合约执行。\n\n### Oracle Protocol: Band Protocol\n\nBand Protocol 是一个跨链预言机平台，将智能合约与外部数据和 API 连接起来。与 Band Protocol 集成的去中心化应用程序通过 Band Protocol 的智能合约数据点接收数据，而不是直接从链下预言机接收数据。\n\n\n\n如果预言机将现实世界的数据连接到区块链，那么数据聚合器可以帮助用户读取它。这些协议将区块链数据编译为简化格式，使项目和个人用户更容易创建他们的分析仪表板。\n\n### Data Aggregators: The Graph Protocol\n\nThe Graph 是一种去中心化协议，用于从以太坊、Polkadot 和 Solana 等区块链查询和接收数据。虽然通过读取区块链上的合约地址直接检索查询更简单，但具有更高特异性和粒度的数据更难找到。 Graph 通过将区块链数据索引到“子图”或可以使用标准 GraphQL API 查询的开放 API 来解决这个问题。\n\n### Data Aggregators: Covalent \n\nCovalent 是一个区块链数据提供商，它提供了一个统一的 API 来访问看似无穷无尽的链上数据。可以使用单个 API 检索来自各种区块链的代币余额和钱包活动的详细信息，从而使开发人员更容易创建分析仪表板或收集有关区块链活动的见解。 \n\n### 风险提示\n\n随着越来越多的协议开始依赖在最恶劣环境中经过实战考验的长期产品，记住这些产品可能并非完全万无一失也很重要。如果发生黑天鹅事件，预言机可能无法有效地提供数据，从而导致做出不准确的决策。在 2020 年 3 月，也称为黑色星期四，Chainlink 和 MakerDAO 的“Medianizer”等预言机未能足够快地更新其价格信息，导致价格严重错误。 MakerDAO 的价格失败引发了一系列灾难性事件，导致 CDP 所有者损失了价值超过 800 万美元的 ETH 抵押品。\n\n## 第十四章 多链和跨链协议\n\n### Ren Project\n\nRen Project 是一个无需许可的协议，允许用户在区块链之间匿名交互和传输代币。 Ren 协议通过 Ren 虚拟机 (RenVM) 提供支持的 RenBridge 实现这一点。\n\n### ThorChain\n\nThorChain 是一个去中心化的流动性网络，具有可互操作的区块链，允许以非托管方式进行跨链代币交换。它不固定或包装资产，但允许用户在各种第 1 层区块链之间交换代币。例如，ThorChain 上的交易者可以将他们的资产从比特币无缝转移到以太坊，而无需注册或通过中心化交易所的 KYC 流程。\n\n### Binance Bridge\n\n使用 Binance Bridge，用户可以在各种区块链之间转移资金，例如 Ethereum、Tron 或 Binance Smart Chain (BSC) 网络。每个特定资产仅支持特定的区块链。例如，Cosmos (ATOM) 和 Ontology (ONT) 等其他区块链的原生代币仅限于币安智能链、币安链或其原生网络之间的转账。每个区块链每天可以转账的数量有限制资产。\n\n### Anyswap\n\nAnyswap 是一个去中心化的跨链交易所，支持以太坊、币安智能链、Fantom 等八种不同的区块链。它为用户提供了一个多合一的平台，可以将他们的资产交换或转换到其他区块链上。用户可以选择将其资产存入铸币包装代币的传统方法，或直接执行跨链交换以将其代币换成不同区块链上的另一个代币。\n\n### Terra Bridge\n\nTerra Bridge 是一个应用程序，供用户将 Terra 区块链上支持的 Terra 资产发送到以太坊和币安智能链网络。这些资产包括 LUNA（Terra 的原生代币）、UST（Terra USD）等 Terra 稳定币，以及 mTSLA（Tesla）和 mAAPL（Apple Inc.）等镜像资产。\n\n## 第十五章 DeFi Exploits\n\n参与DeFi有风险，2020年的时候啊，就出现了12起黑客事件，总共损失了$121m。\n\nDeFi 的最大风险在于，随着项目利用 DeFi 的可组合性并相互构建，DeFi 应用程序的复杂性呈指数级增长，这使得智能合约审计人员更难发现弱点。 DeFi 应用程序开发人员必须确保网络安全审计人员不断检查他们的代码，以减少任何被利用的可能性，因为错误的后果将是巨大的经济损失。\n\n1. 经济漏洞/闪电贷款：只要借款人在同一笔交易中偿还贷款，闪电贷允许用户利用几乎无限的资金进行金融交易。它是一种强大的工具，可以让人们操纵过去受资本要求限制的经济攻击。对于闪电贷款，拥有正确的策略是利用机会的唯一要求。几乎所有的 DeFi 黑客都使用了闪电贷。\n2. 项目审计：不是所有项目都负担的起审计，这就会给黑客可乘之机\n3. 编码草率 审计不足：在牛市中，许多项目团队感到有压力快速行动并采取捷径更快地发布他们的产品。有些人可能会决定完全跳过审核以获得先发优势，并且仅在产品上线几个月后进行审核。还有很多“分叉”——使用与其他已建立项目相同的代码的新项目。在没有完全了解代码工作原理的情况下启动它们，它们被视为快速现金攫取，导致许多漏洞。\n4. Rug Pull：在 DeFi 领域，由匿名团队发起的项目并不少见。有些人这样做是为了避免由于不确定的监管环境而受到监管机构的审查。这就导致如果遇到恶意的项目开发者你追溯不到\n5. 预言机攻击：DeFi 协议需要知道资产价格才能正常运行。例如，借贷协议需要知道资产价格来决定是否清算借款人的头寸。因此，作为 DeFi 基础设施不可或缺的一部分，预言机可能会受到重度操纵。例如，我们在第 12 章中提到了 MakerDao 的金库被利用如何导致不必要的金库清算，造成总计超过 800 万美元的 ETH 损失。\n6. Metamask攻击：就是攻击你的钱包，不过他们安全团队比较牛逼目前没有出事。\n\n### 闪电贷款\n\n闪贷是指用户可以在没有任何抵押品的情况下借入资金的贷款，只要用户在同一笔交易中偿还贷款。如果用户没有在同一笔交易中偿还闪贷，交易将自动失败，造成交易费用损失，并确保闪贷不会发生。闪贷由各种 DeFi 协议提供，例如 Aave和 dYdX。\n\n闪电贷主要用于套利目的。套利是利用市场之间的价格差异来获利的行为。例如，假设我们在两个不同的去中心化交易所发现 WBTC 的价格差异很大。我们可以使用闪电贷在没有任何抵押品的情况下借入大量 WBTC，从而从差价中获利。\n\n闪贷的第二种用途是清算贷款。如果借款人让协议清算他们的头寸，他们通常会受到惩罚。当市场价格波动较大时，借款人可以选择获得闪贷并自行平仓，避免罚款。让我们看一个例子，我们从 Maker 那里借用 DAI 并以 ETH 作为抵押品。当 ETH 的价格大幅下跌时，它可能会接近我们 DAI 贷款的清算水平。我们可能没有 ETH 来增加我们的抵押品，也没有 DAI 来偿还贷款。我们能做的就是通过 DAI 闪贷来偿还 Maker 贷款。然后，我们可以将部分提取的 ETH 抵押品换成 DAI，以立即偿还闪电贷。\n\n### 闪贷协议：Furucombo\n\nFurucombo是一个平台，允许任何人使用闪贷创建套利策略。由于其拖放工具使最终用户能够构建和自定义不同的 DeFi 组合，降低了组装货币乐高的门槛。请注意，Furucombo 不会为您找到套利机会。要使用 Furucombo，用户需要设置输入/输出和交易的顺序，它将所有立方体捆绑到一个交易中执行。\n\n### 闪贷黑客案例： bZx\n\n2020 年 2 月 15 日，以太坊区块链上发生了一笔交易。在不到一分钟的时间内，在一个区块和一次交易中实现了大约 360,000 美元的利润。\n\n这笔交易引起了加密社区的关注并得到了广泛的分析。收益是通过以闪电贷形式进行的最初几乎无风险的贷款实现的，随后是不同去中心化交易所之间的一系列套利。\n\n![image-20220514141112852](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514141112852.png)\n\n1. 先从dYdX借了10000ETH闪贷\n2. 将5500个质押在Compound来借了112WBTC\n3. 1,300 ETH 存入 bZx 以使用 5 倍杠杆做空 ETH 支持 WBTC。从 bZx 借出的 5,637 ETH 用于使用 KyberSwap 兑换 51 BTC。根据 KyberSwap 算法，Uniswap 提供了最优惠的价格。然而，由于流动性低，掉期将 1 WBTC 的汇率推高至 109.8 WETH 左右，约为期间正常兑换率的三倍。\n4. 攻击者在价格上涨后将借来的 112 WBTC 在 Uniswap 中出售，产生 6,871 ETH，兑换率为 1 WBTC = 61.2 WETH。\n5. 攻击者用未使用的 3,200 ETH 和 6,871 ETH 出售，以 71 ETH 的利润偿还了 10,000 ETH 的闪电贷款\n\n上述事件不仅证明了通过操纵其他资产的价格获得极端资本收益的可能性，而且除了相对较低的协议费用外，借款人也没有其他成本。借款人面临的唯一条件是贷款要在同一笔交易中偿还。因此，无抵押贷款的概念在该领域开辟了广泛的机会。\n\n## 第十六章 金融未来\n\nDeFi 的使命很明确：以更高的透明度、可访问性、效率、便利性和互操作性重塑传统金融的基础设施和界面。\n","slug":"DeFi-Learning-Advance","published":1,"updated":"2022-07-02T15:49:59.937Z","_id":"cl3iqqes40036l0em8qnpaco2","layout":"post","photos":[],"link":"","content":"<p>A reading note for 《How to DeFi Advance》</p>\n<h1 id=\"Part-One：-State-of-DeFi\"><a href=\"#Part-One：-State-of-DeFi\" class=\"headerlink\" title=\"Part One： State of DeFi\"></a>Part One： State of DeFi</h1><h2 id=\"第一章-DeFi-Snapshot\"><a href=\"#第一章-DeFi-Snapshot\" class=\"headerlink\" title=\"第一章 DeFi Snapshot\"></a>第一章 DeFi Snapshot</h2><div class=\"story post-story\"><p>DeFi 是在2020年夏季开始崛起的。之后发展的就非常迅速了，那个夏天，DeFi协议的市值峰值增长了12倍。</p>\n<p>2021年4月，DeFi的总锁定价值（TVL）突破了860.5亿美刀。</p>\n<p>总之吧就是说了一下DeFi目前极受关注，有很大的发展前景。但他有一个地方错了，这本书说中国的对这种另类加密货币的看好，实际上，现在看来并不存在这种事情，封杀的挺彻底的。</p>\n</div><h2 id=\"第二章-DeFi-Activities\"><a href=\"#第二章-DeFi-Activities\" class=\"headerlink\" title=\"第二章 DeFi Activities\"></a>第二章 DeFi Activities</h2><div class=\"story post-story\"><p>介绍一些我们能够参与DeFi的方式。</p>\n<h3 id=\"Yield-Farming\"><a href=\"#Yield-Farming\" class=\"headerlink\" title=\"Yield Farming\"></a>Yield Farming</h3><p>Yield Farming指的是将资金分配给DeFi协议去获取收益。</p>\n<p>一些Yield Farming的例子：</p>\n<ul>\n<li>交易所Exchanges：为去中心化交易所做市提供资金，赚取交易手续费。</li>\n<li>借钱Lending</li>\n<li>保险Insurance：承保保险，赚取保费，同时承担灾害期间赔付的风险。</li>\n<li>期权Options：通过卖出看涨和看跌期权来承销期权以赚取收益。</li>\n<li>合成资产Synthetic Assets：铸造稳定币或其他合成资产，赚取费用作为回报。</li>\n</ul>\n<h3 id=\"Liquidity-Mining\"><a href=\"#Liquidity-Mining\" class=\"headerlink\" title=\"Liquidity Mining\"></a>Liquidity Mining</h3><p>流动性挖矿就是你提供一定你持有的加密货币为某个DeFi协议提供流动性支持以换取代币。</p>\n<h3 id=\"Airdrops\"><a href=\"#Airdrops\" class=\"headerlink\" title=\"Airdrops\"></a>Airdrops</h3><p>空投，这应该经常听到了。就是免费发的代币，有时候空投就是一种营销策略。存在稀释代币所有权的风险 。如果当年参与了Uniswap的空投等于白赚一大笔。。。。</p>\n<h3 id=\"Initial-DEX-Offerings-IDO\"><a href=\"#Initial-DEX-Offerings-IDO\" class=\"headerlink\" title=\"Initial DEX Offerings (IDO)\"></a>Initial DEX Offerings (IDO)</h3><p>加密项目必须在其代币发布和分发策略上具有创造性。随着去中心化交易所 (DEX)  的日益普及，项目现在有一个可行的选择，即无需支付高额费用即可在中心化交易所上市，直接面向用户。加密项目团队现在可以在不需要这些 DEX  许可的情况下列出他们的代币。</p>\n<h3 id=\"Initial-Bonding-Curve-Offering-IBCO\"><a href=\"#Initial-Bonding-Curve-Offering-IBCO\" class=\"headerlink\" title=\"Initial Bonding Curve Offering (IBCO)\"></a>Initial Bonding Curve Offering (IBCO)</h3><p>初始债券曲线发行（IBCO）是一个相当新的概念，旨在防止抢先交易行为。本质上，随着越来越多的投资者提供资本进入联合曲线，代币价格将从其初始值增加。但是，您何时选择出资并不重要，因为所有投资者都将根据相同的最终结算价格进行支付。根据 IBCO  结束时的价格，每个投资者将根据他们在投资总资本中的份额获得一部分代币。</p>\n<p>Example: Hegic &amp; Aavegotchi</p>\n<h3 id=\"Liquidity-Bootstrapping-Pool-LBP\"><a href=\"#Liquidity-Bootstrapping-Pool-LBP\" class=\"headerlink\" title=\"Liquidity Bootstrapping Pool (LBP)\"></a>Liquidity Bootstrapping Pool (LBP)</h3><p>流动性引导池：项目使用可配置的自动做市出售代币的一种方式。通常，这些池将包含项目代币和抵押代币，通常以稳定币计价。智能池的控制器可以更改其参数并在销售中引入各种功能，例如随着时间的推移价格下降以及由于高需求或外部漏洞而暂停任何进一步的交换。</p>\n<h3 id=\"Initial-Farm-Offering-IFO\"><a href=\"#Initial-Farm-Offering-IFO\" class=\"headerlink\" title=\"Initial Farm Offering (IFO)\"></a>Initial Farm Offering (IFO)</h3><p>PancakeSwap 首次推出的初始农场产品 (IFO) 允许用户质押他们的流动性提供者 (LP)  代币以换取项目的代币。使用溢出机制，用户可以随心所欲地质押。在超额认购的情况下，任何多余的代币都将退还给投标人。 PancakeSwap 上的 IFO 使用  CAKE-BNB LP 代币，项目接收 BNB 代币以换取他们新铸造的协议代币，而剩余的 CAKE 代币被烧毁。</p>\n<p>有用的链接：Yield Farming: <a href=\"https://zapper.fi/dashboard\">https://zapper.fi/dashboard</a></p>\n<h3 id=\"风险\"><a href=\"#风险\" class=\"headerlink\" title=\"风险\"></a>风险</h3><ul>\n<li>一个是注意APY是不是动态的，可能有的看起来很高但是随着参与人的增加会下降到一个很普通的值</li>\n<li>一个是注意投资的风险 ，包括值不值得投资，毕竟项目太多了，可以投资的太多了，这个市场变化太快，你把握不住</li>\n</ul>\n<h1 id=\"Part-Two：-Evaluation-DeFi-Sectors\"><a href=\"#Part-Two：-Evaluation-DeFi-Sectors\" class=\"headerlink\" title=\"Part Two： Evaluation DeFi Sectors\"></a>Part Two： Evaluation DeFi Sectors</h1></div><h2 id=\"第三章-去中心化的交易所\"><a href=\"#第三章-去中心化的交易所\" class=\"headerlink\" title=\"第三章 去中心化的交易所\"></a>第三章 去中心化的交易所</h2><div class=\"story post-story\"><h3 id=\"DEX种类：\"><a href=\"#DEX种类：\" class=\"headerlink\" title=\"DEX种类：\"></a>DEX种类：</h3><ul>\n<li>基于订单的DEX：感觉和股市挺像的。</li>\n<li>基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）</li>\n</ul>\n<h3 id=\"AMM算法：\"><a href=\"#AMM算法：\" class=\"headerlink\" title=\"AMM算法：\"></a>AMM算法：</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220425231949161\"></p>\n<p>流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。</p>\n<p>当前一些著名的AMM算法：</p>\n<h4 id=\"恒乘积\"><a href=\"#恒乘积\" class=\"headerlink\" title=\"恒乘积\"></a>恒乘积</h4><p>$$<br>x*y = k<br>$$</p>\n<p>Uniswap用的就是常数乘积。</p>\n<h4 id=\"恒和\"><a href=\"#恒和\" class=\"headerlink\" title=\"恒和\"></a>恒和</h4><p>$$<br>x+y=k<br>$$</p>\n<p>这个模型有缺陷，不能提供无限的流动性。</p>\n<h4 id=\"恒定平均\"><a href=\"#恒定平均\" class=\"headerlink\" title=\"恒定平均\"></a>恒定平均</h4><p>$$<br>v = \\Pi_tB_t^{w_t}<br>$$</p>\n<p>恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。</p>\n<h4 id=\"稳定交换不变量\"><a href=\"#稳定交换不变量\" class=\"headerlink\" title=\"稳定交换不变量\"></a>稳定交换不变量</h4><p>$$<br>An^n\\sum X_i+D=ADn^n+\\frac{D^{n+1}}{n^n\\Pi x_i}<br>$$</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220425232558126\"></p>\n<h3 id=\"流动性池类型\"><a href=\"#流动性池类型\" class=\"headerlink\" title=\"流动性池类型\"></a>流动性池类型</h3><ul>\n<li>公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。</li>\n<li>私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。</li>\n<li>智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。</li>\n</ul>\n<h3 id=\"AMM的风险\"><a href=\"#AMM的风险\" class=\"headerlink\" title=\"AMM的风险\"></a>AMM的风险</h3><ul>\n<li>价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。</li>\n<li>Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。</li>\n</ul>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220425234523467\"></p>\n<ul>\n<li>无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。</li>\n</ul>\n<h3 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h3><p>DEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。</p>\n</div><h2 id=\"第四章-DEX聚合器\"><a href=\"#第四章-DEX聚合器\" class=\"headerlink\" title=\"第四章 DEX聚合器\"></a>第四章 DEX聚合器</h2><div class=\"story post-story\"><p>之前说过DEX聚合器的作用，毕竟在AMM算法的加持下，比如说Uniswap的恒乘积策略下，当交易金额很高的时候对应的手续费也就越高。这显然对于哦我们交易者来说是不可接受的。所以就有了DEX聚合器就是DEX Aggregators。DEX聚合器能够将一笔较大的交易拆分，去不同的去中心化交易所交易，相当于综合了所有的去中心化交易所的流动性，而不用单纯的看一个交易所的流动性，大幅度降低了你作为一个用户来说在一家交易所交易大额所面临的高额手续费又或者减少了你自己去找哪里便宜这种麻烦事。</p>\n<p>评价DEX聚合器的四个指标：</p>\n<ul>\n<li>路由算法</li>\n<li>流动性资源</li>\n<li>当前的市场状态</li>\n<li>交易规模</li>\n</ul>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220426145303291\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220426145317120\"></p>\n<h3 id=\"风险提示\"><a href=\"#风险提示\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>咱就是说有时候DEX聚合器不一定靠谱，对于部分小的交易可能直接去DEX比较方便，成本也是更低的。</p>\n</div><h2 id=\"第五章-去中心化的借贷\"><a href=\"#第五章-去中心化的借贷\" class=\"headerlink\" title=\"第五章 去中心化的借贷\"></a>第五章 去中心化的借贷</h2><div class=\"story post-story\"><p>比较著名的几个借贷协议：Compound、Maker、Avae、Cream</p>\n<p>这些在beginner一书里面说过。</p>\n<h3 id=\"风险提示-1\"><a href=\"#风险提示-1\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>注意智能合约漏洞等技术风险。</p>\n<p>黑客可能会利用并耗尽这些协议上的抵押品。此外，许多借贷协议依赖价格预言机（第 12  章会详细介绍）来提供链上价格数据。价格预言可能会失败或被利用。 2020 年 11 月，Compound 的价格预言被利用，将 Coinbase Pro 上的  DAI 价格推高了 30%，导致价值 8900 万美元的贷款被清算。25  但是，作为借款人，主要风险包括因管理不善而失去抵押品抵押率。加密货币以其极端的价格波动而闻名，您的贷款可能会低于其最低抵押品比率并被清算。这不是一个理想的结果，因为您将承担相当大的损失并支付清算费用。因此，持续监控和维持健康的贷款抵押比率至关重要。</p>\n</div><h2 id=\"第六章-去中心化的稳定币和稳定资产\"><a href=\"#第六章-去中心化的稳定币和稳定资产\" class=\"headerlink\" title=\"第六章 去中心化的稳定币和稳定资产\"></a>第六章 去中心化的稳定币和稳定资产</h2><div class=\"story post-story\"><p>USDT就不用再介绍了，太常见了。Tether就是1美元换1USDT。</p>\n<p>DAI也不用说了，是Maker发行的，现在稳如老狗。</p>\n<h3 id=\"算法稳定币\"><a href=\"#算法稳定币\" class=\"headerlink\" title=\"算法稳定币\"></a>算法稳定币</h3><p>算法稳定币就是用算法来控制稳定币的市场结构和基础经济。大多数算法稳定币都与美元挂钩，有些是浮动挂钩，形成了算法稳定资产。与算法稳定币不同，算法稳定资产可以被视为另一种形式的抵押品。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220426155420044\"></p>\n<h3 id=\"Rebase-Model\"><a href=\"#Rebase-Model\" class=\"headerlink\" title=\"Rebase Model\"></a>Rebase Model</h3><p>变基模型通过改变稳定币的全部供应来控制价格。根据稳定币的价格是高于还是低于预期挂钩，协议将在固定期限内自动增加或减少每个持有者钱包中的供应量。这样做的原因是，通过强制控制供应，可以根据简单的通货膨胀/通货紧缩经济理论来影响稳定币的价格。该模型的开创性协议是 Ampleforth ——AMPL。</p>\n<h3 id=\"Seigniorage-Model铸币税模型\"><a href=\"#Seigniorage-Model铸币税模型\" class=\"headerlink\" title=\"Seigniorage Model铸币税模型\"></a>Seigniorage Model铸币税模型</h3><p>铸币税模型通过引入影响市场动态的奖励系统来控制价格。如果价格高于挂钩，则铸造新的代币并提供给提供流动性或持有代币的参与者。如果价格低于挂钩，则停止铸造代币，并引入机制以减少供应。用户可以购买优惠券来燃烧底层代币以将其从供应中移除。这些优惠券可能会在未来兑换更多代币，但前提是不亏。</p>\n<p>三种基础的铸币税模型例子。</p>\n<ol>\n<li><p>Empty Set Dollar（ESD）</p>\n</li>\n<li><p>Basis Cash</p>\n</li>\n<li><p>Frax Finance</p>\n</li>\n</ol>\n<p>可惜啊，梦想是美好的现实是骨感的。实际上的表现并不是那么尽如人意。这些币最终都跌的一塌糊涂，就UST、sUSD、FRAX最终还能保持和美元的挂钩。</p>\n<h3 id=\"风险提示-2\"><a href=\"#风险提示-2\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ul>\n<li>目前算法稳定币仍处于试验阶段</li>\n<li>稳定币需要一个比较强大的社区</li>\n<li>建议使用较多的时间来了解之后再考虑投资</li>\n</ul>\n</div><h2 id=\"第七章-去中心化衍生品\"><a href=\"#第七章-去中心化衍生品\" class=\"headerlink\" title=\"第七章 去中心化衍生品\"></a>第七章 去中心化衍生品</h2><div class=\"story post-story\"><h3 id=\"永续协议\"><a href=\"#永续协议\" class=\"headerlink\" title=\"永续协议\"></a>永续协议</h3><p>永续协议是一种提供永续合约交易的去中心化协议，允许用户在各种加密资产上开立高达十倍的杠杆多头或空头头寸。为了实现这一点，Perpetual Protocol  使用了一种独特的虚拟自动做市商 (vAMM) 方法。功能类似于 Uniswap 和 Balancer 的 AMM，交易者可以直接通过 vAMM  执行交易。主要区别在于“虚拟”部分。在传统的  AMM 中，资产存储在智能合约中，每种资产的交易价格通过特定的数学函数确定。永续协议中的 vAMM 不存储任何资产。取而代之的是，实物资产存储在一个以 USDC  计价的智能合约保险库中，成为用户开设杠杆头寸的抵押品。保险库中的资金总额基本上构成了交易者利润的上限。每个永续合约都有自己特定的  vAMM，但它们都受到协议保险基金的保护。 Perpetual Protocol 能够通过使用 xDai 链进行交易执行来提供更高的交易速度和最少的 gas  交易。使用 vAMM，用户将能够获得高流动性和低滑点来满足他们的交易需求。</p>\n<h3 id=\"合成资产\"><a href=\"#合成资产\" class=\"headerlink\" title=\"合成资产\"></a>合成资产</h3><p>合成资产是与另一种资产具有相同价值或效果的资产或资产组合。合成资产跟踪标的资产的价值，并允许在无需持有实际资产本身的情况下接触资产。</p>\n<h3 id=\"风险提示-3\"><a href=\"#风险提示-3\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ul>\n<li>注意杠杆，别玩火</li>\n<li>可能缺乏流动性</li>\n</ul>\n</div><h2 id=\"第八章-去中心化的保险\"><a href=\"#第八章-去中心化的保险\" class=\"headerlink\" title=\"第八章 去中心化的保险\"></a>第八章 去中心化的保险</h2><div class=\"story post-story\"><p>保险基于两个假设运作：</p>\n<ol>\n<li>大数定律：保险承保的损失事件必须是独立的。如果事件足够频繁地重复，结果将收敛到预期值。</li>\n<li>风险池：损失事件具有频率低、影响大的特点。因此，一大群人支付的保险费补贴了几笔大额索赔的损失。</li>\n</ol>\n<p>现在的DeFi行业，毕竟很多代码上的漏洞是很难发现的，所以保险怎么说呢，也算是一种比较必要的东西吧。</p>\n<p><strong>三种保险协议</strong></p>\n<h3 id=\"1-Nexus-Mutual\"><a href=\"#1-Nexus-Mutual\" class=\"headerlink\" title=\"1. Nexus Mutual\"></a>1. Nexus Mutual</h3><p>当前最大的保险协议。</p>\n<p>提供两种保险：</p>\n<ol>\n<li>智能合约遭受攻击时的资金损失，比如遇到经济设计失败、严重的预言机失败、治理攻击等</li>\n<li>监护权保障，承担资金被黑客入侵或停止提款的风险。</li>\n</ol>\n<p>代币：NXM</p>\n<h3 id=\"2-Armor-Protocol\"><a href=\"#2-Armor-Protocol\" class=\"headerlink\" title=\"2. Armor Protocol\"></a>2. Armor Protocol</h3><p>Armor 通过加密原生的动态智能覆盖聚合使对 DeFi 的投资尽可能安全。</p>\n<p>提供的三种主要保险：</p>\n<ul>\n<li>arNXM</li>\n<li>arCore</li>\n<li>arNFT</li>\n</ul>\n<h3 id=\"3-Cover-Protocol\"><a href=\"#3-Cover-Protocol\" class=\"headerlink\" title=\"3. Cover Protocol\"></a>3. Cover Protocol</h3><p>Cover Protocol 由 Yearn Finance 孵化，最初是提供 yInsure 的 Safe Protocol。但由于创始人 Alan 和著名社区成员 Azeem Ahmed 之间的一些内讧，该项目被取消。 Azeem 接管了 yInsure 产品并发布了 Armor Protocol，而 Alan 继续发布 Cover Protocol。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514095759994.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514095759994.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220514095759994\"></p>\n<h3 id=\"相关风险\"><a href=\"#相关风险\" class=\"headerlink\" title=\"相关风险\"></a>相关风险</h3><p>索赔赔付很大程度上取决于保险提供商和购买者之间的协议。在解释协议时总是存在细微差别，尤其是在涉及大额索赔的高风险场景。每个保险协议都会有自己的方式来决定支付什么，这可能不一定对所有买家都公平。购买者应了解保险产品提供的当前限制。作为保险协议的资金提供者是一项复杂的操作，用户在决定参与之前应该对风险有一个完整的了解。如果索赔的概率高于预期，Stakers 可能会蒙受损失。</p>\n<h1 id=\"Part-Three：Emerging-DeFi-Categories\"><a href=\"#Part-Three：Emerging-DeFi-Categories\" class=\"headerlink\" title=\"Part Three：Emerging DeFi Categories\"></a>Part Three：Emerging DeFi Categories</h1></div><h2 id=\"第九章-去中心化指数\"><a href=\"#第九章-去中心化指数\" class=\"headerlink\" title=\"第九章 去中心化指数\"></a>第九章 去中心化指数</h2><div class=\"story post-story\"><p>可以把去中心化指数看成ETF</p>\n<h3 id=\"指数协议：Index-Cooperative\"><a href=\"#指数协议：Index-Cooperative\" class=\"headerlink\" title=\"指数协议：Index Cooperative\"></a>指数协议：Index Cooperative</h3><p>Index Coop 使用户能够广泛接触加密货币行业不同主题的不同协议。指数代币持有者可以拥有、接触并可以直接赎回构成指数的基础资产。</p>\n<h3 id=\"指数协议：Indexed-Finance（NDX）\"><a href=\"#指数协议：Indexed-Finance（NDX）\" class=\"headerlink\" title=\"指数协议：Indexed Finance（NDX）\"></a>指数协议：Indexed Finance（NDX）</h3><p>Indexed Finance 是一种专注于投资组合管理的协议。用户可以铸造、交换或销毁指数代币和基础资产，Balancer 分叉的集成自动做市商 (AMM) 机制会自动重新平衡其指数。</p>\n<h3 id=\"指数协议：PowerPool-Concentrated-Voting-Power-CVP\"><a href=\"#指数协议：PowerPool-Concentrated-Voting-Power-CVP\" class=\"headerlink\" title=\"指数协议：PowerPool Concentrated Voting Power (CVP)\"></a>指数协议：PowerPool Concentrated Voting Power (CVP)</h3><p>PowerPool 的指数是基于 Balancer 的自动做市商 (AMM) 的智能池，具有附加功能。其主要目的是将治理代币汇集在一起，用于借贷和执行元治理。此外，用户可以直接将一种治理代币换成另一种。</p>\n<h3 id=\"协议比较\"><a href=\"#协议比较\" class=\"headerlink\" title=\"协议比较\"></a>协议比较</h3><p>协议费用：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102110851.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102110851.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220514102110851\"></p>\n<p>基金权重：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102332048.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102332048.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220514102332048\"></p>\n<p>一般有三种权重计算方式：</p>\n<ul>\n<li>Market Cap Weighted：该方法动态跟踪每项资产的市值，其中每项资产的分配与其相对于指数中其他资产的市值成正比。相对于较小的，使用这种方法的指数将集中在市值较大的代币上，从而使该指数能够密切模仿实际的市场表现。</li>\n<li>Square Root of Market Cap Weighted:Indexed Finance 上的所有指数均基于相对于每个标的资产的市值的平方根。这种方法抑制了市场表现倾向于更大市值硬币的影响。</li>\n<li>Equally-Weighted Market Cap Weighted:</li>\n<li>This method sets asset allocation equally. For example, there are<br>eight underlying assets in PIPT. Hence each of the assets is set to<br>12.5% weightage. An equal-weighted strategy is driven by price<br>momentum and would favor smaller market capitalization coins.<br>Smaller market capitalization coins are given the same importance<br>as large market capitalization coins. </li>\n</ul>\n<h3 id=\"风险提示-4\"><a href=\"#风险提示-4\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ol>\n<li>代码就是法律，防不住黑客，尽管代码确实都经过了审计</li>\n<li>Mercenary Capital，大多数指数协议都有流动性挖掘计划，以激励流动性提供者并引导指数代币的流动性。然而，这些资本中的大部分通常被称为“雇佣资本”。这些资金纯粹是在寻求高回报，一旦出现另一个收益率更高的协议，就会退出。因此，一旦流动性挖矿奖励枯竭，可能会导致大量提款，从而导致指数协议呈螺旋式下降。</li>\n<li>系统性风险：在 DeFi 中，协议可以像金钱乐高一样堆叠在一起。然而，可组合性可能是一把双刃剑，因为它引入了系统性风险。例如，PowerPool 的 Yearn Lazy APE (YLA) 从其五个基础 Yearn 的稳定币保险库中有十种不同的风险敞口。</li>\n</ol>\n</div><h2 id=\"第十章-去中心化的预测市场\"><a href=\"#第十章-去中心化的预测市场\" class=\"headerlink\" title=\"第十章 去中心化的预测市场\"></a>第十章 去中心化的预测市场</h2><div class=\"story post-story\"><p>预测市场是为参与者对未来事件的结果进行投注而创建的市场。传统预测市场的一个很好的例子是体育博彩平台。去中心化预测市场利用区块链技术在几乎任何事物上创建预测市场。例如，可以根据比特币价格何时超过 100,000 美元或下一任美国总统是谁来制定预测市场。去中心化预测市场的支持者认为，中心化平台使用户处于不利地位。标准做法包括高额交易费用、延迟提款和冻结账户。此外，当今大多数传统博彩平台都专注于体育博彩，限制了公众可用的预测市场类型。去中心化预测市场协议旨在通过允许用户创建自己的市场来赋予用户权力。</p>\n<p>Whatever就是 菠菜</p>\n<h3 id=\"Augur\"><a href=\"#Augur\" class=\"headerlink\" title=\"Augur\"></a>Augur</h3><p><a href=\"https://augur.net/blog/prediction-markets\">Augur 在以太坊网络上运行，并使用决议模型，通过奖励和惩罚来激励用户准确报告信息。</a>市场收盘后，它将进入市场创建者或其他人（取决于市场谁）的报告期指定为指定报告者的创建者）可以提供信息以验证结果。</p>\n<h3 id=\"Omen\"><a href=\"#Omen\" class=\"headerlink\" title=\"Omen\"></a>Omen</h3><p><a href=\"https://omen.eth.link/\">Omen 是由 DXdao 开发并由 Gnosis 协议提供支持的预测协议 - 它在以太坊和 xDai 侧链上运行。</a>Gnosis 允许 Omen 用户使用他们的代币框架，这是一个基于事件的资产类别，包含预测市场的构建块.</p>\n<h3 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h3><p>Augur 通过创建一个激励和惩罚生态系统来规范报告信息的可靠性，从而解决了预言机问题。 Omen 将他们的报告需求外包给外部 DAO（使用与 Augur 方法类似的原则）。从这个意义上说，Augur 更加自给自足。</p>\n<h3 id=\"风险提示-5\"><a href=\"#风险提示-5\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>预测市场最大的担忧是数据的可靠性。虽然有多种基于利润的激励措施可以最大限度地减少数据操纵，但非理性行为者可能会试图危及结果。此外，受挑战的结果可能会导致耗时且成本高昂的情况。</p>\n</div><h2 id=\"第十一章-去中心化的固定利率协议\"><a href=\"#第十一章-去中心化的固定利率协议\" class=\"headerlink\" title=\"第十一章 去中心化的固定利率协议\"></a>第十一章 去中心化的固定利率协议</h2><div class=\"story post-story\"><p>固定利率协议：Fixed-Interest Rate Protocols（FIRPs）</p>\n<ol>\n<li>借贷</li>\n<li>收益聚合</li>\n</ol>\n<h3 id=\"Yield\"><a href=\"#Yield\" class=\"headerlink\" title=\"Yield\"></a>Yield</h3><p>Yield 是一个去中心化借贷系统，它使用一种名为“fyTokens”的新型代币提供固定利率借贷和利率市场。当前迭代（版本 1）包括 DAI 稳定币的 fyToken。这种被称为“fyDai”的新型代币可以在 DAI 中实现完全抵押的固定利率借贷。</p>\n<p>fyDai 代币是基于以太坊的代币 (ERC20)，可以在预定的到期日后兑换为 DAI。 fyDai 类似于零息票或贴现债券。要铸造或出售 fyDai，借款人必须提供目前遵循与 MakerDao 相同的抵押率（150%）的 ETH 抵押品。贷方购买 fyDai，其定价通常低于 DAI。贴现值与 1 DAI（到期值）之间的差额代表贷方的借贷利率或借款人的借贷利率。</p>\n<h3 id=\"Saffron-Finance\"><a href=\"#Saffron-Finance\" class=\"headerlink\" title=\"Saffron.Finance\"></a>Saffron.Finance</h3><p>Saffron Finance 是面向流动性提供者的去中心化收益聚合器，是最早使用基于批次的系统的协议之一。 批次是从流动性池中创建的部分，按风险、到期时间或其他可销售的特征进行划分不同的投资者。</p>\n<h3 id=\"Horizon-Finance\"><a href=\"#Horizon-Finance\" class=\"headerlink\" title=\"Horizon Finance\"></a>Horizon Finance</h3><p>与传统的收益聚合器不同，Horizon 允许用户根据博弈论原则创建自己的市场。博弈论设想了一个只有理性参与者的环境。在这种假设情况下，买卖双方将根据可用信息做出最佳决策。</p>\n<h3 id=\"风险提示-6\"><a href=\"#风险提示-6\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>最重要的风险之一是 FIRP 提供固定利率的能力。这些协议中的大多数都依赖于外部代理或其他用户积极参与协议来驱动市场功能。如果存在不活跃的社区或用户配置文件和流动性不成比例的数量（例如，Yield 的贷方多于借款人，或者 Saffron Finance 的 A 部分参与者多于 AA 部分），FIRP 可能无法支持其固定利息率。</p>\n</div><h2 id=\"第十二章-去中心化的收益聚合器\"><a href=\"#第十二章-去中心化的收益聚合器\" class=\"headerlink\" title=\"第十二章 去中心化的收益聚合器\"></a>第十二章 去中心化的收益聚合器</h2><div class=\"story post-story\"><h3 id=\"Yearn-Finance\"><a href=\"#Yearn-Finance\" class=\"headerlink\" title=\"Yearn Finance\"></a>Yearn Finance</h3><p>Yearn Finance 旨在自动化借贷平台之间的资本转换，以寻找 DeFi 借贷平台提供的最佳收益。大多数 DeFi 借贷平台提供浮动利率而不是固定利率。随着这些协议之间的利率变化，资金会在 dYdX、Aave 和 Compound 之间自动转移。该服务包括主要的美元稳定币，如 DAI、USDT、USDC 和 TUSD。例如，如果用户将 DAI 存入 Yearn Finance，则用户将收到一个 yDAI 代币作为回报，这是一个产生收益的 DAI 代币。后来，Yearn Finance 与 Curve Finance 合作发布了一个名为 yUSD 的具有收益的美元代币池。 </p>\n<h3 id=\"Alpha-Finance\"><a href=\"#Alpha-Finance\" class=\"headerlink\" title=\"Alpha Finance\"></a>Alpha Finance</h3><p>Alpha Finance 通过他们的第一个产品 Alpha Homora 引入了杠杆收益农业，允许用户使用借来的资金来增加他们在收益农业活动中的曝光率。从本质上讲，它既充当借贷协议又充当收益聚合协议。</p>\n<h3 id=\"Badger-Finance\"><a href=\"#Badger-Finance\" class=\"headerlink\" title=\"Badger Finance\"></a>Badger Finance</h3><p>Badger DAO 旨在创建一个 DeFi 产品生态系统，最终目标是将比特币带入以太坊。这是第一个选择将比特币作为主要储备资产而不是使用以太坊的 DeFi 项目。</p>\n<h3 id=\"Harvest-Finance\"><a href=\"#Harvest-Finance\" class=\"headerlink\" title=\"Harvest Finance\"></a>Harvest Finance</h3><p>从 Yearn Finance 的分支开始，Harvest Finance 采用了快速推进策略。它一直在比其他收益聚合器协议更快地发布新策略，即使是那些被认为是高风险的协议</p>\n<h3 id=\"风险提示-7\"><a href=\"#风险提示-7\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>由于收益聚合器从风险更高的协议中寻求高收益的性质，它们面临着很高的黑客风险。在四种协议中，只有 Badger DAO 尚未被黑客入侵（截至 2021 年 4 月）。与保险协议的整合仍然乏善可陈，这可能是进一步增长该行业锁定的总价值的最大瓶颈。随着更多保险协议的推出，未来我们可能会看到保险收益聚合器产品的推出。</p>\n<h1 id=\"Part-Four-Technology-Underpinning-DeFi\"><a href=\"#Part-Four-Technology-Underpinning-DeFi\" class=\"headerlink\" title=\"Part Four: Technology Underpinning DeFi\"></a>Part Four: Technology Underpinning DeFi</h1></div><h2 id=\"第十三章-预言机和数据聚合器\"><a href=\"#第十三章-预言机和数据聚合器\" class=\"headerlink\" title=\"第十三章 预言机和数据聚合器\"></a>第十三章 预言机和数据聚合器</h2><div class=\"story post-story\"><p>DeFi 由智能合约提供支持。产生输出所需的输入包括未存储在区块链上的真实数据，例如天气状况或交通信息。需要协议通过将链下数据中继到区块链上来弥合差距，以便智能合约与数据进行交互。</p>\n<p>链下信息是 DeFi 不可或缺的一部分，应始终有效且准确。拥有虚假数据将完全歪曲特定项目并给 DeFi 带来重大问题。但是，我们如何确保所提供的数据始终准确且值得信赖？一些协议旨在通过在不被操纵或篡改的情况下将数据传输和广播到区块链上来实现这一点。这通常通过投票或共识机制完成，验证者同意最准确的数据。如果没有预言机或数据聚合器作为主要的“真相来源”，不良行为者可以利用虚假信息来利用毫无戒心的用户。</p>\n<p>所以，需要想办法弥补区块链和现实之间的数据误差。</p>\n<h3 id=\"Oracle-Protocol：Chainlink\"><a href=\"#Oracle-Protocol：Chainlink\" class=\"headerlink\" title=\"Oracle Protocol：Chainlink\"></a>Oracle Protocol：Chainlink</h3><p>Chainlink 是用于构建去中心化预言机网络的框架和基础设施，可将任何区块链网络上的智能合约安全地连接到外部数据资源和链下计算。每个预言机网络都由独立且抗 Sybil 的节点运营商保护，这些节点运营商从众多链下数据提供者那里获取数据，将信息聚合成一个值，然后在链上交付以供智能合约执行。</p>\n<h3 id=\"Oracle-Protocol-Band-Protocol\"><a href=\"#Oracle-Protocol-Band-Protocol\" class=\"headerlink\" title=\"Oracle Protocol: Band Protocol\"></a>Oracle Protocol: Band Protocol</h3><p>Band Protocol 是一个跨链预言机平台，将智能合约与外部数据和 API 连接起来。与 Band Protocol 集成的去中心化应用程序通过 Band Protocol 的智能合约数据点接收数据，而不是直接从链下预言机接收数据。</p>\n<p>如果预言机将现实世界的数据连接到区块链，那么数据聚合器可以帮助用户读取它。这些协议将区块链数据编译为简化格式，使项目和个人用户更容易创建他们的分析仪表板。</p>\n<h3 id=\"Data-Aggregators-The-Graph-Protocol\"><a href=\"#Data-Aggregators-The-Graph-Protocol\" class=\"headerlink\" title=\"Data Aggregators: The Graph Protocol\"></a>Data Aggregators: The Graph Protocol</h3><p>The Graph 是一种去中心化协议，用于从以太坊、Polkadot 和 Solana 等区块链查询和接收数据。虽然通过读取区块链上的合约地址直接检索查询更简单，但具有更高特异性和粒度的数据更难找到。 Graph 通过将区块链数据索引到“子图”或可以使用标准 GraphQL API 查询的开放 API 来解决这个问题。</p>\n<h3 id=\"Data-Aggregators-Covalent\"><a href=\"#Data-Aggregators-Covalent\" class=\"headerlink\" title=\"Data Aggregators: Covalent\"></a>Data Aggregators: Covalent</h3><p>Covalent 是一个区块链数据提供商，它提供了一个统一的 API 来访问看似无穷无尽的链上数据。可以使用单个 API 检索来自各种区块链的代币余额和钱包活动的详细信息，从而使开发人员更容易创建分析仪表板或收集有关区块链活动的见解。 </p>\n<h3 id=\"风险提示-8\"><a href=\"#风险提示-8\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>随着越来越多的协议开始依赖在最恶劣环境中经过实战考验的长期产品，记住这些产品可能并非完全万无一失也很重要。如果发生黑天鹅事件，预言机可能无法有效地提供数据，从而导致做出不准确的决策。在 2020 年 3 月，也称为黑色星期四，Chainlink 和 MakerDAO 的“Medianizer”等预言机未能足够快地更新其价格信息，导致价格严重错误。 MakerDAO 的价格失败引发了一系列灾难性事件，导致 CDP 所有者损失了价值超过 800 万美元的 ETH 抵押品。</p>\n</div><h2 id=\"第十四章-多链和跨链协议\"><a href=\"#第十四章-多链和跨链协议\" class=\"headerlink\" title=\"第十四章 多链和跨链协议\"></a>第十四章 多链和跨链协议</h2><div class=\"story post-story\"><h3 id=\"Ren-Project\"><a href=\"#Ren-Project\" class=\"headerlink\" title=\"Ren Project\"></a>Ren Project</h3><p>Ren Project 是一个无需许可的协议，允许用户在区块链之间匿名交互和传输代币。 Ren 协议通过 Ren 虚拟机 (RenVM) 提供支持的 RenBridge 实现这一点。</p>\n<h3 id=\"ThorChain\"><a href=\"#ThorChain\" class=\"headerlink\" title=\"ThorChain\"></a>ThorChain</h3><p>ThorChain 是一个去中心化的流动性网络，具有可互操作的区块链，允许以非托管方式进行跨链代币交换。它不固定或包装资产，但允许用户在各种第 1 层区块链之间交换代币。例如，ThorChain 上的交易者可以将他们的资产从比特币无缝转移到以太坊，而无需注册或通过中心化交易所的 KYC 流程。</p>\n<h3 id=\"Binance-Bridge\"><a href=\"#Binance-Bridge\" class=\"headerlink\" title=\"Binance Bridge\"></a>Binance Bridge</h3><p>使用 Binance Bridge，用户可以在各种区块链之间转移资金，例如 Ethereum、Tron 或 Binance Smart Chain (BSC) 网络。每个特定资产仅支持特定的区块链。例如，Cosmos (ATOM) 和 Ontology (ONT) 等其他区块链的原生代币仅限于币安智能链、币安链或其原生网络之间的转账。每个区块链每天可以转账的数量有限制资产。</p>\n<h3 id=\"Anyswap\"><a href=\"#Anyswap\" class=\"headerlink\" title=\"Anyswap\"></a>Anyswap</h3><p>Anyswap 是一个去中心化的跨链交易所，支持以太坊、币安智能链、Fantom 等八种不同的区块链。它为用户提供了一个多合一的平台，可以将他们的资产交换或转换到其他区块链上。用户可以选择将其资产存入铸币包装代币的传统方法，或直接执行跨链交换以将其代币换成不同区块链上的另一个代币。</p>\n<h3 id=\"Terra-Bridge\"><a href=\"#Terra-Bridge\" class=\"headerlink\" title=\"Terra Bridge\"></a>Terra Bridge</h3><p>Terra Bridge 是一个应用程序，供用户将 Terra 区块链上支持的 Terra 资产发送到以太坊和币安智能链网络。这些资产包括 LUNA（Terra 的原生代币）、UST（Terra USD）等 Terra 稳定币，以及 mTSLA（Tesla）和 mAAPL（Apple Inc.）等镜像资产。</p>\n</div><h2 id=\"第十五章-DeFi-Exploits\"><a href=\"#第十五章-DeFi-Exploits\" class=\"headerlink\" title=\"第十五章 DeFi Exploits\"></a>第十五章 DeFi Exploits</h2><div class=\"story post-story\"><p>参与DeFi有风险，2020年的时候啊，就出现了12起黑客事件，总共损失了$121m。</p>\n<p>DeFi 的最大风险在于，随着项目利用 DeFi 的可组合性并相互构建，DeFi 应用程序的复杂性呈指数级增长，这使得智能合约审计人员更难发现弱点。 DeFi 应用程序开发人员必须确保网络安全审计人员不断检查他们的代码，以减少任何被利用的可能性，因为错误的后果将是巨大的经济损失。</p>\n<ol>\n<li>经济漏洞/闪电贷款：只要借款人在同一笔交易中偿还贷款，闪电贷允许用户利用几乎无限的资金进行金融交易。它是一种强大的工具，可以让人们操纵过去受资本要求限制的经济攻击。对于闪电贷款，拥有正确的策略是利用机会的唯一要求。几乎所有的 DeFi 黑客都使用了闪电贷。</li>\n<li>项目审计：不是所有项目都负担的起审计，这就会给黑客可乘之机</li>\n<li>编码草率 审计不足：在牛市中，许多项目团队感到有压力快速行动并采取捷径更快地发布他们的产品。有些人可能会决定完全跳过审核以获得先发优势，并且仅在产品上线几个月后进行审核。还有很多“分叉”——使用与其他已建立项目相同的代码的新项目。在没有完全了解代码工作原理的情况下启动它们，它们被视为快速现金攫取，导致许多漏洞。</li>\n<li>Rug Pull：在 DeFi 领域，由匿名团队发起的项目并不少见。有些人这样做是为了避免由于不确定的监管环境而受到监管机构的审查。这就导致如果遇到恶意的项目开发者你追溯不到</li>\n<li>预言机攻击：DeFi 协议需要知道资产价格才能正常运行。例如，借贷协议需要知道资产价格来决定是否清算借款人的头寸。因此，作为 DeFi 基础设施不可或缺的一部分，预言机可能会受到重度操纵。例如，我们在第 12 章中提到了 MakerDao 的金库被利用如何导致不必要的金库清算，造成总计超过 800 万美元的 ETH 损失。</li>\n<li>Metamask攻击：就是攻击你的钱包，不过他们安全团队比较牛逼目前没有出事。</li>\n</ol>\n<h3 id=\"闪电贷款\"><a href=\"#闪电贷款\" class=\"headerlink\" title=\"闪电贷款\"></a>闪电贷款</h3><p>闪贷是指用户可以在没有任何抵押品的情况下借入资金的贷款，只要用户在同一笔交易中偿还贷款。如果用户没有在同一笔交易中偿还闪贷，交易将自动失败，造成交易费用损失，并确保闪贷不会发生。闪贷由各种 DeFi 协议提供，例如 Aave和 dYdX。</p>\n<p>闪电贷主要用于套利目的。套利是利用市场之间的价格差异来获利的行为。例如，假设我们在两个不同的去中心化交易所发现 WBTC 的价格差异很大。我们可以使用闪电贷在没有任何抵押品的情况下借入大量 WBTC，从而从差价中获利。</p>\n<p>闪贷的第二种用途是清算贷款。如果借款人让协议清算他们的头寸，他们通常会受到惩罚。当市场价格波动较大时，借款人可以选择获得闪贷并自行平仓，避免罚款。让我们看一个例子，我们从 Maker 那里借用 DAI 并以 ETH 作为抵押品。当 ETH 的价格大幅下跌时，它可能会接近我们 DAI 贷款的清算水平。我们可能没有 ETH 来增加我们的抵押品，也没有 DAI 来偿还贷款。我们能做的就是通过 DAI 闪贷来偿还 Maker 贷款。然后，我们可以将部分提取的 ETH 抵押品换成 DAI，以立即偿还闪电贷。</p>\n<h3 id=\"闪贷协议：Furucombo\"><a href=\"#闪贷协议：Furucombo\" class=\"headerlink\" title=\"闪贷协议：Furucombo\"></a>闪贷协议：Furucombo</h3><p>Furucombo是一个平台，允许任何人使用闪贷创建套利策略。由于其拖放工具使最终用户能够构建和自定义不同的 DeFi 组合，降低了组装货币乐高的门槛。请注意，Furucombo 不会为您找到套利机会。要使用 Furucombo，用户需要设置输入/输出和交易的顺序，它将所有立方体捆绑到一个交易中执行。</p>\n<h3 id=\"闪贷黑客案例：-bZx\"><a href=\"#闪贷黑客案例：-bZx\" class=\"headerlink\" title=\"闪贷黑客案例： bZx\"></a>闪贷黑客案例： bZx</h3><p>2020 年 2 月 15 日，以太坊区块链上发生了一笔交易。在不到一分钟的时间内，在一个区块和一次交易中实现了大约 360,000 美元的利润。</p>\n<p>这笔交易引起了加密社区的关注并得到了广泛的分析。收益是通过以闪电贷形式进行的最初几乎无风险的贷款实现的，随后是不同去中心化交易所之间的一系列套利。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514141112852.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514141112852.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220514141112852\"></p>\n<ol>\n<li>先从dYdX借了10000ETH闪贷</li>\n<li>将5500个质押在Compound来借了112WBTC</li>\n<li>1,300 ETH 存入 bZx 以使用 5 倍杠杆做空 ETH 支持 WBTC。从 bZx 借出的 5,637 ETH 用于使用 KyberSwap 兑换 51 BTC。根据 KyberSwap 算法，Uniswap 提供了最优惠的价格。然而，由于流动性低，掉期将 1 WBTC 的汇率推高至 109.8 WETH 左右，约为期间正常兑换率的三倍。</li>\n<li>攻击者在价格上涨后将借来的 112 WBTC 在 Uniswap 中出售，产生 6,871 ETH，兑换率为 1 WBTC = 61.2 WETH。</li>\n<li>攻击者用未使用的 3,200 ETH 和 6,871 ETH 出售，以 71 ETH 的利润偿还了 10,000 ETH 的闪电贷款</li>\n</ol>\n<p>上述事件不仅证明了通过操纵其他资产的价格获得极端资本收益的可能性，而且除了相对较低的协议费用外，借款人也没有其他成本。借款人面临的唯一条件是贷款要在同一笔交易中偿还。因此，无抵押贷款的概念在该领域开辟了广泛的机会。</p>\n</div><h2 id=\"第十六章-金融未来\"><a href=\"#第十六章-金融未来\" class=\"headerlink\" title=\"第十六章 金融未来\"></a>第十六章 金融未来</h2><div class=\"story post-story\"><p>DeFi 的使命很明确：以更高的透明度、可访问性、效率、便利性和互操作性重塑传统金融的基础设施和界面。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>A reading note for 《How to DeFi Advance》</p>\n<h1 id=\"Part-One：-State-of-DeFi\"><a href=\"#Part-One：-State-of-DeFi\" class=\"headerlink\" title=\"Part One： State of DeFi\"></a>Part One： State of DeFi</h1><h2 id=\"第一章-DeFi-Snapshot\"><a href=\"#第一章-DeFi-Snapshot\" class=\"headerlink\" title=\"第一章 DeFi Snapshot\"></a>第一章 DeFi Snapshot</h2><p>DeFi 是在2020年夏季开始崛起的。之后发展的就非常迅速了，那个夏天，DeFi协议的市值峰值增长了12倍。</p>\n<p>2021年4月，DeFi的总锁定价值（TVL）突破了860.5亿美刀。</p>\n<p>总之吧就是说了一下DeFi目前极受关注，有很大的发展前景。但他有一个地方错了，这本书说中国的对这种另类加密货币的看好，实际上，现在看来并不存在这种事情，封杀的挺彻底的。</p>\n<h2 id=\"第二章-DeFi-Activities\"><a href=\"#第二章-DeFi-Activities\" class=\"headerlink\" title=\"第二章 DeFi Activities\"></a>第二章 DeFi Activities</h2><p>介绍一些我们能够参与DeFi的方式。</p>\n<h3 id=\"Yield-Farming\"><a href=\"#Yield-Farming\" class=\"headerlink\" title=\"Yield Farming\"></a>Yield Farming</h3><p>Yield Farming指的是将资金分配给DeFi协议去获取收益。</p>\n<p>一些Yield Farming的例子：</p>\n<ul>\n<li>交易所Exchanges：为去中心化交易所做市提供资金，赚取交易手续费。</li>\n<li>借钱Lending</li>\n<li>保险Insurance：承保保险，赚取保费，同时承担灾害期间赔付的风险。</li>\n<li>期权Options：通过卖出看涨和看跌期权来承销期权以赚取收益。</li>\n<li>合成资产Synthetic Assets：铸造稳定币或其他合成资产，赚取费用作为回报。</li>\n</ul>\n<h3 id=\"Liquidity-Mining\"><a href=\"#Liquidity-Mining\" class=\"headerlink\" title=\"Liquidity Mining\"></a>Liquidity Mining</h3><p>流动性挖矿就是你提供一定你持有的加密货币为某个DeFi协议提供流动性支持以换取代币。</p>\n<h3 id=\"Airdrops\"><a href=\"#Airdrops\" class=\"headerlink\" title=\"Airdrops\"></a>Airdrops</h3><p>空投，这应该经常听到了。就是免费发的代币，有时候空投就是一种营销策略。存在稀释代币所有权的风险 。如果当年参与了Uniswap的空投等于白赚一大笔。。。。</p>\n<h3 id=\"Initial-DEX-Offerings-IDO\"><a href=\"#Initial-DEX-Offerings-IDO\" class=\"headerlink\" title=\"Initial DEX Offerings (IDO)\"></a>Initial DEX Offerings (IDO)</h3><p>加密项目必须在其代币发布和分发策略上具有创造性。随着去中心化交易所 (DEX)  的日益普及，项目现在有一个可行的选择，即无需支付高额费用即可在中心化交易所上市，直接面向用户。加密项目团队现在可以在不需要这些 DEX  许可的情况下列出他们的代币。</p>\n<h3 id=\"Initial-Bonding-Curve-Offering-IBCO\"><a href=\"#Initial-Bonding-Curve-Offering-IBCO\" class=\"headerlink\" title=\"Initial Bonding Curve Offering (IBCO)\"></a>Initial Bonding Curve Offering (IBCO)</h3><p>初始债券曲线发行（IBCO）是一个相当新的概念，旨在防止抢先交易行为。本质上，随着越来越多的投资者提供资本进入联合曲线，代币价格将从其初始值增加。但是，您何时选择出资并不重要，因为所有投资者都将根据相同的最终结算价格进行支付。根据 IBCO  结束时的价格，每个投资者将根据他们在投资总资本中的份额获得一部分代币。</p>\n<p>Example: Hegic &amp; Aavegotchi</p>\n<h3 id=\"Liquidity-Bootstrapping-Pool-LBP\"><a href=\"#Liquidity-Bootstrapping-Pool-LBP\" class=\"headerlink\" title=\"Liquidity Bootstrapping Pool (LBP)\"></a>Liquidity Bootstrapping Pool (LBP)</h3><p>流动性引导池：项目使用可配置的自动做市出售代币的一种方式。通常，这些池将包含项目代币和抵押代币，通常以稳定币计价。智能池的控制器可以更改其参数并在销售中引入各种功能，例如随着时间的推移价格下降以及由于高需求或外部漏洞而暂停任何进一步的交换。</p>\n<h3 id=\"Initial-Farm-Offering-IFO\"><a href=\"#Initial-Farm-Offering-IFO\" class=\"headerlink\" title=\"Initial Farm Offering (IFO)\"></a>Initial Farm Offering (IFO)</h3><p>PancakeSwap 首次推出的初始农场产品 (IFO) 允许用户质押他们的流动性提供者 (LP)  代币以换取项目的代币。使用溢出机制，用户可以随心所欲地质押。在超额认购的情况下，任何多余的代币都将退还给投标人。 PancakeSwap 上的 IFO 使用  CAKE-BNB LP 代币，项目接收 BNB 代币以换取他们新铸造的协议代币，而剩余的 CAKE 代币被烧毁。</p>\n<p>有用的链接：Yield Farming: <a href=\"https://zapper.fi/dashboard\">https://zapper.fi/dashboard</a></p>\n<h3 id=\"风险\"><a href=\"#风险\" class=\"headerlink\" title=\"风险\"></a>风险</h3><ul>\n<li>一个是注意APY是不是动态的，可能有的看起来很高但是随着参与人的增加会下降到一个很普通的值</li>\n<li>一个是注意投资的风险 ，包括值不值得投资，毕竟项目太多了，可以投资的太多了，这个市场变化太快，你把握不住</li>\n</ul>\n<h1 id=\"Part-Two：-Evaluation-DeFi-Sectors\"><a href=\"#Part-Two：-Evaluation-DeFi-Sectors\" class=\"headerlink\" title=\"Part Two： Evaluation DeFi Sectors\"></a>Part Two： Evaluation DeFi Sectors</h1><h2 id=\"第三章-去中心化的交易所\"><a href=\"#第三章-去中心化的交易所\" class=\"headerlink\" title=\"第三章 去中心化的交易所\"></a>第三章 去中心化的交易所</h2><h3 id=\"DEX种类：\"><a href=\"#DEX种类：\" class=\"headerlink\" title=\"DEX种类：\"></a>DEX种类：</h3><ul>\n<li>基于订单的DEX：感觉和股市挺像的。</li>\n<li>基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）</li>\n</ul>\n<h3 id=\"AMM算法：\"><a href=\"#AMM算法：\" class=\"headerlink\" title=\"AMM算法：\"></a>AMM算法：</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png\" alt=\"image-20220425231949161\"></p>\n<p>流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。</p>\n<p>当前一些著名的AMM算法：</p>\n<h4 id=\"恒乘积\"><a href=\"#恒乘积\" class=\"headerlink\" title=\"恒乘积\"></a>恒乘积</h4><p>$$<br>x*y = k<br>$$</p>\n<p>Uniswap用的就是常数乘积。</p>\n<h4 id=\"恒和\"><a href=\"#恒和\" class=\"headerlink\" title=\"恒和\"></a>恒和</h4><p>$$<br>x+y=k<br>$$</p>\n<p>这个模型有缺陷，不能提供无限的流动性。</p>\n<h4 id=\"恒定平均\"><a href=\"#恒定平均\" class=\"headerlink\" title=\"恒定平均\"></a>恒定平均</h4><p>$$<br>v = \\Pi_tB_t^{w_t}<br>$$</p>\n<p>恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。</p>\n<h4 id=\"稳定交换不变量\"><a href=\"#稳定交换不变量\" class=\"headerlink\" title=\"稳定交换不变量\"></a>稳定交换不变量</h4><p>$$<br>An^n\\sum X_i+D=ADn^n+\\frac{D^{n+1}}{n^n\\Pi x_i}<br>$$</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png\" alt=\"image-20220425232558126\"></p>\n<h3 id=\"流动性池类型\"><a href=\"#流动性池类型\" class=\"headerlink\" title=\"流动性池类型\"></a>流动性池类型</h3><ul>\n<li>公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。</li>\n<li>私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。</li>\n<li>智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。</li>\n</ul>\n<h3 id=\"AMM的风险\"><a href=\"#AMM的风险\" class=\"headerlink\" title=\"AMM的风险\"></a>AMM的风险</h3><ul>\n<li>价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。</li>\n<li>Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。</li>\n</ul>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png\" alt=\"image-20220425234523467\"></p>\n<ul>\n<li>无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。</li>\n</ul>\n<h3 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h3><p>DEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。</p>\n<h2 id=\"第四章-DEX聚合器\"><a href=\"#第四章-DEX聚合器\" class=\"headerlink\" title=\"第四章 DEX聚合器\"></a>第四章 DEX聚合器</h2><p>之前说过DEX聚合器的作用，毕竟在AMM算法的加持下，比如说Uniswap的恒乘积策略下，当交易金额很高的时候对应的手续费也就越高。这显然对于哦我们交易者来说是不可接受的。所以就有了DEX聚合器就是DEX Aggregators。DEX聚合器能够将一笔较大的交易拆分，去不同的去中心化交易所交易，相当于综合了所有的去中心化交易所的流动性，而不用单纯的看一个交易所的流动性，大幅度降低了你作为一个用户来说在一家交易所交易大额所面临的高额手续费又或者减少了你自己去找哪里便宜这种麻烦事。</p>\n<p>评价DEX聚合器的四个指标：</p>\n<ul>\n<li>路由算法</li>\n<li>流动性资源</li>\n<li>当前的市场状态</li>\n<li>交易规模</li>\n</ul>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png\" alt=\"image-20220426145303291\"></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png\" alt=\"image-20220426145317120\"></p>\n<h3 id=\"风险提示\"><a href=\"#风险提示\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>咱就是说有时候DEX聚合器不一定靠谱，对于部分小的交易可能直接去DEX比较方便，成本也是更低的。</p>\n<h2 id=\"第五章-去中心化的借贷\"><a href=\"#第五章-去中心化的借贷\" class=\"headerlink\" title=\"第五章 去中心化的借贷\"></a>第五章 去中心化的借贷</h2><p>比较著名的几个借贷协议：Compound、Maker、Avae、Cream</p>\n<p>这些在beginner一书里面说过。</p>\n<h3 id=\"风险提示-1\"><a href=\"#风险提示-1\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>注意智能合约漏洞等技术风险。</p>\n<p>黑客可能会利用并耗尽这些协议上的抵押品。此外，许多借贷协议依赖价格预言机（第 12  章会详细介绍）来提供链上价格数据。价格预言可能会失败或被利用。 2020 年 11 月，Compound 的价格预言被利用，将 Coinbase Pro 上的  DAI 价格推高了 30%，导致价值 8900 万美元的贷款被清算。25  但是，作为借款人，主要风险包括因管理不善而失去抵押品抵押率。加密货币以其极端的价格波动而闻名，您的贷款可能会低于其最低抵押品比率并被清算。这不是一个理想的结果，因为您将承担相当大的损失并支付清算费用。因此，持续监控和维持健康的贷款抵押比率至关重要。</p>\n<h2 id=\"第六章-去中心化的稳定币和稳定资产\"><a href=\"#第六章-去中心化的稳定币和稳定资产\" class=\"headerlink\" title=\"第六章 去中心化的稳定币和稳定资产\"></a>第六章 去中心化的稳定币和稳定资产</h2><p>USDT就不用再介绍了，太常见了。Tether就是1美元换1USDT。</p>\n<p>DAI也不用说了，是Maker发行的，现在稳如老狗。</p>\n<h3 id=\"算法稳定币\"><a href=\"#算法稳定币\" class=\"headerlink\" title=\"算法稳定币\"></a>算法稳定币</h3><p>算法稳定币就是用算法来控制稳定币的市场结构和基础经济。大多数算法稳定币都与美元挂钩，有些是浮动挂钩，形成了算法稳定资产。与算法稳定币不同，算法稳定资产可以被视为另一种形式的抵押品。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png\" alt=\"image-20220426155420044\"></p>\n<h3 id=\"Rebase-Model\"><a href=\"#Rebase-Model\" class=\"headerlink\" title=\"Rebase Model\"></a>Rebase Model</h3><p>变基模型通过改变稳定币的全部供应来控制价格。根据稳定币的价格是高于还是低于预期挂钩，协议将在固定期限内自动增加或减少每个持有者钱包中的供应量。这样做的原因是，通过强制控制供应，可以根据简单的通货膨胀/通货紧缩经济理论来影响稳定币的价格。该模型的开创性协议是 Ampleforth ——AMPL。</p>\n<h3 id=\"Seigniorage-Model铸币税模型\"><a href=\"#Seigniorage-Model铸币税模型\" class=\"headerlink\" title=\"Seigniorage Model铸币税模型\"></a>Seigniorage Model铸币税模型</h3><p>铸币税模型通过引入影响市场动态的奖励系统来控制价格。如果价格高于挂钩，则铸造新的代币并提供给提供流动性或持有代币的参与者。如果价格低于挂钩，则停止铸造代币，并引入机制以减少供应。用户可以购买优惠券来燃烧底层代币以将其从供应中移除。这些优惠券可能会在未来兑换更多代币，但前提是不亏。</p>\n<p>三种基础的铸币税模型例子。</p>\n<ol>\n<li><p>Empty Set Dollar（ESD）</p>\n</li>\n<li><p>Basis Cash</p>\n</li>\n<li><p>Frax Finance</p>\n</li>\n</ol>\n<p>可惜啊，梦想是美好的现实是骨感的。实际上的表现并不是那么尽如人意。这些币最终都跌的一塌糊涂，就UST、sUSD、FRAX最终还能保持和美元的挂钩。</p>\n<h3 id=\"风险提示-2\"><a href=\"#风险提示-2\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ul>\n<li>目前算法稳定币仍处于试验阶段</li>\n<li>稳定币需要一个比较强大的社区</li>\n<li>建议使用较多的时间来了解之后再考虑投资</li>\n</ul>\n<h2 id=\"第七章-去中心化衍生品\"><a href=\"#第七章-去中心化衍生品\" class=\"headerlink\" title=\"第七章 去中心化衍生品\"></a>第七章 去中心化衍生品</h2><h3 id=\"永续协议\"><a href=\"#永续协议\" class=\"headerlink\" title=\"永续协议\"></a>永续协议</h3><p>永续协议是一种提供永续合约交易的去中心化协议，允许用户在各种加密资产上开立高达十倍的杠杆多头或空头头寸。为了实现这一点，Perpetual Protocol  使用了一种独特的虚拟自动做市商 (vAMM) 方法。功能类似于 Uniswap 和 Balancer 的 AMM，交易者可以直接通过 vAMM  执行交易。主要区别在于“虚拟”部分。在传统的  AMM 中，资产存储在智能合约中，每种资产的交易价格通过特定的数学函数确定。永续协议中的 vAMM 不存储任何资产。取而代之的是，实物资产存储在一个以 USDC  计价的智能合约保险库中，成为用户开设杠杆头寸的抵押品。保险库中的资金总额基本上构成了交易者利润的上限。每个永续合约都有自己特定的  vAMM，但它们都受到协议保险基金的保护。 Perpetual Protocol 能够通过使用 xDai 链进行交易执行来提供更高的交易速度和最少的 gas  交易。使用 vAMM，用户将能够获得高流动性和低滑点来满足他们的交易需求。</p>\n<h3 id=\"合成资产\"><a href=\"#合成资产\" class=\"headerlink\" title=\"合成资产\"></a>合成资产</h3><p>合成资产是与另一种资产具有相同价值或效果的资产或资产组合。合成资产跟踪标的资产的价值，并允许在无需持有实际资产本身的情况下接触资产。</p>\n<h3 id=\"风险提示-3\"><a href=\"#风险提示-3\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ul>\n<li>注意杠杆，别玩火</li>\n<li>可能缺乏流动性</li>\n</ul>\n<h2 id=\"第八章-去中心化的保险\"><a href=\"#第八章-去中心化的保险\" class=\"headerlink\" title=\"第八章 去中心化的保险\"></a>第八章 去中心化的保险</h2><p>保险基于两个假设运作：</p>\n<ol>\n<li>大数定律：保险承保的损失事件必须是独立的。如果事件足够频繁地重复，结果将收敛到预期值。</li>\n<li>风险池：损失事件具有频率低、影响大的特点。因此，一大群人支付的保险费补贴了几笔大额索赔的损失。</li>\n</ol>\n<p>现在的DeFi行业，毕竟很多代码上的漏洞是很难发现的，所以保险怎么说呢，也算是一种比较必要的东西吧。</p>\n<p><strong>三种保险协议</strong></p>\n<h3 id=\"1-Nexus-Mutual\"><a href=\"#1-Nexus-Mutual\" class=\"headerlink\" title=\"1. Nexus Mutual\"></a>1. Nexus Mutual</h3><p>当前最大的保险协议。</p>\n<p>提供两种保险：</p>\n<ol>\n<li>智能合约遭受攻击时的资金损失，比如遇到经济设计失败、严重的预言机失败、治理攻击等</li>\n<li>监护权保障，承担资金被黑客入侵或停止提款的风险。</li>\n</ol>\n<p>代币：NXM</p>\n<h3 id=\"2-Armor-Protocol\"><a href=\"#2-Armor-Protocol\" class=\"headerlink\" title=\"2. Armor Protocol\"></a>2. Armor Protocol</h3><p>Armor 通过加密原生的动态智能覆盖聚合使对 DeFi 的投资尽可能安全。</p>\n<p>提供的三种主要保险：</p>\n<ul>\n<li>arNXM</li>\n<li>arCore</li>\n<li>arNFT</li>\n</ul>\n<h3 id=\"3-Cover-Protocol\"><a href=\"#3-Cover-Protocol\" class=\"headerlink\" title=\"3. Cover Protocol\"></a>3. Cover Protocol</h3><p>Cover Protocol 由 Yearn Finance 孵化，最初是提供 yInsure 的 Safe Protocol。但由于创始人 Alan 和著名社区成员 Azeem Ahmed 之间的一些内讧，该项目被取消。 Azeem 接管了 yInsure 产品并发布了 Armor Protocol，而 Alan 继续发布 Cover Protocol。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514095759994.png\" alt=\"image-20220514095759994\"></p>\n<h3 id=\"相关风险\"><a href=\"#相关风险\" class=\"headerlink\" title=\"相关风险\"></a>相关风险</h3><p>索赔赔付很大程度上取决于保险提供商和购买者之间的协议。在解释协议时总是存在细微差别，尤其是在涉及大额索赔的高风险场景。每个保险协议都会有自己的方式来决定支付什么，这可能不一定对所有买家都公平。购买者应了解保险产品提供的当前限制。作为保险协议的资金提供者是一项复杂的操作，用户在决定参与之前应该对风险有一个完整的了解。如果索赔的概率高于预期，Stakers 可能会蒙受损失。</p>\n<h1 id=\"Part-Three：Emerging-DeFi-Categories\"><a href=\"#Part-Three：Emerging-DeFi-Categories\" class=\"headerlink\" title=\"Part Three：Emerging DeFi Categories\"></a>Part Three：Emerging DeFi Categories</h1><h2 id=\"第九章-去中心化指数\"><a href=\"#第九章-去中心化指数\" class=\"headerlink\" title=\"第九章 去中心化指数\"></a>第九章 去中心化指数</h2><p>可以把去中心化指数看成ETF</p>\n<h3 id=\"指数协议：Index-Cooperative\"><a href=\"#指数协议：Index-Cooperative\" class=\"headerlink\" title=\"指数协议：Index Cooperative\"></a>指数协议：Index Cooperative</h3><p>Index Coop 使用户能够广泛接触加密货币行业不同主题的不同协议。指数代币持有者可以拥有、接触并可以直接赎回构成指数的基础资产。</p>\n<h3 id=\"指数协议：Indexed-Finance（NDX）\"><a href=\"#指数协议：Indexed-Finance（NDX）\" class=\"headerlink\" title=\"指数协议：Indexed Finance（NDX）\"></a>指数协议：Indexed Finance（NDX）</h3><p>Indexed Finance 是一种专注于投资组合管理的协议。用户可以铸造、交换或销毁指数代币和基础资产，Balancer 分叉的集成自动做市商 (AMM) 机制会自动重新平衡其指数。</p>\n<h3 id=\"指数协议：PowerPool-Concentrated-Voting-Power-CVP\"><a href=\"#指数协议：PowerPool-Concentrated-Voting-Power-CVP\" class=\"headerlink\" title=\"指数协议：PowerPool Concentrated Voting Power (CVP)\"></a>指数协议：PowerPool Concentrated Voting Power (CVP)</h3><p>PowerPool 的指数是基于 Balancer 的自动做市商 (AMM) 的智能池，具有附加功能。其主要目的是将治理代币汇集在一起，用于借贷和执行元治理。此外，用户可以直接将一种治理代币换成另一种。</p>\n<h3 id=\"协议比较\"><a href=\"#协议比较\" class=\"headerlink\" title=\"协议比较\"></a>协议比较</h3><p>协议费用：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102110851.png\" alt=\"image-20220514102110851\"></p>\n<p>基金权重：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514102332048.png\" alt=\"image-20220514102332048\"></p>\n<p>一般有三种权重计算方式：</p>\n<ul>\n<li>Market Cap Weighted：该方法动态跟踪每项资产的市值，其中每项资产的分配与其相对于指数中其他资产的市值成正比。相对于较小的，使用这种方法的指数将集中在市值较大的代币上，从而使该指数能够密切模仿实际的市场表现。</li>\n<li>Square Root of Market Cap Weighted:Indexed Finance 上的所有指数均基于相对于每个标的资产的市值的平方根。这种方法抑制了市场表现倾向于更大市值硬币的影响。</li>\n<li>Equally-Weighted Market Cap Weighted:</li>\n<li>This method sets asset allocation equally. For example, there are<br>eight underlying assets in PIPT. Hence each of the assets is set to<br>12.5% weightage. An equal-weighted strategy is driven by price<br>momentum and would favor smaller market capitalization coins.<br>Smaller market capitalization coins are given the same importance<br>as large market capitalization coins. </li>\n</ul>\n<h3 id=\"风险提示-4\"><a href=\"#风险提示-4\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><ol>\n<li>代码就是法律，防不住黑客，尽管代码确实都经过了审计</li>\n<li>Mercenary Capital，大多数指数协议都有流动性挖掘计划，以激励流动性提供者并引导指数代币的流动性。然而，这些资本中的大部分通常被称为“雇佣资本”。这些资金纯粹是在寻求高回报，一旦出现另一个收益率更高的协议，就会退出。因此，一旦流动性挖矿奖励枯竭，可能会导致大量提款，从而导致指数协议呈螺旋式下降。</li>\n<li>系统性风险：在 DeFi 中，协议可以像金钱乐高一样堆叠在一起。然而，可组合性可能是一把双刃剑，因为它引入了系统性风险。例如，PowerPool 的 Yearn Lazy APE (YLA) 从其五个基础 Yearn 的稳定币保险库中有十种不同的风险敞口。</li>\n</ol>\n<h2 id=\"第十章-去中心化的预测市场\"><a href=\"#第十章-去中心化的预测市场\" class=\"headerlink\" title=\"第十章 去中心化的预测市场\"></a>第十章 去中心化的预测市场</h2><p>预测市场是为参与者对未来事件的结果进行投注而创建的市场。传统预测市场的一个很好的例子是体育博彩平台。去中心化预测市场利用区块链技术在几乎任何事物上创建预测市场。例如，可以根据比特币价格何时超过 100,000 美元或下一任美国总统是谁来制定预测市场。去中心化预测市场的支持者认为，中心化平台使用户处于不利地位。标准做法包括高额交易费用、延迟提款和冻结账户。此外，当今大多数传统博彩平台都专注于体育博彩，限制了公众可用的预测市场类型。去中心化预测市场协议旨在通过允许用户创建自己的市场来赋予用户权力。</p>\n<p>Whatever就是 菠菜</p>\n<h3 id=\"Augur\"><a href=\"#Augur\" class=\"headerlink\" title=\"Augur\"></a>Augur</h3><p><a href=\"https://augur.net/blog/prediction-markets\">Augur 在以太坊网络上运行，并使用决议模型，通过奖励和惩罚来激励用户准确报告信息。</a>市场收盘后，它将进入市场创建者或其他人（取决于市场谁）的报告期指定为指定报告者的创建者）可以提供信息以验证结果。</p>\n<h3 id=\"Omen\"><a href=\"#Omen\" class=\"headerlink\" title=\"Omen\"></a>Omen</h3><p><a href=\"https://omen.eth.link/\">Omen 是由 DXdao 开发并由 Gnosis 协议提供支持的预测协议 - 它在以太坊和 xDai 侧链上运行。</a>Gnosis 允许 Omen 用户使用他们的代币框架，这是一个基于事件的资产类别，包含预测市场的构建块.</p>\n<h3 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h3><p>Augur 通过创建一个激励和惩罚生态系统来规范报告信息的可靠性，从而解决了预言机问题。 Omen 将他们的报告需求外包给外部 DAO（使用与 Augur 方法类似的原则）。从这个意义上说，Augur 更加自给自足。</p>\n<h3 id=\"风险提示-5\"><a href=\"#风险提示-5\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>预测市场最大的担忧是数据的可靠性。虽然有多种基于利润的激励措施可以最大限度地减少数据操纵，但非理性行为者可能会试图危及结果。此外，受挑战的结果可能会导致耗时且成本高昂的情况。</p>\n<h2 id=\"第十一章-去中心化的固定利率协议\"><a href=\"#第十一章-去中心化的固定利率协议\" class=\"headerlink\" title=\"第十一章 去中心化的固定利率协议\"></a>第十一章 去中心化的固定利率协议</h2><p>固定利率协议：Fixed-Interest Rate Protocols（FIRPs）</p>\n<ol>\n<li>借贷</li>\n<li>收益聚合</li>\n</ol>\n<h3 id=\"Yield\"><a href=\"#Yield\" class=\"headerlink\" title=\"Yield\"></a>Yield</h3><p>Yield 是一个去中心化借贷系统，它使用一种名为“fyTokens”的新型代币提供固定利率借贷和利率市场。当前迭代（版本 1）包括 DAI 稳定币的 fyToken。这种被称为“fyDai”的新型代币可以在 DAI 中实现完全抵押的固定利率借贷。</p>\n<p>fyDai 代币是基于以太坊的代币 (ERC20)，可以在预定的到期日后兑换为 DAI。 fyDai 类似于零息票或贴现债券。要铸造或出售 fyDai，借款人必须提供目前遵循与 MakerDao 相同的抵押率（150%）的 ETH 抵押品。贷方购买 fyDai，其定价通常低于 DAI。贴现值与 1 DAI（到期值）之间的差额代表贷方的借贷利率或借款人的借贷利率。</p>\n<h3 id=\"Saffron-Finance\"><a href=\"#Saffron-Finance\" class=\"headerlink\" title=\"Saffron.Finance\"></a>Saffron.Finance</h3><p>Saffron Finance 是面向流动性提供者的去中心化收益聚合器，是最早使用基于批次的系统的协议之一。 批次是从流动性池中创建的部分，按风险、到期时间或其他可销售的特征进行划分不同的投资者。</p>\n<h3 id=\"Horizon-Finance\"><a href=\"#Horizon-Finance\" class=\"headerlink\" title=\"Horizon Finance\"></a>Horizon Finance</h3><p>与传统的收益聚合器不同，Horizon 允许用户根据博弈论原则创建自己的市场。博弈论设想了一个只有理性参与者的环境。在这种假设情况下，买卖双方将根据可用信息做出最佳决策。</p>\n<h3 id=\"风险提示-6\"><a href=\"#风险提示-6\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>最重要的风险之一是 FIRP 提供固定利率的能力。这些协议中的大多数都依赖于外部代理或其他用户积极参与协议来驱动市场功能。如果存在不活跃的社区或用户配置文件和流动性不成比例的数量（例如，Yield 的贷方多于借款人，或者 Saffron Finance 的 A 部分参与者多于 AA 部分），FIRP 可能无法支持其固定利息率。</p>\n<h2 id=\"第十二章-去中心化的收益聚合器\"><a href=\"#第十二章-去中心化的收益聚合器\" class=\"headerlink\" title=\"第十二章 去中心化的收益聚合器\"></a>第十二章 去中心化的收益聚合器</h2><h3 id=\"Yearn-Finance\"><a href=\"#Yearn-Finance\" class=\"headerlink\" title=\"Yearn Finance\"></a>Yearn Finance</h3><p>Yearn Finance 旨在自动化借贷平台之间的资本转换，以寻找 DeFi 借贷平台提供的最佳收益。大多数 DeFi 借贷平台提供浮动利率而不是固定利率。随着这些协议之间的利率变化，资金会在 dYdX、Aave 和 Compound 之间自动转移。该服务包括主要的美元稳定币，如 DAI、USDT、USDC 和 TUSD。例如，如果用户将 DAI 存入 Yearn Finance，则用户将收到一个 yDAI 代币作为回报，这是一个产生收益的 DAI 代币。后来，Yearn Finance 与 Curve Finance 合作发布了一个名为 yUSD 的具有收益的美元代币池。 </p>\n<h3 id=\"Alpha-Finance\"><a href=\"#Alpha-Finance\" class=\"headerlink\" title=\"Alpha Finance\"></a>Alpha Finance</h3><p>Alpha Finance 通过他们的第一个产品 Alpha Homora 引入了杠杆收益农业，允许用户使用借来的资金来增加他们在收益农业活动中的曝光率。从本质上讲，它既充当借贷协议又充当收益聚合协议。</p>\n<h3 id=\"Badger-Finance\"><a href=\"#Badger-Finance\" class=\"headerlink\" title=\"Badger Finance\"></a>Badger Finance</h3><p>Badger DAO 旨在创建一个 DeFi 产品生态系统，最终目标是将比特币带入以太坊。这是第一个选择将比特币作为主要储备资产而不是使用以太坊的 DeFi 项目。</p>\n<h3 id=\"Harvest-Finance\"><a href=\"#Harvest-Finance\" class=\"headerlink\" title=\"Harvest Finance\"></a>Harvest Finance</h3><p>从 Yearn Finance 的分支开始，Harvest Finance 采用了快速推进策略。它一直在比其他收益聚合器协议更快地发布新策略，即使是那些被认为是高风险的协议</p>\n<h3 id=\"风险提示-7\"><a href=\"#风险提示-7\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>由于收益聚合器从风险更高的协议中寻求高收益的性质，它们面临着很高的黑客风险。在四种协议中，只有 Badger DAO 尚未被黑客入侵（截至 2021 年 4 月）。与保险协议的整合仍然乏善可陈，这可能是进一步增长该行业锁定的总价值的最大瓶颈。随着更多保险协议的推出，未来我们可能会看到保险收益聚合器产品的推出。</p>\n<h1 id=\"Part-Four-Technology-Underpinning-DeFi\"><a href=\"#Part-Four-Technology-Underpinning-DeFi\" class=\"headerlink\" title=\"Part Four: Technology Underpinning DeFi\"></a>Part Four: Technology Underpinning DeFi</h1><h2 id=\"第十三章-预言机和数据聚合器\"><a href=\"#第十三章-预言机和数据聚合器\" class=\"headerlink\" title=\"第十三章 预言机和数据聚合器\"></a>第十三章 预言机和数据聚合器</h2><p>DeFi 由智能合约提供支持。产生输出所需的输入包括未存储在区块链上的真实数据，例如天气状况或交通信息。需要协议通过将链下数据中继到区块链上来弥合差距，以便智能合约与数据进行交互。</p>\n<p>链下信息是 DeFi 不可或缺的一部分，应始终有效且准确。拥有虚假数据将完全歪曲特定项目并给 DeFi 带来重大问题。但是，我们如何确保所提供的数据始终准确且值得信赖？一些协议旨在通过在不被操纵或篡改的情况下将数据传输和广播到区块链上来实现这一点。这通常通过投票或共识机制完成，验证者同意最准确的数据。如果没有预言机或数据聚合器作为主要的“真相来源”，不良行为者可以利用虚假信息来利用毫无戒心的用户。</p>\n<p>所以，需要想办法弥补区块链和现实之间的数据误差。</p>\n<h3 id=\"Oracle-Protocol：Chainlink\"><a href=\"#Oracle-Protocol：Chainlink\" class=\"headerlink\" title=\"Oracle Protocol：Chainlink\"></a>Oracle Protocol：Chainlink</h3><p>Chainlink 是用于构建去中心化预言机网络的框架和基础设施，可将任何区块链网络上的智能合约安全地连接到外部数据资源和链下计算。每个预言机网络都由独立且抗 Sybil 的节点运营商保护，这些节点运营商从众多链下数据提供者那里获取数据，将信息聚合成一个值，然后在链上交付以供智能合约执行。</p>\n<h3 id=\"Oracle-Protocol-Band-Protocol\"><a href=\"#Oracle-Protocol-Band-Protocol\" class=\"headerlink\" title=\"Oracle Protocol: Band Protocol\"></a>Oracle Protocol: Band Protocol</h3><p>Band Protocol 是一个跨链预言机平台，将智能合约与外部数据和 API 连接起来。与 Band Protocol 集成的去中心化应用程序通过 Band Protocol 的智能合约数据点接收数据，而不是直接从链下预言机接收数据。</p>\n<p>如果预言机将现实世界的数据连接到区块链，那么数据聚合器可以帮助用户读取它。这些协议将区块链数据编译为简化格式，使项目和个人用户更容易创建他们的分析仪表板。</p>\n<h3 id=\"Data-Aggregators-The-Graph-Protocol\"><a href=\"#Data-Aggregators-The-Graph-Protocol\" class=\"headerlink\" title=\"Data Aggregators: The Graph Protocol\"></a>Data Aggregators: The Graph Protocol</h3><p>The Graph 是一种去中心化协议，用于从以太坊、Polkadot 和 Solana 等区块链查询和接收数据。虽然通过读取区块链上的合约地址直接检索查询更简单，但具有更高特异性和粒度的数据更难找到。 Graph 通过将区块链数据索引到“子图”或可以使用标准 GraphQL API 查询的开放 API 来解决这个问题。</p>\n<h3 id=\"Data-Aggregators-Covalent\"><a href=\"#Data-Aggregators-Covalent\" class=\"headerlink\" title=\"Data Aggregators: Covalent\"></a>Data Aggregators: Covalent</h3><p>Covalent 是一个区块链数据提供商，它提供了一个统一的 API 来访问看似无穷无尽的链上数据。可以使用单个 API 检索来自各种区块链的代币余额和钱包活动的详细信息，从而使开发人员更容易创建分析仪表板或收集有关区块链活动的见解。 </p>\n<h3 id=\"风险提示-8\"><a href=\"#风险提示-8\" class=\"headerlink\" title=\"风险提示\"></a>风险提示</h3><p>随着越来越多的协议开始依赖在最恶劣环境中经过实战考验的长期产品，记住这些产品可能并非完全万无一失也很重要。如果发生黑天鹅事件，预言机可能无法有效地提供数据，从而导致做出不准确的决策。在 2020 年 3 月，也称为黑色星期四，Chainlink 和 MakerDAO 的“Medianizer”等预言机未能足够快地更新其价格信息，导致价格严重错误。 MakerDAO 的价格失败引发了一系列灾难性事件，导致 CDP 所有者损失了价值超过 800 万美元的 ETH 抵押品。</p>\n<h2 id=\"第十四章-多链和跨链协议\"><a href=\"#第十四章-多链和跨链协议\" class=\"headerlink\" title=\"第十四章 多链和跨链协议\"></a>第十四章 多链和跨链协议</h2><h3 id=\"Ren-Project\"><a href=\"#Ren-Project\" class=\"headerlink\" title=\"Ren Project\"></a>Ren Project</h3><p>Ren Project 是一个无需许可的协议，允许用户在区块链之间匿名交互和传输代币。 Ren 协议通过 Ren 虚拟机 (RenVM) 提供支持的 RenBridge 实现这一点。</p>\n<h3 id=\"ThorChain\"><a href=\"#ThorChain\" class=\"headerlink\" title=\"ThorChain\"></a>ThorChain</h3><p>ThorChain 是一个去中心化的流动性网络，具有可互操作的区块链，允许以非托管方式进行跨链代币交换。它不固定或包装资产，但允许用户在各种第 1 层区块链之间交换代币。例如，ThorChain 上的交易者可以将他们的资产从比特币无缝转移到以太坊，而无需注册或通过中心化交易所的 KYC 流程。</p>\n<h3 id=\"Binance-Bridge\"><a href=\"#Binance-Bridge\" class=\"headerlink\" title=\"Binance Bridge\"></a>Binance Bridge</h3><p>使用 Binance Bridge，用户可以在各种区块链之间转移资金，例如 Ethereum、Tron 或 Binance Smart Chain (BSC) 网络。每个特定资产仅支持特定的区块链。例如，Cosmos (ATOM) 和 Ontology (ONT) 等其他区块链的原生代币仅限于币安智能链、币安链或其原生网络之间的转账。每个区块链每天可以转账的数量有限制资产。</p>\n<h3 id=\"Anyswap\"><a href=\"#Anyswap\" class=\"headerlink\" title=\"Anyswap\"></a>Anyswap</h3><p>Anyswap 是一个去中心化的跨链交易所，支持以太坊、币安智能链、Fantom 等八种不同的区块链。它为用户提供了一个多合一的平台，可以将他们的资产交换或转换到其他区块链上。用户可以选择将其资产存入铸币包装代币的传统方法，或直接执行跨链交换以将其代币换成不同区块链上的另一个代币。</p>\n<h3 id=\"Terra-Bridge\"><a href=\"#Terra-Bridge\" class=\"headerlink\" title=\"Terra Bridge\"></a>Terra Bridge</h3><p>Terra Bridge 是一个应用程序，供用户将 Terra 区块链上支持的 Terra 资产发送到以太坊和币安智能链网络。这些资产包括 LUNA（Terra 的原生代币）、UST（Terra USD）等 Terra 稳定币，以及 mTSLA（Tesla）和 mAAPL（Apple Inc.）等镜像资产。</p>\n<h2 id=\"第十五章-DeFi-Exploits\"><a href=\"#第十五章-DeFi-Exploits\" class=\"headerlink\" title=\"第十五章 DeFi Exploits\"></a>第十五章 DeFi Exploits</h2><p>参与DeFi有风险，2020年的时候啊，就出现了12起黑客事件，总共损失了$121m。</p>\n<p>DeFi 的最大风险在于，随着项目利用 DeFi 的可组合性并相互构建，DeFi 应用程序的复杂性呈指数级增长，这使得智能合约审计人员更难发现弱点。 DeFi 应用程序开发人员必须确保网络安全审计人员不断检查他们的代码，以减少任何被利用的可能性，因为错误的后果将是巨大的经济损失。</p>\n<ol>\n<li>经济漏洞/闪电贷款：只要借款人在同一笔交易中偿还贷款，闪电贷允许用户利用几乎无限的资金进行金融交易。它是一种强大的工具，可以让人们操纵过去受资本要求限制的经济攻击。对于闪电贷款，拥有正确的策略是利用机会的唯一要求。几乎所有的 DeFi 黑客都使用了闪电贷。</li>\n<li>项目审计：不是所有项目都负担的起审计，这就会给黑客可乘之机</li>\n<li>编码草率 审计不足：在牛市中，许多项目团队感到有压力快速行动并采取捷径更快地发布他们的产品。有些人可能会决定完全跳过审核以获得先发优势，并且仅在产品上线几个月后进行审核。还有很多“分叉”——使用与其他已建立项目相同的代码的新项目。在没有完全了解代码工作原理的情况下启动它们，它们被视为快速现金攫取，导致许多漏洞。</li>\n<li>Rug Pull：在 DeFi 领域，由匿名团队发起的项目并不少见。有些人这样做是为了避免由于不确定的监管环境而受到监管机构的审查。这就导致如果遇到恶意的项目开发者你追溯不到</li>\n<li>预言机攻击：DeFi 协议需要知道资产价格才能正常运行。例如，借贷协议需要知道资产价格来决定是否清算借款人的头寸。因此，作为 DeFi 基础设施不可或缺的一部分，预言机可能会受到重度操纵。例如，我们在第 12 章中提到了 MakerDao 的金库被利用如何导致不必要的金库清算，造成总计超过 800 万美元的 ETH 损失。</li>\n<li>Metamask攻击：就是攻击你的钱包，不过他们安全团队比较牛逼目前没有出事。</li>\n</ol>\n<h3 id=\"闪电贷款\"><a href=\"#闪电贷款\" class=\"headerlink\" title=\"闪电贷款\"></a>闪电贷款</h3><p>闪贷是指用户可以在没有任何抵押品的情况下借入资金的贷款，只要用户在同一笔交易中偿还贷款。如果用户没有在同一笔交易中偿还闪贷，交易将自动失败，造成交易费用损失，并确保闪贷不会发生。闪贷由各种 DeFi 协议提供，例如 Aave和 dYdX。</p>\n<p>闪电贷主要用于套利目的。套利是利用市场之间的价格差异来获利的行为。例如，假设我们在两个不同的去中心化交易所发现 WBTC 的价格差异很大。我们可以使用闪电贷在没有任何抵押品的情况下借入大量 WBTC，从而从差价中获利。</p>\n<p>闪贷的第二种用途是清算贷款。如果借款人让协议清算他们的头寸，他们通常会受到惩罚。当市场价格波动较大时，借款人可以选择获得闪贷并自行平仓，避免罚款。让我们看一个例子，我们从 Maker 那里借用 DAI 并以 ETH 作为抵押品。当 ETH 的价格大幅下跌时，它可能会接近我们 DAI 贷款的清算水平。我们可能没有 ETH 来增加我们的抵押品，也没有 DAI 来偿还贷款。我们能做的就是通过 DAI 闪贷来偿还 Maker 贷款。然后，我们可以将部分提取的 ETH 抵押品换成 DAI，以立即偿还闪电贷。</p>\n<h3 id=\"闪贷协议：Furucombo\"><a href=\"#闪贷协议：Furucombo\" class=\"headerlink\" title=\"闪贷协议：Furucombo\"></a>闪贷协议：Furucombo</h3><p>Furucombo是一个平台，允许任何人使用闪贷创建套利策略。由于其拖放工具使最终用户能够构建和自定义不同的 DeFi 组合，降低了组装货币乐高的门槛。请注意，Furucombo 不会为您找到套利机会。要使用 Furucombo，用户需要设置输入/输出和交易的顺序，它将所有立方体捆绑到一个交易中执行。</p>\n<h3 id=\"闪贷黑客案例：-bZx\"><a href=\"#闪贷黑客案例：-bZx\" class=\"headerlink\" title=\"闪贷黑客案例： bZx\"></a>闪贷黑客案例： bZx</h3><p>2020 年 2 月 15 日，以太坊区块链上发生了一笔交易。在不到一分钟的时间内，在一个区块和一次交易中实现了大约 360,000 美元的利润。</p>\n<p>这笔交易引起了加密社区的关注并得到了广泛的分析。收益是通过以闪电贷形式进行的最初几乎无风险的贷款实现的，随后是不同去中心化交易所之间的一系列套利。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220514141112852.png\" alt=\"image-20220514141112852\"></p>\n<ol>\n<li>先从dYdX借了10000ETH闪贷</li>\n<li>将5500个质押在Compound来借了112WBTC</li>\n<li>1,300 ETH 存入 bZx 以使用 5 倍杠杆做空 ETH 支持 WBTC。从 bZx 借出的 5,637 ETH 用于使用 KyberSwap 兑换 51 BTC。根据 KyberSwap 算法，Uniswap 提供了最优惠的价格。然而，由于流动性低，掉期将 1 WBTC 的汇率推高至 109.8 WETH 左右，约为期间正常兑换率的三倍。</li>\n<li>攻击者在价格上涨后将借来的 112 WBTC 在 Uniswap 中出售，产生 6,871 ETH，兑换率为 1 WBTC = 61.2 WETH。</li>\n<li>攻击者用未使用的 3,200 ETH 和 6,871 ETH 出售，以 71 ETH 的利润偿还了 10,000 ETH 的闪电贷款</li>\n</ol>\n<p>上述事件不仅证明了通过操纵其他资产的价格获得极端资本收益的可能性，而且除了相对较低的协议费用外，借款人也没有其他成本。借款人面临的唯一条件是贷款要在同一笔交易中偿还。因此，无抵押贷款的概念在该领域开辟了广泛的机会。</p>\n<h2 id=\"第十六章-金融未来\"><a href=\"#第十六章-金融未来\" class=\"headerlink\" title=\"第十六章 金融未来\"></a>第十六章 金融未来</h2><p>DeFi 的使命很明确：以更高的透明度、可访问性、效率、便利性和互操作性重塑传统金融的基础设施和界面。</p>\n"},{"title":"Leetcode-Hard-699","date":"2022-05-25T16:44:55.000Z","author":"Lcy","plugins":["mathjax","katex"],"_content":"\n# [699. 掉落的方块](https://leetcode.cn/problems/falling-squares/)\n\n在无限长的数轴（即 x 轴）上，我们根据给定的顺序放置对应的正方形方块。\n\n第 `i` 个掉落的方块（`positions[i] = (left, side_length)`）是正方形，其中 `left 表示该方块最左边的点位置(positions[i][0])，side_length 表示该方块的边长(positions[i][1])。`\n\n每个方块的底部边缘平行于数轴（即 x 轴），并且从一个比目前所有的落地方块更高的高度掉落而下。在上一个方块结束掉落，并保持静止后，才开始掉落新方块。\n\n方块的底边具有非常大的粘性，并将保持固定在它们所接触的任何长度表面上（无论是数轴还是其他方块）。邻接掉落的边不会过早地粘合在一起，`因为只有底边才具有粘性。`\n\n返回一个堆叠高度列表 `ans` 。每一个堆叠高度 `ans[i]` 表示在通过 `positions[0], positions[1], ..., positions[i]` 表示的方块掉落结束后，目前所有已经落稳的方块堆叠的最高高度。\n\n**示例 1:**\n\n```\n输入: [[1, 2], [2, 3], [6, 1]]\n输出: [2, 5, 5]\n解释:\n\n第一个方块 positions[0] = [1, 2] 掉落：\n_aa\n_aa\n-------\n方块最大高度为 2 。\n\n第二个方块 positions[1] = [2, 3] 掉落：\n__aaa\n__aaa\n__aaa\n_aa__\n_aa__\n--------------\n方块最大高度为5。\n大的方块保持在较小的方块的顶部，不论它的重心在哪里，因为方块的底部边缘有非常大的粘性。\n\n第三个方块 positions[1] = [6, 1] 掉落：\n__aaa\n__aaa\n__aaa\n_aa\n_aa___a\n-------------- \n方块最大高度为5。\n\n因此，我们返回结果[2, 5, 5]。\n```\n\n**示例 2:**\n\n```\n输入: [[100, 100], [200, 100]]\n输出: [100, 100]\n解释: 相邻的方块不会过早地卡住，只有它们的底部边缘才能粘在表面上。\n```\n\n**注意:**\n\n- `1 <= positions.length <= 1000`.\n- `1 <= positions[i][0] <= 10^8`.\n- `1 <= positions[i][1] <= 10^6`.\n\n## 分析\n其实要我说这个题目，我最最最最直观的想法就是线段树，因为很明显他需要处理的就是获取某一段当前的最大值，然后更新当前的最大值，就完事了。\n\n预处理：获取一下左边界和有边界，好构造一个线段树\n\n<span style=\"background-color: yellow;\">但是！</span>这里也可以明显的看到`position[i][0]`的数据范围是到10^8所以肯定就是不能直接用线段树了，因为范围超了。这就很尴尬了。\n\n再看咱就是说position.length其实是长度极为有限的。也就1000，每次顶多把一个区间加几段，不会超过3段，所以，最多就是3k个段，那么就考虑是不是可以一直维护区间。\n\n比如对于样例一：\n\n一开始维护[1,100000000] = 0\n\n掉落第一个方块后维护[1,2] = 2 [3,100000000] = 0\n\n掉落第二个方块后维护[1,1] = 2 [2,4] =5 [5,100000000]= 0\n\n以此类推，通过各种精准的判断维护这个区间列表？\n\n感觉逻辑上是可行的，就是写起来比较讨厌罢了。\n\n<span style=\"background-color: yellow;\">然而我又忘了一件事情，线段树是可以压缩的，经典的那个窗外的星星，阿不那好像是扫描线，whatever，线段树应该是可以解决的。</span>\n\nWhatever，先实现通过\n\n## 实现\n\n```python\nclass Solution:\n    def fallingSquares(self, positions: List[List[int]]) -> List[int]:\n        ground = [[1,100000000,0]]\n        ans = []\n        for i in range(0,len(positions)):\n            left = positions[i][0]\n            right = left + positions[i][1] - 1 # 获得我们需要的这个方块的左右边界，然后现在就是需要得到这个方块左右边界当前的最大值。\n            maxheight = 0 \n            for j in range(0,len(ground)):\n                l = ground[j][0]\n                r = ground[j][1] \n                if (l<= left and r >=left) or (left <= l and r <= right) or (l<=right and r >=right): # 某一个区块的有边界在\n                    if ground[j][2] > maxheight:\n                        maxheight = ground[j][2]\n                # 找到了当前的最大值。\n            maxheight += positions[i][1] # 最大高度肯定是加上去了。那么下一步就是更新当前的这个ground数组。\n            # print(left,right,maxheight)\n            tmp = []\n            for j in range(0,len(ground)):\n                if ground[j][1] < left:\n                    tmp.append(ground[j])\n                if ground[j][0] > right:\n                    tmp.append(ground[j])\n                if ground[j][0] == left:\n                    tmp.append([left,right,maxheight])\n                if ground[j][0] < left and ground[j][1] >= left:\n                    tmp.append([ground[j][0],left - 1,ground[j][2]])\n                    tmp.append([left,right,maxheight])\n                if ground[j][0] <= right and ground[j][1] > right:\n                    tmp.append([right+1,ground[j][1],ground[j][2]])\n            ground = tmp.copy()\n            # print(ground)\n            if len(ans) != 0:\n                maxheight = max(maxheight,ans[-1])\n            ans.append(maxheight) # 答案加进去\n        return ans \n```\n\n","source":"_posts/Leetcode-Hard-699.md","raw":"---\ntitle: Leetcode-Hard-699\ndate: 2022-05-26 00:44:55\ntags: leetcode\ncategories: leetcode\nauthor: Lcy\nplugins: \n- mathjax\n- katex\n---\n\n# [699. 掉落的方块](https://leetcode.cn/problems/falling-squares/)\n\n在无限长的数轴（即 x 轴）上，我们根据给定的顺序放置对应的正方形方块。\n\n第 `i` 个掉落的方块（`positions[i] = (left, side_length)`）是正方形，其中 `left 表示该方块最左边的点位置(positions[i][0])，side_length 表示该方块的边长(positions[i][1])。`\n\n每个方块的底部边缘平行于数轴（即 x 轴），并且从一个比目前所有的落地方块更高的高度掉落而下。在上一个方块结束掉落，并保持静止后，才开始掉落新方块。\n\n方块的底边具有非常大的粘性，并将保持固定在它们所接触的任何长度表面上（无论是数轴还是其他方块）。邻接掉落的边不会过早地粘合在一起，`因为只有底边才具有粘性。`\n\n返回一个堆叠高度列表 `ans` 。每一个堆叠高度 `ans[i]` 表示在通过 `positions[0], positions[1], ..., positions[i]` 表示的方块掉落结束后，目前所有已经落稳的方块堆叠的最高高度。\n\n**示例 1:**\n\n```\n输入: [[1, 2], [2, 3], [6, 1]]\n输出: [2, 5, 5]\n解释:\n\n第一个方块 positions[0] = [1, 2] 掉落：\n_aa\n_aa\n-------\n方块最大高度为 2 。\n\n第二个方块 positions[1] = [2, 3] 掉落：\n__aaa\n__aaa\n__aaa\n_aa__\n_aa__\n--------------\n方块最大高度为5。\n大的方块保持在较小的方块的顶部，不论它的重心在哪里，因为方块的底部边缘有非常大的粘性。\n\n第三个方块 positions[1] = [6, 1] 掉落：\n__aaa\n__aaa\n__aaa\n_aa\n_aa___a\n-------------- \n方块最大高度为5。\n\n因此，我们返回结果[2, 5, 5]。\n```\n\n**示例 2:**\n\n```\n输入: [[100, 100], [200, 100]]\n输出: [100, 100]\n解释: 相邻的方块不会过早地卡住，只有它们的底部边缘才能粘在表面上。\n```\n\n**注意:**\n\n- `1 <= positions.length <= 1000`.\n- `1 <= positions[i][0] <= 10^8`.\n- `1 <= positions[i][1] <= 10^6`.\n\n## 分析\n其实要我说这个题目，我最最最最直观的想法就是线段树，因为很明显他需要处理的就是获取某一段当前的最大值，然后更新当前的最大值，就完事了。\n\n预处理：获取一下左边界和有边界，好构造一个线段树\n\n<span style=\"background-color: yellow;\">但是！</span>这里也可以明显的看到`position[i][0]`的数据范围是到10^8所以肯定就是不能直接用线段树了，因为范围超了。这就很尴尬了。\n\n再看咱就是说position.length其实是长度极为有限的。也就1000，每次顶多把一个区间加几段，不会超过3段，所以，最多就是3k个段，那么就考虑是不是可以一直维护区间。\n\n比如对于样例一：\n\n一开始维护[1,100000000] = 0\n\n掉落第一个方块后维护[1,2] = 2 [3,100000000] = 0\n\n掉落第二个方块后维护[1,1] = 2 [2,4] =5 [5,100000000]= 0\n\n以此类推，通过各种精准的判断维护这个区间列表？\n\n感觉逻辑上是可行的，就是写起来比较讨厌罢了。\n\n<span style=\"background-color: yellow;\">然而我又忘了一件事情，线段树是可以压缩的，经典的那个窗外的星星，阿不那好像是扫描线，whatever，线段树应该是可以解决的。</span>\n\nWhatever，先实现通过\n\n## 实现\n\n```python\nclass Solution:\n    def fallingSquares(self, positions: List[List[int]]) -> List[int]:\n        ground = [[1,100000000,0]]\n        ans = []\n        for i in range(0,len(positions)):\n            left = positions[i][0]\n            right = left + positions[i][1] - 1 # 获得我们需要的这个方块的左右边界，然后现在就是需要得到这个方块左右边界当前的最大值。\n            maxheight = 0 \n            for j in range(0,len(ground)):\n                l = ground[j][0]\n                r = ground[j][1] \n                if (l<= left and r >=left) or (left <= l and r <= right) or (l<=right and r >=right): # 某一个区块的有边界在\n                    if ground[j][2] > maxheight:\n                        maxheight = ground[j][2]\n                # 找到了当前的最大值。\n            maxheight += positions[i][1] # 最大高度肯定是加上去了。那么下一步就是更新当前的这个ground数组。\n            # print(left,right,maxheight)\n            tmp = []\n            for j in range(0,len(ground)):\n                if ground[j][1] < left:\n                    tmp.append(ground[j])\n                if ground[j][0] > right:\n                    tmp.append(ground[j])\n                if ground[j][0] == left:\n                    tmp.append([left,right,maxheight])\n                if ground[j][0] < left and ground[j][1] >= left:\n                    tmp.append([ground[j][0],left - 1,ground[j][2]])\n                    tmp.append([left,right,maxheight])\n                if ground[j][0] <= right and ground[j][1] > right:\n                    tmp.append([right+1,ground[j][1],ground[j][2]])\n            ground = tmp.copy()\n            # print(ground)\n            if len(ans) != 0:\n                maxheight = max(maxheight,ans[-1])\n            ans.append(maxheight) # 答案加进去\n        return ans \n```\n\n","slug":"Leetcode-Hard-699","published":1,"updated":"2022-07-02T15:49:59.941Z","_id":"cl3lutt7w00008wem53pq71wd","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"699-掉落的方块\"><a href=\"#699-掉落的方块\" class=\"headerlink\" title=\"699. 掉落的方块\"></a><a href=\"https://leetcode.cn/problems/falling-squares/\">699. 掉落的方块</a></h1><p>在无限长的数轴（即 x 轴）上，我们根据给定的顺序放置对应的正方形方块。</p>\n<p>第 <code>i</code> 个掉落的方块（<code>positions[i] = (left, side_length)</code>）是正方形，其中 <code>left 表示该方块最左边的点位置(positions[i][0])，side_length 表示该方块的边长(positions[i][1])。</code></p>\n<p>每个方块的底部边缘平行于数轴（即 x 轴），并且从一个比目前所有的落地方块更高的高度掉落而下。在上一个方块结束掉落，并保持静止后，才开始掉落新方块。</p>\n<p>方块的底边具有非常大的粘性，并将保持固定在它们所接触的任何长度表面上（无论是数轴还是其他方块）。邻接掉落的边不会过早地粘合在一起，<code>因为只有底边才具有粘性。</code></p>\n<p>返回一个堆叠高度列表 <code>ans</code> 。每一个堆叠高度 <code>ans[i]</code> 表示在通过 <code>positions[0], positions[1], ..., positions[i]</code> 表示的方块掉落结束后，目前所有已经落稳的方块堆叠的最高高度。</p>\n<p><strong>示例 1:</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: [[1, 2], [2, 3], [6, 1]]</span><br><span class=\"line\">输出: [2, 5, 5]</span><br><span class=\"line\">解释:</span><br><span class=\"line\"></span><br><span class=\"line\">第一个方块 positions[0] = [1, 2] 掉落：</span><br><span class=\"line\">_aa</span><br><span class=\"line\">_aa</span><br><span class=\"line\">-------</span><br><span class=\"line\">方块最大高度为 2 。</span><br><span class=\"line\"></span><br><span class=\"line\">第二个方块 positions[1] = [2, 3] 掉落：</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">_aa__</span><br><span class=\"line\">_aa__</span><br><span class=\"line\">--------------</span><br><span class=\"line\">方块最大高度为5。</span><br><span class=\"line\">大的方块保持在较小的方块的顶部，不论它的重心在哪里，因为方块的底部边缘有非常大的粘性。</span><br><span class=\"line\"></span><br><span class=\"line\">第三个方块 positions[1] = [6, 1] 掉落：</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">_aa</span><br><span class=\"line\">_aa___a</span><br><span class=\"line\">-------------- </span><br><span class=\"line\">方块最大高度为5。</span><br><span class=\"line\"></span><br><span class=\"line\">因此，我们返回结果[2, 5, 5]。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2:</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: [[100, 100], [200, 100]]</span><br><span class=\"line\">输出: [100, 100]</span><br><span class=\"line\">解释: 相邻的方块不会过早地卡住，只有它们的底部边缘才能粘在表面上。</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意:</strong></p>\n<ul>\n<li><code>1 &lt;= positions.length &lt;= 1000</code>.</li>\n<li><code>1 &lt;= positions[i][0] &lt;= 10^8</code>.</li>\n<li><code>1 &lt;= positions[i][1] &lt;= 10^6</code>.</li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><div class=\"story post-story\"><p>其实要我说这个题目，我最最最最直观的想法就是线段树，因为很明显他需要处理的就是获取某一段当前的最大值，然后更新当前的最大值，就完事了。</p>\n<p>预处理：获取一下左边界和有边界，好构造一个线段树</p>\n<p><span style=\"background-color: yellow;\">但是！</span>这里也可以明显的看到<code>position[i][0]</code>的数据范围是到10^8所以肯定就是不能直接用线段树了，因为范围超了。这就很尴尬了。</p>\n<p>再看咱就是说position.length其实是长度极为有限的。也就1000，每次顶多把一个区间加几段，不会超过3段，所以，最多就是3k个段，那么就考虑是不是可以一直维护区间。</p>\n<p>比如对于样例一：</p>\n<p>一开始维护[1,100000000] = 0</p>\n<p>掉落第一个方块后维护[1,2] = 2 [3,100000000] = 0</p>\n<p>掉落第二个方块后维护[1,1] = 2 [2,4] =5 [5,100000000]= 0</p>\n<p>以此类推，通过各种精准的判断维护这个区间列表？</p>\n<p>感觉逻辑上是可行的，就是写起来比较讨厌罢了。</p>\n<p><span style=\"background-color: yellow;\">然而我又忘了一件事情，线段树是可以压缩的，经典的那个窗外的星星，阿不那好像是扫描线，whatever，线段树应该是可以解决的。</span></p>\n<p>Whatever，先实现通过</p>\n</div><h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><div class=\"story post-story\"><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">fallingSquares</span>(<span class=\"params\">self, positions: <span class=\"type\">List</span>[<span class=\"type\">List</span>[<span class=\"built_in\">int</span>]]</span>) -&gt; <span class=\"type\">List</span>[<span class=\"built_in\">int</span>]:</span><br><span class=\"line\">        ground = [[<span class=\"number\">1</span>,<span class=\"number\">100000000</span>,<span class=\"number\">0</span>]]</span><br><span class=\"line\">        ans = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(positions)):</span><br><span class=\"line\">            left = positions[i][<span class=\"number\">0</span>]</span><br><span class=\"line\">            right = left + positions[i][<span class=\"number\">1</span>] - <span class=\"number\">1</span> <span class=\"comment\"># 获得我们需要的这个方块的左右边界，然后现在就是需要得到这个方块左右边界当前的最大值。</span></span><br><span class=\"line\">            maxheight = <span class=\"number\">0</span> </span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ground)):</span><br><span class=\"line\">                l = ground[j][<span class=\"number\">0</span>]</span><br><span class=\"line\">                r = ground[j][<span class=\"number\">1</span>] </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (l&lt;= left <span class=\"keyword\">and</span> r &gt;=left) <span class=\"keyword\">or</span> (left &lt;= l <span class=\"keyword\">and</span> r &lt;= right) <span class=\"keyword\">or</span> (l&lt;=right <span class=\"keyword\">and</span> r &gt;=right): <span class=\"comment\"># 某一个区块的有边界在</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ground[j][<span class=\"number\">2</span>] &gt; maxheight:</span><br><span class=\"line\">                        maxheight = ground[j][<span class=\"number\">2</span>]</span><br><span class=\"line\">                <span class=\"comment\"># 找到了当前的最大值。</span></span><br><span class=\"line\">            maxheight += positions[i][<span class=\"number\">1</span>] <span class=\"comment\"># 最大高度肯定是加上去了。那么下一步就是更新当前的这个ground数组。</span></span><br><span class=\"line\">            <span class=\"comment\"># print(left,right,maxheight)</span></span><br><span class=\"line\">            tmp = []</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ground)):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">1</span>] &lt; left:</span><br><span class=\"line\">                    tmp.append(ground[j])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &gt; right:</span><br><span class=\"line\">                    tmp.append(ground[j])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] == left:</span><br><span class=\"line\">                    tmp.append([left,right,maxheight])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &lt; left <span class=\"keyword\">and</span> ground[j][<span class=\"number\">1</span>] &gt;= left:</span><br><span class=\"line\">                    tmp.append([ground[j][<span class=\"number\">0</span>],left - <span class=\"number\">1</span>,ground[j][<span class=\"number\">2</span>]])</span><br><span class=\"line\">                    tmp.append([left,right,maxheight])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &lt;= right <span class=\"keyword\">and</span> ground[j][<span class=\"number\">1</span>] &gt; right:</span><br><span class=\"line\">                    tmp.append([right+<span class=\"number\">1</span>,ground[j][<span class=\"number\">1</span>],ground[j][<span class=\"number\">2</span>]])</span><br><span class=\"line\">            ground = tmp.copy()</span><br><span class=\"line\">            <span class=\"comment\"># print(ground)</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(ans) != <span class=\"number\">0</span>:</span><br><span class=\"line\">                maxheight = <span class=\"built_in\">max</span>(maxheight,ans[-<span class=\"number\">1</span>])</span><br><span class=\"line\">            ans.append(maxheight) <span class=\"comment\"># 答案加进去</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans </span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"699-掉落的方块\"><a href=\"#699-掉落的方块\" class=\"headerlink\" title=\"699. 掉落的方块\"></a><a href=\"https://leetcode.cn/problems/falling-squares/\">699. 掉落的方块</a></h1><p>在无限长的数轴（即 x 轴）上，我们根据给定的顺序放置对应的正方形方块。</p>\n<p>第 <code>i</code> 个掉落的方块（<code>positions[i] = (left, side_length)</code>）是正方形，其中 <code>left 表示该方块最左边的点位置(positions[i][0])，side_length 表示该方块的边长(positions[i][1])。</code></p>\n<p>每个方块的底部边缘平行于数轴（即 x 轴），并且从一个比目前所有的落地方块更高的高度掉落而下。在上一个方块结束掉落，并保持静止后，才开始掉落新方块。</p>\n<p>方块的底边具有非常大的粘性，并将保持固定在它们所接触的任何长度表面上（无论是数轴还是其他方块）。邻接掉落的边不会过早地粘合在一起，<code>因为只有底边才具有粘性。</code></p>\n<p>返回一个堆叠高度列表 <code>ans</code> 。每一个堆叠高度 <code>ans[i]</code> 表示在通过 <code>positions[0], positions[1], ..., positions[i]</code> 表示的方块掉落结束后，目前所有已经落稳的方块堆叠的最高高度。</p>\n<p><strong>示例 1:</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: [[1, 2], [2, 3], [6, 1]]</span><br><span class=\"line\">输出: [2, 5, 5]</span><br><span class=\"line\">解释:</span><br><span class=\"line\"></span><br><span class=\"line\">第一个方块 positions[0] = [1, 2] 掉落：</span><br><span class=\"line\">_aa</span><br><span class=\"line\">_aa</span><br><span class=\"line\">-------</span><br><span class=\"line\">方块最大高度为 2 。</span><br><span class=\"line\"></span><br><span class=\"line\">第二个方块 positions[1] = [2, 3] 掉落：</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">_aa__</span><br><span class=\"line\">_aa__</span><br><span class=\"line\">--------------</span><br><span class=\"line\">方块最大高度为5。</span><br><span class=\"line\">大的方块保持在较小的方块的顶部，不论它的重心在哪里，因为方块的底部边缘有非常大的粘性。</span><br><span class=\"line\"></span><br><span class=\"line\">第三个方块 positions[1] = [6, 1] 掉落：</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">__aaa</span><br><span class=\"line\">_aa</span><br><span class=\"line\">_aa___a</span><br><span class=\"line\">-------------- </span><br><span class=\"line\">方块最大高度为5。</span><br><span class=\"line\"></span><br><span class=\"line\">因此，我们返回结果[2, 5, 5]。</span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2:</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: [[100, 100], [200, 100]]</span><br><span class=\"line\">输出: [100, 100]</span><br><span class=\"line\">解释: 相邻的方块不会过早地卡住，只有它们的底部边缘才能粘在表面上。</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意:</strong></p>\n<ul>\n<li><code>1 &lt;= positions.length &lt;= 1000</code>.</li>\n<li><code>1 &lt;= positions[i][0] &lt;= 10^8</code>.</li>\n<li><code>1 &lt;= positions[i][1] &lt;= 10^6</code>.</li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>其实要我说这个题目，我最最最最直观的想法就是线段树，因为很明显他需要处理的就是获取某一段当前的最大值，然后更新当前的最大值，就完事了。</p>\n<p>预处理：获取一下左边界和有边界，好构造一个线段树</p>\n<p><span style=\"background-color: yellow;\">但是！</span>这里也可以明显的看到<code>position[i][0]</code>的数据范围是到10^8所以肯定就是不能直接用线段树了，因为范围超了。这就很尴尬了。</p>\n<p>再看咱就是说position.length其实是长度极为有限的。也就1000，每次顶多把一个区间加几段，不会超过3段，所以，最多就是3k个段，那么就考虑是不是可以一直维护区间。</p>\n<p>比如对于样例一：</p>\n<p>一开始维护[1,100000000] = 0</p>\n<p>掉落第一个方块后维护[1,2] = 2 [3,100000000] = 0</p>\n<p>掉落第二个方块后维护[1,1] = 2 [2,4] =5 [5,100000000]= 0</p>\n<p>以此类推，通过各种精准的判断维护这个区间列表？</p>\n<p>感觉逻辑上是可行的，就是写起来比较讨厌罢了。</p>\n<p><span style=\"background-color: yellow;\">然而我又忘了一件事情，线段树是可以压缩的，经典的那个窗外的星星，阿不那好像是扫描线，whatever，线段树应该是可以解决的。</span></p>\n<p>Whatever，先实现通过</p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">fallingSquares</span>(<span class=\"params\">self, positions: <span class=\"type\">List</span>[<span class=\"type\">List</span>[<span class=\"built_in\">int</span>]]</span>) -&gt; <span class=\"type\">List</span>[<span class=\"built_in\">int</span>]:</span><br><span class=\"line\">        ground = [[<span class=\"number\">1</span>,<span class=\"number\">100000000</span>,<span class=\"number\">0</span>]]</span><br><span class=\"line\">        ans = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(positions)):</span><br><span class=\"line\">            left = positions[i][<span class=\"number\">0</span>]</span><br><span class=\"line\">            right = left + positions[i][<span class=\"number\">1</span>] - <span class=\"number\">1</span> <span class=\"comment\"># 获得我们需要的这个方块的左右边界，然后现在就是需要得到这个方块左右边界当前的最大值。</span></span><br><span class=\"line\">            maxheight = <span class=\"number\">0</span> </span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ground)):</span><br><span class=\"line\">                l = ground[j][<span class=\"number\">0</span>]</span><br><span class=\"line\">                r = ground[j][<span class=\"number\">1</span>] </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (l&lt;= left <span class=\"keyword\">and</span> r &gt;=left) <span class=\"keyword\">or</span> (left &lt;= l <span class=\"keyword\">and</span> r &lt;= right) <span class=\"keyword\">or</span> (l&lt;=right <span class=\"keyword\">and</span> r &gt;=right): <span class=\"comment\"># 某一个区块的有边界在</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ground[j][<span class=\"number\">2</span>] &gt; maxheight:</span><br><span class=\"line\">                        maxheight = ground[j][<span class=\"number\">2</span>]</span><br><span class=\"line\">                <span class=\"comment\"># 找到了当前的最大值。</span></span><br><span class=\"line\">            maxheight += positions[i][<span class=\"number\">1</span>] <span class=\"comment\"># 最大高度肯定是加上去了。那么下一步就是更新当前的这个ground数组。</span></span><br><span class=\"line\">            <span class=\"comment\"># print(left,right,maxheight)</span></span><br><span class=\"line\">            tmp = []</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(ground)):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">1</span>] &lt; left:</span><br><span class=\"line\">                    tmp.append(ground[j])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &gt; right:</span><br><span class=\"line\">                    tmp.append(ground[j])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] == left:</span><br><span class=\"line\">                    tmp.append([left,right,maxheight])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &lt; left <span class=\"keyword\">and</span> ground[j][<span class=\"number\">1</span>] &gt;= left:</span><br><span class=\"line\">                    tmp.append([ground[j][<span class=\"number\">0</span>],left - <span class=\"number\">1</span>,ground[j][<span class=\"number\">2</span>]])</span><br><span class=\"line\">                    tmp.append([left,right,maxheight])</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ground[j][<span class=\"number\">0</span>] &lt;= right <span class=\"keyword\">and</span> ground[j][<span class=\"number\">1</span>] &gt; right:</span><br><span class=\"line\">                    tmp.append([right+<span class=\"number\">1</span>,ground[j][<span class=\"number\">1</span>],ground[j][<span class=\"number\">2</span>]])</span><br><span class=\"line\">            ground = tmp.copy()</span><br><span class=\"line\">            <span class=\"comment\"># print(ground)</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(ans) != <span class=\"number\">0</span>:</span><br><span class=\"line\">                maxheight = <span class=\"built_in\">max</span>(maxheight,ans[-<span class=\"number\">1</span>])</span><br><span class=\"line\">            ans.append(maxheight) <span class=\"comment\"># 答案加进去</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans </span><br></pre></td></tr></table></figure>\n\n"},{"title":"Leetcode-Hard-42","date":"2022-05-30T08:23:41.000Z","author":"Lcy","_content":"\n# [42. 接雨水](https://leetcode.cn/problems/trapping-rain-water/)\n\n给定 `n` 个非负整数表示每个宽度为 `1` 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。\n\n \n\n**示例 1：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/rainwatertrap.png)\n\n```\n输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]\n输出：6\n解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 \n```\n\n**示例 2：**\n\n```\n输入：height = [4,2,0,3,2,5]\n输出：9\n```\n\n \n\n**提示：**\n\n- `n == height.length`\n- `1 <= n <= 2 * 104`\n- `0 <= height[i] <= 105`\n\n## 分析\n\n其实这个很直观啊，两个数组存一下一个方块左边和右边的最大值就好了。\n\n## 实现\n\n```python\nclass Solution:\n    def trap(self, height: List[int]) -> int:\n        maxleft = [0]*len(height)\n        maxright = [0]*len(height)\n        for i in range(0,len(height)):\n            if i == 0:\n                maxleft[i] = 0\n            else:\n                maxleft[i] = max(maxleft[i-1],height[i-1])\n            now = len(height) - i - 1\n            if now == len(height) - 1:\n                maxright[now] = 0\n            else:\n                maxright[now] = max(maxright[now+1],height[now+1])\n        \n        ans = 0\n        for i in range(1,len(height) - 1):\n            temp = min(maxleft[i],maxright[i])\n            if temp > height[i]:\n                ans += temp - height[i]\n        return ans\n```\n\n","source":"_posts/Leetcode-Hard-42.md","raw":"---\ntitle: Leetcode-Hard-42\ndate: 2022-05-30 16:23:41\ntags: leetcode\ncategories: leetcode\nauthor: Lcy\n---\n\n# [42. 接雨水](https://leetcode.cn/problems/trapping-rain-water/)\n\n给定 `n` 个非负整数表示每个宽度为 `1` 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。\n\n \n\n**示例 1：**\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/rainwatertrap.png)\n\n```\n输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]\n输出：6\n解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 \n```\n\n**示例 2：**\n\n```\n输入：height = [4,2,0,3,2,5]\n输出：9\n```\n\n \n\n**提示：**\n\n- `n == height.length`\n- `1 <= n <= 2 * 104`\n- `0 <= height[i] <= 105`\n\n## 分析\n\n其实这个很直观啊，两个数组存一下一个方块左边和右边的最大值就好了。\n\n## 实现\n\n```python\nclass Solution:\n    def trap(self, height: List[int]) -> int:\n        maxleft = [0]*len(height)\n        maxright = [0]*len(height)\n        for i in range(0,len(height)):\n            if i == 0:\n                maxleft[i] = 0\n            else:\n                maxleft[i] = max(maxleft[i-1],height[i-1])\n            now = len(height) - i - 1\n            if now == len(height) - 1:\n                maxright[now] = 0\n            else:\n                maxright[now] = max(maxright[now+1],height[now+1])\n        \n        ans = 0\n        for i in range(1,len(height) - 1):\n            temp = min(maxleft[i],maxright[i])\n            if temp > height[i]:\n                ans += temp - height[i]\n        return ans\n```\n\n","slug":"Leetcode-Hard-42","published":1,"updated":"2022-07-02T15:49:59.940Z","_id":"cl3sgtqpj0000hkemdbererjo","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"42-接雨水\"><a href=\"#42-接雨水\" class=\"headerlink\" title=\"42. 接雨水\"></a><a href=\"https://leetcode.cn/problems/trapping-rain-water/\">42. 接雨水</a></h1><p>给定 <code>n</code> 个非负整数表示每个宽度为 <code>1</code> 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p>\n<p><strong>示例 1：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/rainwatertrap.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/rainwatertrap.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 </span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：height = [4,2,0,3,2,5]</span><br><span class=\"line\">输出：9</span><br></pre></td></tr></table></figure>\n\n<p><strong>提示：</strong></p>\n<ul>\n<li><code>n == height.length</code></li>\n<li><code>1 &lt;= n &lt;= 2 * 104</code></li>\n<li><code>0 &lt;= height[i] &lt;= 105</code></li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><div class=\"story post-story\"><p>其实这个很直观啊，两个数组存一下一个方块左边和右边的最大值就好了。</p>\n</div><h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><div class=\"story post-story\"><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">trap</span>(<span class=\"params\">self, height: <span class=\"type\">List</span>[<span class=\"built_in\">int</span>]</span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        maxleft = [<span class=\"number\">0</span>]*<span class=\"built_in\">len</span>(height)</span><br><span class=\"line\">        maxright = [<span class=\"number\">0</span>]*<span class=\"built_in\">len</span>(height)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(height)):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == <span class=\"number\">0</span>:</span><br><span class=\"line\">                maxleft[i] = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                maxleft[i] = <span class=\"built_in\">max</span>(maxleft[i-<span class=\"number\">1</span>],height[i-<span class=\"number\">1</span>])</span><br><span class=\"line\">            now = <span class=\"built_in\">len</span>(height) - i - <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> now == <span class=\"built_in\">len</span>(height) - <span class=\"number\">1</span>:</span><br><span class=\"line\">                maxright[now] = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                maxright[now] = <span class=\"built_in\">max</span>(maxright[now+<span class=\"number\">1</span>],height[now+<span class=\"number\">1</span>])</span><br><span class=\"line\">        </span><br><span class=\"line\">        ans = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,<span class=\"built_in\">len</span>(height) - <span class=\"number\">1</span>):</span><br><span class=\"line\">            temp = <span class=\"built_in\">min</span>(maxleft[i],maxright[i])</span><br><span class=\"line\">            <span class=\"keyword\">if</span> temp &gt; height[i]:</span><br><span class=\"line\">                ans += temp - height[i]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"42-接雨水\"><a href=\"#42-接雨水\" class=\"headerlink\" title=\"42. 接雨水\"></a><a href=\"https://leetcode.cn/problems/trapping-rain-water/\">42. 接雨水</a></h1><p>给定 <code>n</code> 个非负整数表示每个宽度为 <code>1</code> 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p>\n<p><strong>示例 1：</strong></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/rainwatertrap.png\" alt=\"img\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 </span><br></pre></td></tr></table></figure>\n\n<p><strong>示例 2：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：height = [4,2,0,3,2,5]</span><br><span class=\"line\">输出：9</span><br></pre></td></tr></table></figure>\n\n<p><strong>提示：</strong></p>\n<ul>\n<li><code>n == height.length</code></li>\n<li><code>1 &lt;= n &lt;= 2 * 104</code></li>\n<li><code>0 &lt;= height[i] &lt;= 105</code></li>\n</ul>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p>其实这个很直观啊，两个数组存一下一个方块左边和右边的最大值就好了。</p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">trap</span>(<span class=\"params\">self, height: <span class=\"type\">List</span>[<span class=\"built_in\">int</span>]</span>) -&gt; <span class=\"built_in\">int</span>:</span><br><span class=\"line\">        maxleft = [<span class=\"number\">0</span>]*<span class=\"built_in\">len</span>(height)</span><br><span class=\"line\">        maxright = [<span class=\"number\">0</span>]*<span class=\"built_in\">len</span>(height)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(height)):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == <span class=\"number\">0</span>:</span><br><span class=\"line\">                maxleft[i] = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                maxleft[i] = <span class=\"built_in\">max</span>(maxleft[i-<span class=\"number\">1</span>],height[i-<span class=\"number\">1</span>])</span><br><span class=\"line\">            now = <span class=\"built_in\">len</span>(height) - i - <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> now == <span class=\"built_in\">len</span>(height) - <span class=\"number\">1</span>:</span><br><span class=\"line\">                maxright[now] = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                maxright[now] = <span class=\"built_in\">max</span>(maxright[now+<span class=\"number\">1</span>],height[now+<span class=\"number\">1</span>])</span><br><span class=\"line\">        </span><br><span class=\"line\">        ans = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>,<span class=\"built_in\">len</span>(height) - <span class=\"number\">1</span>):</span><br><span class=\"line\">            temp = <span class=\"built_in\">min</span>(maxleft[i],maxright[i])</span><br><span class=\"line\">            <span class=\"keyword\">if</span> temp &gt; height[i]:</span><br><span class=\"line\">                ans += temp - height[i]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n\n"},{"title":"ubuntu 安装科学上网","date":"2022-06-09T15:03:07.000Z","author":"Lcy","_content":"\n## 1.安装ShadowSocks\n\n```shell\napt-get install python3-pip\napt install libsodium-dev\npip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U\n```\n\n## 2.ShadowSocks配置\n\n### 找到ShadowSocks的安装位置\n\n```shell\nfind / -name shadows*\n```\n\n### 在安装路径下新建并修改默认配置文件\n\n```shell\nsudo vim config.json\n```\n\n并写入如下内容\n\n```\n{  \"server\":\"*****\",  \"server_port\":*****,  \"local_port\":1080,  \"password\":\"*****\",  \"timeout\":600,  \"method\":\"chacha20-ietf-poly1305\"  }\n```\n\n其中server、server_port、password处需要分别替换为你购买的服务器网址、端口和密码。\n\n确定上面的配置文件没有问题，即可在终端输入如下命令以启动ShadowSocks。\n\n```shell\nsslocal\n```\n\n## 3. 开机启动\n\n修改rc.local文件\n\n```shell\ncd /etc\nvim rc.local\n```\n\n添加一行\n\n```shell\n/usr/local/bin/sslocal -c /usr/local/lib/python3.8/dist-packages/shadowsocks/config.json\n```\n\n注意后面的要是你自己的shadowsocks路径\n\n经过上面的配置，只是启动了sslocal，但是要上网，还需要配置浏览器到指定代理端口，如1080，才可以正式上网。\n\n## 4. 配置浏览器\n\n### 安装插件\n\n我们需要给chrome安装SwitchyOmega插件，但是没有代理之前是不能从谷歌商店安装这个插件的，但是我们可以从Github上直接下载最新版 https://github.com/FelisCatus/SwitchyOmega/releases/ （这个是chrome的）然后浏览器地址打开chrome://extensions/，将下载的插件托进去安装。\n\n## 5.Git使用代理\n\n```shell\ngit config --global http.proxy socks5://127.0.0.1:1080\ngit config --global https.proxy socks5://127.0.0.1:1080\n```\n\n","source":"_posts/ubuntu-安装科学上网.md","raw":"---\ntitle: ubuntu 安装科学上网\ndate: 2022-06-09 23:03:07\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n## 1.安装ShadowSocks\n\n```shell\napt-get install python3-pip\napt install libsodium-dev\npip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U\n```\n\n## 2.ShadowSocks配置\n\n### 找到ShadowSocks的安装位置\n\n```shell\nfind / -name shadows*\n```\n\n### 在安装路径下新建并修改默认配置文件\n\n```shell\nsudo vim config.json\n```\n\n并写入如下内容\n\n```\n{  \"server\":\"*****\",  \"server_port\":*****,  \"local_port\":1080,  \"password\":\"*****\",  \"timeout\":600,  \"method\":\"chacha20-ietf-poly1305\"  }\n```\n\n其中server、server_port、password处需要分别替换为你购买的服务器网址、端口和密码。\n\n确定上面的配置文件没有问题，即可在终端输入如下命令以启动ShadowSocks。\n\n```shell\nsslocal\n```\n\n## 3. 开机启动\n\n修改rc.local文件\n\n```shell\ncd /etc\nvim rc.local\n```\n\n添加一行\n\n```shell\n/usr/local/bin/sslocal -c /usr/local/lib/python3.8/dist-packages/shadowsocks/config.json\n```\n\n注意后面的要是你自己的shadowsocks路径\n\n经过上面的配置，只是启动了sslocal，但是要上网，还需要配置浏览器到指定代理端口，如1080，才可以正式上网。\n\n## 4. 配置浏览器\n\n### 安装插件\n\n我们需要给chrome安装SwitchyOmega插件，但是没有代理之前是不能从谷歌商店安装这个插件的，但是我们可以从Github上直接下载最新版 https://github.com/FelisCatus/SwitchyOmega/releases/ （这个是chrome的）然后浏览器地址打开chrome://extensions/，将下载的插件托进去安装。\n\n## 5.Git使用代理\n\n```shell\ngit config --global http.proxy socks5://127.0.0.1:1080\ngit config --global https.proxy socks5://127.0.0.1:1080\n```\n\n","slug":"ubuntu-安装科学上网","published":1,"updated":"2022-07-02T15:49:59.944Z","_id":"cl476isdl0000uwem7603dprj","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-安装ShadowSocks\"><a href=\"#1-安装ShadowSocks\" class=\"headerlink\" title=\"1.安装ShadowSocks\"></a>1.安装ShadowSocks</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install python3-pip</span><br><span class=\"line\">apt install libsodium-dev</span><br><span class=\"line\">pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"2-ShadowSocks配置\"><a href=\"#2-ShadowSocks配置\" class=\"headerlink\" title=\"2.ShadowSocks配置\"></a>2.ShadowSocks配置</h2><div class=\"story post-story\"><h3 id=\"找到ShadowSocks的安装位置\"><a href=\"#找到ShadowSocks的安装位置\" class=\"headerlink\" title=\"找到ShadowSocks的安装位置\"></a>找到ShadowSocks的安装位置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -name shadows*</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"在安装路径下新建并修改默认配置文件\"><a href=\"#在安装路径下新建并修改默认配置文件\" class=\"headerlink\" title=\"在安装路径下新建并修改默认配置文件\"></a>在安装路径下新建并修改默认配置文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim config.json</span><br></pre></td></tr></table></figure>\n\n<p>并写入如下内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;  &quot;server&quot;:&quot;*****&quot;,  &quot;server_port&quot;:*****,  &quot;local_port&quot;:1080,  &quot;password&quot;:&quot;*****&quot;,  &quot;timeout&quot;:600,  &quot;method&quot;:&quot;chacha20-ietf-poly1305&quot;  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>其中server、server_port、password处需要分别替换为你购买的服务器网址、端口和密码。</p>\n<p>确定上面的配置文件没有问题，即可在终端输入如下命令以启动ShadowSocks。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sslocal</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"3-开机启动\"><a href=\"#3-开机启动\" class=\"headerlink\" title=\"3. 开机启动\"></a>3. 开机启动</h2><div class=\"story post-story\"><p>修改rc.local文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc</span><br><span class=\"line\">vim rc.local</span><br></pre></td></tr></table></figure>\n\n<p>添加一行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/bin/sslocal -c /usr/local/lib/python3.8/dist-packages/shadowsocks/config.json</span><br></pre></td></tr></table></figure>\n\n<p>注意后面的要是你自己的shadowsocks路径</p>\n<p>经过上面的配置，只是启动了sslocal，但是要上网，还需要配置浏览器到指定代理端口，如1080，才可以正式上网。</p>\n</div><h2 id=\"4-配置浏览器\"><a href=\"#4-配置浏览器\" class=\"headerlink\" title=\"4. 配置浏览器\"></a>4. 配置浏览器</h2><div class=\"story post-story\"><h3 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h3><p>我们需要给chrome安装SwitchyOmega插件，但是没有代理之前是不能从谷歌商店安装这个插件的，但是我们可以从Github上直接下载最新版 <a href=\"https://github.com/FelisCatus/SwitchyOmega/releases/\">https://github.com/FelisCatus/SwitchyOmega/releases/</a> （这个是chrome的）然后浏览器地址打开chrome://extensions/，将下载的插件托进去安装。</p>\n</div><h2 id=\"5-Git使用代理\"><a href=\"#5-Git使用代理\" class=\"headerlink\" title=\"5.Git使用代理\"></a>5.Git使用代理</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class=\"line\">git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"1-安装ShadowSocks\"><a href=\"#1-安装ShadowSocks\" class=\"headerlink\" title=\"1.安装ShadowSocks\"></a>1.安装ShadowSocks</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install python3-pip</span><br><span class=\"line\">apt install libsodium-dev</span><br><span class=\"line\">pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-ShadowSocks配置\"><a href=\"#2-ShadowSocks配置\" class=\"headerlink\" title=\"2.ShadowSocks配置\"></a>2.ShadowSocks配置</h2><h3 id=\"找到ShadowSocks的安装位置\"><a href=\"#找到ShadowSocks的安装位置\" class=\"headerlink\" title=\"找到ShadowSocks的安装位置\"></a>找到ShadowSocks的安装位置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -name shadows*</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"在安装路径下新建并修改默认配置文件\"><a href=\"#在安装路径下新建并修改默认配置文件\" class=\"headerlink\" title=\"在安装路径下新建并修改默认配置文件\"></a>在安装路径下新建并修改默认配置文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim config.json</span><br></pre></td></tr></table></figure>\n\n<p>并写入如下内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;  &quot;server&quot;:&quot;*****&quot;,  &quot;server_port&quot;:*****,  &quot;local_port&quot;:1080,  &quot;password&quot;:&quot;*****&quot;,  &quot;timeout&quot;:600,  &quot;method&quot;:&quot;chacha20-ietf-poly1305&quot;  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>其中server、server_port、password处需要分别替换为你购买的服务器网址、端口和密码。</p>\n<p>确定上面的配置文件没有问题，即可在终端输入如下命令以启动ShadowSocks。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sslocal</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-开机启动\"><a href=\"#3-开机启动\" class=\"headerlink\" title=\"3. 开机启动\"></a>3. 开机启动</h2><p>修改rc.local文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc</span><br><span class=\"line\">vim rc.local</span><br></pre></td></tr></table></figure>\n\n<p>添加一行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/bin/sslocal -c /usr/local/lib/python3.8/dist-packages/shadowsocks/config.json</span><br></pre></td></tr></table></figure>\n\n<p>注意后面的要是你自己的shadowsocks路径</p>\n<p>经过上面的配置，只是启动了sslocal，但是要上网，还需要配置浏览器到指定代理端口，如1080，才可以正式上网。</p>\n<h2 id=\"4-配置浏览器\"><a href=\"#4-配置浏览器\" class=\"headerlink\" title=\"4. 配置浏览器\"></a>4. 配置浏览器</h2><h3 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h3><p>我们需要给chrome安装SwitchyOmega插件，但是没有代理之前是不能从谷歌商店安装这个插件的，但是我们可以从Github上直接下载最新版 <a href=\"https://github.com/FelisCatus/SwitchyOmega/releases/\">https://github.com/FelisCatus/SwitchyOmega/releases/</a> （这个是chrome的）然后浏览器地址打开chrome://extensions/，将下载的插件托进去安装。</p>\n<h2 id=\"5-Git使用代理\"><a href=\"#5-Git使用代理\" class=\"headerlink\" title=\"5.Git使用代理\"></a>5.Git使用代理</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class=\"line\">git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Ubuntu下安装gocv","date":"2022-06-13T08:04:39.000Z","author":"Lcy","_content":"\n## Ubuntu 安装指导\n\n当前的仓库要求的还是安装opencv4.6\n\ngocv想要用就必须使用make进行编译。\n\n### Step1 克隆仓库\n\n```shell\ngit clone https://github.com/hybridgroup/gocv.git\n```\n\n![image-20220613161028219](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613161028219.png)\n\n### Step2 make install\n\nOnce you have cloned the repo, the following commands should do everything to download and install OpenCV 4.6.0 on Linux:\n\n```shell\ncd gocv\nmake install\n```\n\nIf you need static opencv libraries\n\n```shell\nmake install BUILD_SHARED_LIBS=OFF\n```\n\n![image-20220613162328973](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613162328973.png)\n\n看到gocv和opencvlib的版本信息就编译完成了\n\n### Step3 测试Gocv读取文件\n\n```go\npackage main\n\nimport (\n\t\"gocv.io/x/gocv\"\n)\n\nfunc main() {\n\timage := gocv.IMRead(\"./test.png\", gocv.IMReadColor)\n\t//构建窗口\n\twindow := gocv.NewWindow(\"img\")\n\twindow.ResizeWindow(500, 300)\n\n\t//在窗口展示图片\n\twindow.IMShow(image)\n\twindow.WaitKey(0)\n\twindow.Close()\n}\n```\n\n## GoCV读取图片三通道[]float32\n\n```go\npackage main\n\nimport (\n \"gocv.io/x/gocv\"\n \"log\"\n \"math\"\n)\n\ntype Image []float32\n\nfunc main() {\n imageFilePath := \"../../data/Lena.png\"\n originalMat := gocv.IMRead(imageFilePath, gocv.IMReadGrayScale)\n if originalMat.Empty() {\n  log.Panic(\"Can not read image: \" + imageFilePath)\n  return\n }\n\n originalImage := originalMat.ToBytes()\n targetImage := make(Image, len(originalImage))\n for i := 0; i < len(targetImage); i++ {\n  targetImage[i] = float32(originalImage[i]) / 255\n }\n\n targetImage.zeroAverageMatrix()\n log.Println(targetImage)\n\n targetImage.dispersionMatrix()\n log.Println(targetImage)\n}\n\nfunc (image *Image) zeroAverageMatrix() {\n average := image.average()\n\n for i := 0; i < len(*image); i++ {\n  (*image)[i] = (*image)[i] - average\n }\n}\n\nfunc (image *Image) dispersionMatrix() {\n average := image.average()\n tempImage := image.clone()\n length := len(tempImage)\n\n for i := 0; i < length; i++ {\n  tempImage[i] = float32(math.Pow(float64(tempImage[i]-average), 2))\n }\n\n sum := tempImage.sum()\n\n standardDeviation := sum / float32(length-1)\n\n for i := 0; i < length; i++ {\n  (*image)[i] = (*image)[i] / standardDeviation\n }\n}\n\nfunc (image Image) sum() float32 {\n length := len(image)\n var sum float32 = 0\n for i := 0; i < length; i++ {\n  sum = sum + image[i]\n }\n\n return sum\n}\n\nfunc (image Image) average() float32 {\n length := len(image)\n sum := image.sum()\n\n return sum / float32(length)\n}\n\nfunc (image Image) clone() Image {\n length := len(image)\n cloneImage := make([]float32, length)\n for i := 0; i < length; i++ {\n  cloneImage[i] = image[i]\n }\n\n return cloneImage\n}\n```\n\n\n\n## Reference \n\n[hybridgroup/gocv: Go package for computer vision using OpenCV 4 and beyond. (github.com)](https://github.com/hybridgroup/gocv)\n\nhttps://zhuanlan.zhihu.com/p/428249664\n","source":"_posts/Ubuntu下安装gocv.md","raw":"---\ntitle: Ubuntu下安装gocv\ndate: 2022-06-13 16:04:39\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n## Ubuntu 安装指导\n\n当前的仓库要求的还是安装opencv4.6\n\ngocv想要用就必须使用make进行编译。\n\n### Step1 克隆仓库\n\n```shell\ngit clone https://github.com/hybridgroup/gocv.git\n```\n\n![image-20220613161028219](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613161028219.png)\n\n### Step2 make install\n\nOnce you have cloned the repo, the following commands should do everything to download and install OpenCV 4.6.0 on Linux:\n\n```shell\ncd gocv\nmake install\n```\n\nIf you need static opencv libraries\n\n```shell\nmake install BUILD_SHARED_LIBS=OFF\n```\n\n![image-20220613162328973](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613162328973.png)\n\n看到gocv和opencvlib的版本信息就编译完成了\n\n### Step3 测试Gocv读取文件\n\n```go\npackage main\n\nimport (\n\t\"gocv.io/x/gocv\"\n)\n\nfunc main() {\n\timage := gocv.IMRead(\"./test.png\", gocv.IMReadColor)\n\t//构建窗口\n\twindow := gocv.NewWindow(\"img\")\n\twindow.ResizeWindow(500, 300)\n\n\t//在窗口展示图片\n\twindow.IMShow(image)\n\twindow.WaitKey(0)\n\twindow.Close()\n}\n```\n\n## GoCV读取图片三通道[]float32\n\n```go\npackage main\n\nimport (\n \"gocv.io/x/gocv\"\n \"log\"\n \"math\"\n)\n\ntype Image []float32\n\nfunc main() {\n imageFilePath := \"../../data/Lena.png\"\n originalMat := gocv.IMRead(imageFilePath, gocv.IMReadGrayScale)\n if originalMat.Empty() {\n  log.Panic(\"Can not read image: \" + imageFilePath)\n  return\n }\n\n originalImage := originalMat.ToBytes()\n targetImage := make(Image, len(originalImage))\n for i := 0; i < len(targetImage); i++ {\n  targetImage[i] = float32(originalImage[i]) / 255\n }\n\n targetImage.zeroAverageMatrix()\n log.Println(targetImage)\n\n targetImage.dispersionMatrix()\n log.Println(targetImage)\n}\n\nfunc (image *Image) zeroAverageMatrix() {\n average := image.average()\n\n for i := 0; i < len(*image); i++ {\n  (*image)[i] = (*image)[i] - average\n }\n}\n\nfunc (image *Image) dispersionMatrix() {\n average := image.average()\n tempImage := image.clone()\n length := len(tempImage)\n\n for i := 0; i < length; i++ {\n  tempImage[i] = float32(math.Pow(float64(tempImage[i]-average), 2))\n }\n\n sum := tempImage.sum()\n\n standardDeviation := sum / float32(length-1)\n\n for i := 0; i < length; i++ {\n  (*image)[i] = (*image)[i] / standardDeviation\n }\n}\n\nfunc (image Image) sum() float32 {\n length := len(image)\n var sum float32 = 0\n for i := 0; i < length; i++ {\n  sum = sum + image[i]\n }\n\n return sum\n}\n\nfunc (image Image) average() float32 {\n length := len(image)\n sum := image.sum()\n\n return sum / float32(length)\n}\n\nfunc (image Image) clone() Image {\n length := len(image)\n cloneImage := make([]float32, length)\n for i := 0; i < length; i++ {\n  cloneImage[i] = image[i]\n }\n\n return cloneImage\n}\n```\n\n\n\n## Reference \n\n[hybridgroup/gocv: Go package for computer vision using OpenCV 4 and beyond. (github.com)](https://github.com/hybridgroup/gocv)\n\nhttps://zhuanlan.zhihu.com/p/428249664\n","slug":"Ubuntu下安装gocv","published":1,"updated":"2022-07-02T15:49:59.942Z","_id":"cl4ch30i70000bgemdvy087ba","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Ubuntu-安装指导\"><a href=\"#Ubuntu-安装指导\" class=\"headerlink\" title=\"Ubuntu 安装指导\"></a>Ubuntu 安装指导</h2><div class=\"story post-story\"><p>当前的仓库要求的还是安装opencv4.6</p>\n<p>gocv想要用就必须使用make进行编译。</p>\n<h3 id=\"Step1-克隆仓库\"><a href=\"#Step1-克隆仓库\" class=\"headerlink\" title=\"Step1 克隆仓库\"></a>Step1 克隆仓库</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/hybridgroup/gocv.git</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613161028219.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613161028219.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220613161028219\"></p>\n<h3 id=\"Step2-make-install\"><a href=\"#Step2-make-install\" class=\"headerlink\" title=\"Step2 make install\"></a>Step2 make install</h3><p>Once you have cloned the repo, the following commands should do everything to download and install OpenCV 4.6.0 on Linux:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd gocv</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p>If you need static opencv libraries</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install BUILD_SHARED_LIBS=OFF</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613162328973.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613162328973.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220613162328973\"></p>\n<p>看到gocv和opencvlib的版本信息就编译完成了</p>\n<h3 id=\"Step3-测试Gocv读取文件\"><a href=\"#Step3-测试Gocv读取文件\" class=\"headerlink\" title=\"Step3 测试Gocv读取文件\"></a>Step3 测试Gocv读取文件</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">&quot;gocv.io/x/gocv&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\timage := gocv.IMRead(<span class=\"string\">&quot;./test.png&quot;</span>, gocv.IMReadColor)</span><br><span class=\"line\">\t<span class=\"comment\">//构建窗口</span></span><br><span class=\"line\">\twindow := gocv.NewWindow(<span class=\"string\">&quot;img&quot;</span>)</span><br><span class=\"line\">\twindow.ResizeWindow(<span class=\"number\">500</span>, <span class=\"number\">300</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//在窗口展示图片</span></span><br><span class=\"line\">\twindow.IMShow(image)</span><br><span class=\"line\">\twindow.WaitKey(<span class=\"number\">0</span>)</span><br><span class=\"line\">\twindow.Close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"GoCV读取图片三通道-float32\"><a href=\"#GoCV读取图片三通道-float32\" class=\"headerlink\" title=\"GoCV读取图片三通道[]float32\"></a>GoCV读取图片三通道[]float32</h2><div class=\"story post-story\"><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\"> <span class=\"string\">&quot;gocv.io/x/gocv&quot;</span></span><br><span class=\"line\"> <span class=\"string\">&quot;log&quot;</span></span><br><span class=\"line\"> <span class=\"string\">&quot;math&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Image []<span class=\"type\">float32</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"> imageFilePath := <span class=\"string\">&quot;../../data/Lena.png&quot;</span></span><br><span class=\"line\"> originalMat := gocv.IMRead(imageFilePath, gocv.IMReadGrayScale)</span><br><span class=\"line\"> <span class=\"keyword\">if</span> originalMat.Empty() &#123;</span><br><span class=\"line\">  log.Panic(<span class=\"string\">&quot;Can not read image: &quot;</span> + imageFilePath)</span><br><span class=\"line\">  <span class=\"keyword\">return</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> originalImage := originalMat.ToBytes()</span><br><span class=\"line\"> targetImage := <span class=\"built_in\">make</span>(Image, <span class=\"built_in\">len</span>(originalImage))</span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>(targetImage); i++ &#123;</span><br><span class=\"line\">  targetImage[i] = <span class=\"type\">float32</span>(originalImage[i]) / <span class=\"number\">255</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> targetImage.zeroAverageMatrix()</span><br><span class=\"line\"> log.Println(targetImage)</span><br><span class=\"line\"></span><br><span class=\"line\"> targetImage.dispersionMatrix()</span><br><span class=\"line\"> log.Println(targetImage)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image *Image)</span></span> zeroAverageMatrix() &#123;</span><br><span class=\"line\"> average := image.average()</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>(*image); i++ &#123;</span><br><span class=\"line\">  (*image)[i] = (*image)[i] - average</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image *Image)</span></span> dispersionMatrix() &#123;</span><br><span class=\"line\"> average := image.average()</span><br><span class=\"line\"> tempImage := image.clone()</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(tempImage)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  tempImage[i] = <span class=\"type\">float32</span>(math.Pow(<span class=\"type\">float64</span>(tempImage[i]-average), <span class=\"number\">2</span>))</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> sum := tempImage.sum()</span><br><span class=\"line\"></span><br><span class=\"line\"> standardDeviation := sum / <span class=\"type\">float32</span>(length<span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  (*image)[i] = (*image)[i] / standardDeviation</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> sum() <span class=\"type\">float32</span> &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> <span class=\"keyword\">var</span> sum <span class=\"type\">float32</span> = <span class=\"number\">0</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  sum = sum + image[i]</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> sum</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> average() <span class=\"type\">float32</span> &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> sum := image.sum()</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> sum / <span class=\"type\">float32</span>(length)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> clone() Image &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> cloneImage := <span class=\"built_in\">make</span>([]<span class=\"type\">float32</span>, length)</span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  cloneImage[i] = image[i]</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> cloneImage</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n</div><h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><div class=\"story post-story\"><p><a href=\"https://github.com/hybridgroup/gocv\">hybridgroup/gocv: Go package for computer vision using OpenCV 4 and beyond. (github.com)</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/428249664\">https://zhuanlan.zhihu.com/p/428249664</a></p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Ubuntu-安装指导\"><a href=\"#Ubuntu-安装指导\" class=\"headerlink\" title=\"Ubuntu 安装指导\"></a>Ubuntu 安装指导</h2><p>当前的仓库要求的还是安装opencv4.6</p>\n<p>gocv想要用就必须使用make进行编译。</p>\n<h3 id=\"Step1-克隆仓库\"><a href=\"#Step1-克隆仓库\" class=\"headerlink\" title=\"Step1 克隆仓库\"></a>Step1 克隆仓库</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/hybridgroup/gocv.git</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613161028219.png\" alt=\"image-20220613161028219\"></p>\n<h3 id=\"Step2-make-install\"><a href=\"#Step2-make-install\" class=\"headerlink\" title=\"Step2 make install\"></a>Step2 make install</h3><p>Once you have cloned the repo, the following commands should do everything to download and install OpenCV 4.6.0 on Linux:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd gocv</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p>If you need static opencv libraries</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install BUILD_SHARED_LIBS=OFF</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220613162328973.png\" alt=\"image-20220613162328973\"></p>\n<p>看到gocv和opencvlib的版本信息就编译完成了</p>\n<h3 id=\"Step3-测试Gocv读取文件\"><a href=\"#Step3-测试Gocv读取文件\" class=\"headerlink\" title=\"Step3 测试Gocv读取文件\"></a>Step3 测试Gocv读取文件</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">&quot;gocv.io/x/gocv&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\timage := gocv.IMRead(<span class=\"string\">&quot;./test.png&quot;</span>, gocv.IMReadColor)</span><br><span class=\"line\">\t<span class=\"comment\">//构建窗口</span></span><br><span class=\"line\">\twindow := gocv.NewWindow(<span class=\"string\">&quot;img&quot;</span>)</span><br><span class=\"line\">\twindow.ResizeWindow(<span class=\"number\">500</span>, <span class=\"number\">300</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//在窗口展示图片</span></span><br><span class=\"line\">\twindow.IMShow(image)</span><br><span class=\"line\">\twindow.WaitKey(<span class=\"number\">0</span>)</span><br><span class=\"line\">\twindow.Close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"GoCV读取图片三通道-float32\"><a href=\"#GoCV读取图片三通道-float32\" class=\"headerlink\" title=\"GoCV读取图片三通道[]float32\"></a>GoCV读取图片三通道[]float32</h2><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\"> <span class=\"string\">&quot;gocv.io/x/gocv&quot;</span></span><br><span class=\"line\"> <span class=\"string\">&quot;log&quot;</span></span><br><span class=\"line\"> <span class=\"string\">&quot;math&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Image []<span class=\"type\">float32</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"> imageFilePath := <span class=\"string\">&quot;../../data/Lena.png&quot;</span></span><br><span class=\"line\"> originalMat := gocv.IMRead(imageFilePath, gocv.IMReadGrayScale)</span><br><span class=\"line\"> <span class=\"keyword\">if</span> originalMat.Empty() &#123;</span><br><span class=\"line\">  log.Panic(<span class=\"string\">&quot;Can not read image: &quot;</span> + imageFilePath)</span><br><span class=\"line\">  <span class=\"keyword\">return</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> originalImage := originalMat.ToBytes()</span><br><span class=\"line\"> targetImage := <span class=\"built_in\">make</span>(Image, <span class=\"built_in\">len</span>(originalImage))</span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>(targetImage); i++ &#123;</span><br><span class=\"line\">  targetImage[i] = <span class=\"type\">float32</span>(originalImage[i]) / <span class=\"number\">255</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> targetImage.zeroAverageMatrix()</span><br><span class=\"line\"> log.Println(targetImage)</span><br><span class=\"line\"></span><br><span class=\"line\"> targetImage.dispersionMatrix()</span><br><span class=\"line\"> log.Println(targetImage)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image *Image)</span></span> zeroAverageMatrix() &#123;</span><br><span class=\"line\"> average := image.average()</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">len</span>(*image); i++ &#123;</span><br><span class=\"line\">  (*image)[i] = (*image)[i] - average</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image *Image)</span></span> dispersionMatrix() &#123;</span><br><span class=\"line\"> average := image.average()</span><br><span class=\"line\"> tempImage := image.clone()</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(tempImage)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  tempImage[i] = <span class=\"type\">float32</span>(math.Pow(<span class=\"type\">float64</span>(tempImage[i]-average), <span class=\"number\">2</span>))</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> sum := tempImage.sum()</span><br><span class=\"line\"></span><br><span class=\"line\"> standardDeviation := sum / <span class=\"type\">float32</span>(length<span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  (*image)[i] = (*image)[i] / standardDeviation</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> sum() <span class=\"type\">float32</span> &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> <span class=\"keyword\">var</span> sum <span class=\"type\">float32</span> = <span class=\"number\">0</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  sum = sum + image[i]</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> sum</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> average() <span class=\"type\">float32</span> &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> sum := image.sum()</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> sum / <span class=\"type\">float32</span>(length)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(image Image)</span></span> clone() Image &#123;</span><br><span class=\"line\"> length := <span class=\"built_in\">len</span>(image)</span><br><span class=\"line\"> cloneImage := <span class=\"built_in\">make</span>([]<span class=\"type\">float32</span>, length)</span><br><span class=\"line\"> <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; length; i++ &#123;</span><br><span class=\"line\">  cloneImage[i] = image[i]</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> cloneImage</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://github.com/hybridgroup/gocv\">hybridgroup/gocv: Go package for computer vision using OpenCV 4 and beyond. (github.com)</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/428249664\">https://zhuanlan.zhihu.com/p/428249664</a></p>\n"},{"title":"windows 专业版破解RDP链接限制","date":"2022-06-17T16:11:51.000Z","author":"Lcy","_content":"\n# Windows 10 破解RDP 连接限制\n\n## I.几个有用的链接：\n\n1. 适用于20H2版本的破解文件：https://github.com/sebaxakerhtc/rdpwrap.ini\n2. RDP Wrap 的官方github仓库：https://github.com/stascorp/rdpwrap/issues需要在issue中找新版本的破解文件\n3. 一个比较有用的破解的博客：https://www.cnblogs.com/JvYouQing/p/15539004.html\n4. 我打包好的文件：https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0\n\n## II. How to 破解\n\n创建账户等等一系列的操作就不想要赘述了。参考上面第三个的链接可以搞定，或者网上能搜到一堆的教程。\n\n解压链接4中给的文件：\n\n![image-20220618002512849](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002512849.png)\n\n按照如下顺序依次运行：\n\n1. install.bat\n2. update.bat\n3. RDPConf.exe\n\n如果RDPConf.exe运行完如下图所示：\n\n![image-20220618002634553](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002634553.png)\n\n如果是full supported那就是破解完成重启就好。\n\n如果没有，那就把链接1中的文件（[rdpwrap.ini](https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/rdpwrap.ini?versionId=CAEQIhiBgMCJ.prKixgiIDhiY2FkMDEwYjNhMTQ2MmM5OTU4OGNhNDZjOGRkODFi)）放到C:\\Program Files\\RDP Wrapper目录下。\n\n之后重复运行上述几个文件，就能看到fully supported的字样了\n\n然后重启！\n","source":"_posts/windows-专业版破解RDP链接限制.md","raw":"---\ntitle: windows 专业版破解RDP链接限制\ndate: 2022-06-18 00:11:51\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n# Windows 10 破解RDP 连接限制\n\n## I.几个有用的链接：\n\n1. 适用于20H2版本的破解文件：https://github.com/sebaxakerhtc/rdpwrap.ini\n2. RDP Wrap 的官方github仓库：https://github.com/stascorp/rdpwrap/issues需要在issue中找新版本的破解文件\n3. 一个比较有用的破解的博客：https://www.cnblogs.com/JvYouQing/p/15539004.html\n4. 我打包好的文件：https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0\n\n## II. How to 破解\n\n创建账户等等一系列的操作就不想要赘述了。参考上面第三个的链接可以搞定，或者网上能搜到一堆的教程。\n\n解压链接4中给的文件：\n\n![image-20220618002512849](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002512849.png)\n\n按照如下顺序依次运行：\n\n1. install.bat\n2. update.bat\n3. RDPConf.exe\n\n如果RDPConf.exe运行完如下图所示：\n\n![image-20220618002634553](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002634553.png)\n\n如果是full supported那就是破解完成重启就好。\n\n如果没有，那就把链接1中的文件（[rdpwrap.ini](https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/rdpwrap.ini?versionId=CAEQIhiBgMCJ.prKixgiIDhiY2FkMDEwYjNhMTQ2MmM5OTU4OGNhNDZjOGRkODFi)）放到C:\\Program Files\\RDP Wrapper目录下。\n\n之后重复运行上述几个文件，就能看到fully supported的字样了\n\n然后重启！\n","slug":"windows-专业版破解RDP链接限制","published":1,"updated":"2022-07-02T15:49:59.944Z","_id":"cl4iompmz000040emheup9rzt","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Windows-10-破解RDP-连接限制\"><a href=\"#Windows-10-破解RDP-连接限制\" class=\"headerlink\" title=\"Windows 10 破解RDP 连接限制\"></a>Windows 10 破解RDP 连接限制</h1><h2 id=\"I-几个有用的链接：\"><a href=\"#I-几个有用的链接：\" class=\"headerlink\" title=\"I.几个有用的链接：\"></a>I.几个有用的链接：</h2><div class=\"story post-story\"><ol>\n<li>适用于20H2版本的破解文件：<a href=\"https://github.com/sebaxakerhtc/rdpwrap.ini\">https://github.com/sebaxakerhtc/rdpwrap.ini</a></li>\n<li>RDP Wrap 的官方github仓库：<a href=\"https://github.com/stascorp/rdpwrap/issues%E9%9C%80%E8%A6%81%E5%9C%A8issue%E4%B8%AD%E6%89%BE%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84%E7%A0%B4%E8%A7%A3%E6%96%87%E4%BB%B6\">https://github.com/stascorp/rdpwrap/issues需要在issue中找新版本的破解文件</a></li>\n<li>一个比较有用的破解的博客：<a href=\"https://www.cnblogs.com/JvYouQing/p/15539004.html\">https://www.cnblogs.com/JvYouQing/p/15539004.html</a></li>\n<li>我打包好的文件：<a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0\">https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0</a></li>\n</ol>\n</div><h2 id=\"II-How-to-破解\"><a href=\"#II-How-to-破解\" class=\"headerlink\" title=\"II. How to 破解\"></a>II. How to 破解</h2><div class=\"story post-story\"><p>创建账户等等一系列的操作就不想要赘述了。参考上面第三个的链接可以搞定，或者网上能搜到一堆的教程。</p>\n<p>解压链接4中给的文件：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002512849.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002512849.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220618002512849\"></p>\n<p>按照如下顺序依次运行：</p>\n<ol>\n<li>install.bat</li>\n<li>update.bat</li>\n<li>RDPConf.exe</li>\n</ol>\n<p>如果RDPConf.exe运行完如下图所示：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002634553.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002634553.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220618002634553\"></p>\n<p>如果是full supported那就是破解完成重启就好。</p>\n<p>如果没有，那就把链接1中的文件（<a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/rdpwrap.ini?versionId=CAEQIhiBgMCJ.prKixgiIDhiY2FkMDEwYjNhMTQ2MmM5OTU4OGNhNDZjOGRkODFi\">rdpwrap.ini</a>）放到C:\\Program Files\\RDP Wrapper目录下。</p>\n<p>之后重复运行上述几个文件，就能看到fully supported的字样了</p>\n<p>然后重启！</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Windows-10-破解RDP-连接限制\"><a href=\"#Windows-10-破解RDP-连接限制\" class=\"headerlink\" title=\"Windows 10 破解RDP 连接限制\"></a>Windows 10 破解RDP 连接限制</h1><h2 id=\"I-几个有用的链接：\"><a href=\"#I-几个有用的链接：\" class=\"headerlink\" title=\"I.几个有用的链接：\"></a>I.几个有用的链接：</h2><ol>\n<li>适用于20H2版本的破解文件：<a href=\"https://github.com/sebaxakerhtc/rdpwrap.ini\">https://github.com/sebaxakerhtc/rdpwrap.ini</a></li>\n<li>RDP Wrap 的官方github仓库：<a href=\"https://github.com/stascorp/rdpwrap/issues%E9%9C%80%E8%A6%81%E5%9C%A8issue%E4%B8%AD%E6%89%BE%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84%E7%A0%B4%E8%A7%A3%E6%96%87%E4%BB%B6\">https://github.com/stascorp/rdpwrap/issues需要在issue中找新版本的破解文件</a></li>\n<li>一个比较有用的破解的博客：<a href=\"https://www.cnblogs.com/JvYouQing/p/15539004.html\">https://www.cnblogs.com/JvYouQing/p/15539004.html</a></li>\n<li>我打包好的文件：<a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0\">https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/RDPWrap-v1.6.2.zip?versionId=CAEQIhiBgMC48vDJixgiIDQ2YjQwYzk5YmQzYzRmYWI5Njk5YTU0NzNiMTc0MTI0</a></li>\n</ol>\n<h2 id=\"II-How-to-破解\"><a href=\"#II-How-to-破解\" class=\"headerlink\" title=\"II. How to 破解\"></a>II. How to 破解</h2><p>创建账户等等一系列的操作就不想要赘述了。参考上面第三个的链接可以搞定，或者网上能搜到一堆的教程。</p>\n<p>解压链接4中给的文件：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002512849.png\" alt=\"image-20220618002512849\"></p>\n<p>按照如下顺序依次运行：</p>\n<ol>\n<li>install.bat</li>\n<li>update.bat</li>\n<li>RDPConf.exe</li>\n</ol>\n<p>如果RDPConf.exe运行完如下图所示：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220618002634553.png\" alt=\"image-20220618002634553\"></p>\n<p>如果是full supported那就是破解完成重启就好。</p>\n<p>如果没有，那就把链接1中的文件（<a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/useful/rdpwrap.ini?versionId=CAEQIhiBgMCJ.prKixgiIDhiY2FkMDEwYjNhMTQ2MmM5OTU4OGNhNDZjOGRkODFi\">rdpwrap.ini</a>）放到C:\\Program Files\\RDP Wrapper目录下。</p>\n<p>之后重复运行上述几个文件，就能看到fully supported的字样了</p>\n<p>然后重启！</p>\n"},{"title":"windows安装hexo","date":"2022-07-02T15:37:50.000Z","author":"Lcy","_content":"\n\n\n## Step 1 npm安装\n\n如已安装npm可以跳过本步骤。\n\n在[nodejs官网](https://nodejs.org/en)上下载nodejs\n\n![image-20220702233942774](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702233942774.png)\n\n一路next安装下去并检查：\n\n```shell\n# 查看系统的环境变量\necho %PATH%\nnode -v\n```\n\n![image-20220702234348161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234348161.png)\n\n如上图所示即为安装成功。\n\n如果需要配置自定义镜像提升速度，可以为NodeJS配置自定义的镜像，命令如下：\n\n```shell\nnpm config set registry=http://registry.npm.taobao.org\n```\n\n检查配置信息\n\n```shell\nnpm config list\n```\n\n![image-20220702234645238](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234645238.png)\n\n```shell\nnpm config get registry\n```\n\n## Step 2 安装hexo\n\n```shell\nnpm install hexo-cli -g\n```\n\n![image-20220702235057643](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702235057643.png)\n\n然后测试一下hexo g & hexo s是否能生成博客就行了。\n\n","source":"_posts/Windows安装hexo.md","raw":"---\ntitle: windows安装hexo\ndate: 2022-07-02 23:37:50\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n\n\n## Step 1 npm安装\n\n如已安装npm可以跳过本步骤。\n\n在[nodejs官网](https://nodejs.org/en)上下载nodejs\n\n![image-20220702233942774](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702233942774.png)\n\n一路next安装下去并检查：\n\n```shell\n# 查看系统的环境变量\necho %PATH%\nnode -v\n```\n\n![image-20220702234348161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234348161.png)\n\n如上图所示即为安装成功。\n\n如果需要配置自定义镜像提升速度，可以为NodeJS配置自定义的镜像，命令如下：\n\n```shell\nnpm config set registry=http://registry.npm.taobao.org\n```\n\n检查配置信息\n\n```shell\nnpm config list\n```\n\n![image-20220702234645238](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234645238.png)\n\n```shell\nnpm config get registry\n```\n\n## Step 2 安装hexo\n\n```shell\nnpm install hexo-cli -g\n```\n\n![image-20220702235057643](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702235057643.png)\n\n然后测试一下hexo g & hexo s是否能生成博客就行了。\n\n","slug":"Windows安装hexo","published":1,"updated":"2022-07-02T15:59:59.209Z","_id":"cl543t5ue0000gkem8muscswz","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Step-1-npm安装\"><a href=\"#Step-1-npm安装\" class=\"headerlink\" title=\"Step 1 npm安装\"></a>Step 1 npm安装</h2><div class=\"story post-story\"><p>如已安装npm可以跳过本步骤。</p>\n<p>在<a href=\"https://nodejs.org/en\">nodejs官网</a>上下载nodejs</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702233942774.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702233942774.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220702233942774\"></p>\n<p>一路next安装下去并检查：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看系统的环境变量</span></span><br><span class=\"line\">echo %PATH%</span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234348161.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234348161.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220702234348161\"></p>\n<p>如上图所示即为安装成功。</p>\n<p>如果需要配置自定义镜像提升速度，可以为NodeJS配置自定义的镜像，命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry=http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n\n<p>检查配置信息</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config list</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234645238.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234645238.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220702234645238\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"Step-2-安装hexo\"><a href=\"#Step-2-安装hexo\" class=\"headerlink\" title=\"Step 2 安装hexo\"></a>Step 2 安装hexo</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702235057643.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702235057643.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220702235057643\"></p>\n<p>然后测试一下hexo g &amp; hexo s是否能生成博客就行了。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Step-1-npm安装\"><a href=\"#Step-1-npm安装\" class=\"headerlink\" title=\"Step 1 npm安装\"></a>Step 1 npm安装</h2><p>如已安装npm可以跳过本步骤。</p>\n<p>在<a href=\"https://nodejs.org/en\">nodejs官网</a>上下载nodejs</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702233942774.png\" alt=\"image-20220702233942774\"></p>\n<p>一路next安装下去并检查：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看系统的环境变量</span></span><br><span class=\"line\">echo %PATH%</span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234348161.png\" alt=\"image-20220702234348161\"></p>\n<p>如上图所示即为安装成功。</p>\n<p>如果需要配置自定义镜像提升速度，可以为NodeJS配置自定义的镜像，命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry=http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n\n<p>检查配置信息</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config list</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702234645238.png\" alt=\"image-20220702234645238\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Step-2-安装hexo\"><a href=\"#Step-2-安装hexo\" class=\"headerlink\" title=\"Step 2 安装hexo\"></a>Step 2 安装hexo</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220702235057643.png\" alt=\"image-20220702235057643\"></p>\n<p>然后测试一下hexo g &amp; hexo s是否能生成博客就行了。</p>\n"},{"title":"windows安装arcanist","date":"2022-07-02T16:07:19.000Z","author":"Lcy","_content":"\n## Step 1 安装PHP\n\n这是安装arcanist最讨厌的事情因为我被ubuntu的php坑过很多次，所以一看到要装php就头大，不过windows下php好像不会出什么离谱事情。\n\n首先下载一个php：[PHP: Downloads](https://www.php.net/downloads.php)\n\n将php的目录添加到环境变量：\n\n![image-20220703002002616](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002002616.png)\n\n在php目录下放置ini文件，可以下载我这个：\n\nhttps://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini\n\n最后检查PHP版本：\n\n![image-20220703001851716](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703001851716.png)\n\n## Step 2 安装ARC\n\n克隆arc仓库以及一个我也不知道干嘛的东西：\n\n```shell\ngit clone https://github.com/phacility/arcanist.git\ngit clone https://gitee.com/lzcspace/libphutil.git\n```\n\n然后一样添加环境变量\n\n最后检查一下版本\n\n![image-20220703002710645](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002710645.png)\n\nOKay！\n","source":"_posts/windows安装arcanist.md","raw":"---\ntitle: windows安装arcanist\ndate: 2022-07-03 00:07:19\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n## Step 1 安装PHP\n\n这是安装arcanist最讨厌的事情因为我被ubuntu的php坑过很多次，所以一看到要装php就头大，不过windows下php好像不会出什么离谱事情。\n\n首先下载一个php：[PHP: Downloads](https://www.php.net/downloads.php)\n\n将php的目录添加到环境变量：\n\n![image-20220703002002616](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002002616.png)\n\n在php目录下放置ini文件，可以下载我这个：\n\nhttps://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini\n\n最后检查PHP版本：\n\n![image-20220703001851716](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703001851716.png)\n\n## Step 2 安装ARC\n\n克隆arc仓库以及一个我也不知道干嘛的东西：\n\n```shell\ngit clone https://github.com/phacility/arcanist.git\ngit clone https://gitee.com/lzcspace/libphutil.git\n```\n\n然后一样添加环境变量\n\n最后检查一下版本\n\n![image-20220703002710645](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002710645.png)\n\nOKay！\n","slug":"windows安装arcanist","published":1,"updated":"2022-07-02T16:35:47.323Z","_id":"cl543t5uo0003gkem2ayjgtp2","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Step-1-安装PHP\"><a href=\"#Step-1-安装PHP\" class=\"headerlink\" title=\"Step 1 安装PHP\"></a>Step 1 安装PHP</h2><div class=\"story post-story\"><p>这是安装arcanist最讨厌的事情因为我被ubuntu的php坑过很多次，所以一看到要装php就头大，不过windows下php好像不会出什么离谱事情。</p>\n<p>首先下载一个php：<a href=\"https://www.php.net/downloads.php\">PHP: Downloads</a></p>\n<p>将php的目录添加到环境变量：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002002616.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002002616.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220703002002616\"></p>\n<p>在php目录下放置ini文件，可以下载我这个：</p>\n<p><a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini\">https://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini</a></p>\n<p>最后检查PHP版本：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703001851716.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703001851716.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220703001851716\"></p>\n</div><h2 id=\"Step-2-安装ARC\"><a href=\"#Step-2-安装ARC\" class=\"headerlink\" title=\"Step 2 安装ARC\"></a>Step 2 安装ARC</h2><div class=\"story post-story\"><p>克隆arc仓库以及一个我也不知道干嘛的东西：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/phacility/arcanist.git</span><br><span class=\"line\">git clone https://gitee.com/lzcspace/libphutil.git</span><br></pre></td></tr></table></figure>\n\n<p>然后一样添加环境变量</p>\n<p>最后检查一下版本</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002710645.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002710645.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220703002710645\"></p>\n<p>OKay！</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Step-1-安装PHP\"><a href=\"#Step-1-安装PHP\" class=\"headerlink\" title=\"Step 1 安装PHP\"></a>Step 1 安装PHP</h2><p>这是安装arcanist最讨厌的事情因为我被ubuntu的php坑过很多次，所以一看到要装php就头大，不过windows下php好像不会出什么离谱事情。</p>\n<p>首先下载一个php：<a href=\"https://www.php.net/downloads.php\">PHP: Downloads</a></p>\n<p>将php的目录添加到环境变量：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002002616.png\" alt=\"image-20220703002002616\"></p>\n<p>在php目录下放置ini文件，可以下载我这个：</p>\n<p><a href=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini\">https://luochengyu.oss-cn-beijing.aliyuncs.com/php.ini</a></p>\n<p>最后检查PHP版本：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703001851716.png\" alt=\"image-20220703001851716\"></p>\n<h2 id=\"Step-2-安装ARC\"><a href=\"#Step-2-安装ARC\" class=\"headerlink\" title=\"Step 2 安装ARC\"></a>Step 2 安装ARC</h2><p>克隆arc仓库以及一个我也不知道干嘛的东西：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/phacility/arcanist.git</span><br><span class=\"line\">git clone https://gitee.com/lzcspace/libphutil.git</span><br></pre></td></tr></table></figure>\n\n<p>然后一样添加环境变量</p>\n<p>最后检查一下版本</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220703002710645.png\" alt=\"image-20220703002710645\"></p>\n<p>OKay！</p>\n"},{"title":"ubuntu设置root登陆","date":"2022-07-04T06:02:04.000Z","author":"Lcy","_content":"\n## Step 1 给root用户设置账户密码\n\n```shell\nsudo passwd root\n# 切换用户\nsu root\n```\n\n## Step 2 修改gdm-autologin文件\n\n```shell\nvim /etc/pam.d/gdm-autologin\n```\n\n注释掉：`auth required pam_succeed_if.so user != root quiet_success`\n\n![image-20220704143736406](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143736406.png)\n\n## Step 3 修改gdm-password文件\n\n```shell \nvim /etc/pam.d/gdm-password\n```\n\n注释掉：`auth required pam_succeed_if.so user != root quiet_success`\n\n![image-20220704143811079](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143811079.png)\n\n## Step 4 修改/root/.profile文件\n\n```shell\nvim /root/.profile\n```\n\n注释掉：`mesg n 2> /dev/null || true`\n\n并追加一行：`tty -s&&mesg n || true`\n\n![image-20220704143845212](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143845212.png)\n\n## Step 5 重启\n\n```shell\nreboot\n```\n\n","source":"_posts/ubuntu设置root登陆.md","raw":"---\ntitle: ubuntu设置root登陆\ndate: 2022-07-04 14:02:04\ntags: Tips\ncategories: Useful Tools\nauthor: Lcy\n---\n\n## Step 1 给root用户设置账户密码\n\n```shell\nsudo passwd root\n# 切换用户\nsu root\n```\n\n## Step 2 修改gdm-autologin文件\n\n```shell\nvim /etc/pam.d/gdm-autologin\n```\n\n注释掉：`auth required pam_succeed_if.so user != root quiet_success`\n\n![image-20220704143736406](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143736406.png)\n\n## Step 3 修改gdm-password文件\n\n```shell \nvim /etc/pam.d/gdm-password\n```\n\n注释掉：`auth required pam_succeed_if.so user != root quiet_success`\n\n![image-20220704143811079](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143811079.png)\n\n## Step 4 修改/root/.profile文件\n\n```shell\nvim /root/.profile\n```\n\n注释掉：`mesg n 2> /dev/null || true`\n\n并追加一行：`tty -s&&mesg n || true`\n\n![image-20220704143845212](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143845212.png)\n\n## Step 5 重启\n\n```shell\nreboot\n```\n\n","slug":"ubuntu设置root登陆","published":1,"updated":"2022-07-09T15:47:31.308Z","_id":"cl56ds2th0000t0emeejoaeww","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Step-1-给root用户设置账户密码\"><a href=\"#Step-1-给root用户设置账户密码\" class=\"headerlink\" title=\"Step 1 给root用户设置账户密码\"></a>Step 1 给root用户设置账户密码</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo passwd root</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">切换用户</span></span><br><span class=\"line\">su root</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"Step-2-修改gdm-autologin文件\"><a href=\"#Step-2-修改gdm-autologin文件\" class=\"headerlink\" title=\"Step 2 修改gdm-autologin文件\"></a>Step 2 修改gdm-autologin文件</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/pam.d/gdm-autologin</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>auth required pam_succeed_if.so user != root quiet_success</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143736406.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143736406.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704143736406\"></p>\n</div><h2 id=\"Step-3-修改gdm-password文件\"><a href=\"#Step-3-修改gdm-password文件\" class=\"headerlink\" title=\"Step 3 修改gdm-password文件\"></a>Step 3 修改gdm-password文件</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/pam.d/gdm-password</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>auth required pam_succeed_if.so user != root quiet_success</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143811079.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143811079.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704143811079\"></p>\n</div><h2 id=\"Step-4-修改-root-profile文件\"><a href=\"#Step-4-修改-root-profile文件\" class=\"headerlink\" title=\"Step 4 修改/root/.profile文件\"></a>Step 4 修改/root/.profile文件</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /root/.profile</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>mesg n 2&gt; /dev/null || true</code></p>\n<p>并追加一行：<code>tty -s&amp;&amp;mesg n || true</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143845212.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143845212.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704143845212\"></p>\n</div><h2 id=\"Step-5-重启\"><a href=\"#Step-5-重启\" class=\"headerlink\" title=\"Step 5 重启\"></a>Step 5 重启</h2><div class=\"story post-story\"><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Step-1-给root用户设置账户密码\"><a href=\"#Step-1-给root用户设置账户密码\" class=\"headerlink\" title=\"Step 1 给root用户设置账户密码\"></a>Step 1 给root用户设置账户密码</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo passwd root</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">切换用户</span></span><br><span class=\"line\">su root</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Step-2-修改gdm-autologin文件\"><a href=\"#Step-2-修改gdm-autologin文件\" class=\"headerlink\" title=\"Step 2 修改gdm-autologin文件\"></a>Step 2 修改gdm-autologin文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/pam.d/gdm-autologin</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>auth required pam_succeed_if.so user != root quiet_success</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143736406.png\" alt=\"image-20220704143736406\"></p>\n<h2 id=\"Step-3-修改gdm-password文件\"><a href=\"#Step-3-修改gdm-password文件\" class=\"headerlink\" title=\"Step 3 修改gdm-password文件\"></a>Step 3 修改gdm-password文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/pam.d/gdm-password</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>auth required pam_succeed_if.so user != root quiet_success</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143811079.png\" alt=\"image-20220704143811079\"></p>\n<h2 id=\"Step-4-修改-root-profile文件\"><a href=\"#Step-4-修改-root-profile文件\" class=\"headerlink\" title=\"Step 4 修改/root/.profile文件\"></a>Step 4 修改/root/.profile文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /root/.profile</span><br></pre></td></tr></table></figure>\n\n<p>注释掉：<code>mesg n 2&gt; /dev/null || true</code></p>\n<p>并追加一行：<code>tty -s&amp;&amp;mesg n || true</code></p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704143845212.png\" alt=\"image-20220704143845212\"></p>\n<h2 id=\"Step-5-重启\"><a href=\"#Step-5-重启\" class=\"headerlink\" title=\"Step 5 重启\"></a>Step 5 重启</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n\n"},{"title":"ubuntu安装ns3","date":"2022-07-04T07:04:18.000Z","author":"Lcy","_content":"\n\n\n## Step 1 下载ns-3.36.1\n\n下载页链接：[ns-3.36 | ns-3 (nsnam.org)](https://www.nsnam.org/releases/ns-3-36/)\n\n然后进行解压操作：\n\n```shell\ntar xjf ns-allinone-3.36.1.tar.bz2 \ncd ns-allinone-3.36.1\n```\n\n\n\n不过我觉得官方说的的克隆仓库会更好：\n\n```shell\ngit clone https://gitlab.com/nsnam/ns-3-dev.git\ncd ns-3-dev\n# 这里最好切换一下分支，可以切最新的，不过这里我就用3.36.1\ngit checkout -b ns-3.36.1\n```\n\n## Step 2 构建并测试ns3\n\n注意要先安装cmake\n\n```shell\napt install cmake\n```\n\n然后先注册并构建一波ns3\n\n```shell\n# 根据配置文件配置\n./ns3 configure --enable-examples --enable-tests\n# 再build ns3\n./ns3 build\n```\n\n![image-20220704153427958](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153427958.png)\n\n开始测试ns3，测试脚本会检查各个工具是否正常。\n\n```shell\n# 运行test脚本\n./test.py\n```\n\n![image-20220704153611169](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153611169.png)\n\n```shell\n# 运行ns3的相关测试\n./ns3 run first\n./ns3 run \"first --PrintHelp\"\n```\n\n![image-20220704153655079](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153655079.png)\n\n至此ns3 安装完成\n\n","source":"_posts/ubuntu安装ns3.md","raw":"---\ntitle: ubuntu安装ns3\ndate: 2022-07-04 15:04:18\ntags: Study\ncategories: Titanium Tech\nauthor: Lcy\n---\n\n\n\n## Step 1 下载ns-3.36.1\n\n下载页链接：[ns-3.36 | ns-3 (nsnam.org)](https://www.nsnam.org/releases/ns-3-36/)\n\n然后进行解压操作：\n\n```shell\ntar xjf ns-allinone-3.36.1.tar.bz2 \ncd ns-allinone-3.36.1\n```\n\n\n\n不过我觉得官方说的的克隆仓库会更好：\n\n```shell\ngit clone https://gitlab.com/nsnam/ns-3-dev.git\ncd ns-3-dev\n# 这里最好切换一下分支，可以切最新的，不过这里我就用3.36.1\ngit checkout -b ns-3.36.1\n```\n\n## Step 2 构建并测试ns3\n\n注意要先安装cmake\n\n```shell\napt install cmake\n```\n\n然后先注册并构建一波ns3\n\n```shell\n# 根据配置文件配置\n./ns3 configure --enable-examples --enable-tests\n# 再build ns3\n./ns3 build\n```\n\n![image-20220704153427958](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153427958.png)\n\n开始测试ns3，测试脚本会检查各个工具是否正常。\n\n```shell\n# 运行test脚本\n./test.py\n```\n\n![image-20220704153611169](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153611169.png)\n\n```shell\n# 运行ns3的相关测试\n./ns3 run first\n./ns3 run \"first --PrintHelp\"\n```\n\n![image-20220704153655079](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153655079.png)\n\n至此ns3 安装完成\n\n","slug":"ubuntu安装ns3","published":1,"updated":"2022-07-09T15:47:31.308Z","_id":"cl56fiy900000ysem5xyv6mrp","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Step-1-下载ns-3-36-1\"><a href=\"#Step-1-下载ns-3-36-1\" class=\"headerlink\" title=\"Step 1 下载ns-3.36.1\"></a>Step 1 下载ns-3.36.1</h2><div class=\"story post-story\"><p>下载页链接：<a href=\"https://www.nsnam.org/releases/ns-3-36/\">ns-3.36 | ns-3 (nsnam.org)</a></p>\n<p>然后进行解压操作：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xjf ns-allinone-3.36.1.tar.bz2 </span><br><span class=\"line\">cd ns-allinone-3.36.1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>不过我觉得官方说的的克隆仓库会更好：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitlab.com/nsnam/ns-3-dev.git</span><br><span class=\"line\">cd ns-3-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">这里最好切换一下分支，可以切最新的，不过这里我就用3.36.1</span></span><br><span class=\"line\">git checkout -b ns-3.36.1</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"Step-2-构建并测试ns3\"><a href=\"#Step-2-构建并测试ns3\" class=\"headerlink\" title=\"Step 2 构建并测试ns3\"></a>Step 2 构建并测试ns3</h2><div class=\"story post-story\"><p>注意要先安装cmake</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt install cmake</span><br></pre></td></tr></table></figure>\n\n<p>然后先注册并构建一波ns3</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据配置文件配置</span></span><br><span class=\"line\">./ns3 configure --enable-examples --enable-tests</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">再build ns3</span></span><br><span class=\"line\">./ns3 build</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153427958.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153427958.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704153427958\"></p>\n<p>开始测试ns3，测试脚本会检查各个工具是否正常。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行<span class=\"built_in\">test</span>脚本</span></span><br><span class=\"line\">./test.py</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153611169.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153611169.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704153611169\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行ns3的相关测试</span></span><br><span class=\"line\">./ns3 run first</span><br><span class=\"line\">./ns3 run &quot;first --PrintHelp&quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153655079.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153655079.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20220704153655079\"></p>\n<p>至此ns3 安装完成</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Step-1-下载ns-3-36-1\"><a href=\"#Step-1-下载ns-3-36-1\" class=\"headerlink\" title=\"Step 1 下载ns-3.36.1\"></a>Step 1 下载ns-3.36.1</h2><p>下载页链接：<a href=\"https://www.nsnam.org/releases/ns-3-36/\">ns-3.36 | ns-3 (nsnam.org)</a></p>\n<p>然后进行解压操作：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xjf ns-allinone-3.36.1.tar.bz2 </span><br><span class=\"line\">cd ns-allinone-3.36.1</span><br></pre></td></tr></table></figure>\n\n\n\n<p>不过我觉得官方说的的克隆仓库会更好：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitlab.com/nsnam/ns-3-dev.git</span><br><span class=\"line\">cd ns-3-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">这里最好切换一下分支，可以切最新的，不过这里我就用3.36.1</span></span><br><span class=\"line\">git checkout -b ns-3.36.1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Step-2-构建并测试ns3\"><a href=\"#Step-2-构建并测试ns3\" class=\"headerlink\" title=\"Step 2 构建并测试ns3\"></a>Step 2 构建并测试ns3</h2><p>注意要先安装cmake</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt install cmake</span><br></pre></td></tr></table></figure>\n\n<p>然后先注册并构建一波ns3</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据配置文件配置</span></span><br><span class=\"line\">./ns3 configure --enable-examples --enable-tests</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">再build ns3</span></span><br><span class=\"line\">./ns3 build</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153427958.png\" alt=\"image-20220704153427958\"></p>\n<p>开始测试ns3，测试脚本会检查各个工具是否正常。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行<span class=\"built_in\">test</span>脚本</span></span><br><span class=\"line\">./test.py</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153611169.png\" alt=\"image-20220704153611169\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行ns3的相关测试</span></span><br><span class=\"line\">./ns3 run first</span><br><span class=\"line\">./ns3 run &quot;first --PrintHelp&quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220704153655079.png\" alt=\"image-20220704153655079\"></p>\n<p>至此ns3 安装完成</p>\n"},{"title":"Docker学习","date":"2022-07-11T04:20:15.000Z","author":"Lcy","_content":"\n# Docker 学习\n\n[toc]\n\n## Docker 概述\n\n[Docker文档](https://docs.docker.com)\n\n[DockerHub](https://hub.docker.com)\n\n| 特性                     | 传统                   | Docker                                                       |\n| ------------------------ | ---------------------- | ------------------------------------------------------------ |\n| 应用的更快速的交付和部署 | 一堆帮助文档，安装程序 | 打包镜像发布测试，一键运行                                   |\n| 更便捷的升级和扩缩容     |                        | 项目打包为镜像，整体升级，直接扩展                           |\n| 更简单的运维             |                        | 测试环境高度一致                                             |\n| 更高效的计算资源利用     |                        | 同时运行几十个tomcat？！内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例。 |\n\n## Docker 安装\n\n### Docker 基本组成\n\n**镜像(image)：**\n\n可以类比于一个模板，可以通过模板创建容器服务。tomcat镜像-->run-->tomcat01容器（提供服务器），通过镜像可以创建多个容器（最终服务运行或者项目运行就在容器中）\n\n**容器(container)：**\n\nDocker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。\n启动，停止，删除，基本命令!\n\n可以理解为简易的linux\n\n**仓库(repository)：**\n\n存放镜像\n\nDockerHub（默认国外）\n\n国内：阿里云/华为云容器服务（配置镜像加速）\n\n\n\n**Ubuntu docker安装并配置阿里云镜像加速：**[(9条消息) Ubuntu安装docker教程并配置阿里云镜像加速_危机！的博客-CSDN博客](https://blog.csdn.net/qq_43648470/article/details/108171050)\n\n```shell\n# 测试是否安装完毕\ndocker version\n# 测试能否run helloworld\ndocker run hello-world\n# 返回hello from docker就成功了\n\n# 查看下载的镜像\nroot@ubuntu:~# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\nhello-world   latest    18e5af790473   7 weeks ago   9.14kB\n```\n\n### Docker Run 流程：\n\n![image-20211117224115635](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224115635.png)\n\n### 底层原理：\n\n**Docker是怎么工作的**\n\nDocker是一个Client-Server结构的系统，Docker的守护进程运行在在主机上，通过Socket从客户端访问！\n\nDockerServer接收到Docker-Client的指令，就会执行指令\n\n![image-20211117224650062](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224650062.png)\n\nDocker更快的原因是因为有更少的抽象层。\n\n![image-20211117224746559](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224746559.png)\n\n所以新建一个容器的时候，Docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。虚拟机是加载GuestOS，分钟级别的，而Docker是利用宿主机的操作系统，省略了这个复杂的过程，秒级 ! \n\n## Docker 命令\n\n### 帮助命令\n\n```shell\ndocker version      # 显示docker版本信息\ndocker info         # 显示docker的系统信息\ndocker 命令 --help   # 帮助命令\n```\n\n帮助文档地址[docker | Docker Documentation](https://docs.docker.com/engine/reference/commandline/docker/)\n\n### 镜像命令\n\n#### docker images 查看本地的主机上的镜像\n\n```shell\nroot@ubuntu:~# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\nhello-world   latest    18e5af790473   7 weeks ago   9.14kB\n# 解释\nREPOSITORY   镜像的仓库源\nTAG          镜像的标签\nIMAGE ID     镜像的ID\nCREATED      镜像的创建时间\nSIZE         镜像的大小\n\n# 可选项\n-a, --all    列出所有镜像\n-q, --quiet  只显示镜像id\n-aq          列出所有镜像id\n```\n\n#### docker search 搜索镜像\n\n```shell\n# 搜索 星星500以上的ubuntu镜像\nroot@ubuntu:~# docker search --filter=STARS=500 ubuntu\nNAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nubuntu                           Ubuntu is a Debian-based Linux operating sys…   13142     [OK]       \ndorowu/ubuntu-desktop-lxde-vnc   Docker image to provide HTML5 VNC interface …   587                  [OK]\n\n```\n\n#### docker pull 下载镜像\n\n```shell\nroot@ubuntu:~# docker pull ubuntu\nUsing default tag: latest\nlatest: Pulling from library/ubuntu\na39c84e173f0: Pull complete \nDigest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322\nStatus: Downloaded newer image for ubuntu:latest\ndocker.io/library/ubuntu:latest\n\n# 指定版本下载\nroot@ubuntu:~# docker pull mysql:5.7\n```\n\n#### docker rmi 删除镜像\n\n```shell\ndocker rmi -f 镜像id # 删除指定镜像\ndocker rmi -f 镜像id 镜像id # 删除多个镜像\ndocker rmi -f $(docker images -aq) # 删除全部镜像\n```\n\n### 容器命令\n\n#### 新建容器并启动\n\n``` shell\ndocker run [可选参数] image\n\n# 参数说明\n--name=\"Name\"    容器名字 tomcat01 tomcat02 用来区分容器\n-d               后台方式运行\n-p               指定容器的端口  -p 8080:8080\n\t-p ip:主机端口:容器端口\n\t-p 主机端口:容器端口（常用）\n\t-p 容器端口\n\t容器端口\n-P               随即指定端口\n\n# 测试并进入容器\n\nroot@ubuntu:~# docker run -it ubuntu /bin/bash\nroot@ce6aec3c0df9:/# ls\nbin  boot  dev  etc  home  lib  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n\n# 退回主机\nroot@ce6aec3c0df9:/# exit\nexit\n```\n\n#### 列出所有运行主机\n\n```shell\n# docker ps 命令\n       # 列出当前正在运行容器\n-a     # 列出当前+历史运行过的\n-n=num # 显示最近创建的容器\n-q     # 只显示容器编号\n-aq    # 列出所有的编号\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\nroot@ubuntu:~# docker ps -a\nCONTAINER ID   IMAGE         COMMAND       CREATED         STATUS                      PORTS     NAMES\nce6aec3c0df9   ubuntu        \"/bin/bash\"   2 minutes ago   Exited (0) 51 seconds ago             admiring_bell\ne561bab36a3d   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               youthful_morse\n23bd436c8cd4   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               sleepy_chatelet\n69ea02fb97ce   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               stupefied_bardeen\n\n```\n\n#### 退出容器\n\n```shell\nexit    # 直接退出\nctrl + p + Q # 不停止退出\n```\n\n#### 删除容器\n\n```shell\ndocker rm 容器id                 #删除指定容器，不能删除正在运行的\ndocker rm -f $(docker ps -aq)   #删除所有容器\ndocker ps -a -qlxargs docker rm # 删除所有容器\n```\n\n#### 启动和停止容器\n\n```shell\ndocker start 容器id          # 启动容器\ndocker restart 容器id        # 重启容器\ndocker stop 容器id           # 停止当前运行的容器\ndocker kill 容器id           # 强制停止当前容器\n```\n\n### 常用其他命令\n\n#### 后台运行程序\n\n```shell\n# 命令docker run -d 镜像名\nroot@ubuntu:~# docker run -d ubuntu\n9879828e928e7a6f3ff0d0b7d8d917dfa9bc6ef640e9a6bc857ba052bf2fc81c\n#问题docker ps， 发现centos 停止了\n\n#常见的坑: docker 容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止\n# nginx,容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了\n```\n\n#### 查看日志命令\n\ndocker logs -f -t --tail 10 容器id\n\n#### 查看容器进程\n\n```shell\nroot@ubuntu:~# docker start ce6aec3c0df9\nce6aec3c0df9\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS        PORTS     NAMES\nce6aec3c0df9   ubuntu    \"/bin/bash\"   12 minutes ago   Up 1 second             admiring_bell\nroot@ubuntu:~# docker top\n\"docker top\" requires at least 1 argument.\nSee 'docker top --help'.\n\nUsage:  docker top CONTAINER [ps OPTIONS]\n\nDisplay the running processes of a container\nroot@ubuntu:~# docker top ce6aec3c0df9\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                10273               10250               0                   05:36               pts/0               00:00:00            /bin/bash\n```\n\n#### 查看容器元数据\n\n```shell\nroot@ubuntu:~# docker inspect ce6aec3c0df9\n[\n    {\n        \"Id\": \"ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72\",\n        \"Created\": \"2021-11-18T05:24:12.389591454Z\",\n        \"Path\": \"/bin/bash\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 10273,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2021-11-18T05:36:54.956183355Z\",\n            \"FinishedAt\": \"2021-11-18T05:25:27.062396275Z\"\n        },\n        \"Image\": \"sha256:d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72-json.log\",\n        \"Name\": \"/admiring_bell\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"docker-default\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"KernelMemory\": 0,\n            \"KernelMemoryTCP\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": null,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d-init/diff:/var/lib/docker/overlay2/11eb11ae3a068ff4e17db8fa46d97e151577353e72dd544a8d7b757740389bae/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"ce6aec3c0df9\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": true,\n            \"AttachStdout\": true,\n            \"AttachStderr\": true,\n            \"Tty\": true,\n            \"OpenStdin\": true,\n            \"StdinOnce\": true,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": [\n                \"/bin/bash\"\n            ],\n            \"Image\": \"ubuntu\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"d9efa03479865798f9abfcac8cde759809d3a2b65de856dbe1dd82e96740a8e5\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {},\n            \"SandboxKey\": \"/var/run/docker/netns/d9efa0347986\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.2\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:02\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"0bf5731d3c704ec72e742cb00a5297b5745f5fe55869c6fc432a61b70620a9a7\",\n                    \"EndpointID\": \"0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.2\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:02\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n```\n\n#### 进入当前正在运行的容器\n\n```shell\n#我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置\n\n#命令\ndocker exec -it 容器id bashShell \n\n#测试\n\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES\nce6aec3c0df9   ubuntu    \"/bin/bash\"   16 minutes ago   Up 4 minutes             admiring_bell\nroot@ubuntu:~# docker exec -it ce6aec3c0df9 /bin/bash\nroot@ce6aec3c0df9:/# ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 05:36 pts/0    00:00:00 /bin/bash\nroot         9     0  1 05:41 pts/1    00:00:00 /bin/bash\nroot        17     9  0 05:41 pts/1    00:00:00 ps -ef\n\n# 方式二\ndocker attach 容器id\n\n# docker exec   # 进入容器后开启一个新的终端，可以在里面操作\n# docker attach # 进入容器正在执行的终端，不会启动新的进程\n```\n\n#### 从容器内拷贝文件到主机上\n\n```shell\ndocker cp 容器id:容器内路径 目的主机路径\n# 可以使用-v卷的技术自动同步\n```\n\n## 容器数据卷\n\n### 什么是容器数据卷\n\n**docker理念回顾**\n\n将应用打包成一个镜像\n\n==需求：数据可以持久化==\n\n可以做一个数据共享。Docker中的数据同步到本地\n\n容器之间可以有一个数据共享的技术! Docker 容器中产生的数据，同步到本地!\n这就是卷技术!目录的挂载，将我们容器内的目录，挂载到Linux上面! \n\n> 方式一：直接使用-v命令挂载\n\n```shell\ndocker run -it -V /home/ceshi: /home ubuntu /bin/bash\n```\n\n> 方式二：Dockerfile 就是用来构建docker镜像的构建文件，就是一个命令脚本\n>\n> 通过脚本生成镜像，镜像是一层一层的，脚本一个个的命令都是一层\n\n```shell\nroot@ubuntu:/home# mkdir docker-test-volume\nroot@ubuntu:/home# cd docker-test-volume\nroot@ubuntu:/home/docker-test-volume# pwd\n/home/docker-test-volume\nroot@ubuntu:/home/docker-test-volume# vim dockerfile\nroot@ubuntu:/home/docker-test-volume# cat dockerfile\nFROM ubuntu\n\nVOLUME [\"volume01\",\"volume02\"] # 匿名挂载\n\nCMD echo \"------end------\"\nCMD /bin/bash\nroot@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0\n\"docker build\" requires exactly 1 argument.\nSee 'docker build --help'.\n\nUsage:  docker build [OPTIONS] PATH | URL | -\n\nBuild an image from a Dockerfile\nroot@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0 .\nSending build context to Docker daemon  2.048kB\nStep 1/4 : FROM ubuntu\n ---> d5ca7a445605\nStep 2/4 : VOLUME [\"volume01\",\"volume02\"]\n ---> Running in af0aca7a1acc\nRemoving intermediate container af0aca7a1acc\n ---> 886d53869a5f\nStep 3/4 : CMD echo \"------end------\"\n ---> Running in 01d8de6fd880\nRemoving intermediate container 01d8de6fd880\n ---> db0ff6f6ca87\nStep 4/4 : CMD /bin/bash\n ---> Running in 73439e670a07\nRemoving intermediate container 73439e670a07\n ---> 0fa242d56fe6\nSuccessfully built 0fa242d56fe6\nSuccessfully tagged respifisco:1.0\n\n```\n\n```shell\n        \"Mounts\": [\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6\",\n                \"Source\": \"/var/lib/docker/volumes/806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6/_data\",\n                \"Destination\": \"volume01\",\n                \"Driver\": \"local\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d\",\n                \"Source\": \"/var/lib/docker/volumes/f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d/_data\",\n                \"Destination\": \"volume02\",\n                \"Driver\": \"local\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n```\n\n## Docker File（构建自己的镜像）\n\ndockerfile是用来构建dokcer镜像的文件!命令参数脚本!\n构建步骤:\n1、编写一个dockerfile 文件\n2、docker build构建成为一个镜像\n3、docker run运行镜像\n4、docker push发布镜像( DockerHub、阿里云镜像仓库! )\n\n基础知识:\n1、每个保留关键字(指令)都是必须是大写字母\n2、执行从上到下顺序执行\n3、#表示注释.\n4、每一个指令都会创建提交一个新的镜像层,并提交!\n\n![image-20211118224824710](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211118224824710.png)\n\ndockerfile是面向开发的,我们以后要发布项目,做镜像,就需要编写dockerfile文件,这个文件十分简单!\nDocker镜像逐渐成为企业交付的标准,必须要掌握!\n步骤: 开发，部署，运维。。。缺一不可!\nDockerFile :构建文件，定义了一切的步骤，源代码\nDockerlmages :通过DockerFile构建生成的镜像，最终发布和运行的产品! \nDocker容器:容器就是镜像运行起来提供服务器\n","source":"_posts/Docker学习.md","raw":"---\ntitle: Docker学习\ndate: 2022-07-11 12:20:15\ntags: Study\ncategories: Study\nauthor: Lcy\n---\n\n# Docker 学习\n\n[toc]\n\n## Docker 概述\n\n[Docker文档](https://docs.docker.com)\n\n[DockerHub](https://hub.docker.com)\n\n| 特性                     | 传统                   | Docker                                                       |\n| ------------------------ | ---------------------- | ------------------------------------------------------------ |\n| 应用的更快速的交付和部署 | 一堆帮助文档，安装程序 | 打包镜像发布测试，一键运行                                   |\n| 更便捷的升级和扩缩容     |                        | 项目打包为镜像，整体升级，直接扩展                           |\n| 更简单的运维             |                        | 测试环境高度一致                                             |\n| 更高效的计算资源利用     |                        | 同时运行几十个tomcat？！内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例。 |\n\n## Docker 安装\n\n### Docker 基本组成\n\n**镜像(image)：**\n\n可以类比于一个模板，可以通过模板创建容器服务。tomcat镜像-->run-->tomcat01容器（提供服务器），通过镜像可以创建多个容器（最终服务运行或者项目运行就在容器中）\n\n**容器(container)：**\n\nDocker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。\n启动，停止，删除，基本命令!\n\n可以理解为简易的linux\n\n**仓库(repository)：**\n\n存放镜像\n\nDockerHub（默认国外）\n\n国内：阿里云/华为云容器服务（配置镜像加速）\n\n\n\n**Ubuntu docker安装并配置阿里云镜像加速：**[(9条消息) Ubuntu安装docker教程并配置阿里云镜像加速_危机！的博客-CSDN博客](https://blog.csdn.net/qq_43648470/article/details/108171050)\n\n```shell\n# 测试是否安装完毕\ndocker version\n# 测试能否run helloworld\ndocker run hello-world\n# 返回hello from docker就成功了\n\n# 查看下载的镜像\nroot@ubuntu:~# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\nhello-world   latest    18e5af790473   7 weeks ago   9.14kB\n```\n\n### Docker Run 流程：\n\n![image-20211117224115635](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224115635.png)\n\n### 底层原理：\n\n**Docker是怎么工作的**\n\nDocker是一个Client-Server结构的系统，Docker的守护进程运行在在主机上，通过Socket从客户端访问！\n\nDockerServer接收到Docker-Client的指令，就会执行指令\n\n![image-20211117224650062](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224650062.png)\n\nDocker更快的原因是因为有更少的抽象层。\n\n![image-20211117224746559](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224746559.png)\n\n所以新建一个容器的时候，Docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。虚拟机是加载GuestOS，分钟级别的，而Docker是利用宿主机的操作系统，省略了这个复杂的过程，秒级 ! \n\n## Docker 命令\n\n### 帮助命令\n\n```shell\ndocker version      # 显示docker版本信息\ndocker info         # 显示docker的系统信息\ndocker 命令 --help   # 帮助命令\n```\n\n帮助文档地址[docker | Docker Documentation](https://docs.docker.com/engine/reference/commandline/docker/)\n\n### 镜像命令\n\n#### docker images 查看本地的主机上的镜像\n\n```shell\nroot@ubuntu:~# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\nhello-world   latest    18e5af790473   7 weeks ago   9.14kB\n# 解释\nREPOSITORY   镜像的仓库源\nTAG          镜像的标签\nIMAGE ID     镜像的ID\nCREATED      镜像的创建时间\nSIZE         镜像的大小\n\n# 可选项\n-a, --all    列出所有镜像\n-q, --quiet  只显示镜像id\n-aq          列出所有镜像id\n```\n\n#### docker search 搜索镜像\n\n```shell\n# 搜索 星星500以上的ubuntu镜像\nroot@ubuntu:~# docker search --filter=STARS=500 ubuntu\nNAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nubuntu                           Ubuntu is a Debian-based Linux operating sys…   13142     [OK]       \ndorowu/ubuntu-desktop-lxde-vnc   Docker image to provide HTML5 VNC interface …   587                  [OK]\n\n```\n\n#### docker pull 下载镜像\n\n```shell\nroot@ubuntu:~# docker pull ubuntu\nUsing default tag: latest\nlatest: Pulling from library/ubuntu\na39c84e173f0: Pull complete \nDigest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322\nStatus: Downloaded newer image for ubuntu:latest\ndocker.io/library/ubuntu:latest\n\n# 指定版本下载\nroot@ubuntu:~# docker pull mysql:5.7\n```\n\n#### docker rmi 删除镜像\n\n```shell\ndocker rmi -f 镜像id # 删除指定镜像\ndocker rmi -f 镜像id 镜像id # 删除多个镜像\ndocker rmi -f $(docker images -aq) # 删除全部镜像\n```\n\n### 容器命令\n\n#### 新建容器并启动\n\n``` shell\ndocker run [可选参数] image\n\n# 参数说明\n--name=\"Name\"    容器名字 tomcat01 tomcat02 用来区分容器\n-d               后台方式运行\n-p               指定容器的端口  -p 8080:8080\n\t-p ip:主机端口:容器端口\n\t-p 主机端口:容器端口（常用）\n\t-p 容器端口\n\t容器端口\n-P               随即指定端口\n\n# 测试并进入容器\n\nroot@ubuntu:~# docker run -it ubuntu /bin/bash\nroot@ce6aec3c0df9:/# ls\nbin  boot  dev  etc  home  lib  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n\n# 退回主机\nroot@ce6aec3c0df9:/# exit\nexit\n```\n\n#### 列出所有运行主机\n\n```shell\n# docker ps 命令\n       # 列出当前正在运行容器\n-a     # 列出当前+历史运行过的\n-n=num # 显示最近创建的容器\n-q     # 只显示容器编号\n-aq    # 列出所有的编号\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\nroot@ubuntu:~# docker ps -a\nCONTAINER ID   IMAGE         COMMAND       CREATED         STATUS                      PORTS     NAMES\nce6aec3c0df9   ubuntu        \"/bin/bash\"   2 minutes ago   Exited (0) 51 seconds ago             admiring_bell\ne561bab36a3d   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               youthful_morse\n23bd436c8cd4   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               sleepy_chatelet\n69ea02fb97ce   hello-world   \"/hello\"      15 hours ago    Exited (0) 15 hours ago               stupefied_bardeen\n\n```\n\n#### 退出容器\n\n```shell\nexit    # 直接退出\nctrl + p + Q # 不停止退出\n```\n\n#### 删除容器\n\n```shell\ndocker rm 容器id                 #删除指定容器，不能删除正在运行的\ndocker rm -f $(docker ps -aq)   #删除所有容器\ndocker ps -a -qlxargs docker rm # 删除所有容器\n```\n\n#### 启动和停止容器\n\n```shell\ndocker start 容器id          # 启动容器\ndocker restart 容器id        # 重启容器\ndocker stop 容器id           # 停止当前运行的容器\ndocker kill 容器id           # 强制停止当前容器\n```\n\n### 常用其他命令\n\n#### 后台运行程序\n\n```shell\n# 命令docker run -d 镜像名\nroot@ubuntu:~# docker run -d ubuntu\n9879828e928e7a6f3ff0d0b7d8d917dfa9bc6ef640e9a6bc857ba052bf2fc81c\n#问题docker ps， 发现centos 停止了\n\n#常见的坑: docker 容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止\n# nginx,容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了\n```\n\n#### 查看日志命令\n\ndocker logs -f -t --tail 10 容器id\n\n#### 查看容器进程\n\n```shell\nroot@ubuntu:~# docker start ce6aec3c0df9\nce6aec3c0df9\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS        PORTS     NAMES\nce6aec3c0df9   ubuntu    \"/bin/bash\"   12 minutes ago   Up 1 second             admiring_bell\nroot@ubuntu:~# docker top\n\"docker top\" requires at least 1 argument.\nSee 'docker top --help'.\n\nUsage:  docker top CONTAINER [ps OPTIONS]\n\nDisplay the running processes of a container\nroot@ubuntu:~# docker top ce6aec3c0df9\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                10273               10250               0                   05:36               pts/0               00:00:00            /bin/bash\n```\n\n#### 查看容器元数据\n\n```shell\nroot@ubuntu:~# docker inspect ce6aec3c0df9\n[\n    {\n        \"Id\": \"ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72\",\n        \"Created\": \"2021-11-18T05:24:12.389591454Z\",\n        \"Path\": \"/bin/bash\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 10273,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2021-11-18T05:36:54.956183355Z\",\n            \"FinishedAt\": \"2021-11-18T05:25:27.062396275Z\"\n        },\n        \"Image\": \"sha256:d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72-json.log\",\n        \"Name\": \"/admiring_bell\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"docker-default\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"KernelMemory\": 0,\n            \"KernelMemoryTCP\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": null,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d-init/diff:/var/lib/docker/overlay2/11eb11ae3a068ff4e17db8fa46d97e151577353e72dd544a8d7b757740389bae/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"ce6aec3c0df9\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": true,\n            \"AttachStdout\": true,\n            \"AttachStderr\": true,\n            \"Tty\": true,\n            \"OpenStdin\": true,\n            \"StdinOnce\": true,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": [\n                \"/bin/bash\"\n            ],\n            \"Image\": \"ubuntu\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"d9efa03479865798f9abfcac8cde759809d3a2b65de856dbe1dd82e96740a8e5\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {},\n            \"SandboxKey\": \"/var/run/docker/netns/d9efa0347986\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.2\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:02\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"0bf5731d3c704ec72e742cb00a5297b5745f5fe55869c6fc432a61b70620a9a7\",\n                    \"EndpointID\": \"0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.2\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:02\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n```\n\n#### 进入当前正在运行的容器\n\n```shell\n#我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置\n\n#命令\ndocker exec -it 容器id bashShell \n\n#测试\n\nroot@ubuntu:~# docker ps\nCONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES\nce6aec3c0df9   ubuntu    \"/bin/bash\"   16 minutes ago   Up 4 minutes             admiring_bell\nroot@ubuntu:~# docker exec -it ce6aec3c0df9 /bin/bash\nroot@ce6aec3c0df9:/# ps -ef\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 05:36 pts/0    00:00:00 /bin/bash\nroot         9     0  1 05:41 pts/1    00:00:00 /bin/bash\nroot        17     9  0 05:41 pts/1    00:00:00 ps -ef\n\n# 方式二\ndocker attach 容器id\n\n# docker exec   # 进入容器后开启一个新的终端，可以在里面操作\n# docker attach # 进入容器正在执行的终端，不会启动新的进程\n```\n\n#### 从容器内拷贝文件到主机上\n\n```shell\ndocker cp 容器id:容器内路径 目的主机路径\n# 可以使用-v卷的技术自动同步\n```\n\n## 容器数据卷\n\n### 什么是容器数据卷\n\n**docker理念回顾**\n\n将应用打包成一个镜像\n\n==需求：数据可以持久化==\n\n可以做一个数据共享。Docker中的数据同步到本地\n\n容器之间可以有一个数据共享的技术! Docker 容器中产生的数据，同步到本地!\n这就是卷技术!目录的挂载，将我们容器内的目录，挂载到Linux上面! \n\n> 方式一：直接使用-v命令挂载\n\n```shell\ndocker run -it -V /home/ceshi: /home ubuntu /bin/bash\n```\n\n> 方式二：Dockerfile 就是用来构建docker镜像的构建文件，就是一个命令脚本\n>\n> 通过脚本生成镜像，镜像是一层一层的，脚本一个个的命令都是一层\n\n```shell\nroot@ubuntu:/home# mkdir docker-test-volume\nroot@ubuntu:/home# cd docker-test-volume\nroot@ubuntu:/home/docker-test-volume# pwd\n/home/docker-test-volume\nroot@ubuntu:/home/docker-test-volume# vim dockerfile\nroot@ubuntu:/home/docker-test-volume# cat dockerfile\nFROM ubuntu\n\nVOLUME [\"volume01\",\"volume02\"] # 匿名挂载\n\nCMD echo \"------end------\"\nCMD /bin/bash\nroot@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0\n\"docker build\" requires exactly 1 argument.\nSee 'docker build --help'.\n\nUsage:  docker build [OPTIONS] PATH | URL | -\n\nBuild an image from a Dockerfile\nroot@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0 .\nSending build context to Docker daemon  2.048kB\nStep 1/4 : FROM ubuntu\n ---> d5ca7a445605\nStep 2/4 : VOLUME [\"volume01\",\"volume02\"]\n ---> Running in af0aca7a1acc\nRemoving intermediate container af0aca7a1acc\n ---> 886d53869a5f\nStep 3/4 : CMD echo \"------end------\"\n ---> Running in 01d8de6fd880\nRemoving intermediate container 01d8de6fd880\n ---> db0ff6f6ca87\nStep 4/4 : CMD /bin/bash\n ---> Running in 73439e670a07\nRemoving intermediate container 73439e670a07\n ---> 0fa242d56fe6\nSuccessfully built 0fa242d56fe6\nSuccessfully tagged respifisco:1.0\n\n```\n\n```shell\n        \"Mounts\": [\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6\",\n                \"Source\": \"/var/lib/docker/volumes/806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6/_data\",\n                \"Destination\": \"volume01\",\n                \"Driver\": \"local\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d\",\n                \"Source\": \"/var/lib/docker/volumes/f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d/_data\",\n                \"Destination\": \"volume02\",\n                \"Driver\": \"local\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n```\n\n## Docker File（构建自己的镜像）\n\ndockerfile是用来构建dokcer镜像的文件!命令参数脚本!\n构建步骤:\n1、编写一个dockerfile 文件\n2、docker build构建成为一个镜像\n3、docker run运行镜像\n4、docker push发布镜像( DockerHub、阿里云镜像仓库! )\n\n基础知识:\n1、每个保留关键字(指令)都是必须是大写字母\n2、执行从上到下顺序执行\n3、#表示注释.\n4、每一个指令都会创建提交一个新的镜像层,并提交!\n\n![image-20211118224824710](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211118224824710.png)\n\ndockerfile是面向开发的,我们以后要发布项目,做镜像,就需要编写dockerfile文件,这个文件十分简单!\nDocker镜像逐渐成为企业交付的标准,必须要掌握!\n步骤: 开发，部署，运维。。。缺一不可!\nDockerFile :构建文件，定义了一切的步骤，源代码\nDockerlmages :通过DockerFile构建生成的镜像，最终发布和运行的产品! \nDocker容器:容器就是镜像运行起来提供服务器\n","slug":"Docker学习","published":1,"updated":"2022-08-01T15:44:44.942Z","_id":"cl5g8mk730000e4tz128n5d3l","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Docker-学习\"><a href=\"#Docker-学习\" class=\"headerlink\" title=\"Docker 学习\"></a>Docker 学习</h1><p>[toc]</p>\n<h2 id=\"Docker-概述\"><a href=\"#Docker-概述\" class=\"headerlink\" title=\"Docker 概述\"></a>Docker 概述</h2><div class=\"story post-story\"><p><a href=\"https://docs.docker.com/\">Docker文档</a></p>\n<p><a href=\"https://hub.docker.com/\">DockerHub</a></p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>传统</th>\n<th>Docker</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>应用的更快速的交付和部署</td>\n<td>一堆帮助文档，安装程序</td>\n<td>打包镜像发布测试，一键运行</td>\n</tr>\n<tr>\n<td>更便捷的升级和扩缩容</td>\n<td></td>\n<td>项目打包为镜像，整体升级，直接扩展</td>\n</tr>\n<tr>\n<td>更简单的运维</td>\n<td></td>\n<td>测试环境高度一致</td>\n</tr>\n<tr>\n<td>更高效的计算资源利用</td>\n<td></td>\n<td>同时运行几十个tomcat？！内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例。</td>\n</tr>\n</tbody></table>\n</div><h2 id=\"Docker-安装\"><a href=\"#Docker-安装\" class=\"headerlink\" title=\"Docker 安装\"></a>Docker 安装</h2><div class=\"story post-story\"><h3 id=\"Docker-基本组成\"><a href=\"#Docker-基本组成\" class=\"headerlink\" title=\"Docker 基本组成\"></a>Docker 基本组成</h3><p><strong>镜像(image)：</strong></p>\n<p>可以类比于一个模板，可以通过模板创建容器服务。tomcat镜像–&gt;run–&gt;tomcat01容器（提供服务器），通过镜像可以创建多个容器（最终服务运行或者项目运行就在容器中）</p>\n<p><strong>容器(container)：</strong></p>\n<p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。<br>启动，停止，删除，基本命令!</p>\n<p>可以理解为简易的linux</p>\n<p><strong>仓库(repository)：</strong></p>\n<p>存放镜像</p>\n<p>DockerHub（默认国外）</p>\n<p>国内：阿里云/华为云容器服务（配置镜像加速）</p>\n<p><strong>Ubuntu docker安装并配置阿里云镜像加速：</strong><a href=\"https://blog.csdn.net/qq_43648470/article/details/108171050\">(9条消息) Ubuntu安装docker教程并配置阿里云镜像加速_危机！的博客-CSDN博客</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试是否安装完毕</span></span><br><span class=\"line\">docker version</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试能否run helloworld</span></span><br><span class=\"line\">docker run hello-world</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">返回hello from docker就成功了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看下载的镜像</span></span><br><span class=\"line\">root@ubuntu:~# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED       SIZE</span><br><span class=\"line\">hello-world   latest    18e5af790473   7 weeks ago   9.14kB</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Docker-Run-流程：\"><a href=\"#Docker-Run-流程：\" class=\"headerlink\" title=\"Docker Run 流程：\"></a>Docker Run 流程：</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224115635.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224115635.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20211117224115635\"></p>\n<h3 id=\"底层原理：\"><a href=\"#底层原理：\" class=\"headerlink\" title=\"底层原理：\"></a>底层原理：</h3><p><strong>Docker是怎么工作的</strong></p>\n<p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在在主机上，通过Socket从客户端访问！</p>\n<p>DockerServer接收到Docker-Client的指令，就会执行指令</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224650062.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224650062.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20211117224650062\"></p>\n<p>Docker更快的原因是因为有更少的抽象层。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224746559.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224746559.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20211117224746559\"></p>\n<p>所以新建一个容器的时候，Docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。虚拟机是加载GuestOS，分钟级别的，而Docker是利用宿主机的操作系统，省略了这个复杂的过程，秒级 ! </p>\n</div><h2 id=\"Docker-命令\"><a href=\"#Docker-命令\" class=\"headerlink\" title=\"Docker 命令\"></a>Docker 命令</h2><div class=\"story post-story\"><h3 id=\"帮助命令\"><a href=\"#帮助命令\" class=\"headerlink\" title=\"帮助命令\"></a>帮助命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker version      # 显示docker版本信息</span><br><span class=\"line\">docker info         # 显示docker的系统信息</span><br><span class=\"line\">docker 命令 --help   # 帮助命令</span><br></pre></td></tr></table></figure>\n\n<p>帮助文档地址<a href=\"https://docs.docker.com/engine/reference/commandline/docker/\">docker | Docker Documentation</a></p>\n<h3 id=\"镜像命令\"><a href=\"#镜像命令\" class=\"headerlink\" title=\"镜像命令\"></a>镜像命令</h3><h4 id=\"docker-images-查看本地的主机上的镜像\"><a href=\"#docker-images-查看本地的主机上的镜像\" class=\"headerlink\" title=\"docker images 查看本地的主机上的镜像\"></a>docker images 查看本地的主机上的镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED       SIZE</span><br><span class=\"line\">hello-world   latest    18e5af790473   7 weeks ago   9.14kB</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解释</span></span><br><span class=\"line\">REPOSITORY   镜像的仓库源</span><br><span class=\"line\">TAG          镜像的标签</span><br><span class=\"line\">IMAGE ID     镜像的ID</span><br><span class=\"line\">CREATED      镜像的创建时间</span><br><span class=\"line\">SIZE         镜像的大小</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">可选项</span></span><br><span class=\"line\">-a, --all    列出所有镜像</span><br><span class=\"line\">-q, --quiet  只显示镜像id</span><br><span class=\"line\">-aq          列出所有镜像id</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-search-搜索镜像\"><a href=\"#docker-search-搜索镜像\" class=\"headerlink\" title=\"docker search 搜索镜像\"></a>docker search 搜索镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">搜索 星星500以上的ubuntu镜像</span></span><br><span class=\"line\">root@ubuntu:~# docker search --filter=STARS=500 ubuntu</span><br><span class=\"line\">NAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class=\"line\">ubuntu                           Ubuntu is a Debian-based Linux operating sys…   13142     [OK]       </span><br><span class=\"line\">dorowu/ubuntu-desktop-lxde-vnc   Docker image to provide HTML5 VNC interface …   587                  [OK]</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-pull-下载镜像\"><a href=\"#docker-pull-下载镜像\" class=\"headerlink\" title=\"docker pull 下载镜像\"></a>docker pull 下载镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker pull ubuntu</span><br><span class=\"line\">Using default tag: latest</span><br><span class=\"line\">latest: Pulling from library/ubuntu</span><br><span class=\"line\">a39c84e173f0: Pull complete </span><br><span class=\"line\">Digest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322</span><br><span class=\"line\">Status: Downloaded newer image for ubuntu:latest</span><br><span class=\"line\">docker.io/library/ubuntu:latest</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">指定版本下载</span></span><br><span class=\"line\">root@ubuntu:~# docker pull mysql:5.7</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-rmi-删除镜像\"><a href=\"#docker-rmi-删除镜像\" class=\"headerlink\" title=\"docker rmi 删除镜像\"></a>docker rmi 删除镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi -f 镜像id # 删除指定镜像</span><br><span class=\"line\">docker rmi -f 镜像id 镜像id # 删除多个镜像</span><br><span class=\"line\">docker rmi -f $(docker images -aq) # 删除全部镜像</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"容器命令\"><a href=\"#容器命令\" class=\"headerlink\" title=\"容器命令\"></a>容器命令</h3><h4 id=\"新建容器并启动\"><a href=\"#新建容器并启动\" class=\"headerlink\" title=\"新建容器并启动\"></a>新建容器并启动</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [可选参数] image</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">参数说明</span></span><br><span class=\"line\">--name=&quot;Name&quot;    容器名字 tomcat01 tomcat02 用来区分容器</span><br><span class=\"line\">-d               后台方式运行</span><br><span class=\"line\">-p               指定容器的端口  -p 8080:8080</span><br><span class=\"line\">\t-p ip:主机端口:容器端口</span><br><span class=\"line\">\t-p 主机端口:容器端口（常用）</span><br><span class=\"line\">\t-p 容器端口</span><br><span class=\"line\">\t容器端口</span><br><span class=\"line\">-P               随即指定端口</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试并进入容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">root@ubuntu:~# docker run -it ubuntu /bin/bash</span><br><span class=\"line\">root@ce6aec3c0df9:/# ls</span><br><span class=\"line\">bin  boot  dev  etc  home  lib  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">退回主机</span></span><br><span class=\"line\">root@ce6aec3c0df9:/# exit</span><br><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出所有运行主机\"><a href=\"#列出所有运行主机\" class=\"headerlink\" title=\"列出所有运行主机\"></a>列出所有运行主机</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker ps 命令</span></span><br><span class=\"line\">       # 列出当前正在运行容器</span><br><span class=\"line\">-a     # 列出当前+历史运行过的</span><br><span class=\"line\">-n=num # 显示最近创建的容器</span><br><span class=\"line\">-q     # 只显示容器编号</span><br><span class=\"line\">-aq    # 列出所有的编号</span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class=\"line\">root@ubuntu:~# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE         COMMAND       CREATED         STATUS                      PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu        &quot;/bin/bash&quot;   2 minutes ago   Exited (0) 51 seconds ago             admiring_bell</span><br><span class=\"line\">e561bab36a3d   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               youthful_morse</span><br><span class=\"line\">23bd436c8cd4   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               sleepy_chatelet</span><br><span class=\"line\">69ea02fb97ce   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               stupefied_bardeen</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"退出容器\"><a href=\"#退出容器\" class=\"headerlink\" title=\"退出容器\"></a>退出容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit    # 直接退出</span><br><span class=\"line\">ctrl + p + Q # 不停止退出</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删除容器\"><a href=\"#删除容器\" class=\"headerlink\" title=\"删除容器\"></a>删除容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm 容器id                 #删除指定容器，不能删除正在运行的</span><br><span class=\"line\">docker rm -f $(docker ps -aq)   #删除所有容器</span><br><span class=\"line\">docker ps -a -qlxargs docker rm # 删除所有容器</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动和停止容器\"><a href=\"#启动和停止容器\" class=\"headerlink\" title=\"启动和停止容器\"></a>启动和停止容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start 容器id          # 启动容器</span><br><span class=\"line\">docker restart 容器id        # 重启容器</span><br><span class=\"line\">docker stop 容器id           # 停止当前运行的容器</span><br><span class=\"line\">docker kill 容器id           # 强制停止当前容器</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用其他命令\"><a href=\"#常用其他命令\" class=\"headerlink\" title=\"常用其他命令\"></a>常用其他命令</h3><h4 id=\"后台运行程序\"><a href=\"#后台运行程序\" class=\"headerlink\" title=\"后台运行程序\"></a>后台运行程序</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令docker run -d 镜像名</span></span><br><span class=\"line\">root@ubuntu:~# docker run -d ubuntu</span><br><span class=\"line\">9879828e928e7a6f3ff0d0b7d8d917dfa9bc6ef640e9a6bc857ba052bf2fc81c</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">问题docker ps， 发现centos 停止了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">常见的坑: docker 容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx,容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看日志命令\"><a href=\"#查看日志命令\" class=\"headerlink\" title=\"查看日志命令\"></a>查看日志命令</h4><p>docker logs -f -t –tail 10 容器id</p>\n<h4 id=\"查看容器进程\"><a href=\"#查看容器进程\" class=\"headerlink\" title=\"查看容器进程\"></a>查看容器进程</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker start ce6aec3c0df9</span><br><span class=\"line\">ce6aec3c0df9</span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS        PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu    &quot;/bin/bash&quot;   12 minutes ago   Up 1 second             admiring_bell</span><br><span class=\"line\">root@ubuntu:~# docker top</span><br><span class=\"line\">&quot;docker top&quot; requires at least 1 argument.</span><br><span class=\"line\">See &#x27;docker top --help&#x27;.</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:  docker top CONTAINER [ps OPTIONS]</span><br><span class=\"line\"></span><br><span class=\"line\">Display the running processes of a container</span><br><span class=\"line\">root@ubuntu:~# docker top ce6aec3c0df9</span><br><span class=\"line\">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class=\"line\">root                10273               10250               0                   05:36               pts/0               00:00:00            /bin/bash</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看容器元数据\"><a href=\"#查看容器元数据\" class=\"headerlink\" title=\"查看容器元数据\"></a>查看容器元数据</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker inspect ce6aec3c0df9</span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2021-11-18T05:24:12.389591454Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/bin/bash&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 10273,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2021-11-18T05:36:54.956183355Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;2021-11-18T05:25:27.062396275Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/admiring_bell&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;docker-default&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: null,</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DeviceRequests&quot;: null,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: null,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: null,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d-init/diff:/var/lib/docker/overlay2/11eb11ae3a068ff4e17db8fa46d97e151577353e72dd544a8d7b757740389bae/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;ce6aec3c0df9&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: true,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: true,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: true,</span><br><span class=\"line\">            &quot;Tty&quot;: true,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: true,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: true,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: [</span><br><span class=\"line\">                &quot;/bin/bash&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Image&quot;: &quot;ubuntu&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: null,</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;d9efa03479865798f9abfcac8cde759809d3a2b65de856dbe1dd82e96740a8e5&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/d9efa0347986&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;0bf5731d3c704ec72e742cb00a5297b5745f5fe55869c6fc432a61b70620a9a7&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"进入当前正在运行的容器\"><a href=\"#进入当前正在运行的容器\" class=\"headerlink\" title=\"进入当前正在运行的容器\"></a>进入当前正在运行的容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">命令</span></span><br><span class=\"line\">docker exec -it 容器id bashShell </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">测试</span></span><br><span class=\"line\"></span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu    &quot;/bin/bash&quot;   16 minutes ago   Up 4 minutes             admiring_bell</span><br><span class=\"line\">root@ubuntu:~# docker exec -it ce6aec3c0df9 /bin/bash</span><br><span class=\"line\">root@ce6aec3c0df9:/# ps -ef</span><br><span class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class=\"line\">root         1     0  0 05:36 pts/0    00:00:00 /bin/bash</span><br><span class=\"line\">root         9     0  1 05:41 pts/1    00:00:00 /bin/bash</span><br><span class=\"line\">root        17     9  0 05:41 pts/1    00:00:00 ps -ef</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">方式二</span></span><br><span class=\"line\">docker attach 容器id</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker <span class=\"built_in\">exec</span>   <span class=\"comment\"># 进入容器后开启一个新的终端，可以在里面操作</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker attach <span class=\"comment\"># 进入容器正在执行的终端，不会启动新的进程</span></span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"从容器内拷贝文件到主机上\"><a href=\"#从容器内拷贝文件到主机上\" class=\"headerlink\" title=\"从容器内拷贝文件到主机上\"></a>从容器内拷贝文件到主机上</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp 容器id:容器内路径 目的主机路径</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">可以使用-v卷的技术自动同步</span></span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"容器数据卷\"><a href=\"#容器数据卷\" class=\"headerlink\" title=\"容器数据卷\"></a>容器数据卷</h2><div class=\"story post-story\"><h3 id=\"什么是容器数据卷\"><a href=\"#什么是容器数据卷\" class=\"headerlink\" title=\"什么是容器数据卷\"></a>什么是容器数据卷</h3><p><strong>docker理念回顾</strong></p>\n<p>将应用打包成一个镜像</p>\n<p>==需求：数据可以持久化==</p>\n<p>可以做一个数据共享。Docker中的数据同步到本地</p>\n<p>容器之间可以有一个数据共享的技术! Docker 容器中产生的数据，同步到本地!<br>这就是卷技术!目录的挂载，将我们容器内的目录，挂载到Linux上面! </p>\n<blockquote>\n<p>方式一：直接使用-v命令挂载</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it -V /home/ceshi: /home ubuntu /bin/bash</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>方式二：Dockerfile 就是用来构建docker镜像的构建文件，就是一个命令脚本</p>\n<p>通过脚本生成镜像，镜像是一层一层的，脚本一个个的命令都是一层</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/home# mkdir docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home# cd docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# pwd</span><br><span class=\"line\">/home/docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# vim dockerfile</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# cat dockerfile</span><br><span class=\"line\">FROM ubuntu</span><br><span class=\"line\"></span><br><span class=\"line\">VOLUME [&quot;volume01&quot;,&quot;volume02&quot;] # 匿名挂载</span><br><span class=\"line\"></span><br><span class=\"line\">CMD echo &quot;------end------&quot;</span><br><span class=\"line\">CMD /bin/bash</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0</span><br><span class=\"line\">&quot;docker build&quot; requires exactly 1 argument.</span><br><span class=\"line\">See &#x27;docker build --help&#x27;.</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:  docker build [OPTIONS] PATH | URL | -</span><br><span class=\"line\"></span><br><span class=\"line\">Build an image from a Dockerfile</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0 .</span><br><span class=\"line\">Sending build context to Docker daemon  2.048kB</span><br><span class=\"line\">Step 1/4 : FROM ubuntu</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">d5ca7a445605</span></span><br><span class=\"line\">Step 2/4 : VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> af0aca7a1acc</span></span><br><span class=\"line\">Removing intermediate container af0aca7a1acc</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">886d53869a5f</span></span><br><span class=\"line\">Step 3/4 : CMD echo &quot;------end------&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> 01d8de6fd880</span></span><br><span class=\"line\">Removing intermediate container 01d8de6fd880</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">db0ff6f6ca87</span></span><br><span class=\"line\">Step 4/4 : CMD /bin/bash</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> 73439e670a07</span></span><br><span class=\"line\">Removing intermediate container 73439e670a07</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">0fa242d56fe6</span></span><br><span class=\"line\">Successfully built 0fa242d56fe6</span><br><span class=\"line\">Successfully tagged respifisco:1.0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;Mounts&quot;: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Type&quot;: &quot;volume&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6&quot;,</span><br><span class=\"line\">        &quot;Source&quot;: &quot;/var/lib/docker/volumes/806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6/_data&quot;,</span><br><span class=\"line\">        &quot;Destination&quot;: &quot;volume01&quot;,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class=\"line\">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;RW&quot;: true,</span><br><span class=\"line\">        &quot;Propagation&quot;: &quot;&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Type&quot;: &quot;volume&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d&quot;,</span><br><span class=\"line\">        &quot;Source&quot;: &quot;/var/lib/docker/volumes/f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d/_data&quot;,</span><br><span class=\"line\">        &quot;Destination&quot;: &quot;volume02&quot;,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class=\"line\">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;RW&quot;: true,</span><br><span class=\"line\">        &quot;Propagation&quot;: &quot;&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"Docker-File（构建自己的镜像）\"><a href=\"#Docker-File（构建自己的镜像）\" class=\"headerlink\" title=\"Docker File（构建自己的镜像）\"></a>Docker File（构建自己的镜像）</h2><div class=\"story post-story\"><p>dockerfile是用来构建dokcer镜像的文件!命令参数脚本!<br>构建步骤:<br>1、编写一个dockerfile 文件<br>2、docker build构建成为一个镜像<br>3、docker run运行镜像<br>4、docker push发布镜像( DockerHub、阿里云镜像仓库! )</p>\n<p>基础知识:<br>1、每个保留关键字(指令)都是必须是大写字母<br>2、执行从上到下顺序执行<br>3、#表示注释.<br>4、每一个指令都会创建提交一个新的镜像层,并提交!</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211118224824710.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211118224824710.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20211118224824710\"></p>\n<p>dockerfile是面向开发的,我们以后要发布项目,做镜像,就需要编写dockerfile文件,这个文件十分简单!<br>Docker镜像逐渐成为企业交付的标准,必须要掌握!<br>步骤: 开发，部署，运维。。。缺一不可!<br>DockerFile :构建文件，定义了一切的步骤，源代码<br>Dockerlmages :通过DockerFile构建生成的镜像，最终发布和运行的产品!<br>Docker容器:容器就是镜像运行起来提供服务器</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Docker-学习\"><a href=\"#Docker-学习\" class=\"headerlink\" title=\"Docker 学习\"></a>Docker 学习</h1><p>[toc]</p>\n<h2 id=\"Docker-概述\"><a href=\"#Docker-概述\" class=\"headerlink\" title=\"Docker 概述\"></a>Docker 概述</h2><p><a href=\"https://docs.docker.com/\">Docker文档</a></p>\n<p><a href=\"https://hub.docker.com/\">DockerHub</a></p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>传统</th>\n<th>Docker</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>应用的更快速的交付和部署</td>\n<td>一堆帮助文档，安装程序</td>\n<td>打包镜像发布测试，一键运行</td>\n</tr>\n<tr>\n<td>更便捷的升级和扩缩容</td>\n<td></td>\n<td>项目打包为镜像，整体升级，直接扩展</td>\n</tr>\n<tr>\n<td>更简单的运维</td>\n<td></td>\n<td>测试环境高度一致</td>\n</tr>\n<tr>\n<td>更高效的计算资源利用</td>\n<td></td>\n<td>同时运行几十个tomcat？！内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例。</td>\n</tr>\n</tbody></table>\n<h2 id=\"Docker-安装\"><a href=\"#Docker-安装\" class=\"headerlink\" title=\"Docker 安装\"></a>Docker 安装</h2><h3 id=\"Docker-基本组成\"><a href=\"#Docker-基本组成\" class=\"headerlink\" title=\"Docker 基本组成\"></a>Docker 基本组成</h3><p><strong>镜像(image)：</strong></p>\n<p>可以类比于一个模板，可以通过模板创建容器服务。tomcat镜像–&gt;run–&gt;tomcat01容器（提供服务器），通过镜像可以创建多个容器（最终服务运行或者项目运行就在容器中）</p>\n<p><strong>容器(container)：</strong></p>\n<p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。<br>启动，停止，删除，基本命令!</p>\n<p>可以理解为简易的linux</p>\n<p><strong>仓库(repository)：</strong></p>\n<p>存放镜像</p>\n<p>DockerHub（默认国外）</p>\n<p>国内：阿里云/华为云容器服务（配置镜像加速）</p>\n<p><strong>Ubuntu docker安装并配置阿里云镜像加速：</strong><a href=\"https://blog.csdn.net/qq_43648470/article/details/108171050\">(9条消息) Ubuntu安装docker教程并配置阿里云镜像加速_危机！的博客-CSDN博客</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试是否安装完毕</span></span><br><span class=\"line\">docker version</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试能否run helloworld</span></span><br><span class=\"line\">docker run hello-world</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">返回hello from docker就成功了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看下载的镜像</span></span><br><span class=\"line\">root@ubuntu:~# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED       SIZE</span><br><span class=\"line\">hello-world   latest    18e5af790473   7 weeks ago   9.14kB</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Docker-Run-流程：\"><a href=\"#Docker-Run-流程：\" class=\"headerlink\" title=\"Docker Run 流程：\"></a>Docker Run 流程：</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224115635.png\" alt=\"image-20211117224115635\"></p>\n<h3 id=\"底层原理：\"><a href=\"#底层原理：\" class=\"headerlink\" title=\"底层原理：\"></a>底层原理：</h3><p><strong>Docker是怎么工作的</strong></p>\n<p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在在主机上，通过Socket从客户端访问！</p>\n<p>DockerServer接收到Docker-Client的指令，就会执行指令</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224650062.png\" alt=\"image-20211117224650062\"></p>\n<p>Docker更快的原因是因为有更少的抽象层。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211117224746559.png\" alt=\"image-20211117224746559\"></p>\n<p>所以新建一个容器的时候，Docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。虚拟机是加载GuestOS，分钟级别的，而Docker是利用宿主机的操作系统，省略了这个复杂的过程，秒级 ! </p>\n<h2 id=\"Docker-命令\"><a href=\"#Docker-命令\" class=\"headerlink\" title=\"Docker 命令\"></a>Docker 命令</h2><h3 id=\"帮助命令\"><a href=\"#帮助命令\" class=\"headerlink\" title=\"帮助命令\"></a>帮助命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker version      # 显示docker版本信息</span><br><span class=\"line\">docker info         # 显示docker的系统信息</span><br><span class=\"line\">docker 命令 --help   # 帮助命令</span><br></pre></td></tr></table></figure>\n\n<p>帮助文档地址<a href=\"https://docs.docker.com/engine/reference/commandline/docker/\">docker | Docker Documentation</a></p>\n<h3 id=\"镜像命令\"><a href=\"#镜像命令\" class=\"headerlink\" title=\"镜像命令\"></a>镜像命令</h3><h4 id=\"docker-images-查看本地的主机上的镜像\"><a href=\"#docker-images-查看本地的主机上的镜像\" class=\"headerlink\" title=\"docker images 查看本地的主机上的镜像\"></a>docker images 查看本地的主机上的镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker images</span><br><span class=\"line\">REPOSITORY    TAG       IMAGE ID       CREATED       SIZE</span><br><span class=\"line\">hello-world   latest    18e5af790473   7 weeks ago   9.14kB</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解释</span></span><br><span class=\"line\">REPOSITORY   镜像的仓库源</span><br><span class=\"line\">TAG          镜像的标签</span><br><span class=\"line\">IMAGE ID     镜像的ID</span><br><span class=\"line\">CREATED      镜像的创建时间</span><br><span class=\"line\">SIZE         镜像的大小</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">可选项</span></span><br><span class=\"line\">-a, --all    列出所有镜像</span><br><span class=\"line\">-q, --quiet  只显示镜像id</span><br><span class=\"line\">-aq          列出所有镜像id</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-search-搜索镜像\"><a href=\"#docker-search-搜索镜像\" class=\"headerlink\" title=\"docker search 搜索镜像\"></a>docker search 搜索镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">搜索 星星500以上的ubuntu镜像</span></span><br><span class=\"line\">root@ubuntu:~# docker search --filter=STARS=500 ubuntu</span><br><span class=\"line\">NAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class=\"line\">ubuntu                           Ubuntu is a Debian-based Linux operating sys…   13142     [OK]       </span><br><span class=\"line\">dorowu/ubuntu-desktop-lxde-vnc   Docker image to provide HTML5 VNC interface …   587                  [OK]</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-pull-下载镜像\"><a href=\"#docker-pull-下载镜像\" class=\"headerlink\" title=\"docker pull 下载镜像\"></a>docker pull 下载镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker pull ubuntu</span><br><span class=\"line\">Using default tag: latest</span><br><span class=\"line\">latest: Pulling from library/ubuntu</span><br><span class=\"line\">a39c84e173f0: Pull complete </span><br><span class=\"line\">Digest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322</span><br><span class=\"line\">Status: Downloaded newer image for ubuntu:latest</span><br><span class=\"line\">docker.io/library/ubuntu:latest</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">指定版本下载</span></span><br><span class=\"line\">root@ubuntu:~# docker pull mysql:5.7</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"docker-rmi-删除镜像\"><a href=\"#docker-rmi-删除镜像\" class=\"headerlink\" title=\"docker rmi 删除镜像\"></a>docker rmi 删除镜像</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi -f 镜像id # 删除指定镜像</span><br><span class=\"line\">docker rmi -f 镜像id 镜像id # 删除多个镜像</span><br><span class=\"line\">docker rmi -f $(docker images -aq) # 删除全部镜像</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"容器命令\"><a href=\"#容器命令\" class=\"headerlink\" title=\"容器命令\"></a>容器命令</h3><h4 id=\"新建容器并启动\"><a href=\"#新建容器并启动\" class=\"headerlink\" title=\"新建容器并启动\"></a>新建容器并启动</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [可选参数] image</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">参数说明</span></span><br><span class=\"line\">--name=&quot;Name&quot;    容器名字 tomcat01 tomcat02 用来区分容器</span><br><span class=\"line\">-d               后台方式运行</span><br><span class=\"line\">-p               指定容器的端口  -p 8080:8080</span><br><span class=\"line\">\t-p ip:主机端口:容器端口</span><br><span class=\"line\">\t-p 主机端口:容器端口（常用）</span><br><span class=\"line\">\t-p 容器端口</span><br><span class=\"line\">\t容器端口</span><br><span class=\"line\">-P               随即指定端口</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">测试并进入容器</span></span><br><span class=\"line\"></span><br><span class=\"line\">root@ubuntu:~# docker run -it ubuntu /bin/bash</span><br><span class=\"line\">root@ce6aec3c0df9:/# ls</span><br><span class=\"line\">bin  boot  dev  etc  home  lib  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">退回主机</span></span><br><span class=\"line\">root@ce6aec3c0df9:/# exit</span><br><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出所有运行主机\"><a href=\"#列出所有运行主机\" class=\"headerlink\" title=\"列出所有运行主机\"></a>列出所有运行主机</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker ps 命令</span></span><br><span class=\"line\">       # 列出当前正在运行容器</span><br><span class=\"line\">-a     # 列出当前+历史运行过的</span><br><span class=\"line\">-n=num # 显示最近创建的容器</span><br><span class=\"line\">-q     # 只显示容器编号</span><br><span class=\"line\">-aq    # 列出所有的编号</span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class=\"line\">root@ubuntu:~# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE         COMMAND       CREATED         STATUS                      PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu        &quot;/bin/bash&quot;   2 minutes ago   Exited (0) 51 seconds ago             admiring_bell</span><br><span class=\"line\">e561bab36a3d   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               youthful_morse</span><br><span class=\"line\">23bd436c8cd4   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               sleepy_chatelet</span><br><span class=\"line\">69ea02fb97ce   hello-world   &quot;/hello&quot;      15 hours ago    Exited (0) 15 hours ago               stupefied_bardeen</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"退出容器\"><a href=\"#退出容器\" class=\"headerlink\" title=\"退出容器\"></a>退出容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit    # 直接退出</span><br><span class=\"line\">ctrl + p + Q # 不停止退出</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删除容器\"><a href=\"#删除容器\" class=\"headerlink\" title=\"删除容器\"></a>删除容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm 容器id                 #删除指定容器，不能删除正在运行的</span><br><span class=\"line\">docker rm -f $(docker ps -aq)   #删除所有容器</span><br><span class=\"line\">docker ps -a -qlxargs docker rm # 删除所有容器</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动和停止容器\"><a href=\"#启动和停止容器\" class=\"headerlink\" title=\"启动和停止容器\"></a>启动和停止容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start 容器id          # 启动容器</span><br><span class=\"line\">docker restart 容器id        # 重启容器</span><br><span class=\"line\">docker stop 容器id           # 停止当前运行的容器</span><br><span class=\"line\">docker kill 容器id           # 强制停止当前容器</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用其他命令\"><a href=\"#常用其他命令\" class=\"headerlink\" title=\"常用其他命令\"></a>常用其他命令</h3><h4 id=\"后台运行程序\"><a href=\"#后台运行程序\" class=\"headerlink\" title=\"后台运行程序\"></a>后台运行程序</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">命令docker run -d 镜像名</span></span><br><span class=\"line\">root@ubuntu:~# docker run -d ubuntu</span><br><span class=\"line\">9879828e928e7a6f3ff0d0b7d8d917dfa9bc6ef640e9a6bc857ba052bf2fc81c</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">问题docker ps， 发现centos 停止了</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">常见的坑: docker 容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx,容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看日志命令\"><a href=\"#查看日志命令\" class=\"headerlink\" title=\"查看日志命令\"></a>查看日志命令</h4><p>docker logs -f -t –tail 10 容器id</p>\n<h4 id=\"查看容器进程\"><a href=\"#查看容器进程\" class=\"headerlink\" title=\"查看容器进程\"></a>查看容器进程</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker start ce6aec3c0df9</span><br><span class=\"line\">ce6aec3c0df9</span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS        PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu    &quot;/bin/bash&quot;   12 minutes ago   Up 1 second             admiring_bell</span><br><span class=\"line\">root@ubuntu:~# docker top</span><br><span class=\"line\">&quot;docker top&quot; requires at least 1 argument.</span><br><span class=\"line\">See &#x27;docker top --help&#x27;.</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:  docker top CONTAINER [ps OPTIONS]</span><br><span class=\"line\"></span><br><span class=\"line\">Display the running processes of a container</span><br><span class=\"line\">root@ubuntu:~# docker top ce6aec3c0df9</span><br><span class=\"line\">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class=\"line\">root                10273               10250               0                   05:36               pts/0               00:00:00            /bin/bash</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看容器元数据\"><a href=\"#查看容器元数据\" class=\"headerlink\" title=\"查看容器元数据\"></a>查看容器元数据</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# docker inspect ce6aec3c0df9</span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2021-11-18T05:24:12.389591454Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/bin/bash&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 10273,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2021-11-18T05:36:54.956183355Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;2021-11-18T05:25:27.062396275Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72/ce6aec3c0df9d7f892f45c7ab1c1873f4c8d911037015812e4cff60e7213ba72-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/admiring_bell&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;docker-default&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: null,</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DeviceRequests&quot;: null,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: null,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: null,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d-init/diff:/var/lib/docker/overlay2/11eb11ae3a068ff4e17db8fa46d97e151577353e72dd544a8d7b757740389bae/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/35f0fe271735c4c7e0d5f6ccbdaa577f78542787bfe7b7a6214e6fd37556759d/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;ce6aec3c0df9&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: true,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: true,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: true,</span><br><span class=\"line\">            &quot;Tty&quot;: true,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: true,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: true,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: [</span><br><span class=\"line\">                &quot;/bin/bash&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Image&quot;: &quot;ubuntu&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: null,</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;d9efa03479865798f9abfcac8cde759809d3a2b65de856dbe1dd82e96740a8e5&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/d9efa0347986&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;0bf5731d3c704ec72e742cb00a5297b5745f5fe55869c6fc432a61b70620a9a7&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;0dd60f72f926dd734eb3e2a2fb664d6c3967399133ea8180407ba59ef361ad25&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"进入当前正在运行的容器\"><a href=\"#进入当前正在运行的容器\" class=\"headerlink\" title=\"进入当前正在运行的容器\"></a>进入当前正在运行的容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">命令</span></span><br><span class=\"line\">docker exec -it 容器id bashShell </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">测试</span></span><br><span class=\"line\"></span><br><span class=\"line\">root@ubuntu:~# docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES</span><br><span class=\"line\">ce6aec3c0df9   ubuntu    &quot;/bin/bash&quot;   16 minutes ago   Up 4 minutes             admiring_bell</span><br><span class=\"line\">root@ubuntu:~# docker exec -it ce6aec3c0df9 /bin/bash</span><br><span class=\"line\">root@ce6aec3c0df9:/# ps -ef</span><br><span class=\"line\">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class=\"line\">root         1     0  0 05:36 pts/0    00:00:00 /bin/bash</span><br><span class=\"line\">root         9     0  1 05:41 pts/1    00:00:00 /bin/bash</span><br><span class=\"line\">root        17     9  0 05:41 pts/1    00:00:00 ps -ef</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">方式二</span></span><br><span class=\"line\">docker attach 容器id</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker <span class=\"built_in\">exec</span>   <span class=\"comment\"># 进入容器后开启一个新的终端，可以在里面操作</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">docker attach <span class=\"comment\"># 进入容器正在执行的终端，不会启动新的进程</span></span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"从容器内拷贝文件到主机上\"><a href=\"#从容器内拷贝文件到主机上\" class=\"headerlink\" title=\"从容器内拷贝文件到主机上\"></a>从容器内拷贝文件到主机上</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp 容器id:容器内路径 目的主机路径</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">可以使用-v卷的技术自动同步</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"容器数据卷\"><a href=\"#容器数据卷\" class=\"headerlink\" title=\"容器数据卷\"></a>容器数据卷</h2><h3 id=\"什么是容器数据卷\"><a href=\"#什么是容器数据卷\" class=\"headerlink\" title=\"什么是容器数据卷\"></a>什么是容器数据卷</h3><p><strong>docker理念回顾</strong></p>\n<p>将应用打包成一个镜像</p>\n<p>==需求：数据可以持久化==</p>\n<p>可以做一个数据共享。Docker中的数据同步到本地</p>\n<p>容器之间可以有一个数据共享的技术! Docker 容器中产生的数据，同步到本地!<br>这就是卷技术!目录的挂载，将我们容器内的目录，挂载到Linux上面! </p>\n<blockquote>\n<p>方式一：直接使用-v命令挂载</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it -V /home/ceshi: /home ubuntu /bin/bash</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>方式二：Dockerfile 就是用来构建docker镜像的构建文件，就是一个命令脚本</p>\n<p>通过脚本生成镜像，镜像是一层一层的，脚本一个个的命令都是一层</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/home# mkdir docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home# cd docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# pwd</span><br><span class=\"line\">/home/docker-test-volume</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# vim dockerfile</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# cat dockerfile</span><br><span class=\"line\">FROM ubuntu</span><br><span class=\"line\"></span><br><span class=\"line\">VOLUME [&quot;volume01&quot;,&quot;volume02&quot;] # 匿名挂载</span><br><span class=\"line\"></span><br><span class=\"line\">CMD echo &quot;------end------&quot;</span><br><span class=\"line\">CMD /bin/bash</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0</span><br><span class=\"line\">&quot;docker build&quot; requires exactly 1 argument.</span><br><span class=\"line\">See &#x27;docker build --help&#x27;.</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:  docker build [OPTIONS] PATH | URL | -</span><br><span class=\"line\"></span><br><span class=\"line\">Build an image from a Dockerfile</span><br><span class=\"line\">root@ubuntu:/home/docker-test-volume# docker build -f dockerfile -t respifisco:1.0 .</span><br><span class=\"line\">Sending build context to Docker daemon  2.048kB</span><br><span class=\"line\">Step 1/4 : FROM ubuntu</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">d5ca7a445605</span></span><br><span class=\"line\">Step 2/4 : VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> af0aca7a1acc</span></span><br><span class=\"line\">Removing intermediate container af0aca7a1acc</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">886d53869a5f</span></span><br><span class=\"line\">Step 3/4 : CMD echo &quot;------end------&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> 01d8de6fd880</span></span><br><span class=\"line\">Removing intermediate container 01d8de6fd880</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">db0ff6f6ca87</span></span><br><span class=\"line\">Step 4/4 : CMD /bin/bash</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">Running <span class=\"keyword\">in</span> 73439e670a07</span></span><br><span class=\"line\">Removing intermediate container 73439e670a07</span><br><span class=\"line\"><span class=\"meta prompt_\"> ---&gt; </span><span class=\"language-bash\">0fa242d56fe6</span></span><br><span class=\"line\">Successfully built 0fa242d56fe6</span><br><span class=\"line\">Successfully tagged respifisco:1.0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;Mounts&quot;: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Type&quot;: &quot;volume&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6&quot;,</span><br><span class=\"line\">        &quot;Source&quot;: &quot;/var/lib/docker/volumes/806c0f5e3d65489fbde5e2992f979a6bbb06bb05992ff359cfdb2470c691d6b6/_data&quot;,</span><br><span class=\"line\">        &quot;Destination&quot;: &quot;volume01&quot;,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class=\"line\">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;RW&quot;: true,</span><br><span class=\"line\">        &quot;Propagation&quot;: &quot;&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Type&quot;: &quot;volume&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d&quot;,</span><br><span class=\"line\">        &quot;Source&quot;: &quot;/var/lib/docker/volumes/f51a8037b91db17579771a21403fa85c8a1aea3e1657a46b1cb9683d524ac42d/_data&quot;,</span><br><span class=\"line\">        &quot;Destination&quot;: &quot;volume02&quot;,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class=\"line\">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;RW&quot;: true,</span><br><span class=\"line\">        &quot;Propagation&quot;: &quot;&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Docker-File（构建自己的镜像）\"><a href=\"#Docker-File（构建自己的镜像）\" class=\"headerlink\" title=\"Docker File（构建自己的镜像）\"></a>Docker File（构建自己的镜像）</h2><p>dockerfile是用来构建dokcer镜像的文件!命令参数脚本!<br>构建步骤:<br>1、编写一个dockerfile 文件<br>2、docker build构建成为一个镜像<br>3、docker run运行镜像<br>4、docker push发布镜像( DockerHub、阿里云镜像仓库! )</p>\n<p>基础知识:<br>1、每个保留关键字(指令)都是必须是大写字母<br>2、执行从上到下顺序执行<br>3、#表示注释.<br>4、每一个指令都会创建提交一个新的镜像层,并提交!</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20211118224824710.png\" alt=\"image-20211118224824710\"></p>\n<p>dockerfile是面向开发的,我们以后要发布项目,做镜像,就需要编写dockerfile文件,这个文件十分简单!<br>Docker镜像逐渐成为企业交付的标准,必须要掌握!<br>步骤: 开发，部署，运维。。。缺一不可!<br>DockerFile :构建文件，定义了一切的步骤，源代码<br>Dockerlmages :通过DockerFile构建生成的镜像，最终发布和运行的产品!<br>Docker容器:容器就是镜像运行起来提供服务器</p>\n"},{"title":"fisco go sdk合约事件推送","date":"2022-07-14T07:00:40.000Z","author":"Lcy","_content":"\n# 合约事件推送\n\n标签：``go-sdk`` ``事件订阅`` ``Event``\n\n正好最近在研究fisco go sdk的合约推送如何使用，官方又没有文档，折腾了半天最后用起来了就顺便写了了文档还提了pr也被官方合入了还挺快乐的，[合约事件推送 — FISCO BCOS v2.9.0 文档](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/event_sub.html)所以要快乐的记录一下成为一个水货的fisco开源贡献者。\n\n----\n## 1. 功能简介\n\n合约事件推送功能提供了合约事件的异步推送机制，客户端向节点发送注册请求，在请求中携带客户端关注的合约事件的参数，节点根据请求参数对请求区块范围的`Event Log`进行过滤，将结果分次推送给客户端。\n\n## 2. 交互协议\n\n客户端与节点的交互基于[`Channel`](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/protocol_description.html#id4)协议。交互分为三个阶段：注册请求，节点回复，`Event Log`数据推送。\n\n### 注册请求\n\n客户端向节点发送事件推送的注册请求:\n\n```Json\n// request sample:\n{\n  \"fromBlock\": \"latest\",\n  \"toBlock\": \"latest\",\n  \"addresses\": [\n    \"0x1f3119043aaee8e5080967e6f80eb3135086c138\"\n  ],\n  \"topics\": [\n    \"0x91c95f04198617c60eaf2180fbca88fc192db379657df0e412a9f7dd4ebbe95d\"\n  ],\n  \"groupID\": \"1\",\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\"\n}\n```\n\n- filerID：字符串类型，每次请求唯一，标记一次注册任务  \n- groupID：字符串类型，群组ID  \n- fromBlock：整形字符串，初始区块。“latest” 当前块高  \n- toBlock：整形字符串，最终区块。“latest” 处理至当前块高时，继续等待新区块  \n- addresses：字符串或者字符串数组：字符串表示单个合约地址，数组为多个合约地址，数组可以为空\n- topics：字符串类型或者数组类型：字符串表示单个topic，数组为多个topic，数组可以为空\n\n### 节点回复\n\n节点接受客户端注册请求时，会对请求参数进行校验，将是否成功接受该注册请求结果回复给客户端。\n\n```Json\n// response sample:\n{\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\",\n  \"result\": 0\n}\n```\n\n- filterID：字符串类型，每次请求唯一，标记一次注册任务  \n- result：整形，返回结果。0成功，其余为失败状态码\n\n### Event Log数据推送\n\n节点验证客户端注册请求成功之后，根据客户端请求参数条件，向客户端推送`Event Log`数据。\n\n```Json\n// event log push sample:\n{\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\",\n  \"result\": 0,\n  \"logs\": [\n    \n  ]\n}\n```\n\n- filterID：字符串类型，每次请求唯一，标记一次注册任务  \n- result：整形 0：`Event Log`数据推送 1：推送完成。客户端一次注册请求对应节点的数据推送会有多次（请求区块范围比较大或者等待新的区块），`result`字段为1时说明节点推送已经结束  \n- logs：Log对象数组，result为0时有效  \n\n## 3. Go SDK教程\n\n### 注册接口  \n\n在FISCO-BCOS Go SDK中`client.Client`类提供合约事件的注册接口，用户可以调用`SubscribeEventLogs`向节点发送注册请求，并设置回调函数。\n\n```go\nfunc (c *Client) SubscribeEventLogs(eventLogParams types.EventLogParams, handler func(int, []types.Log)) error {\n\treturn c.apiHandler.SubscribeEventLogs(eventLogParams, handler)\n}\n```\n\n#### `types.EventLogParams`注册参数  \n\n事件回调请求注册的参数：  \n\n```go\ntype EventLogParams struct {\n\tFromBlock string   `json:\"fromBlock\"`   // 订阅起始区块 latest表示最新区块\n\tToBlock   string   `json:\"toBlock\"`     // 订阅结束区块 latest表示最新区块\n\tAddresses []string `json:\"addresses\"`   // 订阅的合约地址\n\tTopics    []string `json:\"topics\"`      // 订阅的事件\n\tGroupID   string   `json:\"groupID\"`     \n\tFilterID  string   `json:\"filterID\"`\n}\n```\n\n\n#### topic计算\n\nGo语言可以使用`github.com/ethereum/go-ethereum/common`包根据合约中定义的事件进行Topic的计算：\n\n```go\ntopic = common.BytesToHash(crypto.Keccak256([]byte(\"testEventLog(address,string,uint256)\"))).Hex()\n```\n\n*需要注意的是uint及int为uint256及int256的别名，即使合约中使用的类型为uint及int，在topic的计算中仍需使用uint256与int256*\n\n## 4. 示例\n\n此处以一个进行数值更改并计算更改次数的`eventDemo.sol`合约进行事件订阅举例：\n\n```solidity\npragma solidity >=0.4.24;\n\ncontract eventDemo {\n    \n    uint256 public count = 0;\n    uint256 public num = 0;\n\n    event setNum(address caller,uint256 cnt,uint256 value);   // Declare A Event\n\n    function setNumber(uint256 v) public { \n        count += 1;\n        num = v;\n        emit setNum(msg.sender,count,num); \n    }\n    \n    function getNumber()public returns (uint){\n        return num;\n    }\n}\n```\n\n该合约提供了`setNumber`及`getNumber`方法，其中调用前者将获得一个抛出事件。\n\n在Fisco Go SDK中有两种事件订阅方式，分别为使用`client`直接进行事件订阅与调用Abigen工具生成的代码中函数进行订阅两种，其中后者须建立`session`。\n\n\n\n### 4.1 使用client进行事件订阅\n\n**事件推送订阅**\n\n在Go SDK中给出了[subscriber.go](https://github.com/FISCO-BCOS/go-sdk/blob/master/examples/eventLog/sub/subscriber.go)合约事件订阅样例\n\n*需要注意的是Topic及Address不可置空，置空将无法接收到相应事件。*\n\n```go\nfunc main() {\n\t...... // 省略\n    endpoint := \"127.0.0.1:20200\" // 部署的Fisco链的ip:channel_port\n\tprivateKey, _ := hex.DecodeString(\"145e247e170ba3afd6ae97e88f00dbc976c2345d511b0f6713355d19d8b80b58\") //用户私钥\n\tconfig := &conf.Config{IsHTTP: false, ChainID: 1, CAFile: \"ca.crt\", Key: \"sdk.key\", Cert: \"sdk.crt\", \n\t\tIsSMCrypto: false, GroupID: 1, PrivateKey: privateKey, NodeURL: endpoint}\n\tvar c *client.Client\n\tvar err error\n\t...... // 省略\n\tvar eventLogParams types.EventLogParams\n\teventLogParams.FromBlock = \"1\"\n\teventLogParams.ToBlock = \"latest\" // 当前配置订阅了从创世区块至最新区块的链上所有事件\n\teventLogParams.GroupID = \"1\"\n\tvar topics = make([]string, 1)\n\ttopics[0] = common.BytesToHash(crypto.Keccak256([]byte(\"setNum(address,uint256,uint256)\"))).Hex() // 事件的Topic计算，注意使用uint256及int256替代uint及int\n\teventLogParams.Topics = topics\n\tvar addresses = make([]string, 1)\n\taddresses[0] = \"0xd2cf82e18f3d2c5cae0de87d29994be622f3fdd3\" // 所订阅事件对应的合约地址\n\n\teventLogParams.Addresses = addresses\n\ttimeout := 30 * time.Second\n\tqueryTicker := time.NewTicker(timeout)\n\tdefer queryTicker.Stop()\n\tdone := make(chan bool)\n\terr = c.SubscribeEventLogs(eventLogParams, func(status int, logs []types.Log) { // 调用SubscribeEventLogs函数订阅事件\n\t\t...... // 省略\n\t})\n    ......\t// 省略\n}\n```\n\n**Log数据解析**\n\n在使用sdk提供的客户端订阅事件的方式中，获取到的数据需要`abi`进行解析，\n\n首先需要根据事件包含的变量类型构建一个用于解析的结构体：\n\n```go\ntype setNum struct {\n\tCaller common.Address\n\tCnt    *big.Int\n\tValue  *big.Int\n}\n```\n\n此后可采用`abi`工具进行解析：\n\n```go\n\terr = c.SubscribeEventLogs(eventLogParams, func(status int, logs []types.Log) {\n\t\tfmt.Println(logs[0].Data)\n\t\tfor k, v := range logs {\n\t\t\tvar tempABI abi.ABI\n\t\t\tvar temp setNum\n\t\t\ttempABI, err := abi.JSON(strings.NewReader(EventDemoABI))\n\t\t\tif err != nil {\n\t\t\t\tlogrus.Println(err.Error())\n\t\t\t}\n\t\t\terr = tempABI.Unpack(&temp, \"setNum\", v.Data)\n\t\t\tif err != nil {\n\t\t\t\tlogrus.Println(err.Error())\n\t\t\t}\n\t\t\tfmt.Println(\"log number:\", k, temp)\n\t\t}\n\t})\n\n```\n此处`abi.Json`所使用到的数据需要使用`abigen`工具生成对应的go文件后获得:\n\n```go\n// EventDemoABI is the input ABI used to generate the binding from.\nconst EventDemoABI = \"[{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"count\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":false,\\\"inputs\\\":[{\\\"name\\\":\\\"v\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"setNumber\\\",\\\"outputs\\\":[],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"nonpayable\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"num\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"getNumber\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"anonymous\\\":false,\\\"inputs\\\":[{\\\"indexed\\\":false,\\\"name\\\":\\\"caller\\\",\\\"type\\\":\\\"address\\\"},{\\\"indexed\\\":false,\\\"name\\\":\\\"cnt\\\",\\\"type\\\":\\\"uint256\\\"},{\\\"indexed\\\":false,\\\"name\\\":\\\"value\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"setNum\\\",\\\"type\\\":\\\"event\\\"}]\"\n```\n\n\n\n### 4.2 使用Abigen工具生成后的函数进行事件订阅\n\n该方式进行事件订阅需先构建与合约的`session`连接，后直接调用`abigen`生成的go文件中函数即可进行事件的订阅与解析：\n\n```go\n// 根据配置文件构建eventDemoSession\nerr := eventDemoSession.WatchAllSetNum(from, func(status int, logs []types.Log) {\n    fmt.Println(\"Status Code:\",status)\t\n\tfor k, v := range logs {\n\t\t\tlog, errs := eventDemoSession.ParseSetNum(v) // 解析数据\n\t\t\tif errs != nil {\n\t\t\t\tfmt.Println(errs)\n\t\t\t}\n        fmt.Println(\"Log id:\", k, \"Log Content:\",log)\n\t\t}\n\t})\n```\n\n关于Session的构建请参考[合约开发样例](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/contractExamples.html)部分中例程。\n","source":"_posts/fisco-go-sdk合约事件推送.md","raw":"---\ntitle: fisco go sdk合约事件推送\ndate: 2022-07-14 15:00:40\ntags: Study\ncategories: FISCO\nauthor: Lcy\n---\n\n# 合约事件推送\n\n标签：``go-sdk`` ``事件订阅`` ``Event``\n\n正好最近在研究fisco go sdk的合约推送如何使用，官方又没有文档，折腾了半天最后用起来了就顺便写了了文档还提了pr也被官方合入了还挺快乐的，[合约事件推送 — FISCO BCOS v2.9.0 文档](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/event_sub.html)所以要快乐的记录一下成为一个水货的fisco开源贡献者。\n\n----\n## 1. 功能简介\n\n合约事件推送功能提供了合约事件的异步推送机制，客户端向节点发送注册请求，在请求中携带客户端关注的合约事件的参数，节点根据请求参数对请求区块范围的`Event Log`进行过滤，将结果分次推送给客户端。\n\n## 2. 交互协议\n\n客户端与节点的交互基于[`Channel`](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/protocol_description.html#id4)协议。交互分为三个阶段：注册请求，节点回复，`Event Log`数据推送。\n\n### 注册请求\n\n客户端向节点发送事件推送的注册请求:\n\n```Json\n// request sample:\n{\n  \"fromBlock\": \"latest\",\n  \"toBlock\": \"latest\",\n  \"addresses\": [\n    \"0x1f3119043aaee8e5080967e6f80eb3135086c138\"\n  ],\n  \"topics\": [\n    \"0x91c95f04198617c60eaf2180fbca88fc192db379657df0e412a9f7dd4ebbe95d\"\n  ],\n  \"groupID\": \"1\",\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\"\n}\n```\n\n- filerID：字符串类型，每次请求唯一，标记一次注册任务  \n- groupID：字符串类型，群组ID  \n- fromBlock：整形字符串，初始区块。“latest” 当前块高  \n- toBlock：整形字符串，最终区块。“latest” 处理至当前块高时，继续等待新区块  \n- addresses：字符串或者字符串数组：字符串表示单个合约地址，数组为多个合约地址，数组可以为空\n- topics：字符串类型或者数组类型：字符串表示单个topic，数组为多个topic，数组可以为空\n\n### 节点回复\n\n节点接受客户端注册请求时，会对请求参数进行校验，将是否成功接受该注册请求结果回复给客户端。\n\n```Json\n// response sample:\n{\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\",\n  \"result\": 0\n}\n```\n\n- filterID：字符串类型，每次请求唯一，标记一次注册任务  \n- result：整形，返回结果。0成功，其余为失败状态码\n\n### Event Log数据推送\n\n节点验证客户端注册请求成功之后，根据客户端请求参数条件，向客户端推送`Event Log`数据。\n\n```Json\n// event log push sample:\n{\n  \"filterID\": \"bb31e4ec086c48e18f21cb994e2e5967\",\n  \"result\": 0,\n  \"logs\": [\n    \n  ]\n}\n```\n\n- filterID：字符串类型，每次请求唯一，标记一次注册任务  \n- result：整形 0：`Event Log`数据推送 1：推送完成。客户端一次注册请求对应节点的数据推送会有多次（请求区块范围比较大或者等待新的区块），`result`字段为1时说明节点推送已经结束  \n- logs：Log对象数组，result为0时有效  \n\n## 3. Go SDK教程\n\n### 注册接口  \n\n在FISCO-BCOS Go SDK中`client.Client`类提供合约事件的注册接口，用户可以调用`SubscribeEventLogs`向节点发送注册请求，并设置回调函数。\n\n```go\nfunc (c *Client) SubscribeEventLogs(eventLogParams types.EventLogParams, handler func(int, []types.Log)) error {\n\treturn c.apiHandler.SubscribeEventLogs(eventLogParams, handler)\n}\n```\n\n#### `types.EventLogParams`注册参数  \n\n事件回调请求注册的参数：  \n\n```go\ntype EventLogParams struct {\n\tFromBlock string   `json:\"fromBlock\"`   // 订阅起始区块 latest表示最新区块\n\tToBlock   string   `json:\"toBlock\"`     // 订阅结束区块 latest表示最新区块\n\tAddresses []string `json:\"addresses\"`   // 订阅的合约地址\n\tTopics    []string `json:\"topics\"`      // 订阅的事件\n\tGroupID   string   `json:\"groupID\"`     \n\tFilterID  string   `json:\"filterID\"`\n}\n```\n\n\n#### topic计算\n\nGo语言可以使用`github.com/ethereum/go-ethereum/common`包根据合约中定义的事件进行Topic的计算：\n\n```go\ntopic = common.BytesToHash(crypto.Keccak256([]byte(\"testEventLog(address,string,uint256)\"))).Hex()\n```\n\n*需要注意的是uint及int为uint256及int256的别名，即使合约中使用的类型为uint及int，在topic的计算中仍需使用uint256与int256*\n\n## 4. 示例\n\n此处以一个进行数值更改并计算更改次数的`eventDemo.sol`合约进行事件订阅举例：\n\n```solidity\npragma solidity >=0.4.24;\n\ncontract eventDemo {\n    \n    uint256 public count = 0;\n    uint256 public num = 0;\n\n    event setNum(address caller,uint256 cnt,uint256 value);   // Declare A Event\n\n    function setNumber(uint256 v) public { \n        count += 1;\n        num = v;\n        emit setNum(msg.sender,count,num); \n    }\n    \n    function getNumber()public returns (uint){\n        return num;\n    }\n}\n```\n\n该合约提供了`setNumber`及`getNumber`方法，其中调用前者将获得一个抛出事件。\n\n在Fisco Go SDK中有两种事件订阅方式，分别为使用`client`直接进行事件订阅与调用Abigen工具生成的代码中函数进行订阅两种，其中后者须建立`session`。\n\n\n\n### 4.1 使用client进行事件订阅\n\n**事件推送订阅**\n\n在Go SDK中给出了[subscriber.go](https://github.com/FISCO-BCOS/go-sdk/blob/master/examples/eventLog/sub/subscriber.go)合约事件订阅样例\n\n*需要注意的是Topic及Address不可置空，置空将无法接收到相应事件。*\n\n```go\nfunc main() {\n\t...... // 省略\n    endpoint := \"127.0.0.1:20200\" // 部署的Fisco链的ip:channel_port\n\tprivateKey, _ := hex.DecodeString(\"145e247e170ba3afd6ae97e88f00dbc976c2345d511b0f6713355d19d8b80b58\") //用户私钥\n\tconfig := &conf.Config{IsHTTP: false, ChainID: 1, CAFile: \"ca.crt\", Key: \"sdk.key\", Cert: \"sdk.crt\", \n\t\tIsSMCrypto: false, GroupID: 1, PrivateKey: privateKey, NodeURL: endpoint}\n\tvar c *client.Client\n\tvar err error\n\t...... // 省略\n\tvar eventLogParams types.EventLogParams\n\teventLogParams.FromBlock = \"1\"\n\teventLogParams.ToBlock = \"latest\" // 当前配置订阅了从创世区块至最新区块的链上所有事件\n\teventLogParams.GroupID = \"1\"\n\tvar topics = make([]string, 1)\n\ttopics[0] = common.BytesToHash(crypto.Keccak256([]byte(\"setNum(address,uint256,uint256)\"))).Hex() // 事件的Topic计算，注意使用uint256及int256替代uint及int\n\teventLogParams.Topics = topics\n\tvar addresses = make([]string, 1)\n\taddresses[0] = \"0xd2cf82e18f3d2c5cae0de87d29994be622f3fdd3\" // 所订阅事件对应的合约地址\n\n\teventLogParams.Addresses = addresses\n\ttimeout := 30 * time.Second\n\tqueryTicker := time.NewTicker(timeout)\n\tdefer queryTicker.Stop()\n\tdone := make(chan bool)\n\terr = c.SubscribeEventLogs(eventLogParams, func(status int, logs []types.Log) { // 调用SubscribeEventLogs函数订阅事件\n\t\t...... // 省略\n\t})\n    ......\t// 省略\n}\n```\n\n**Log数据解析**\n\n在使用sdk提供的客户端订阅事件的方式中，获取到的数据需要`abi`进行解析，\n\n首先需要根据事件包含的变量类型构建一个用于解析的结构体：\n\n```go\ntype setNum struct {\n\tCaller common.Address\n\tCnt    *big.Int\n\tValue  *big.Int\n}\n```\n\n此后可采用`abi`工具进行解析：\n\n```go\n\terr = c.SubscribeEventLogs(eventLogParams, func(status int, logs []types.Log) {\n\t\tfmt.Println(logs[0].Data)\n\t\tfor k, v := range logs {\n\t\t\tvar tempABI abi.ABI\n\t\t\tvar temp setNum\n\t\t\ttempABI, err := abi.JSON(strings.NewReader(EventDemoABI))\n\t\t\tif err != nil {\n\t\t\t\tlogrus.Println(err.Error())\n\t\t\t}\n\t\t\terr = tempABI.Unpack(&temp, \"setNum\", v.Data)\n\t\t\tif err != nil {\n\t\t\t\tlogrus.Println(err.Error())\n\t\t\t}\n\t\t\tfmt.Println(\"log number:\", k, temp)\n\t\t}\n\t})\n\n```\n此处`abi.Json`所使用到的数据需要使用`abigen`工具生成对应的go文件后获得:\n\n```go\n// EventDemoABI is the input ABI used to generate the binding from.\nconst EventDemoABI = \"[{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"count\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":false,\\\"inputs\\\":[{\\\"name\\\":\\\"v\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"setNumber\\\",\\\"outputs\\\":[],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"nonpayable\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"num\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":true,\\\"inputs\\\":[],\\\"name\\\":\\\"getNumber\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"},{\\\"anonymous\\\":false,\\\"inputs\\\":[{\\\"indexed\\\":false,\\\"name\\\":\\\"caller\\\",\\\"type\\\":\\\"address\\\"},{\\\"indexed\\\":false,\\\"name\\\":\\\"cnt\\\",\\\"type\\\":\\\"uint256\\\"},{\\\"indexed\\\":false,\\\"name\\\":\\\"value\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"setNum\\\",\\\"type\\\":\\\"event\\\"}]\"\n```\n\n\n\n### 4.2 使用Abigen工具生成后的函数进行事件订阅\n\n该方式进行事件订阅需先构建与合约的`session`连接，后直接调用`abigen`生成的go文件中函数即可进行事件的订阅与解析：\n\n```go\n// 根据配置文件构建eventDemoSession\nerr := eventDemoSession.WatchAllSetNum(from, func(status int, logs []types.Log) {\n    fmt.Println(\"Status Code:\",status)\t\n\tfor k, v := range logs {\n\t\t\tlog, errs := eventDemoSession.ParseSetNum(v) // 解析数据\n\t\t\tif errs != nil {\n\t\t\t\tfmt.Println(errs)\n\t\t\t}\n        fmt.Println(\"Log id:\", k, \"Log Content:\",log)\n\t\t}\n\t})\n```\n\n关于Session的构建请参考[合约开发样例](https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/contractExamples.html)部分中例程。\n","slug":"fisco-go-sdk合约事件推送","published":1,"updated":"2022-08-01T15:44:44.947Z","_id":"cl5kor3ie0000zwtzb30xfdf5","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"合约事件推送\"><a href=\"#合约事件推送\" class=\"headerlink\" title=\"合约事件推送\"></a>合约事件推送</h1><p>标签：<code>go-sdk</code> <code>事件订阅</code> <code>Event</code></p>\n<p>正好最近在研究fisco go sdk的合约推送如何使用，官方又没有文档，折腾了半天最后用起来了就顺便写了了文档还提了pr也被官方合入了还挺快乐的，<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/event_sub.html\">合约事件推送 — FISCO BCOS v2.9.0 文档</a>所以要快乐的记录一下成为一个水货的fisco开源贡献者。</p>\n<hr>\n<h2 id=\"1-功能简介\"><a href=\"#1-功能简介\" class=\"headerlink\" title=\"1. 功能简介\"></a>1. 功能简介</h2><div class=\"story post-story\"><p>合约事件推送功能提供了合约事件的异步推送机制，客户端向节点发送注册请求，在请求中携带客户端关注的合约事件的参数，节点根据请求参数对请求区块范围的<code>Event Log</code>进行过滤，将结果分次推送给客户端。</p>\n</div><h2 id=\"2-交互协议\"><a href=\"#2-交互协议\" class=\"headerlink\" title=\"2. 交互协议\"></a>2. 交互协议</h2><div class=\"story post-story\"><p>客户端与节点的交互基于<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/protocol_description.html#id4\"><code>Channel</code></a>协议。交互分为三个阶段：注册请求，节点回复，<code>Event Log</code>数据推送。</p>\n<h3 id=\"注册请求\"><a href=\"#注册请求\" class=\"headerlink\" title=\"注册请求\"></a>注册请求</h3><p>客户端向节点发送事件推送的注册请求:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// request sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;fromBlock&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;latest&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;toBlock&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;latest&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;addresses&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;0x1f3119043aaee8e5080967e6f80eb3135086c138&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;topics&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;0x91c95f04198617c60eaf2180fbca88fc192db379657df0e412a9f7dd4ebbe95d&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;groupID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filerID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>groupID：字符串类型，群组ID  </li>\n<li>fromBlock：整形字符串，初始区块。“latest” 当前块高  </li>\n<li>toBlock：整形字符串，最终区块。“latest” 处理至当前块高时，继续等待新区块  </li>\n<li>addresses：字符串或者字符串数组：字符串表示单个合约地址，数组为多个合约地址，数组可以为空</li>\n<li>topics：字符串类型或者数组类型：字符串表示单个topic，数组为多个topic，数组可以为空</li>\n</ul>\n<h3 id=\"节点回复\"><a href=\"#节点回复\" class=\"headerlink\" title=\"节点回复\"></a>节点回复</h3><p>节点接受客户端注册请求时，会对请求参数进行校验，将是否成功接受该注册请求结果回复给客户端。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// response sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filterID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>result：整形，返回结果。0成功，其余为失败状态码</li>\n</ul>\n<h3 id=\"Event-Log数据推送\"><a href=\"#Event-Log数据推送\" class=\"headerlink\" title=\"Event Log数据推送\"></a>Event Log数据推送</h3><p>节点验证客户端注册请求成功之后，根据客户端请求参数条件，向客户端推送<code>Event Log</code>数据。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event log push sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;logs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filterID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>result：整形 0：<code>Event Log</code>数据推送 1：推送完成。客户端一次注册请求对应节点的数据推送会有多次（请求区块范围比较大或者等待新的区块），<code>result</code>字段为1时说明节点推送已经结束  </li>\n<li>logs：Log对象数组，result为0时有效  </li>\n</ul>\n</div><h2 id=\"3-Go-SDK教程\"><a href=\"#3-Go-SDK教程\" class=\"headerlink\" title=\"3. Go SDK教程\"></a>3. Go SDK教程</h2><div class=\"story post-story\"><h3 id=\"注册接口\"><a href=\"#注册接口\" class=\"headerlink\" title=\"注册接口\"></a>注册接口</h3><p>在FISCO-BCOS Go SDK中<code>client.Client</code>类提供合约事件的注册接口，用户可以调用<code>SubscribeEventLogs</code>向节点发送注册请求，并设置回调函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(c *Client)</span></span> SubscribeEventLogs(eventLogParams types.EventLogParams, handler <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(<span class=\"type\">int</span>, []types.Log)</span></span>) <span class=\"type\">error</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> c.apiHandler.SubscribeEventLogs(eventLogParams, handler)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"types-EventLogParams注册参数\"><a href=\"#types-EventLogParams注册参数\" class=\"headerlink\" title=\"types.EventLogParams注册参数\"></a><code>types.EventLogParams</code>注册参数</h4><p>事件回调请求注册的参数：  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> EventLogParams <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tFromBlock <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;fromBlock&quot;`</span>   <span class=\"comment\">// 订阅起始区块 latest表示最新区块</span></span><br><span class=\"line\">\tToBlock   <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;toBlock&quot;`</span>     <span class=\"comment\">// 订阅结束区块 latest表示最新区块</span></span><br><span class=\"line\">\tAddresses []<span class=\"type\">string</span> <span class=\"string\">`json:&quot;addresses&quot;`</span>   <span class=\"comment\">// 订阅的合约地址</span></span><br><span class=\"line\">\tTopics    []<span class=\"type\">string</span> <span class=\"string\">`json:&quot;topics&quot;`</span>      <span class=\"comment\">// 订阅的事件</span></span><br><span class=\"line\">\tGroupID   <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;groupID&quot;`</span>     </span><br><span class=\"line\">\tFilterID  <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;filterID&quot;`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"topic计算\"><a href=\"#topic计算\" class=\"headerlink\" title=\"topic计算\"></a>topic计算</h4><p>Go语言可以使用<code>github.com/ethereum/go-ethereum/common</code>包根据合约中定义的事件进行Topic的计算：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">topic = common.BytesToHash(crypto.Keccak256([]<span class=\"type\">byte</span>(<span class=\"string\">&quot;testEventLog(address,string,uint256)&quot;</span>))).Hex()</span><br></pre></td></tr></table></figure>\n\n<p><em>需要注意的是uint及int为uint256及int256的别名，即使合约中使用的类型为uint及int，在topic的计算中仍需使用uint256与int256</em></p>\n</div><h2 id=\"4-示例\"><a href=\"#4-示例\" class=\"headerlink\" title=\"4. 示例\"></a>4. 示例</h2><div class=\"story post-story\"><p>此处以一个进行数值更改并计算更改次数的<code>eventDemo.sol</code>合约进行事件订阅举例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pragma solidity &gt;=0.4.24;</span><br><span class=\"line\"></span><br><span class=\"line\">contract eventDemo &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    uint256 public count = 0;</span><br><span class=\"line\">    uint256 public num = 0;</span><br><span class=\"line\"></span><br><span class=\"line\">    event setNum(address caller,uint256 cnt,uint256 value);   // Declare A Event</span><br><span class=\"line\"></span><br><span class=\"line\">    function setNumber(uint256 v) public &#123; </span><br><span class=\"line\">        count += 1;</span><br><span class=\"line\">        num = v;</span><br><span class=\"line\">        emit setNum(msg.sender,count,num); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    function getNumber()public returns (uint)&#123;</span><br><span class=\"line\">        return num;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>该合约提供了<code>setNumber</code>及<code>getNumber</code>方法，其中调用前者将获得一个抛出事件。</p>\n<p>在Fisco Go SDK中有两种事件订阅方式，分别为使用<code>client</code>直接进行事件订阅与调用Abigen工具生成的代码中函数进行订阅两种，其中后者须建立<code>session</code>。</p>\n<h3 id=\"4-1-使用client进行事件订阅\"><a href=\"#4-1-使用client进行事件订阅\" class=\"headerlink\" title=\"4.1 使用client进行事件订阅\"></a>4.1 使用client进行事件订阅</h3><p><strong>事件推送订阅</strong></p>\n<p>在Go SDK中给出了<a href=\"https://github.com/FISCO-BCOS/go-sdk/blob/master/examples/eventLog/sub/subscriber.go\">subscriber.go</a>合约事件订阅样例</p>\n<p><em>需要注意的是Topic及Address不可置空，置空将无法接收到相应事件。</em></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">    endpoint := <span class=\"string\">&quot;127.0.0.1:20200&quot;</span> <span class=\"comment\">// 部署的Fisco链的ip:channel_port</span></span><br><span class=\"line\">\tprivateKey, _ := hex.DecodeString(<span class=\"string\">&quot;145e247e170ba3afd6ae97e88f00dbc976c2345d511b0f6713355d19d8b80b58&quot;</span>) <span class=\"comment\">//用户私钥</span></span><br><span class=\"line\">\tconfig := &amp;conf.Config&#123;IsHTTP: <span class=\"literal\">false</span>, ChainID: <span class=\"number\">1</span>, CAFile: <span class=\"string\">&quot;ca.crt&quot;</span>, Key: <span class=\"string\">&quot;sdk.key&quot;</span>, Cert: <span class=\"string\">&quot;sdk.crt&quot;</span>, </span><br><span class=\"line\">\t\tIsSMCrypto: <span class=\"literal\">false</span>, GroupID: <span class=\"number\">1</span>, PrivateKey: privateKey, NodeURL: endpoint&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> c *client.Client</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> err <span class=\"type\">error</span></span><br><span class=\"line\">\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> eventLogParams types.EventLogParams</span><br><span class=\"line\">\teventLogParams.FromBlock = <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">\teventLogParams.ToBlock = <span class=\"string\">&quot;latest&quot;</span> <span class=\"comment\">// 当前配置订阅了从创世区块至最新区块的链上所有事件</span></span><br><span class=\"line\">\teventLogParams.GroupID = <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> topics = <span class=\"built_in\">make</span>([]<span class=\"type\">string</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">\ttopics[<span class=\"number\">0</span>] = common.BytesToHash(crypto.Keccak256([]<span class=\"type\">byte</span>(<span class=\"string\">&quot;setNum(address,uint256,uint256)&quot;</span>))).Hex() <span class=\"comment\">// 事件的Topic计算，注意使用uint256及int256替代uint及int</span></span><br><span class=\"line\">\teventLogParams.Topics = topics</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> addresses = <span class=\"built_in\">make</span>([]<span class=\"type\">string</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">\taddresses[<span class=\"number\">0</span>] = <span class=\"string\">&quot;0xd2cf82e18f3d2c5cae0de87d29994be622f3fdd3&quot;</span> <span class=\"comment\">// 所订阅事件对应的合约地址</span></span><br><span class=\"line\"></span><br><span class=\"line\">\teventLogParams.Addresses = addresses</span><br><span class=\"line\">\ttimeout := <span class=\"number\">30</span> * time.Second</span><br><span class=\"line\">\tqueryTicker := time.NewTicker(timeout)</span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> queryTicker.Stop()</span><br><span class=\"line\">\tdone := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"type\">bool</span>)</span><br><span class=\"line\">\terr = c.SubscribeEventLogs(eventLogParams, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123; <span class=\"comment\">// 调用SubscribeEventLogs函数订阅事件</span></span><br><span class=\"line\">\t\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">    ......\t<span class=\"comment\">// 省略</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Log数据解析</strong></p>\n<p>在使用sdk提供的客户端订阅事件的方式中，获取到的数据需要<code>abi</code>进行解析，</p>\n<p>首先需要根据事件包含的变量类型构建一个用于解析的结构体：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> setNum <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tCaller common.Address</span><br><span class=\"line\">\tCnt    *big.Int</span><br><span class=\"line\">\tValue  *big.Int</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此后可采用<code>abi</code>工具进行解析：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">err = c.SubscribeEventLogs(eventLogParams, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123;</span><br><span class=\"line\">\tfmt.Println(logs[<span class=\"number\">0</span>].Data)</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> logs &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> tempABI abi.ABI</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> temp setNum</span><br><span class=\"line\">\t\ttempABI, err := abi.JSON(strings.NewReader(EventDemoABI))</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlogrus.Println(err.Error())</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\terr = tempABI.Unpack(&amp;temp, <span class=\"string\">&quot;setNum&quot;</span>, v.Data)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlogrus.Println(err.Error())</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;log number:&quot;</span>, k, temp)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>此处<code>abi.Json</code>所使用到的数据需要使用<code>abigen</code>工具生成对应的go文件后获得:</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// EventDemoABI is the input ABI used to generate the binding from.</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> EventDemoABI = <span class=\"string\">&quot;[&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;count\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:false,\\&quot;inputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;v\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;name\\&quot;:\\&quot;setNumber\\&quot;,\\&quot;outputs\\&quot;:[],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;nonpayable\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;num\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;getNumber\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;anonymous\\&quot;:false,\\&quot;inputs\\&quot;:[&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;caller\\&quot;,\\&quot;type\\&quot;:\\&quot;address\\&quot;&#125;,&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;cnt\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;,&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;value\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;name\\&quot;:\\&quot;setNum\\&quot;,\\&quot;type\\&quot;:\\&quot;event\\&quot;&#125;]&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4-2-使用Abigen工具生成后的函数进行事件订阅\"><a href=\"#4-2-使用Abigen工具生成后的函数进行事件订阅\" class=\"headerlink\" title=\"4.2 使用Abigen工具生成后的函数进行事件订阅\"></a>4.2 使用Abigen工具生成后的函数进行事件订阅</h3><p>该方式进行事件订阅需先构建与合约的<code>session</code>连接，后直接调用<code>abigen</code>生成的go文件中函数即可进行事件的订阅与解析：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据配置文件构建eventDemoSession</span></span><br><span class=\"line\">err := eventDemoSession.WatchAllSetNum(from, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;Status Code:&quot;</span>,status)\t</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> logs &#123;</span><br><span class=\"line\">\t\t\tlog, errs := eventDemoSession.ParseSetNum(v) <span class=\"comment\">// 解析数据</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> errs != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tfmt.Println(errs)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">        fmt.Println(<span class=\"string\">&quot;Log id:&quot;</span>, k, <span class=\"string\">&quot;Log Content:&quot;</span>,log)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>关于Session的构建请参考<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/contractExamples.html\">合约开发样例</a>部分中例程。</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"合约事件推送\"><a href=\"#合约事件推送\" class=\"headerlink\" title=\"合约事件推送\"></a>合约事件推送</h1><p>标签：<code>go-sdk</code> <code>事件订阅</code> <code>Event</code></p>\n<p>正好最近在研究fisco go sdk的合约推送如何使用，官方又没有文档，折腾了半天最后用起来了就顺便写了了文档还提了pr也被官方合入了还挺快乐的，<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/event_sub.html\">合约事件推送 — FISCO BCOS v2.9.0 文档</a>所以要快乐的记录一下成为一个水货的fisco开源贡献者。</p>\n<hr>\n<h2 id=\"1-功能简介\"><a href=\"#1-功能简介\" class=\"headerlink\" title=\"1. 功能简介\"></a>1. 功能简介</h2><p>合约事件推送功能提供了合约事件的异步推送机制，客户端向节点发送注册请求，在请求中携带客户端关注的合约事件的参数，节点根据请求参数对请求区块范围的<code>Event Log</code>进行过滤，将结果分次推送给客户端。</p>\n<h2 id=\"2-交互协议\"><a href=\"#2-交互协议\" class=\"headerlink\" title=\"2. 交互协议\"></a>2. 交互协议</h2><p>客户端与节点的交互基于<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/design/protocol_description.html#id4\"><code>Channel</code></a>协议。交互分为三个阶段：注册请求，节点回复，<code>Event Log</code>数据推送。</p>\n<h3 id=\"注册请求\"><a href=\"#注册请求\" class=\"headerlink\" title=\"注册请求\"></a>注册请求</h3><p>客户端向节点发送事件推送的注册请求:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// request sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;fromBlock&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;latest&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;toBlock&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;latest&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;addresses&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;0x1f3119043aaee8e5080967e6f80eb3135086c138&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;topics&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;0x91c95f04198617c60eaf2180fbca88fc192db379657df0e412a9f7dd4ebbe95d&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;groupID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filerID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>groupID：字符串类型，群组ID  </li>\n<li>fromBlock：整形字符串，初始区块。“latest” 当前块高  </li>\n<li>toBlock：整形字符串，最终区块。“latest” 处理至当前块高时，继续等待新区块  </li>\n<li>addresses：字符串或者字符串数组：字符串表示单个合约地址，数组为多个合约地址，数组可以为空</li>\n<li>topics：字符串类型或者数组类型：字符串表示单个topic，数组为多个topic，数组可以为空</li>\n</ul>\n<h3 id=\"节点回复\"><a href=\"#节点回复\" class=\"headerlink\" title=\"节点回复\"></a>节点回复</h3><p>节点接受客户端注册请求时，会对请求参数进行校验，将是否成功接受该注册请求结果回复给客户端。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// response sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filterID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>result：整形，返回结果。0成功，其余为失败状态码</li>\n</ul>\n<h3 id=\"Event-Log数据推送\"><a href=\"#Event-Log数据推送\" class=\"headerlink\" title=\"Event Log数据推送\"></a>Event Log数据推送</h3><p>节点验证客户端注册请求成功之后，根据客户端请求参数条件，向客户端推送<code>Event Log</code>数据。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event log push sample:</span></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;filterID&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bb31e4ec086c48e18f21cb994e2e5967&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;logs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>filterID：字符串类型，每次请求唯一，标记一次注册任务  </li>\n<li>result：整形 0：<code>Event Log</code>数据推送 1：推送完成。客户端一次注册请求对应节点的数据推送会有多次（请求区块范围比较大或者等待新的区块），<code>result</code>字段为1时说明节点推送已经结束  </li>\n<li>logs：Log对象数组，result为0时有效  </li>\n</ul>\n<h2 id=\"3-Go-SDK教程\"><a href=\"#3-Go-SDK教程\" class=\"headerlink\" title=\"3. Go SDK教程\"></a>3. Go SDK教程</h2><h3 id=\"注册接口\"><a href=\"#注册接口\" class=\"headerlink\" title=\"注册接口\"></a>注册接口</h3><p>在FISCO-BCOS Go SDK中<code>client.Client</code>类提供合约事件的注册接口，用户可以调用<code>SubscribeEventLogs</code>向节点发送注册请求，并设置回调函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(c *Client)</span></span> SubscribeEventLogs(eventLogParams types.EventLogParams, handler <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(<span class=\"type\">int</span>, []types.Log)</span></span>) <span class=\"type\">error</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> c.apiHandler.SubscribeEventLogs(eventLogParams, handler)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"types-EventLogParams注册参数\"><a href=\"#types-EventLogParams注册参数\" class=\"headerlink\" title=\"types.EventLogParams注册参数\"></a><code>types.EventLogParams</code>注册参数</h4><p>事件回调请求注册的参数：  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> EventLogParams <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tFromBlock <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;fromBlock&quot;`</span>   <span class=\"comment\">// 订阅起始区块 latest表示最新区块</span></span><br><span class=\"line\">\tToBlock   <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;toBlock&quot;`</span>     <span class=\"comment\">// 订阅结束区块 latest表示最新区块</span></span><br><span class=\"line\">\tAddresses []<span class=\"type\">string</span> <span class=\"string\">`json:&quot;addresses&quot;`</span>   <span class=\"comment\">// 订阅的合约地址</span></span><br><span class=\"line\">\tTopics    []<span class=\"type\">string</span> <span class=\"string\">`json:&quot;topics&quot;`</span>      <span class=\"comment\">// 订阅的事件</span></span><br><span class=\"line\">\tGroupID   <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;groupID&quot;`</span>     </span><br><span class=\"line\">\tFilterID  <span class=\"type\">string</span>   <span class=\"string\">`json:&quot;filterID&quot;`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"topic计算\"><a href=\"#topic计算\" class=\"headerlink\" title=\"topic计算\"></a>topic计算</h4><p>Go语言可以使用<code>github.com/ethereum/go-ethereum/common</code>包根据合约中定义的事件进行Topic的计算：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">topic = common.BytesToHash(crypto.Keccak256([]<span class=\"type\">byte</span>(<span class=\"string\">&quot;testEventLog(address,string,uint256)&quot;</span>))).Hex()</span><br></pre></td></tr></table></figure>\n\n<p><em>需要注意的是uint及int为uint256及int256的别名，即使合约中使用的类型为uint及int，在topic的计算中仍需使用uint256与int256</em></p>\n<h2 id=\"4-示例\"><a href=\"#4-示例\" class=\"headerlink\" title=\"4. 示例\"></a>4. 示例</h2><p>此处以一个进行数值更改并计算更改次数的<code>eventDemo.sol</code>合约进行事件订阅举例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pragma solidity &gt;=0.4.24;</span><br><span class=\"line\"></span><br><span class=\"line\">contract eventDemo &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    uint256 public count = 0;</span><br><span class=\"line\">    uint256 public num = 0;</span><br><span class=\"line\"></span><br><span class=\"line\">    event setNum(address caller,uint256 cnt,uint256 value);   // Declare A Event</span><br><span class=\"line\"></span><br><span class=\"line\">    function setNumber(uint256 v) public &#123; </span><br><span class=\"line\">        count += 1;</span><br><span class=\"line\">        num = v;</span><br><span class=\"line\">        emit setNum(msg.sender,count,num); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    function getNumber()public returns (uint)&#123;</span><br><span class=\"line\">        return num;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>该合约提供了<code>setNumber</code>及<code>getNumber</code>方法，其中调用前者将获得一个抛出事件。</p>\n<p>在Fisco Go SDK中有两种事件订阅方式，分别为使用<code>client</code>直接进行事件订阅与调用Abigen工具生成的代码中函数进行订阅两种，其中后者须建立<code>session</code>。</p>\n<h3 id=\"4-1-使用client进行事件订阅\"><a href=\"#4-1-使用client进行事件订阅\" class=\"headerlink\" title=\"4.1 使用client进行事件订阅\"></a>4.1 使用client进行事件订阅</h3><p><strong>事件推送订阅</strong></p>\n<p>在Go SDK中给出了<a href=\"https://github.com/FISCO-BCOS/go-sdk/blob/master/examples/eventLog/sub/subscriber.go\">subscriber.go</a>合约事件订阅样例</p>\n<p><em>需要注意的是Topic及Address不可置空，置空将无法接收到相应事件。</em></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">    endpoint := <span class=\"string\">&quot;127.0.0.1:20200&quot;</span> <span class=\"comment\">// 部署的Fisco链的ip:channel_port</span></span><br><span class=\"line\">\tprivateKey, _ := hex.DecodeString(<span class=\"string\">&quot;145e247e170ba3afd6ae97e88f00dbc976c2345d511b0f6713355d19d8b80b58&quot;</span>) <span class=\"comment\">//用户私钥</span></span><br><span class=\"line\">\tconfig := &amp;conf.Config&#123;IsHTTP: <span class=\"literal\">false</span>, ChainID: <span class=\"number\">1</span>, CAFile: <span class=\"string\">&quot;ca.crt&quot;</span>, Key: <span class=\"string\">&quot;sdk.key&quot;</span>, Cert: <span class=\"string\">&quot;sdk.crt&quot;</span>, </span><br><span class=\"line\">\t\tIsSMCrypto: <span class=\"literal\">false</span>, GroupID: <span class=\"number\">1</span>, PrivateKey: privateKey, NodeURL: endpoint&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> c *client.Client</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> err <span class=\"type\">error</span></span><br><span class=\"line\">\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> eventLogParams types.EventLogParams</span><br><span class=\"line\">\teventLogParams.FromBlock = <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">\teventLogParams.ToBlock = <span class=\"string\">&quot;latest&quot;</span> <span class=\"comment\">// 当前配置订阅了从创世区块至最新区块的链上所有事件</span></span><br><span class=\"line\">\teventLogParams.GroupID = <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> topics = <span class=\"built_in\">make</span>([]<span class=\"type\">string</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">\ttopics[<span class=\"number\">0</span>] = common.BytesToHash(crypto.Keccak256([]<span class=\"type\">byte</span>(<span class=\"string\">&quot;setNum(address,uint256,uint256)&quot;</span>))).Hex() <span class=\"comment\">// 事件的Topic计算，注意使用uint256及int256替代uint及int</span></span><br><span class=\"line\">\teventLogParams.Topics = topics</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> addresses = <span class=\"built_in\">make</span>([]<span class=\"type\">string</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">\taddresses[<span class=\"number\">0</span>] = <span class=\"string\">&quot;0xd2cf82e18f3d2c5cae0de87d29994be622f3fdd3&quot;</span> <span class=\"comment\">// 所订阅事件对应的合约地址</span></span><br><span class=\"line\"></span><br><span class=\"line\">\teventLogParams.Addresses = addresses</span><br><span class=\"line\">\ttimeout := <span class=\"number\">30</span> * time.Second</span><br><span class=\"line\">\tqueryTicker := time.NewTicker(timeout)</span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> queryTicker.Stop()</span><br><span class=\"line\">\tdone := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"type\">bool</span>)</span><br><span class=\"line\">\terr = c.SubscribeEventLogs(eventLogParams, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123; <span class=\"comment\">// 调用SubscribeEventLogs函数订阅事件</span></span><br><span class=\"line\">\t\t...... <span class=\"comment\">// 省略</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">    ......\t<span class=\"comment\">// 省略</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Log数据解析</strong></p>\n<p>在使用sdk提供的客户端订阅事件的方式中，获取到的数据需要<code>abi</code>进行解析，</p>\n<p>首先需要根据事件包含的变量类型构建一个用于解析的结构体：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> setNum <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tCaller common.Address</span><br><span class=\"line\">\tCnt    *big.Int</span><br><span class=\"line\">\tValue  *big.Int</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此后可采用<code>abi</code>工具进行解析：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">err = c.SubscribeEventLogs(eventLogParams, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123;</span><br><span class=\"line\">\tfmt.Println(logs[<span class=\"number\">0</span>].Data)</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> logs &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> tempABI abi.ABI</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> temp setNum</span><br><span class=\"line\">\t\ttempABI, err := abi.JSON(strings.NewReader(EventDemoABI))</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlogrus.Println(err.Error())</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\terr = tempABI.Unpack(&amp;temp, <span class=\"string\">&quot;setNum&quot;</span>, v.Data)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlogrus.Println(err.Error())</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;log number:&quot;</span>, k, temp)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>此处<code>abi.Json</code>所使用到的数据需要使用<code>abigen</code>工具生成对应的go文件后获得:</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// EventDemoABI is the input ABI used to generate the binding from.</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> EventDemoABI = <span class=\"string\">&quot;[&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;count\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:false,\\&quot;inputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;v\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;name\\&quot;:\\&quot;setNumber\\&quot;,\\&quot;outputs\\&quot;:[],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;nonpayable\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;num\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;constant\\&quot;:true,\\&quot;inputs\\&quot;:[],\\&quot;name\\&quot;:\\&quot;getNumber\\&quot;,\\&quot;outputs\\&quot;:[&#123;\\&quot;name\\&quot;:\\&quot;\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;payable\\&quot;:false,\\&quot;stateMutability\\&quot;:\\&quot;view\\&quot;,\\&quot;type\\&quot;:\\&quot;function\\&quot;&#125;,&#123;\\&quot;anonymous\\&quot;:false,\\&quot;inputs\\&quot;:[&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;caller\\&quot;,\\&quot;type\\&quot;:\\&quot;address\\&quot;&#125;,&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;cnt\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;,&#123;\\&quot;indexed\\&quot;:false,\\&quot;name\\&quot;:\\&quot;value\\&quot;,\\&quot;type\\&quot;:\\&quot;uint256\\&quot;&#125;],\\&quot;name\\&quot;:\\&quot;setNum\\&quot;,\\&quot;type\\&quot;:\\&quot;event\\&quot;&#125;]&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4-2-使用Abigen工具生成后的函数进行事件订阅\"><a href=\"#4-2-使用Abigen工具生成后的函数进行事件订阅\" class=\"headerlink\" title=\"4.2 使用Abigen工具生成后的函数进行事件订阅\"></a>4.2 使用Abigen工具生成后的函数进行事件订阅</h3><p>该方式进行事件订阅需先构建与合约的<code>session</code>连接，后直接调用<code>abigen</code>生成的go文件中函数即可进行事件的订阅与解析：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据配置文件构建eventDemoSession</span></span><br><span class=\"line\">err := eventDemoSession.WatchAllSetNum(from, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(status <span class=\"type\">int</span>, logs []types.Log)</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;Status Code:&quot;</span>,status)\t</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> logs &#123;</span><br><span class=\"line\">\t\t\tlog, errs := eventDemoSession.ParseSetNum(v) <span class=\"comment\">// 解析数据</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> errs != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tfmt.Println(errs)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">        fmt.Println(<span class=\"string\">&quot;Log id:&quot;</span>, k, <span class=\"string\">&quot;Log Content:&quot;</span>,log)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>关于Session的构建请参考<a href=\"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/go_sdk/contractExamples.html\">合约开发样例</a>部分中例程。</p>\n"},{"title":"写第一篇paper的一些记录","date":"2022-08-01T15:45:11.000Z","author":"Lcy","_content":"\n# 1. 万恶之源\n\n这都怪7.15的时候，老板在我跑步刚刚结束还搁那大喘气呢，来了一个电话，上来第一句：\n\n> 你太不上进了！\n\n我快速反思了一下最近干了什么，0.5s之后反应过来肯定是有话要说虚晃一枪，而后果然就：\n\n> WCSP你投一下，7.30截稿，把毕设写成论文，下周给我初稿。\n\n虽然吧是个三区的会议但是对我这种废物菜鸡躺平人士来说，我真的我也不会写论文啊，但是也就嗯啊嗯下来了，所以度过了痛苦的两周。\n\n# 2. 踩坑\n\n时间毕竟是紧迫的，所以写论文的过程中遇到了一系列的问题，我来回想回想来一下一一列举。\n\n## a. 正文\n\n首先是按照写作的顺序，从正文开始写作。对于正文的写作还是要先深入理清楚整体的思路。时间紧所以我就按照毕设里的思路一通瞎写，又因为毕设的东西太多，会议的篇幅也不够表述，删删减减之中逻辑就丢失掉了。所以要注意这么些个事情：\n\n### 1.意识流地表述因果关系、转折关系、承接关系\n（这个错误大多数中文使用者都能发现）\n\n写文章的时候写着写着就一定程度上丢了一些逻辑，比如想着A，但A还没写完就写到B；又比如想着从A转折到B，结果写着写着就顺着写下去了，忘了加转折关系。最后呈现出来的感觉就是不断地跳变。\n\n所以这就要求在写paper的时候不要赶时间，（大佬除外），每一句话写的时候深入思考一下，一点点的写一写。\n\n### 2.主谓语搭配错误，of/in/with/on等介词使用错误\n（这个大多是由中式思维引发）\n\n介词这个其实是小问题，毕竟写完论文去过Grammarly还是非常的快速的，过Grammarly的同时学一下一些表述也问题不大。\n\n### 3.表述过冗余\n（需要摆脱口语化思维，尽量压迫自己在每句话开头说点有用的话，先不要在句子里加过多定语、副词，先把核心意思写出来）\n\n这个乐博给了一个要求，在每一句的前6个词最好出现一点实际的东西。比如我这篇文章在写的时候经常写到了一些什么`Therefore, it is able to `这样上来5个词全在说废话，Reviewer就会发现看不见这句话想要表达什么，所以不要在每一句话的开头说太多的废话。\n\n## b. Simulation\n\n### 1.冗余的繁杂表述\n\n（每段的开头可以不用讲述废话，直接使用Fig. ? shows that之类的句式进行说明）\n\n一开始写仿真描述的时候，写了很多的废话，尤其是在叙述仿真结果的过程中应当避免讲故事，将缘由等等一些无关的事情。就应当聚焦于要写的内容，需要描述的变化趋势进行描述。\n\n## c. Introduction\n\n首先注意常见的标准Intro的5个点：\n\n1. 一个引入，引入要做的工作\n2. 介绍相关领域的工作，做一个简单的literature research。\n3. 介绍当前工作的一些缺点\n4. 介绍自身工作的贡献\n5. 介绍后面文章的结构\n\n### 1. literature research过于冗长\n\n首先文献调研的内容不需要过于长，通常对于一篇文献来说的对应的对于其的总结性陈述在2行左右即可。\n\n### 2. 缺点以及贡献陈述\n\n这里要注意缺点和贡献的陈述通常需要一一对应，有什么样的缺点，我们文章的贡献点又在哪里，我们提出的方案到底带来了什么，一一对应更能体现工作的价值所在。\n\n## d. Conclusion\n\n### 1. 再一次陈述核心的贡献\n\n总结全文的贡献，清晰明了的陈述核心的贡献点。\n\n有时候看篇幅的控制，可以再加上对未来的展望。\n\n## e. Abstract\n\n### 1. 及时cue文章Title\n\n对于Ab来说，通常在前六行一定要注意cue到我们所需要做的事情，cue到title。如果文章涉及的要素过多，ab开头不方便一一介绍，需要想想有什么总结性的介绍方式快速的展开cue到title。\n\n## f. Ref\n\n### 1. 条目的润湿\n\n（一定不能忘）\n\n几个很重要的点需要mark不能忘记：\n\n1. 在bib文件中过一遍所有文章的标题中需要强制大写的内容，比如IoT、6G等需要用大括号来强制大写\n2. 过一遍所有的会议，补充**会议月份、会议地点**，改写会议的名字格式**注意补充届数，在前面写上Proc等细节**\n3. 过一遍所有的会议和期刊，对相应的会议名、期刊名找缩写进行修改。参考网站：[Science and Engineering Journal Abbreviations | Woodward Library (ubc.ca)](https://woodward.library.ubc.ca/research-help/journal-abbreviations/)\n","source":"_posts/写第一篇paper的一些记录.md","raw":"---\ntitle: 写第一篇paper的一些记录\ndate: 2022-08-01 23:45:11\ntags: Study\ncategories: Study\nauthor: Lcy\n---\n\n# 1. 万恶之源\n\n这都怪7.15的时候，老板在我跑步刚刚结束还搁那大喘气呢，来了一个电话，上来第一句：\n\n> 你太不上进了！\n\n我快速反思了一下最近干了什么，0.5s之后反应过来肯定是有话要说虚晃一枪，而后果然就：\n\n> WCSP你投一下，7.30截稿，把毕设写成论文，下周给我初稿。\n\n虽然吧是个三区的会议但是对我这种废物菜鸡躺平人士来说，我真的我也不会写论文啊，但是也就嗯啊嗯下来了，所以度过了痛苦的两周。\n\n# 2. 踩坑\n\n时间毕竟是紧迫的，所以写论文的过程中遇到了一系列的问题，我来回想回想来一下一一列举。\n\n## a. 正文\n\n首先是按照写作的顺序，从正文开始写作。对于正文的写作还是要先深入理清楚整体的思路。时间紧所以我就按照毕设里的思路一通瞎写，又因为毕设的东西太多，会议的篇幅也不够表述，删删减减之中逻辑就丢失掉了。所以要注意这么些个事情：\n\n### 1.意识流地表述因果关系、转折关系、承接关系\n（这个错误大多数中文使用者都能发现）\n\n写文章的时候写着写着就一定程度上丢了一些逻辑，比如想着A，但A还没写完就写到B；又比如想着从A转折到B，结果写着写着就顺着写下去了，忘了加转折关系。最后呈现出来的感觉就是不断地跳变。\n\n所以这就要求在写paper的时候不要赶时间，（大佬除外），每一句话写的时候深入思考一下，一点点的写一写。\n\n### 2.主谓语搭配错误，of/in/with/on等介词使用错误\n（这个大多是由中式思维引发）\n\n介词这个其实是小问题，毕竟写完论文去过Grammarly还是非常的快速的，过Grammarly的同时学一下一些表述也问题不大。\n\n### 3.表述过冗余\n（需要摆脱口语化思维，尽量压迫自己在每句话开头说点有用的话，先不要在句子里加过多定语、副词，先把核心意思写出来）\n\n这个乐博给了一个要求，在每一句的前6个词最好出现一点实际的东西。比如我这篇文章在写的时候经常写到了一些什么`Therefore, it is able to `这样上来5个词全在说废话，Reviewer就会发现看不见这句话想要表达什么，所以不要在每一句话的开头说太多的废话。\n\n## b. Simulation\n\n### 1.冗余的繁杂表述\n\n（每段的开头可以不用讲述废话，直接使用Fig. ? shows that之类的句式进行说明）\n\n一开始写仿真描述的时候，写了很多的废话，尤其是在叙述仿真结果的过程中应当避免讲故事，将缘由等等一些无关的事情。就应当聚焦于要写的内容，需要描述的变化趋势进行描述。\n\n## c. Introduction\n\n首先注意常见的标准Intro的5个点：\n\n1. 一个引入，引入要做的工作\n2. 介绍相关领域的工作，做一个简单的literature research。\n3. 介绍当前工作的一些缺点\n4. 介绍自身工作的贡献\n5. 介绍后面文章的结构\n\n### 1. literature research过于冗长\n\n首先文献调研的内容不需要过于长，通常对于一篇文献来说的对应的对于其的总结性陈述在2行左右即可。\n\n### 2. 缺点以及贡献陈述\n\n这里要注意缺点和贡献的陈述通常需要一一对应，有什么样的缺点，我们文章的贡献点又在哪里，我们提出的方案到底带来了什么，一一对应更能体现工作的价值所在。\n\n## d. Conclusion\n\n### 1. 再一次陈述核心的贡献\n\n总结全文的贡献，清晰明了的陈述核心的贡献点。\n\n有时候看篇幅的控制，可以再加上对未来的展望。\n\n## e. Abstract\n\n### 1. 及时cue文章Title\n\n对于Ab来说，通常在前六行一定要注意cue到我们所需要做的事情，cue到title。如果文章涉及的要素过多，ab开头不方便一一介绍，需要想想有什么总结性的介绍方式快速的展开cue到title。\n\n## f. Ref\n\n### 1. 条目的润湿\n\n（一定不能忘）\n\n几个很重要的点需要mark不能忘记：\n\n1. 在bib文件中过一遍所有文章的标题中需要强制大写的内容，比如IoT、6G等需要用大括号来强制大写\n2. 过一遍所有的会议，补充**会议月份、会议地点**，改写会议的名字格式**注意补充届数，在前面写上Proc等细节**\n3. 过一遍所有的会议和期刊，对相应的会议名、期刊名找缩写进行修改。参考网站：[Science and Engineering Journal Abbreviations | Woodward Library (ubc.ca)](https://woodward.library.ubc.ca/research-help/journal-abbreviations/)\n","slug":"写第一篇paper的一些记录","published":1,"updated":"2022-08-06T10:08:23.253Z","_id":"cl6bkdqgp0000ngtzhnhkddtc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"1-万恶之源\"><a href=\"#1-万恶之源\" class=\"headerlink\" title=\"1. 万恶之源\"></a>1. 万恶之源</h1><p>这都怪7.15的时候，老板在我跑步刚刚结束还搁那大喘气呢，来了一个电话，上来第一句：</p>\n<blockquote>\n<p>你太不上进了！</p>\n</blockquote>\n<p>我快速反思了一下最近干了什么，0.5s之后反应过来肯定是有话要说虚晃一枪，而后果然就：</p>\n<blockquote>\n<p>WCSP你投一下，7.30截稿，把毕设写成论文，下周给我初稿。</p>\n</blockquote>\n<p>虽然吧是个三区的会议但是对我这种废物菜鸡躺平人士来说，我真的我也不会写论文啊，但是也就嗯啊嗯下来了，所以度过了痛苦的两周。</p>\n<h1 id=\"2-踩坑\"><a href=\"#2-踩坑\" class=\"headerlink\" title=\"2. 踩坑\"></a>2. 踩坑</h1><p>时间毕竟是紧迫的，所以写论文的过程中遇到了一系列的问题，我来回想回想来一下一一列举。</p>\n<h2 id=\"a-正文\"><a href=\"#a-正文\" class=\"headerlink\" title=\"a. 正文\"></a>a. 正文</h2><div class=\"story post-story\"><p>首先是按照写作的顺序，从正文开始写作。对于正文的写作还是要先深入理清楚整体的思路。时间紧所以我就按照毕设里的思路一通瞎写，又因为毕设的东西太多，会议的篇幅也不够表述，删删减减之中逻辑就丢失掉了。所以要注意这么些个事情：</p>\n<h3 id=\"1-意识流地表述因果关系、转折关系、承接关系\"><a href=\"#1-意识流地表述因果关系、转折关系、承接关系\" class=\"headerlink\" title=\"1.意识流地表述因果关系、转折关系、承接关系\"></a>1.意识流地表述因果关系、转折关系、承接关系</h3><p>（这个错误大多数中文使用者都能发现）</p>\n<p>写文章的时候写着写着就一定程度上丢了一些逻辑，比如想着A，但A还没写完就写到B；又比如想着从A转折到B，结果写着写着就顺着写下去了，忘了加转折关系。最后呈现出来的感觉就是不断地跳变。</p>\n<p>所以这就要求在写paper的时候不要赶时间，（大佬除外），每一句话写的时候深入思考一下，一点点的写一写。</p>\n<h3 id=\"2-主谓语搭配错误，of-in-with-on等介词使用错误\"><a href=\"#2-主谓语搭配错误，of-in-with-on等介词使用错误\" class=\"headerlink\" title=\"2.主谓语搭配错误，of/in/with/on等介词使用错误\"></a>2.主谓语搭配错误，of/in/with/on等介词使用错误</h3><p>（这个大多是由中式思维引发）</p>\n<p>介词这个其实是小问题，毕竟写完论文去过Grammarly还是非常的快速的，过Grammarly的同时学一下一些表述也问题不大。</p>\n<h3 id=\"3-表述过冗余\"><a href=\"#3-表述过冗余\" class=\"headerlink\" title=\"3.表述过冗余\"></a>3.表述过冗余</h3><p>（需要摆脱口语化思维，尽量压迫自己在每句话开头说点有用的话，先不要在句子里加过多定语、副词，先把核心意思写出来）</p>\n<p>这个乐博给了一个要求，在每一句的前6个词最好出现一点实际的东西。比如我这篇文章在写的时候经常写到了一些什么<code>Therefore, it is able to </code>这样上来5个词全在说废话，Reviewer就会发现看不见这句话想要表达什么，所以不要在每一句话的开头说太多的废话。</p>\n</div><h2 id=\"b-Simulation\"><a href=\"#b-Simulation\" class=\"headerlink\" title=\"b. Simulation\"></a>b. Simulation</h2><div class=\"story post-story\"><h3 id=\"1-冗余的繁杂表述\"><a href=\"#1-冗余的繁杂表述\" class=\"headerlink\" title=\"1.冗余的繁杂表述\"></a>1.冗余的繁杂表述</h3><p>（每段的开头可以不用讲述废话，直接使用Fig. ? shows that之类的句式进行说明）</p>\n<p>一开始写仿真描述的时候，写了很多的废话，尤其是在叙述仿真结果的过程中应当避免讲故事，将缘由等等一些无关的事情。就应当聚焦于要写的内容，需要描述的变化趋势进行描述。</p>\n</div><h2 id=\"c-Introduction\"><a href=\"#c-Introduction\" class=\"headerlink\" title=\"c. Introduction\"></a>c. Introduction</h2><div class=\"story post-story\"><p>首先注意常见的标准Intro的5个点：</p>\n<ol>\n<li>一个引入，引入要做的工作</li>\n<li>介绍相关领域的工作，做一个简单的literature research。</li>\n<li>介绍当前工作的一些缺点</li>\n<li>介绍自身工作的贡献</li>\n<li>介绍后面文章的结构</li>\n</ol>\n<h3 id=\"1-literature-research过于冗长\"><a href=\"#1-literature-research过于冗长\" class=\"headerlink\" title=\"1. literature research过于冗长\"></a>1. literature research过于冗长</h3><p>首先文献调研的内容不需要过于长，通常对于一篇文献来说的对应的对于其的总结性陈述在2行左右即可。</p>\n<h3 id=\"2-缺点以及贡献陈述\"><a href=\"#2-缺点以及贡献陈述\" class=\"headerlink\" title=\"2. 缺点以及贡献陈述\"></a>2. 缺点以及贡献陈述</h3><p>这里要注意缺点和贡献的陈述通常需要一一对应，有什么样的缺点，我们文章的贡献点又在哪里，我们提出的方案到底带来了什么，一一对应更能体现工作的价值所在。</p>\n</div><h2 id=\"d-Conclusion\"><a href=\"#d-Conclusion\" class=\"headerlink\" title=\"d. Conclusion\"></a>d. Conclusion</h2><div class=\"story post-story\"><h3 id=\"1-再一次陈述核心的贡献\"><a href=\"#1-再一次陈述核心的贡献\" class=\"headerlink\" title=\"1. 再一次陈述核心的贡献\"></a>1. 再一次陈述核心的贡献</h3><p>总结全文的贡献，清晰明了的陈述核心的贡献点。</p>\n<p>有时候看篇幅的控制，可以再加上对未来的展望。</p>\n</div><h2 id=\"e-Abstract\"><a href=\"#e-Abstract\" class=\"headerlink\" title=\"e. Abstract\"></a>e. Abstract</h2><div class=\"story post-story\"><h3 id=\"1-及时cue文章Title\"><a href=\"#1-及时cue文章Title\" class=\"headerlink\" title=\"1. 及时cue文章Title\"></a>1. 及时cue文章Title</h3><p>对于Ab来说，通常在前六行一定要注意cue到我们所需要做的事情，cue到title。如果文章涉及的要素过多，ab开头不方便一一介绍，需要想想有什么总结性的介绍方式快速的展开cue到title。</p>\n</div><h2 id=\"f-Ref\"><a href=\"#f-Ref\" class=\"headerlink\" title=\"f. Ref\"></a>f. Ref</h2><div class=\"story post-story\"><h3 id=\"1-条目的润湿\"><a href=\"#1-条目的润湿\" class=\"headerlink\" title=\"1. 条目的润湿\"></a>1. 条目的润湿</h3><p>（一定不能忘）</p>\n<p>几个很重要的点需要mark不能忘记：</p>\n<ol>\n<li>在bib文件中过一遍所有文章的标题中需要强制大写的内容，比如IoT、6G等需要用大括号来强制大写</li>\n<li>过一遍所有的会议，补充<strong>会议月份、会议地点</strong>，改写会议的名字格式<strong>注意补充届数，在前面写上Proc等细节</strong></li>\n<li>过一遍所有的会议和期刊，对相应的会议名、期刊名找缩写进行修改。参考网站：<a href=\"https://woodward.library.ubc.ca/research-help/journal-abbreviations/\">Science and Engineering Journal Abbreviations | Woodward Library (ubc.ca)</a></li>\n</ol>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"1-万恶之源\"><a href=\"#1-万恶之源\" class=\"headerlink\" title=\"1. 万恶之源\"></a>1. 万恶之源</h1><p>这都怪7.15的时候，老板在我跑步刚刚结束还搁那大喘气呢，来了一个电话，上来第一句：</p>\n<blockquote>\n<p>你太不上进了！</p>\n</blockquote>\n<p>我快速反思了一下最近干了什么，0.5s之后反应过来肯定是有话要说虚晃一枪，而后果然就：</p>\n<blockquote>\n<p>WCSP你投一下，7.30截稿，把毕设写成论文，下周给我初稿。</p>\n</blockquote>\n<p>虽然吧是个三区的会议但是对我这种废物菜鸡躺平人士来说，我真的我也不会写论文啊，但是也就嗯啊嗯下来了，所以度过了痛苦的两周。</p>\n<h1 id=\"2-踩坑\"><a href=\"#2-踩坑\" class=\"headerlink\" title=\"2. 踩坑\"></a>2. 踩坑</h1><p>时间毕竟是紧迫的，所以写论文的过程中遇到了一系列的问题，我来回想回想来一下一一列举。</p>\n<h2 id=\"a-正文\"><a href=\"#a-正文\" class=\"headerlink\" title=\"a. 正文\"></a>a. 正文</h2><p>首先是按照写作的顺序，从正文开始写作。对于正文的写作还是要先深入理清楚整体的思路。时间紧所以我就按照毕设里的思路一通瞎写，又因为毕设的东西太多，会议的篇幅也不够表述，删删减减之中逻辑就丢失掉了。所以要注意这么些个事情：</p>\n<h3 id=\"1-意识流地表述因果关系、转折关系、承接关系\"><a href=\"#1-意识流地表述因果关系、转折关系、承接关系\" class=\"headerlink\" title=\"1.意识流地表述因果关系、转折关系、承接关系\"></a>1.意识流地表述因果关系、转折关系、承接关系</h3><p>（这个错误大多数中文使用者都能发现）</p>\n<p>写文章的时候写着写着就一定程度上丢了一些逻辑，比如想着A，但A还没写完就写到B；又比如想着从A转折到B，结果写着写着就顺着写下去了，忘了加转折关系。最后呈现出来的感觉就是不断地跳变。</p>\n<p>所以这就要求在写paper的时候不要赶时间，（大佬除外），每一句话写的时候深入思考一下，一点点的写一写。</p>\n<h3 id=\"2-主谓语搭配错误，of-in-with-on等介词使用错误\"><a href=\"#2-主谓语搭配错误，of-in-with-on等介词使用错误\" class=\"headerlink\" title=\"2.主谓语搭配错误，of/in/with/on等介词使用错误\"></a>2.主谓语搭配错误，of/in/with/on等介词使用错误</h3><p>（这个大多是由中式思维引发）</p>\n<p>介词这个其实是小问题，毕竟写完论文去过Grammarly还是非常的快速的，过Grammarly的同时学一下一些表述也问题不大。</p>\n<h3 id=\"3-表述过冗余\"><a href=\"#3-表述过冗余\" class=\"headerlink\" title=\"3.表述过冗余\"></a>3.表述过冗余</h3><p>（需要摆脱口语化思维，尽量压迫自己在每句话开头说点有用的话，先不要在句子里加过多定语、副词，先把核心意思写出来）</p>\n<p>这个乐博给了一个要求，在每一句的前6个词最好出现一点实际的东西。比如我这篇文章在写的时候经常写到了一些什么<code>Therefore, it is able to </code>这样上来5个词全在说废话，Reviewer就会发现看不见这句话想要表达什么，所以不要在每一句话的开头说太多的废话。</p>\n<h2 id=\"b-Simulation\"><a href=\"#b-Simulation\" class=\"headerlink\" title=\"b. Simulation\"></a>b. Simulation</h2><h3 id=\"1-冗余的繁杂表述\"><a href=\"#1-冗余的繁杂表述\" class=\"headerlink\" title=\"1.冗余的繁杂表述\"></a>1.冗余的繁杂表述</h3><p>（每段的开头可以不用讲述废话，直接使用Fig. ? shows that之类的句式进行说明）</p>\n<p>一开始写仿真描述的时候，写了很多的废话，尤其是在叙述仿真结果的过程中应当避免讲故事，将缘由等等一些无关的事情。就应当聚焦于要写的内容，需要描述的变化趋势进行描述。</p>\n<h2 id=\"c-Introduction\"><a href=\"#c-Introduction\" class=\"headerlink\" title=\"c. Introduction\"></a>c. Introduction</h2><p>首先注意常见的标准Intro的5个点：</p>\n<ol>\n<li>一个引入，引入要做的工作</li>\n<li>介绍相关领域的工作，做一个简单的literature research。</li>\n<li>介绍当前工作的一些缺点</li>\n<li>介绍自身工作的贡献</li>\n<li>介绍后面文章的结构</li>\n</ol>\n<h3 id=\"1-literature-research过于冗长\"><a href=\"#1-literature-research过于冗长\" class=\"headerlink\" title=\"1. literature research过于冗长\"></a>1. literature research过于冗长</h3><p>首先文献调研的内容不需要过于长，通常对于一篇文献来说的对应的对于其的总结性陈述在2行左右即可。</p>\n<h3 id=\"2-缺点以及贡献陈述\"><a href=\"#2-缺点以及贡献陈述\" class=\"headerlink\" title=\"2. 缺点以及贡献陈述\"></a>2. 缺点以及贡献陈述</h3><p>这里要注意缺点和贡献的陈述通常需要一一对应，有什么样的缺点，我们文章的贡献点又在哪里，我们提出的方案到底带来了什么，一一对应更能体现工作的价值所在。</p>\n<h2 id=\"d-Conclusion\"><a href=\"#d-Conclusion\" class=\"headerlink\" title=\"d. Conclusion\"></a>d. Conclusion</h2><h3 id=\"1-再一次陈述核心的贡献\"><a href=\"#1-再一次陈述核心的贡献\" class=\"headerlink\" title=\"1. 再一次陈述核心的贡献\"></a>1. 再一次陈述核心的贡献</h3><p>总结全文的贡献，清晰明了的陈述核心的贡献点。</p>\n<p>有时候看篇幅的控制，可以再加上对未来的展望。</p>\n<h2 id=\"e-Abstract\"><a href=\"#e-Abstract\" class=\"headerlink\" title=\"e. Abstract\"></a>e. Abstract</h2><h3 id=\"1-及时cue文章Title\"><a href=\"#1-及时cue文章Title\" class=\"headerlink\" title=\"1. 及时cue文章Title\"></a>1. 及时cue文章Title</h3><p>对于Ab来说，通常在前六行一定要注意cue到我们所需要做的事情，cue到title。如果文章涉及的要素过多，ab开头不方便一一介绍，需要想想有什么总结性的介绍方式快速的展开cue到title。</p>\n<h2 id=\"f-Ref\"><a href=\"#f-Ref\" class=\"headerlink\" title=\"f. Ref\"></a>f. Ref</h2><h3 id=\"1-条目的润湿\"><a href=\"#1-条目的润湿\" class=\"headerlink\" title=\"1. 条目的润湿\"></a>1. 条目的润湿</h3><p>（一定不能忘）</p>\n<p>几个很重要的点需要mark不能忘记：</p>\n<ol>\n<li>在bib文件中过一遍所有文章的标题中需要强制大写的内容，比如IoT、6G等需要用大括号来强制大写</li>\n<li>过一遍所有的会议，补充<strong>会议月份、会议地点</strong>，改写会议的名字格式<strong>注意补充届数，在前面写上Proc等细节</strong></li>\n<li>过一遍所有的会议和期刊，对相应的会议名、期刊名找缩写进行修改。参考网站：<a href=\"https://woodward.library.ubc.ca/research-help/journal-abbreviations/\">Science and Engineering Journal Abbreviations | Woodward Library (ubc.ca)</a></li>\n</ol>\n"},{"title":"Ns3 入门踩坑","date":"2022-10-18T14:11:24.000Z","author":"Lcy","_content":"\n# Ns3 一些基础的东西\n\n## 1. 为运行的ns3程序指定参数\n\n在ns3中如果使用了command line去获取读入的参数，例如对于程序段：\n\n```C++\n  CommandLine cmd (__FILE__);\n  cmd.AddValue (\"numNodePairs\", \"Number of eNodeBs + UE pairs\", numNodePairs);\n  cmd.AddValue (\"simTime\", \"Total duration of the simulation\", simTime);\n  cmd.AddValue (\"distance\", \"Distance between eNBs [m]\", distance);\n  cmd.AddValue (\"interPacketInterval\", \"Inter packet interval\", interPacketInterval);\n  cmd.AddValue (\"useCa\", \"Whether to use carrier aggregation.\", useCa);\n  cmd.AddValue (\"disableDl\", \"Disable downlink data flows\", disableDl);\n  cmd.AddValue (\"disableUl\", \"Disable uplink data flows\", disableUl);\n  cmd.AddValue (\"disablePl\", \"Disable data flows between peer UEs\", disablePl);\n  cmd.Parse (argc, argv);\n\n  printf(\"numNodePairs=%d\\n\",numNodePairs);  \n  printf(\"distance=%lf\\n\",distance);\n```\n\n如果我们希望指定numNodePairs参数或者distance参数，可以使用如下运行方式：\n\n```shell\n./ns3 run '<ns3-program> --arg1=value1 --arg2=value2 ...'\n```\n\n参考如上的tutorial给出的运行方式，可以输入如下指令：\n\n```shell\n./ns3 run \"scratch/lena-simple-epc.cc --numNodePairs=10 --distance=20\" --vis\n```\n\n\n\n## 2.Ns3可视化安装问题\n\n### Assert in TypeId::LookupByName\n\n报错示例：这个是可视化的安装问题。\n\n```shell\nassert failed. cond=\"uid != 0\", msg=\"Assert in TypeId::LookupByName: ns3::VisualSimulatorImpl not found\", file=/home/lcy/Desktop/ns3/ns-allinone-3.36.1/ns-3.36.1/src/core/model/type-id.cc, line=833\nterminate called without an active exception\n```\n\n[(14条消息) NS3报错assert failed. cond=\"uid != 0\", msg=\"Assert in TypeId::LookupByName: xxx not found\", file=../sr_蓝色瞬间的博客-CSDN博客](https://blog.csdn.net/easonchenys/article/details/42419445)\n\n然而这句话并没有什么用处，但是可以知道的是去掉运行命令的--vis可视化可以不报错。\n\n[ns3—可视化工具_三眼二郎的博客-CSDN博客_ns3可视化](https://blog.csdn.net/a6333230/article/details/108296948)\n\n可视化的前期安装。\n\n[PyViz - Nsnam](https://www.nsnam.org/mediawiki/index.php/PyViz#current_ns-3)\n\n[PyViz Installation (google.com)](https://groups.google.com/g/ns-3-users/c/2jTS4vDnsks/m/MnCuHwmcBQAJ)\n\n反正，这几个都试一下吧。\n\n\n\n然后，要怎么才能跑起来程序呢？那就是root用户+ns3.35，反正不能非root会跑不起vis，也不能root3.36，他不给你运行。嗯就是如此扯淡。\n\n![image-20221018221019689](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221018221019689.png)\n\n他喵总算可以可视化了。\n\n## 3. 建立一些小东西\n\n### I. 建立一个P2P连接\n\n使用`PointToPointHelper` 可以建立两个`Ptr<Node>`之间的P2P连接。\n\n```C++\n  // 创建一个放置信号远端的容器\n  NodeContainer remoteHostContainer;\n  // 创建remote_n个\n  uint32_t remote_n = 2;\n  remoteHostContainer.Create (remote_n);\n\n  //TO Confirm remoteHost是从容器中获取第一个远端。\n  Ptr<Node> remoteHost0 = remoteHostContainer.Get (0);\n  Ptr<Node> remoteHost1 = remoteHostContainer.Get (1);\n\n  std::cout <<\"Remote Host Nums -> \"<< remoteHostContainer.GetN() <<std::endl;\n  std::cout <<\"Remote Host 0 -> \" << remoteHostContainer.Get (0) <<std::endl;\n  std::cout <<\"Remote Host 1 -> \" << remoteHostContainer.Get (1) <<std::endl;\n  \n  // 初始化网络\n  InternetStackHelper internet;\n  // 根据远端容器建立网络internet\n  internet.Install (remoteHostContainer);\n\n  // 创建一个 PointToPointHelper p2ph以简化创建点对点网络\n  PointToPointHelper p2ph;\n  // 初始化相关参数，设置要传播到创建的每个 网络设备 的属性值。\n  p2ph.SetDeviceAttribute (\"DataRate\", DataRateValue (DataRate (\"100Gb/s\")));\n  p2ph.SetDeviceAttribute (\"Mtu\", UintegerValue (1500));\n  p2ph.SetChannelAttribute (\"Delay\", TimeValue (MilliSeconds (10))); // 10ms 延时\n  \n  NetDeviceContainer internetDevices = p2ph.Install (remoteHost0, remoteHost1);\n```\n\n\n\n![image-20221020190505670](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020190505670.png)\n\n### II. 创建几个enB或者UE\n\n```C++\n  NodeContainer ueNodes;\n  NodeContainer enbNodes;\n  ueNodes.Create (numNodePairs);\n  enbNodes.Create (numNodePairs);\n\n  // Install Mobility Model\n  // 这里初始化了节点对的初始位置。\n  Ptr<ListPositionAllocator> positionAlloc = CreateObject<ListPositionAllocator> ();\n  for (uint16_t i = 0; i < 4; i++)\n    {\n      positionAlloc->Add (Vector (50 * i, 0, 0));\n    }\n\n  MobilityHelper mobility; // 设置选项，即使用什么定位方案以及分配什么移动模型,将助手应用到 NodeContainer 以定位节点并为其分配移动模型\n  mobility.SetMobilityModel(\"ns3::ConstantPositionMobilityModel\");\n  //使用NS3 自带的位置初始化模型 MinX和MinY为初始位置，Delta X Delta Y 为节点之间的间距，Gridwidth为每行节点数目，layoutType为布局方式\n  mobility.SetPositionAllocator (positionAlloc);\n  mobility.Install(enbNodes);\n  mobility.Install(ueNodes);\n\n```\n\n\n\n![image-20221020191243471](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020191243471.png)\n\n### III. 创建一个核心网\n\n首先我们要创建一个核心网：\n\n```C++\n  Ptr<PointToPointEpcHelper> epcHelper = CreateObject<PointToPointEpcHelper> ();\n```\n\n![image-20221020193132200](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193132200.png)\n\n他会创建上图一样的一个拥有三个节点的普通的核心网。\n\n那么如何将核心网和UE连接呢？使用ltehelper去设置这个epc网络：\n\n```C++\n  lteHelper->SetEpcHelper (epcHelper);\n```\n\n![image-20221020193313753](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193313753.png)\n\n设置核心网后，他会自动与所有的enB基站进行连接。\n\n### IV.设定pgw和sgw节点位置\n\n同时，我们还可以给sgw以及pgw节点设定他们的位置\n\n```C++\n  MobilityHelper pos_EPC;  \n  Ptr<ListPositionAllocator> pos_sgw_node = CreateObject<ListPositionAllocator> ();\n  pos_sgw_node->Add(Vector (75, -20, 0));\n  Ptr<ListPositionAllocator> pos_pgw_node = CreateObject<ListPositionAllocator> ();\n  pos_pgw_node->Add(Vector (75, 50, 0));\n  mobility.SetMobilityModel(\"ns3::ConstantPositionMobilityModel\");\n  mobility.SetPositionAllocator (pos_sgw_node);\n  mobility.Install(sgw);\n  mobility.SetPositionAllocator (pos_pgw_node);\n  mobility.Install(pgw);\n```\n\n![image-20221020200538798](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020200538798.png)\n\n==这边有一个扯淡的地方，就是他提供的设定位置的工具只能不断的AddVector进去，他不能进行修改，这十分的麻烦，同时初始化EPC中的另一个节点，猜测为RH的节点似乎很难获取到。==\n\n\n\n### V. 设置所有Epc网络中节点的位置\n\n![image-20221020204135221](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020204135221.png)\n\n实现上述的效果的话，其实 。有点扯淡，我们注意`no-backhaul-epc-helper.cc`文件中没有获得第三个节点的方法，所以我们要对两个文件进行修改：\n\n`no-backhaul-epc-helper.h`中增加获得Mme节点的定义。\n\n```C++\n  virtual Ptr<Node> GetMmeNode () const;\n```\n\n`no-backhaul-epc-helper.cc`中新增获得Mme节点的方法。\n\n```C++\nPtr<Node>\nNoBackhaulEpcHelper::GetMmeNode () const\n{\n  return m_mme;\n}\n```\n\n之后就可以获得Mme节点并设定位置了~\n\n## 还在研究！！","source":"_posts/Ns3-入门踩坑.md","raw":"---\ntitle: Ns3 入门踩坑\ndate: 2022-10-18 22:11:24\ntags: Study\ncategories: Study\nauthor: Lcy\n---\n\n# Ns3 一些基础的东西\n\n## 1. 为运行的ns3程序指定参数\n\n在ns3中如果使用了command line去获取读入的参数，例如对于程序段：\n\n```C++\n  CommandLine cmd (__FILE__);\n  cmd.AddValue (\"numNodePairs\", \"Number of eNodeBs + UE pairs\", numNodePairs);\n  cmd.AddValue (\"simTime\", \"Total duration of the simulation\", simTime);\n  cmd.AddValue (\"distance\", \"Distance between eNBs [m]\", distance);\n  cmd.AddValue (\"interPacketInterval\", \"Inter packet interval\", interPacketInterval);\n  cmd.AddValue (\"useCa\", \"Whether to use carrier aggregation.\", useCa);\n  cmd.AddValue (\"disableDl\", \"Disable downlink data flows\", disableDl);\n  cmd.AddValue (\"disableUl\", \"Disable uplink data flows\", disableUl);\n  cmd.AddValue (\"disablePl\", \"Disable data flows between peer UEs\", disablePl);\n  cmd.Parse (argc, argv);\n\n  printf(\"numNodePairs=%d\\n\",numNodePairs);  \n  printf(\"distance=%lf\\n\",distance);\n```\n\n如果我们希望指定numNodePairs参数或者distance参数，可以使用如下运行方式：\n\n```shell\n./ns3 run '<ns3-program> --arg1=value1 --arg2=value2 ...'\n```\n\n参考如上的tutorial给出的运行方式，可以输入如下指令：\n\n```shell\n./ns3 run \"scratch/lena-simple-epc.cc --numNodePairs=10 --distance=20\" --vis\n```\n\n\n\n## 2.Ns3可视化安装问题\n\n### Assert in TypeId::LookupByName\n\n报错示例：这个是可视化的安装问题。\n\n```shell\nassert failed. cond=\"uid != 0\", msg=\"Assert in TypeId::LookupByName: ns3::VisualSimulatorImpl not found\", file=/home/lcy/Desktop/ns3/ns-allinone-3.36.1/ns-3.36.1/src/core/model/type-id.cc, line=833\nterminate called without an active exception\n```\n\n[(14条消息) NS3报错assert failed. cond=\"uid != 0\", msg=\"Assert in TypeId::LookupByName: xxx not found\", file=../sr_蓝色瞬间的博客-CSDN博客](https://blog.csdn.net/easonchenys/article/details/42419445)\n\n然而这句话并没有什么用处，但是可以知道的是去掉运行命令的--vis可视化可以不报错。\n\n[ns3—可视化工具_三眼二郎的博客-CSDN博客_ns3可视化](https://blog.csdn.net/a6333230/article/details/108296948)\n\n可视化的前期安装。\n\n[PyViz - Nsnam](https://www.nsnam.org/mediawiki/index.php/PyViz#current_ns-3)\n\n[PyViz Installation (google.com)](https://groups.google.com/g/ns-3-users/c/2jTS4vDnsks/m/MnCuHwmcBQAJ)\n\n反正，这几个都试一下吧。\n\n\n\n然后，要怎么才能跑起来程序呢？那就是root用户+ns3.35，反正不能非root会跑不起vis，也不能root3.36，他不给你运行。嗯就是如此扯淡。\n\n![image-20221018221019689](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221018221019689.png)\n\n他喵总算可以可视化了。\n\n## 3. 建立一些小东西\n\n### I. 建立一个P2P连接\n\n使用`PointToPointHelper` 可以建立两个`Ptr<Node>`之间的P2P连接。\n\n```C++\n  // 创建一个放置信号远端的容器\n  NodeContainer remoteHostContainer;\n  // 创建remote_n个\n  uint32_t remote_n = 2;\n  remoteHostContainer.Create (remote_n);\n\n  //TO Confirm remoteHost是从容器中获取第一个远端。\n  Ptr<Node> remoteHost0 = remoteHostContainer.Get (0);\n  Ptr<Node> remoteHost1 = remoteHostContainer.Get (1);\n\n  std::cout <<\"Remote Host Nums -> \"<< remoteHostContainer.GetN() <<std::endl;\n  std::cout <<\"Remote Host 0 -> \" << remoteHostContainer.Get (0) <<std::endl;\n  std::cout <<\"Remote Host 1 -> \" << remoteHostContainer.Get (1) <<std::endl;\n  \n  // 初始化网络\n  InternetStackHelper internet;\n  // 根据远端容器建立网络internet\n  internet.Install (remoteHostContainer);\n\n  // 创建一个 PointToPointHelper p2ph以简化创建点对点网络\n  PointToPointHelper p2ph;\n  // 初始化相关参数，设置要传播到创建的每个 网络设备 的属性值。\n  p2ph.SetDeviceAttribute (\"DataRate\", DataRateValue (DataRate (\"100Gb/s\")));\n  p2ph.SetDeviceAttribute (\"Mtu\", UintegerValue (1500));\n  p2ph.SetChannelAttribute (\"Delay\", TimeValue (MilliSeconds (10))); // 10ms 延时\n  \n  NetDeviceContainer internetDevices = p2ph.Install (remoteHost0, remoteHost1);\n```\n\n\n\n![image-20221020190505670](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020190505670.png)\n\n### II. 创建几个enB或者UE\n\n```C++\n  NodeContainer ueNodes;\n  NodeContainer enbNodes;\n  ueNodes.Create (numNodePairs);\n  enbNodes.Create (numNodePairs);\n\n  // Install Mobility Model\n  // 这里初始化了节点对的初始位置。\n  Ptr<ListPositionAllocator> positionAlloc = CreateObject<ListPositionAllocator> ();\n  for (uint16_t i = 0; i < 4; i++)\n    {\n      positionAlloc->Add (Vector (50 * i, 0, 0));\n    }\n\n  MobilityHelper mobility; // 设置选项，即使用什么定位方案以及分配什么移动模型,将助手应用到 NodeContainer 以定位节点并为其分配移动模型\n  mobility.SetMobilityModel(\"ns3::ConstantPositionMobilityModel\");\n  //使用NS3 自带的位置初始化模型 MinX和MinY为初始位置，Delta X Delta Y 为节点之间的间距，Gridwidth为每行节点数目，layoutType为布局方式\n  mobility.SetPositionAllocator (positionAlloc);\n  mobility.Install(enbNodes);\n  mobility.Install(ueNodes);\n\n```\n\n\n\n![image-20221020191243471](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020191243471.png)\n\n### III. 创建一个核心网\n\n首先我们要创建一个核心网：\n\n```C++\n  Ptr<PointToPointEpcHelper> epcHelper = CreateObject<PointToPointEpcHelper> ();\n```\n\n![image-20221020193132200](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193132200.png)\n\n他会创建上图一样的一个拥有三个节点的普通的核心网。\n\n那么如何将核心网和UE连接呢？使用ltehelper去设置这个epc网络：\n\n```C++\n  lteHelper->SetEpcHelper (epcHelper);\n```\n\n![image-20221020193313753](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193313753.png)\n\n设置核心网后，他会自动与所有的enB基站进行连接。\n\n### IV.设定pgw和sgw节点位置\n\n同时，我们还可以给sgw以及pgw节点设定他们的位置\n\n```C++\n  MobilityHelper pos_EPC;  \n  Ptr<ListPositionAllocator> pos_sgw_node = CreateObject<ListPositionAllocator> ();\n  pos_sgw_node->Add(Vector (75, -20, 0));\n  Ptr<ListPositionAllocator> pos_pgw_node = CreateObject<ListPositionAllocator> ();\n  pos_pgw_node->Add(Vector (75, 50, 0));\n  mobility.SetMobilityModel(\"ns3::ConstantPositionMobilityModel\");\n  mobility.SetPositionAllocator (pos_sgw_node);\n  mobility.Install(sgw);\n  mobility.SetPositionAllocator (pos_pgw_node);\n  mobility.Install(pgw);\n```\n\n![image-20221020200538798](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020200538798.png)\n\n==这边有一个扯淡的地方，就是他提供的设定位置的工具只能不断的AddVector进去，他不能进行修改，这十分的麻烦，同时初始化EPC中的另一个节点，猜测为RH的节点似乎很难获取到。==\n\n\n\n### V. 设置所有Epc网络中节点的位置\n\n![image-20221020204135221](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020204135221.png)\n\n实现上述的效果的话，其实 。有点扯淡，我们注意`no-backhaul-epc-helper.cc`文件中没有获得第三个节点的方法，所以我们要对两个文件进行修改：\n\n`no-backhaul-epc-helper.h`中增加获得Mme节点的定义。\n\n```C++\n  virtual Ptr<Node> GetMmeNode () const;\n```\n\n`no-backhaul-epc-helper.cc`中新增获得Mme节点的方法。\n\n```C++\nPtr<Node>\nNoBackhaulEpcHelper::GetMmeNode () const\n{\n  return m_mme;\n}\n```\n\n之后就可以获得Mme节点并设定位置了~\n\n## 还在研究！！","slug":"Ns3-入门踩坑","published":1,"updated":"2022-10-20T12:44:42.832Z","_id":"cl9eack0t0000cwtz2kt2e6ho","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Ns3-一些基础的东西\"><a href=\"#Ns3-一些基础的东西\" class=\"headerlink\" title=\"Ns3 一些基础的东西\"></a>Ns3 一些基础的东西</h1><h2 id=\"1-为运行的ns3程序指定参数\"><a href=\"#1-为运行的ns3程序指定参数\" class=\"headerlink\" title=\"1. 为运行的ns3程序指定参数\"></a>1. 为运行的ns3程序指定参数</h2><div class=\"story post-story\"><p>在ns3中如果使用了command line去获取读入的参数，例如对于程序段：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">CommandLine <span class=\"title\">cmd</span> <span class=\"params\">(__FILE__)</span></span>;</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;numNodePairs&quot;</span>, <span class=\"string\">&quot;Number of eNodeBs + UE pairs&quot;</span>, numNodePairs);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;simTime&quot;</span>, <span class=\"string\">&quot;Total duration of the simulation&quot;</span>, simTime);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;distance&quot;</span>, <span class=\"string\">&quot;Distance between eNBs [m]&quot;</span>, distance);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;interPacketInterval&quot;</span>, <span class=\"string\">&quot;Inter packet interval&quot;</span>, interPacketInterval);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;useCa&quot;</span>, <span class=\"string\">&quot;Whether to use carrier aggregation.&quot;</span>, useCa);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disableDl&quot;</span>, <span class=\"string\">&quot;Disable downlink data flows&quot;</span>, disableDl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disableUl&quot;</span>, <span class=\"string\">&quot;Disable uplink data flows&quot;</span>, disableUl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disablePl&quot;</span>, <span class=\"string\">&quot;Disable data flows between peer UEs&quot;</span>, disablePl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">Parse</span> (argc, argv);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;numNodePairs=%d\\n&quot;</span>,numNodePairs);  </span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;distance=%lf\\n&quot;</span>,distance);</span><br></pre></td></tr></table></figure>\n\n<p>如果我们希望指定numNodePairs参数或者distance参数，可以使用如下运行方式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ns3 run &#x27;&lt;ns3-program&gt; --arg1=value1 --arg2=value2 ...&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>参考如上的tutorial给出的运行方式，可以输入如下指令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ns3 run &quot;scratch/lena-simple-epc.cc --numNodePairs=10 --distance=20&quot; --vis</span><br></pre></td></tr></table></figure>\n\n\n\n</div><h2 id=\"2-Ns3可视化安装问题\"><a href=\"#2-Ns3可视化安装问题\" class=\"headerlink\" title=\"2.Ns3可视化安装问题\"></a>2.Ns3可视化安装问题</h2><div class=\"story post-story\"><h3 id=\"Assert-in-TypeId-LookupByName\"><a href=\"#Assert-in-TypeId-LookupByName\" class=\"headerlink\" title=\"Assert in TypeId::LookupByName\"></a>Assert in TypeId::LookupByName</h3><p>报错示例：这个是可视化的安装问题。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">assert failed. cond=&quot;uid != 0&quot;, msg=&quot;Assert in TypeId::LookupByName: ns3::VisualSimulatorImpl not found&quot;, file=/home/lcy/Desktop/ns3/ns-allinone-3.36.1/ns-3.36.1/src/core/model/type-id.cc, line=833</span><br><span class=\"line\">terminate called without an active exception</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://blog.csdn.net/easonchenys/article/details/42419445\">(14条消息) NS3报错assert failed. cond=”uid != 0”, msg=”Assert in TypeId::LookupByName: xxx not found”, file=../sr_蓝色瞬间的博客-CSDN博客</a></p>\n<p>然而这句话并没有什么用处，但是可以知道的是去掉运行命令的–vis可视化可以不报错。</p>\n<p><a href=\"https://blog.csdn.net/a6333230/article/details/108296948\">ns3—可视化工具_三眼二郎的博客-CSDN博客_ns3可视化</a></p>\n<p>可视化的前期安装。</p>\n<p><a href=\"https://www.nsnam.org/mediawiki/index.php/PyViz#current_ns-3\">PyViz - Nsnam</a></p>\n<p><a href=\"https://groups.google.com/g/ns-3-users/c/2jTS4vDnsks/m/MnCuHwmcBQAJ\">PyViz Installation (google.com)</a></p>\n<p>反正，这几个都试一下吧。</p>\n<p>然后，要怎么才能跑起来程序呢？那就是root用户+ns3.35，反正不能非root会跑不起vis，也不能root3.36，他不给你运行。嗯就是如此扯淡。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221018221019689.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221018221019689.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221018221019689\"></p>\n<p>他喵总算可以可视化了。</p>\n</div><h2 id=\"3-建立一些小东西\"><a href=\"#3-建立一些小东西\" class=\"headerlink\" title=\"3. 建立一些小东西\"></a>3. 建立一些小东西</h2><div class=\"story post-story\"><h3 id=\"I-建立一个P2P连接\"><a href=\"#I-建立一个P2P连接\" class=\"headerlink\" title=\"I. 建立一个P2P连接\"></a>I. 建立一个P2P连接</h3><p>使用<code>PointToPointHelper</code> 可以建立两个<code>Ptr&lt;Node&gt;</code>之间的P2P连接。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一个放置信号远端的容器</span></span><br><span class=\"line\">NodeContainer remoteHostContainer;</span><br><span class=\"line\"><span class=\"comment\">// 创建remote_n个</span></span><br><span class=\"line\"><span class=\"type\">uint32_t</span> remote_n = <span class=\"number\">2</span>;</span><br><span class=\"line\">remoteHostContainer.<span class=\"built_in\">Create</span> (remote_n);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//TO Confirm remoteHost是从容器中获取第一个远端。</span></span><br><span class=\"line\">Ptr&lt;Node&gt; remoteHost0 = remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">Ptr&lt;Node&gt; remoteHost1 = remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host Nums -&gt; &quot;</span>&lt;&lt; remoteHostContainer.<span class=\"built_in\">GetN</span>() &lt;&lt;std::endl;</span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host 0 -&gt; &quot;</span> &lt;&lt; remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">0</span>) &lt;&lt;std::endl;</span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host 1 -&gt; &quot;</span> &lt;&lt; remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">1</span>) &lt;&lt;std::endl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 初始化网络</span></span><br><span class=\"line\">InternetStackHelper internet;</span><br><span class=\"line\"><span class=\"comment\">// 根据远端容器建立网络internet</span></span><br><span class=\"line\">internet.<span class=\"built_in\">Install</span> (remoteHostContainer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建一个 PointToPointHelper p2ph以简化创建点对点网络</span></span><br><span class=\"line\">PointToPointHelper p2ph;</span><br><span class=\"line\"><span class=\"comment\">// 初始化相关参数，设置要传播到创建的每个 网络设备 的属性值。</span></span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetDeviceAttribute</span> (<span class=\"string\">&quot;DataRate&quot;</span>, <span class=\"built_in\">DataRateValue</span> (<span class=\"built_in\">DataRate</span> (<span class=\"string\">&quot;100Gb/s&quot;</span>)));</span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetDeviceAttribute</span> (<span class=\"string\">&quot;Mtu&quot;</span>, <span class=\"built_in\">UintegerValue</span> (<span class=\"number\">1500</span>));</span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetChannelAttribute</span> (<span class=\"string\">&quot;Delay&quot;</span>, <span class=\"built_in\">TimeValue</span> (<span class=\"built_in\">MilliSeconds</span> (<span class=\"number\">10</span>))); <span class=\"comment\">// 10ms 延时</span></span><br><span class=\"line\"></span><br><span class=\"line\">NetDeviceContainer internetDevices = p2ph.<span class=\"built_in\">Install</span> (remoteHost0, remoteHost1);</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020190505670.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020190505670.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020190505670\"></p>\n<h3 id=\"II-创建几个enB或者UE\"><a href=\"#II-创建几个enB或者UE\" class=\"headerlink\" title=\"II. 创建几个enB或者UE\"></a>II. 创建几个enB或者UE</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NodeContainer ueNodes;</span><br><span class=\"line\">NodeContainer enbNodes;</span><br><span class=\"line\">ueNodes.<span class=\"built_in\">Create</span> (numNodePairs);</span><br><span class=\"line\">enbNodes.<span class=\"built_in\">Create</span> (numNodePairs);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Install Mobility Model</span></span><br><span class=\"line\"><span class=\"comment\">// 这里初始化了节点对的初始位置。</span></span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; positionAlloc = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">uint16_t</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    positionAlloc-&gt;<span class=\"built_in\">Add</span> (<span class=\"built_in\">Vector</span> (<span class=\"number\">50</span> * i, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">MobilityHelper mobility; <span class=\"comment\">// 设置选项，即使用什么定位方案以及分配什么移动模型,将助手应用到 NodeContainer 以定位节点并为其分配移动模型</span></span><br><span class=\"line\">mobility.<span class=\"built_in\">SetMobilityModel</span>(<span class=\"string\">&quot;ns3::ConstantPositionMobilityModel&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//使用NS3 自带的位置初始化模型 MinX和MinY为初始位置，Delta X Delta Y 为节点之间的间距，Gridwidth为每行节点数目，layoutType为布局方式</span></span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (positionAlloc);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(enbNodes);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(ueNodes);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020191243471.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020191243471.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020191243471\"></p>\n<h3 id=\"III-创建一个核心网\"><a href=\"#III-创建一个核心网\" class=\"headerlink\" title=\"III. 创建一个核心网\"></a>III. 创建一个核心网</h3><p>首先我们要创建一个核心网：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ptr&lt;PointToPointEpcHelper&gt; epcHelper = <span class=\"built_in\">CreateObject</span>&lt;PointToPointEpcHelper&gt; ();</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193132200.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193132200.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020193132200\"></p>\n<p>他会创建上图一样的一个拥有三个节点的普通的核心网。</p>\n<p>那么如何将核心网和UE连接呢？使用ltehelper去设置这个epc网络：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lteHelper-&gt;<span class=\"built_in\">SetEpcHelper</span> (epcHelper);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193313753.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193313753.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020193313753\"></p>\n<p>设置核心网后，他会自动与所有的enB基站进行连接。</p>\n<h3 id=\"IV-设定pgw和sgw节点位置\"><a href=\"#IV-设定pgw和sgw节点位置\" class=\"headerlink\" title=\"IV.设定pgw和sgw节点位置\"></a>IV.设定pgw和sgw节点位置</h3><p>同时，我们还可以给sgw以及pgw节点设定他们的位置</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MobilityHelper pos_EPC;  </span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; pos_sgw_node = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\">pos_sgw_node-&gt;<span class=\"built_in\">Add</span>(<span class=\"built_in\">Vector</span> (<span class=\"number\">75</span>, <span class=\"number\">-20</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; pos_pgw_node = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\">pos_pgw_node-&gt;<span class=\"built_in\">Add</span>(<span class=\"built_in\">Vector</span> (<span class=\"number\">75</span>, <span class=\"number\">50</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetMobilityModel</span>(<span class=\"string\">&quot;ns3::ConstantPositionMobilityModel&quot;</span>);</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (pos_sgw_node);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(sgw);</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (pos_pgw_node);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(pgw);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020200538798.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020200538798.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020200538798\"></p>\n<p>==这边有一个扯淡的地方，就是他提供的设定位置的工具只能不断的AddVector进去，他不能进行修改，这十分的麻烦，同时初始化EPC中的另一个节点，猜测为RH的节点似乎很难获取到。==</p>\n<h3 id=\"V-设置所有Epc网络中节点的位置\"><a href=\"#V-设置所有Epc网络中节点的位置\" class=\"headerlink\" title=\"V. 设置所有Epc网络中节点的位置\"></a>V. 设置所有Epc网络中节点的位置</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020204135221.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020204135221.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020204135221\"></p>\n<p>实现上述的效果的话，其实 。有点扯淡，我们注意<code>no-backhaul-epc-helper.cc</code>文件中没有获得第三个节点的方法，所以我们要对两个文件进行修改：</p>\n<p><code>no-backhaul-epc-helper.h</code>中增加获得Mme节点的定义。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">virtual</span> Ptr&lt;Node&gt; <span class=\"title\">GetMmeNode</span> <span class=\"params\">()</span> <span class=\"type\">const</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>no-backhaul-epc-helper.cc</code>中新增获得Mme节点的方法。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Ptr&lt;Node&gt;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">NoBackhaulEpcHelper::GetMmeNode</span> <span class=\"params\">()</span> <span class=\"type\">const</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> m_mme;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后就可以获得Mme节点并设定位置了~</p>\n</div><h2 id=\"还在研究！！\"><a href=\"#还在研究！！\" class=\"headerlink\" title=\"还在研究！！\"></a>还在研究！！</h2><div class=\"story post-story\">\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Ns3-一些基础的东西\"><a href=\"#Ns3-一些基础的东西\" class=\"headerlink\" title=\"Ns3 一些基础的东西\"></a>Ns3 一些基础的东西</h1><h2 id=\"1-为运行的ns3程序指定参数\"><a href=\"#1-为运行的ns3程序指定参数\" class=\"headerlink\" title=\"1. 为运行的ns3程序指定参数\"></a>1. 为运行的ns3程序指定参数</h2><p>在ns3中如果使用了command line去获取读入的参数，例如对于程序段：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">CommandLine <span class=\"title\">cmd</span> <span class=\"params\">(__FILE__)</span></span>;</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;numNodePairs&quot;</span>, <span class=\"string\">&quot;Number of eNodeBs + UE pairs&quot;</span>, numNodePairs);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;simTime&quot;</span>, <span class=\"string\">&quot;Total duration of the simulation&quot;</span>, simTime);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;distance&quot;</span>, <span class=\"string\">&quot;Distance between eNBs [m]&quot;</span>, distance);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;interPacketInterval&quot;</span>, <span class=\"string\">&quot;Inter packet interval&quot;</span>, interPacketInterval);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;useCa&quot;</span>, <span class=\"string\">&quot;Whether to use carrier aggregation.&quot;</span>, useCa);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disableDl&quot;</span>, <span class=\"string\">&quot;Disable downlink data flows&quot;</span>, disableDl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disableUl&quot;</span>, <span class=\"string\">&quot;Disable uplink data flows&quot;</span>, disableUl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">AddValue</span> (<span class=\"string\">&quot;disablePl&quot;</span>, <span class=\"string\">&quot;Disable data flows between peer UEs&quot;</span>, disablePl);</span><br><span class=\"line\">cmd.<span class=\"built_in\">Parse</span> (argc, argv);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;numNodePairs=%d\\n&quot;</span>,numNodePairs);  </span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;distance=%lf\\n&quot;</span>,distance);</span><br></pre></td></tr></table></figure>\n\n<p>如果我们希望指定numNodePairs参数或者distance参数，可以使用如下运行方式：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ns3 run &#x27;&lt;ns3-program&gt; --arg1=value1 --arg2=value2 ...&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>参考如上的tutorial给出的运行方式，可以输入如下指令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./ns3 run &quot;scratch/lena-simple-epc.cc --numNodePairs=10 --distance=20&quot; --vis</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-Ns3可视化安装问题\"><a href=\"#2-Ns3可视化安装问题\" class=\"headerlink\" title=\"2.Ns3可视化安装问题\"></a>2.Ns3可视化安装问题</h2><h3 id=\"Assert-in-TypeId-LookupByName\"><a href=\"#Assert-in-TypeId-LookupByName\" class=\"headerlink\" title=\"Assert in TypeId::LookupByName\"></a>Assert in TypeId::LookupByName</h3><p>报错示例：这个是可视化的安装问题。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">assert failed. cond=&quot;uid != 0&quot;, msg=&quot;Assert in TypeId::LookupByName: ns3::VisualSimulatorImpl not found&quot;, file=/home/lcy/Desktop/ns3/ns-allinone-3.36.1/ns-3.36.1/src/core/model/type-id.cc, line=833</span><br><span class=\"line\">terminate called without an active exception</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://blog.csdn.net/easonchenys/article/details/42419445\">(14条消息) NS3报错assert failed. cond=”uid != 0”, msg=”Assert in TypeId::LookupByName: xxx not found”, file=../sr_蓝色瞬间的博客-CSDN博客</a></p>\n<p>然而这句话并没有什么用处，但是可以知道的是去掉运行命令的–vis可视化可以不报错。</p>\n<p><a href=\"https://blog.csdn.net/a6333230/article/details/108296948\">ns3—可视化工具_三眼二郎的博客-CSDN博客_ns3可视化</a></p>\n<p>可视化的前期安装。</p>\n<p><a href=\"https://www.nsnam.org/mediawiki/index.php/PyViz#current_ns-3\">PyViz - Nsnam</a></p>\n<p><a href=\"https://groups.google.com/g/ns-3-users/c/2jTS4vDnsks/m/MnCuHwmcBQAJ\">PyViz Installation (google.com)</a></p>\n<p>反正，这几个都试一下吧。</p>\n<p>然后，要怎么才能跑起来程序呢？那就是root用户+ns3.35，反正不能非root会跑不起vis，也不能root3.36，他不给你运行。嗯就是如此扯淡。</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221018221019689.png\" alt=\"image-20221018221019689\"></p>\n<p>他喵总算可以可视化了。</p>\n<h2 id=\"3-建立一些小东西\"><a href=\"#3-建立一些小东西\" class=\"headerlink\" title=\"3. 建立一些小东西\"></a>3. 建立一些小东西</h2><h3 id=\"I-建立一个P2P连接\"><a href=\"#I-建立一个P2P连接\" class=\"headerlink\" title=\"I. 建立一个P2P连接\"></a>I. 建立一个P2P连接</h3><p>使用<code>PointToPointHelper</code> 可以建立两个<code>Ptr&lt;Node&gt;</code>之间的P2P连接。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一个放置信号远端的容器</span></span><br><span class=\"line\">NodeContainer remoteHostContainer;</span><br><span class=\"line\"><span class=\"comment\">// 创建remote_n个</span></span><br><span class=\"line\"><span class=\"type\">uint32_t</span> remote_n = <span class=\"number\">2</span>;</span><br><span class=\"line\">remoteHostContainer.<span class=\"built_in\">Create</span> (remote_n);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//TO Confirm remoteHost是从容器中获取第一个远端。</span></span><br><span class=\"line\">Ptr&lt;Node&gt; remoteHost0 = remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">Ptr&lt;Node&gt; remoteHost1 = remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host Nums -&gt; &quot;</span>&lt;&lt; remoteHostContainer.<span class=\"built_in\">GetN</span>() &lt;&lt;std::endl;</span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host 0 -&gt; &quot;</span> &lt;&lt; remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">0</span>) &lt;&lt;std::endl;</span><br><span class=\"line\">std::cout &lt;&lt;<span class=\"string\">&quot;Remote Host 1 -&gt; &quot;</span> &lt;&lt; remoteHostContainer.<span class=\"built_in\">Get</span> (<span class=\"number\">1</span>) &lt;&lt;std::endl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 初始化网络</span></span><br><span class=\"line\">InternetStackHelper internet;</span><br><span class=\"line\"><span class=\"comment\">// 根据远端容器建立网络internet</span></span><br><span class=\"line\">internet.<span class=\"built_in\">Install</span> (remoteHostContainer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建一个 PointToPointHelper p2ph以简化创建点对点网络</span></span><br><span class=\"line\">PointToPointHelper p2ph;</span><br><span class=\"line\"><span class=\"comment\">// 初始化相关参数，设置要传播到创建的每个 网络设备 的属性值。</span></span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetDeviceAttribute</span> (<span class=\"string\">&quot;DataRate&quot;</span>, <span class=\"built_in\">DataRateValue</span> (<span class=\"built_in\">DataRate</span> (<span class=\"string\">&quot;100Gb/s&quot;</span>)));</span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetDeviceAttribute</span> (<span class=\"string\">&quot;Mtu&quot;</span>, <span class=\"built_in\">UintegerValue</span> (<span class=\"number\">1500</span>));</span><br><span class=\"line\">p2ph.<span class=\"built_in\">SetChannelAttribute</span> (<span class=\"string\">&quot;Delay&quot;</span>, <span class=\"built_in\">TimeValue</span> (<span class=\"built_in\">MilliSeconds</span> (<span class=\"number\">10</span>))); <span class=\"comment\">// 10ms 延时</span></span><br><span class=\"line\"></span><br><span class=\"line\">NetDeviceContainer internetDevices = p2ph.<span class=\"built_in\">Install</span> (remoteHost0, remoteHost1);</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020190505670.png\" alt=\"image-20221020190505670\"></p>\n<h3 id=\"II-创建几个enB或者UE\"><a href=\"#II-创建几个enB或者UE\" class=\"headerlink\" title=\"II. 创建几个enB或者UE\"></a>II. 创建几个enB或者UE</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NodeContainer ueNodes;</span><br><span class=\"line\">NodeContainer enbNodes;</span><br><span class=\"line\">ueNodes.<span class=\"built_in\">Create</span> (numNodePairs);</span><br><span class=\"line\">enbNodes.<span class=\"built_in\">Create</span> (numNodePairs);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Install Mobility Model</span></span><br><span class=\"line\"><span class=\"comment\">// 这里初始化了节点对的初始位置。</span></span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; positionAlloc = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">uint16_t</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    positionAlloc-&gt;<span class=\"built_in\">Add</span> (<span class=\"built_in\">Vector</span> (<span class=\"number\">50</span> * i, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">MobilityHelper mobility; <span class=\"comment\">// 设置选项，即使用什么定位方案以及分配什么移动模型,将助手应用到 NodeContainer 以定位节点并为其分配移动模型</span></span><br><span class=\"line\">mobility.<span class=\"built_in\">SetMobilityModel</span>(<span class=\"string\">&quot;ns3::ConstantPositionMobilityModel&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//使用NS3 自带的位置初始化模型 MinX和MinY为初始位置，Delta X Delta Y 为节点之间的间距，Gridwidth为每行节点数目，layoutType为布局方式</span></span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (positionAlloc);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(enbNodes);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(ueNodes);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020191243471.png\" alt=\"image-20221020191243471\"></p>\n<h3 id=\"III-创建一个核心网\"><a href=\"#III-创建一个核心网\" class=\"headerlink\" title=\"III. 创建一个核心网\"></a>III. 创建一个核心网</h3><p>首先我们要创建一个核心网：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ptr&lt;PointToPointEpcHelper&gt; epcHelper = <span class=\"built_in\">CreateObject</span>&lt;PointToPointEpcHelper&gt; ();</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193132200.png\" alt=\"image-20221020193132200\"></p>\n<p>他会创建上图一样的一个拥有三个节点的普通的核心网。</p>\n<p>那么如何将核心网和UE连接呢？使用ltehelper去设置这个epc网络：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lteHelper-&gt;<span class=\"built_in\">SetEpcHelper</span> (epcHelper);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020193313753.png\" alt=\"image-20221020193313753\"></p>\n<p>设置核心网后，他会自动与所有的enB基站进行连接。</p>\n<h3 id=\"IV-设定pgw和sgw节点位置\"><a href=\"#IV-设定pgw和sgw节点位置\" class=\"headerlink\" title=\"IV.设定pgw和sgw节点位置\"></a>IV.设定pgw和sgw节点位置</h3><p>同时，我们还可以给sgw以及pgw节点设定他们的位置</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MobilityHelper pos_EPC;  </span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; pos_sgw_node = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\">pos_sgw_node-&gt;<span class=\"built_in\">Add</span>(<span class=\"built_in\">Vector</span> (<span class=\"number\">75</span>, <span class=\"number\">-20</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">Ptr&lt;ListPositionAllocator&gt; pos_pgw_node = <span class=\"built_in\">CreateObject</span>&lt;ListPositionAllocator&gt; ();</span><br><span class=\"line\">pos_pgw_node-&gt;<span class=\"built_in\">Add</span>(<span class=\"built_in\">Vector</span> (<span class=\"number\">75</span>, <span class=\"number\">50</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetMobilityModel</span>(<span class=\"string\">&quot;ns3::ConstantPositionMobilityModel&quot;</span>);</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (pos_sgw_node);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(sgw);</span><br><span class=\"line\">mobility.<span class=\"built_in\">SetPositionAllocator</span> (pos_pgw_node);</span><br><span class=\"line\">mobility.<span class=\"built_in\">Install</span>(pgw);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020200538798.png\" alt=\"image-20221020200538798\"></p>\n<p>==这边有一个扯淡的地方，就是他提供的设定位置的工具只能不断的AddVector进去，他不能进行修改，这十分的麻烦，同时初始化EPC中的另一个节点，猜测为RH的节点似乎很难获取到。==</p>\n<h3 id=\"V-设置所有Epc网络中节点的位置\"><a href=\"#V-设置所有Epc网络中节点的位置\" class=\"headerlink\" title=\"V. 设置所有Epc网络中节点的位置\"></a>V. 设置所有Epc网络中节点的位置</h3><p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020204135221.png\" alt=\"image-20221020204135221\"></p>\n<p>实现上述的效果的话，其实 。有点扯淡，我们注意<code>no-backhaul-epc-helper.cc</code>文件中没有获得第三个节点的方法，所以我们要对两个文件进行修改：</p>\n<p><code>no-backhaul-epc-helper.h</code>中增加获得Mme节点的定义。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">virtual</span> Ptr&lt;Node&gt; <span class=\"title\">GetMmeNode</span> <span class=\"params\">()</span> <span class=\"type\">const</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>no-backhaul-epc-helper.cc</code>中新增获得Mme节点的方法。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Ptr&lt;Node&gt;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">NoBackhaulEpcHelper::GetMmeNode</span> <span class=\"params\">()</span> <span class=\"type\">const</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> m_mme;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后就可以获得Mme节点并设定位置了~</p>\n<h2 id=\"还在研究！！\"><a href=\"#还在研究！！\" class=\"headerlink\" title=\"还在研究！！\"></a>还在研究！！</h2>"},{"title":"Stable Diffusion Deployment(RTX3090)","date":"2022-09-11T06:17:02.000Z","author":"Lcy","_content":"\n# Stable Diffusion AI 作画本地部署\n\n[toc]\n\n## 1. 环境准备\n\n首先去Stable Diffusion的仓库下载代码并配置相应的conda环境。\n\n代码仓库：[CompVis/stable-diffusion (github.com)](https://github.com/CompVis/stable-diffusion)\n\n环境配置可以参考官方库提供的方法：\n\n```shell\nconda env create -f environment.yaml\nconda activate ldm\n```\n\n同时升级最新的latent diffusion可以：\n\n```shell\nconda install pytorch torchvision -c pytorch\npip install transformers==4.19.2 diffusers invisible-watermark\npip install -e .\n```\n\n## 新活来了 断更！\n\n部署了Novel AI 但是AI能画色图所以。。。。。Whatever ai.seujyh.cn提供给大家，但是可能绝大部分时间都是关掉的，避免出现法律问题","source":"_posts/Stable-Diffusion-Deployment-RTX3090.md","raw":"---\ntitle: Stable Diffusion Deployment(RTX3090)\ndate: 2022-09-11 14:17:02\ntags: Study\ncategories: Study\nauthor: Lcy\n---\n\n# Stable Diffusion AI 作画本地部署\n\n[toc]\n\n## 1. 环境准备\n\n首先去Stable Diffusion的仓库下载代码并配置相应的conda环境。\n\n代码仓库：[CompVis/stable-diffusion (github.com)](https://github.com/CompVis/stable-diffusion)\n\n环境配置可以参考官方库提供的方法：\n\n```shell\nconda env create -f environment.yaml\nconda activate ldm\n```\n\n同时升级最新的latent diffusion可以：\n\n```shell\nconda install pytorch torchvision -c pytorch\npip install transformers==4.19.2 diffusers invisible-watermark\npip install -e .\n```\n\n## 新活来了 断更！\n\n部署了Novel AI 但是AI能画色图所以。。。。。Whatever ai.seujyh.cn提供给大家，但是可能绝大部分时间都是关掉的，避免出现法律问题","slug":"Stable-Diffusion-Deployment-RTX3090","published":1,"updated":"2022-10-20T10:30:52.731Z","_id":"cl9eack0x0003cwtz2p0n1dus","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Stable-Diffusion-AI-作画本地部署\"><a href=\"#Stable-Diffusion-AI-作画本地部署\" class=\"headerlink\" title=\"Stable Diffusion AI 作画本地部署\"></a>Stable Diffusion AI 作画本地部署</h1><p>[toc]</p>\n<h2 id=\"1-环境准备\"><a href=\"#1-环境准备\" class=\"headerlink\" title=\"1. 环境准备\"></a>1. 环境准备</h2><div class=\"story post-story\"><p>首先去Stable Diffusion的仓库下载代码并配置相应的conda环境。</p>\n<p>代码仓库：<a href=\"https://github.com/CompVis/stable-diffusion\">CompVis/stable-diffusion (github.com)</a></p>\n<p>环境配置可以参考官方库提供的方法：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda env create -f environment.yaml</span><br><span class=\"line\">conda activate ldm</span><br></pre></td></tr></table></figure>\n\n<p>同时升级最新的latent diffusion可以：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pytorch torchvision -c pytorch</span><br><span class=\"line\">pip install transformers==4.19.2 diffusers invisible-watermark</span><br><span class=\"line\">pip install -e .</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"新活来了-断更！\"><a href=\"#新活来了-断更！\" class=\"headerlink\" title=\"新活来了 断更！\"></a>新活来了 断更！</h2><div class=\"story post-story\"><p>部署了Novel AI 但是AI能画色图所以。。。。。Whatever ai.seujyh.cn提供给大家，但是可能绝大部分时间都是关掉的，避免出现法律问题</p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"Stable-Diffusion-AI-作画本地部署\"><a href=\"#Stable-Diffusion-AI-作画本地部署\" class=\"headerlink\" title=\"Stable Diffusion AI 作画本地部署\"></a>Stable Diffusion AI 作画本地部署</h1><p>[toc]</p>\n<h2 id=\"1-环境准备\"><a href=\"#1-环境准备\" class=\"headerlink\" title=\"1. 环境准备\"></a>1. 环境准备</h2><p>首先去Stable Diffusion的仓库下载代码并配置相应的conda环境。</p>\n<p>代码仓库：<a href=\"https://github.com/CompVis/stable-diffusion\">CompVis/stable-diffusion (github.com)</a></p>\n<p>环境配置可以参考官方库提供的方法：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda env create -f environment.yaml</span><br><span class=\"line\">conda activate ldm</span><br></pre></td></tr></table></figure>\n\n<p>同时升级最新的latent diffusion可以：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pytorch torchvision -c pytorch</span><br><span class=\"line\">pip install transformers==4.19.2 diffusers invisible-watermark</span><br><span class=\"line\">pip install -e .</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"新活来了-断更！\"><a href=\"#新活来了-断更！\" class=\"headerlink\" title=\"新活来了 断更！\"></a>新活来了 断更！</h2><p>部署了Novel AI 但是AI能画色图所以。。。。。Whatever ai.seujyh.cn提供给大家，但是可能绝大部分时间都是关掉的，避免出现法律问题</p>\n"},{"title":"XRDP 安装注意事项","date":"2022-10-20T10:31:21.000Z","author":"Lcy","_content":"# XRDP 安装注意事项\n## XRdp 安装\n\n[如何在Ubuntu 20.04 上安装 Xrdp 服务器（远程桌面）-阿里云开发者社区 (aliyun.com)](https://developer.aliyun.com/article/762186)\n\n```shell\nsudo apt install xubuntu-desktop\n```\n\n## XRdp 设置允许root登录\n\n修改配置文件：\n\n```shell\nvim /etc/xdrp/startwm.sh\n```\n\n\n\n![image-20221020183421120](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020183421120.png)\n\n如图位置增加如下两句话：\n\n```shell\nunset DBUS_SESSION_BUS_ADDRESS\nunset XDG_RUNTIME_DIR\n```\n\n重启xrdp服务\n\n```shell\nsystemctl restart xrdp.service\n```\n\n","source":"_posts/XRDP-安装注意事项.md","raw":"---\ntitle: XRDP 安装注意事项\ndate: 2022-10-20 18:31:21\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n# XRDP 安装注意事项\n## XRdp 安装\n\n[如何在Ubuntu 20.04 上安装 Xrdp 服务器（远程桌面）-阿里云开发者社区 (aliyun.com)](https://developer.aliyun.com/article/762186)\n\n```shell\nsudo apt install xubuntu-desktop\n```\n\n## XRdp 设置允许root登录\n\n修改配置文件：\n\n```shell\nvim /etc/xdrp/startwm.sh\n```\n\n\n\n![image-20221020183421120](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020183421120.png)\n\n如图位置增加如下两句话：\n\n```shell\nunset DBUS_SESSION_BUS_ADDRESS\nunset XDG_RUNTIME_DIR\n```\n\n重启xrdp服务\n\n```shell\nsystemctl restart xrdp.service\n```\n\n","slug":"XRDP-安装注意事项","published":1,"updated":"2022-10-20T10:37:48.858Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl9gxjcp000009ctz6ayu5x1b","content":"<h1 id=\"XRDP-安装注意事项\"><a href=\"#XRDP-安装注意事项\" class=\"headerlink\" title=\"XRDP 安装注意事项\"></a>XRDP 安装注意事项</h1><h2 id=\"XRdp-安装\"><a href=\"#XRdp-安装\" class=\"headerlink\" title=\"XRdp 安装\"></a>XRdp 安装</h2><div class=\"story post-story\"><p><a href=\"https://developer.aliyun.com/article/762186\">如何在Ubuntu 20.04 上安装 Xrdp 服务器（远程桌面）-阿里云开发者社区 (aliyun.com)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install xubuntu-desktop</span><br></pre></td></tr></table></figure>\n\n</div><h2 id=\"XRdp-设置允许root登录\"><a href=\"#XRdp-设置允许root登录\" class=\"headerlink\" title=\"XRdp 设置允许root登录\"></a>XRdp 设置允许root登录</h2><div class=\"story post-story\"><p>修改配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/xdrp/startwm.sh</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020183421120.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020183421120.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20221020183421120\"></p>\n<p>如图位置增加如下两句话：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class=\"line\">unset XDG_RUNTIME_DIR</span><br></pre></td></tr></table></figure>\n\n<p>重启xrdp服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart xrdp.service</span><br></pre></td></tr></table></figure>\n\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"XRDP-安装注意事项\"><a href=\"#XRDP-安装注意事项\" class=\"headerlink\" title=\"XRDP 安装注意事项\"></a>XRDP 安装注意事项</h1><h2 id=\"XRdp-安装\"><a href=\"#XRdp-安装\" class=\"headerlink\" title=\"XRdp 安装\"></a>XRdp 安装</h2><p><a href=\"https://developer.aliyun.com/article/762186\">如何在Ubuntu 20.04 上安装 Xrdp 服务器（远程桌面）-阿里云开发者社区 (aliyun.com)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install xubuntu-desktop</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"XRdp-设置允许root登录\"><a href=\"#XRdp-设置允许root登录\" class=\"headerlink\" title=\"XRdp 设置允许root登录\"></a>XRdp 设置允许root登录</h2><p>修改配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/xdrp/startwm.sh</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20221020183421120.png\" alt=\"image-20221020183421120\"></p>\n<p>如图位置增加如下两句话：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class=\"line\">unset XDG_RUNTIME_DIR</span><br></pre></td></tr></table></figure>\n\n<p>重启xrdp服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart xrdp.service</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Ubuntu20.04批量添加用户","date":"2022-11-16T08:41:52.000Z","author":"Lcy","_content":"\n\n\n\n\n网上有很多批量增加用户的方式，但是还是看到的有一个方式最为简单，也最为有效：\n\n### （1）先编辑一个文本用户文件\n\n首先创建一个文本文件：`serc.txt`\n\n由于/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：\n\n```\n用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell\n```\n\n要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号，也可以设置统一初始密码。比如：\n\n```shell\n user1:123456:800:100:user:/home/user1:/bin/bash\n user2:123456:801:100:user:/home/user2:/bin/bash\n user3:123456:802:100:user:/home/user3:/bin/bash\n user4:123456:802:100:user:/home/user4:/bin/bash\n```\n\n### （2）以root身份执行命令 `/usr/sbin/newusers`\n\n从刚创建的用户文件`serc.txt`中导入数据，创建用户命令：\n\n```\nnewusers < serc.txt\n```\n\n### （3）查看是否创建成功：\n\n```\nls /home\n```\n\n### （4）权限修改：\n\n通常权限可修改为700，所以：\n\n```shell\nchmod 700 user1\nchmod 700 user2\nchmod 700 user3\nchmod 700 user4\n```\n\n### Reference\n\n[Ubuntu 20.04下批量添加用户 - walden_yin - 博客园 (cnblogs.com)](https://www.cnblogs.com/Deskew/p/14469031.html)\n","source":"_posts/Ubuntu20-04批量添加用户.md","raw":"---\ntitle: Ubuntu20.04批量添加用户\ndate: 2022-11-16 16:41:52\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n\n\n\n\n网上有很多批量增加用户的方式，但是还是看到的有一个方式最为简单，也最为有效：\n\n### （1）先编辑一个文本用户文件\n\n首先创建一个文本文件：`serc.txt`\n\n由于/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：\n\n```\n用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell\n```\n\n要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号，也可以设置统一初始密码。比如：\n\n```shell\n user1:123456:800:100:user:/home/user1:/bin/bash\n user2:123456:801:100:user:/home/user2:/bin/bash\n user3:123456:802:100:user:/home/user3:/bin/bash\n user4:123456:802:100:user:/home/user4:/bin/bash\n```\n\n### （2）以root身份执行命令 `/usr/sbin/newusers`\n\n从刚创建的用户文件`serc.txt`中导入数据，创建用户命令：\n\n```\nnewusers < serc.txt\n```\n\n### （3）查看是否创建成功：\n\n```\nls /home\n```\n\n### （4）权限修改：\n\n通常权限可修改为700，所以：\n\n```shell\nchmod 700 user1\nchmod 700 user2\nchmod 700 user3\nchmod 700 user4\n```\n\n### Reference\n\n[Ubuntu 20.04下批量添加用户 - walden_yin - 博客园 (cnblogs.com)](https://www.cnblogs.com/Deskew/p/14469031.html)\n","slug":"Ubuntu20-04批量添加用户","published":1,"updated":"2022-11-16T08:45:53.610Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clajefjoe0000y4tzfetb3ag7","content":"<p>网上有很多批量增加用户的方式，但是还是看到的有一个方式最为简单，也最为有效：</p>\n<h3 id=\"（1）先编辑一个文本用户文件\"><a href=\"#（1）先编辑一个文本用户文件\" class=\"headerlink\" title=\"（1）先编辑一个文本用户文件\"></a>（1）先编辑一个文本用户文件</h3><p>首先创建一个文本文件：<code>serc.txt</code></p>\n<p>由于/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</span><br></pre></td></tr></table></figure>\n\n<p>要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号，也可以设置统一初始密码。比如：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user1:123456:800:100:user:/home/user1:/bin/bash</span><br><span class=\"line\">user2:123456:801:100:user:/home/user2:/bin/bash</span><br><span class=\"line\">user3:123456:802:100:user:/home/user3:/bin/bash</span><br><span class=\"line\">user4:123456:802:100:user:/home/user4:/bin/bash</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（2）以root身份执行命令-usr-sbin-newusers\"><a href=\"#（2）以root身份执行命令-usr-sbin-newusers\" class=\"headerlink\" title=\"（2）以root身份执行命令 /usr/sbin/newusers\"></a>（2）以root身份执行命令 <code>/usr/sbin/newusers</code></h3><p>从刚创建的用户文件<code>serc.txt</code>中导入数据，创建用户命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">newusers &lt; serc.txt</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（3）查看是否创建成功：\"><a href=\"#（3）查看是否创建成功：\" class=\"headerlink\" title=\"（3）查看是否创建成功：\"></a>（3）查看是否创建成功：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls /home</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（4）权限修改：\"><a href=\"#（4）权限修改：\" class=\"headerlink\" title=\"（4）权限修改：\"></a>（4）权限修改：</h3><p>通常权限可修改为700，所以：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 700 user1</span><br><span class=\"line\">chmod 700 user2</span><br><span class=\"line\">chmod 700 user3</span><br><span class=\"line\">chmod 700 user4</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p><a href=\"https://www.cnblogs.com/Deskew/p/14469031.html\">Ubuntu 20.04下批量添加用户 - walden_yin - 博客园 (cnblogs.com)</a></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p>网上有很多批量增加用户的方式，但是还是看到的有一个方式最为简单，也最为有效：</p>\n<h3 id=\"（1）先编辑一个文本用户文件\"><a href=\"#（1）先编辑一个文本用户文件\" class=\"headerlink\" title=\"（1）先编辑一个文本用户文件\"></a>（1）先编辑一个文本用户文件</h3><p>首先创建一个文本文件：<code>serc.txt</code></p>\n<p>由于/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</span><br></pre></td></tr></table></figure>\n\n<p>要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号，也可以设置统一初始密码。比如：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user1:123456:800:100:user:/home/user1:/bin/bash</span><br><span class=\"line\">user2:123456:801:100:user:/home/user2:/bin/bash</span><br><span class=\"line\">user3:123456:802:100:user:/home/user3:/bin/bash</span><br><span class=\"line\">user4:123456:802:100:user:/home/user4:/bin/bash</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（2）以root身份执行命令-usr-sbin-newusers\"><a href=\"#（2）以root身份执行命令-usr-sbin-newusers\" class=\"headerlink\" title=\"（2）以root身份执行命令 /usr/sbin/newusers\"></a>（2）以root身份执行命令 <code>/usr/sbin/newusers</code></h3><p>从刚创建的用户文件<code>serc.txt</code>中导入数据，创建用户命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">newusers &lt; serc.txt</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（3）查看是否创建成功：\"><a href=\"#（3）查看是否创建成功：\" class=\"headerlink\" title=\"（3）查看是否创建成功：\"></a>（3）查看是否创建成功：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls /home</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"（4）权限修改：\"><a href=\"#（4）权限修改：\" class=\"headerlink\" title=\"（4）权限修改：\"></a>（4）权限修改：</h3><p>通常权限可修改为700，所以：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 700 user1</span><br><span class=\"line\">chmod 700 user2</span><br><span class=\"line\">chmod 700 user3</span><br><span class=\"line\">chmod 700 user4</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p><a href=\"https://www.cnblogs.com/Deskew/p/14469031.html\">Ubuntu 20.04下批量添加用户 - walden_yin - 博客园 (cnblogs.com)</a></p>\n"},{"title":"ubuntu本地搭建sui测试链","date":"2022-10-25T02:16:43.000Z","author":"Lcy","_content":"\n sui官网：[Install Sui to Build | Sui Docs](https://docs.sui.io/build/install)\n\n如果看官网觉得麻烦那就按照如下的命令直接运行就ok了：\n\n```shell\n# 更新源\napt update\napt upgrade\n\n# 安装curl\napt install curl\n\n# 安装rust & cargo\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n\n# 安装libssl-dev\napt-get install libssl-dev\n\n# 安装libclang-dev\napt-get install libclang-dev\n\n# 安装sui \ncargo install --locked --git https://github.com/MystenLabs/sui.git --branch devnet sui sui-node\n\n```\n\n","source":"_posts/ubuntu本地搭建sui测试链.md","raw":"---\ntitle: ubuntu本地搭建sui测试链\ndate: 2022-10-25 10:16:43\ntags: Study\ncategories: Study\nauthor: Lcy\n---\n\n sui官网：[Install Sui to Build | Sui Docs](https://docs.sui.io/build/install)\n\n如果看官网觉得麻烦那就按照如下的命令直接运行就ok了：\n\n```shell\n# 更新源\napt update\napt upgrade\n\n# 安装curl\napt install curl\n\n# 安装rust & cargo\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n\n# 安装libssl-dev\napt-get install libssl-dev\n\n# 安装libclang-dev\napt-get install libclang-dev\n\n# 安装sui \ncargo install --locked --git https://github.com/MystenLabs/sui.git --branch devnet sui sui-node\n\n```\n\n","slug":"ubuntu本地搭建sui测试链","published":1,"updated":"2022-10-25T02:41:20.243Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clajefjoj0003y4tz95i1cg77","content":"<p> sui官网：<a href=\"https://docs.sui.io/build/install\">Install Sui to Build | Sui Docs</a></p>\n<p>如果看官网觉得麻烦那就按照如下的命令直接运行就ok了：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新源</span></span><br><span class=\"line\">apt update</span><br><span class=\"line\">apt upgrade</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装curl</span></span><br><span class=\"line\">apt install curl</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rust &amp; cargo</span></span><br><span class=\"line\">curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装libssl-dev</span></span><br><span class=\"line\">apt-get install libssl-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装libclang-dev</span></span><br><span class=\"line\">apt-get install libclang-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装sui</span> </span><br><span class=\"line\">cargo install --locked --git https://github.com/MystenLabs/sui.git --branch devnet sui sui-node</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<p> sui官网：<a href=\"https://docs.sui.io/build/install\">Install Sui to Build | Sui Docs</a></p>\n<p>如果看官网觉得麻烦那就按照如下的命令直接运行就ok了：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新源</span></span><br><span class=\"line\">apt update</span><br><span class=\"line\">apt upgrade</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装curl</span></span><br><span class=\"line\">apt install curl</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rust &amp; cargo</span></span><br><span class=\"line\">curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装libssl-dev</span></span><br><span class=\"line\">apt-get install libssl-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装libclang-dev</span></span><br><span class=\"line\">apt-get install libclang-dev</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装sui</span> </span><br><span class=\"line\">cargo install --locked --git https://github.com/MystenLabs/sui.git --branch devnet sui sui-node</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"在mac上部署mlc-chat","date":"2023-05-03T09:49:54.000Z","author":"Lcy","_content":"\n## Mlc-Chat部署\n\nMLC LLM 是一种通用解决方案，它允许将任何语言模型本地部署在一组不同的硬件后端和本地应用程序上，此外还有一个高效的框架，供每个人进一步优化自己用例的模型性能。**一切都在本地运行，无需服务器支持，并通过手机和笔记本电脑上的本地 GPU 加速**\n\n然后这个我试了一下在M2 的mac上部署，主要也只是测试一下能不能用，实际上就是能用，但只能用一点点，对话能力不够强，比较凑合，中文能力只支持繁体。挺辣的一个小模型。\n\n这玩意官网的部署指导实测了非常顺利没有什么环境依赖的问题，只要有conda就好了：\n\n```shell\n# Create a new conda environment and activate the environment.\nconda create -n mlc-chat\nconda activate mlc-chat\n\n# Install Git and Git-LFS, which is used for downloading the model weights\n# from Hugging Face.\nconda install git git-lfs\n\n# Install the chat CLI app from Conda.\nconda install -c mlc-ai -c conda-forge mlc-chat-nightly\n\n# Create a directory, download the model weights from HuggingFace, and download the binary libraries\n# from GitHub.\nmkdir -p dist\ngit lfs install\ngit clone https://huggingface.co/mlc-ai/demo-vicuna-v1-7b-int3 dist/vicuna-v1-7b\ngit clone https://github.com/mlc-ai/binary-mlc-llm-libs.git dist/lib\n\n# Enter this line and enjoy chatting with the bot running natively on your machine!\nmlc_chat_cli\n```\n\n\n\n效果图：（注意要在创建的目录下运行，比如我是在`/AIGC/mlcchat`目录下运行哈（给自己备忘））\n\n![image-20230503175658004](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20230503175658004.png)\n\n## Reference\n\n[开源 AI 聊天机器人 MLC LLM 发布](https://www.ithome.com/0/690/261.htm)\n\nhttps://mlc.ai/mlc-llm/\n","source":"_posts/在mac上部署mlc-chat.md","raw":"---\ntitle: 在mac上部署mlc-chat\ndate: 2023-05-03 17:49:54\ntags: AI\ncategories: AI\nauthor: Lcy\n---\n\n## Mlc-Chat部署\n\nMLC LLM 是一种通用解决方案，它允许将任何语言模型本地部署在一组不同的硬件后端和本地应用程序上，此外还有一个高效的框架，供每个人进一步优化自己用例的模型性能。**一切都在本地运行，无需服务器支持，并通过手机和笔记本电脑上的本地 GPU 加速**\n\n然后这个我试了一下在M2 的mac上部署，主要也只是测试一下能不能用，实际上就是能用，但只能用一点点，对话能力不够强，比较凑合，中文能力只支持繁体。挺辣的一个小模型。\n\n这玩意官网的部署指导实测了非常顺利没有什么环境依赖的问题，只要有conda就好了：\n\n```shell\n# Create a new conda environment and activate the environment.\nconda create -n mlc-chat\nconda activate mlc-chat\n\n# Install Git and Git-LFS, which is used for downloading the model weights\n# from Hugging Face.\nconda install git git-lfs\n\n# Install the chat CLI app from Conda.\nconda install -c mlc-ai -c conda-forge mlc-chat-nightly\n\n# Create a directory, download the model weights from HuggingFace, and download the binary libraries\n# from GitHub.\nmkdir -p dist\ngit lfs install\ngit clone https://huggingface.co/mlc-ai/demo-vicuna-v1-7b-int3 dist/vicuna-v1-7b\ngit clone https://github.com/mlc-ai/binary-mlc-llm-libs.git dist/lib\n\n# Enter this line and enjoy chatting with the bot running natively on your machine!\nmlc_chat_cli\n```\n\n\n\n效果图：（注意要在创建的目录下运行，比如我是在`/AIGC/mlcchat`目录下运行哈（给自己备忘））\n\n![image-20230503175658004](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20230503175658004.png)\n\n## Reference\n\n[开源 AI 聊天机器人 MLC LLM 发布](https://www.ithome.com/0/690/261.htm)\n\nhttps://mlc.ai/mlc-llm/\n","slug":"在mac上部署mlc-chat","published":1,"updated":"2023-05-03T09:57:49.016Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clh7iz3xd0000g8fze9853ven","content":"<h2 id=\"Mlc-Chat部署\"><a href=\"#Mlc-Chat部署\" class=\"headerlink\" title=\"Mlc-Chat部署\"></a>Mlc-Chat部署</h2><div class=\"story post-story\"><p>MLC LLM 是一种通用解决方案，它允许将任何语言模型本地部署在一组不同的硬件后端和本地应用程序上，此外还有一个高效的框架，供每个人进一步优化自己用例的模型性能。<strong>一切都在本地运行，无需服务器支持，并通过手机和笔记本电脑上的本地 GPU 加速</strong></p>\n<p>然后这个我试了一下在M2 的mac上部署，主要也只是测试一下能不能用，实际上就是能用，但只能用一点点，对话能力不够强，比较凑合，中文能力只支持繁体。挺辣的一个小模型。</p>\n<p>这玩意官网的部署指导实测了非常顺利没有什么环境依赖的问题，只要有conda就好了：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Create a new conda environment and activate the environment.</span></span><br><span class=\"line\">conda create -n mlc-chat</span><br><span class=\"line\">conda activate mlc-chat</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Install Git and Git-LFS, <span class=\"built_in\">which</span> is used <span class=\"keyword\">for</span> downloading the model weights</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">from Hugging Face.</span></span><br><span class=\"line\">conda install git git-lfs</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Install the chat CLI app from Conda.</span></span><br><span class=\"line\">conda install -c mlc-ai -c conda-forge mlc-chat-nightly</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Create a directory, download the model weights from HuggingFace, and download the binary libraries</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">from GitHub.</span></span><br><span class=\"line\">mkdir -p dist</span><br><span class=\"line\">git lfs install</span><br><span class=\"line\">git clone https://huggingface.co/mlc-ai/demo-vicuna-v1-7b-int3 dist/vicuna-v1-7b</span><br><span class=\"line\">git clone https://github.com/mlc-ai/binary-mlc-llm-libs.git dist/lib</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Enter this line and enjoy chatting with the bot running natively on your machine!</span></span><br><span class=\"line\">mlc_chat_cli</span><br></pre></td></tr></table></figure>\n\n\n\n<p>效果图：（注意要在创建的目录下运行，比如我是在<code>/AIGC/mlcchat</code>目录下运行哈（给自己备忘））</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20230503175658004.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20230503175658004.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"image-20230503175658004\"></p>\n</div><h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><div class=\"story post-story\"><p><a href=\"https://www.ithome.com/0/690/261.htm\">开源 AI 聊天机器人 MLC LLM 发布</a></p>\n<p><a href=\"https://mlc.ai/mlc-llm/\">https://mlc.ai/mlc-llm/</a></p>\n\n</div>","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h2 id=\"Mlc-Chat部署\"><a href=\"#Mlc-Chat部署\" class=\"headerlink\" title=\"Mlc-Chat部署\"></a>Mlc-Chat部署</h2><p>MLC LLM 是一种通用解决方案，它允许将任何语言模型本地部署在一组不同的硬件后端和本地应用程序上，此外还有一个高效的框架，供每个人进一步优化自己用例的模型性能。<strong>一切都在本地运行，无需服务器支持，并通过手机和笔记本电脑上的本地 GPU 加速</strong></p>\n<p>然后这个我试了一下在M2 的mac上部署，主要也只是测试一下能不能用，实际上就是能用，但只能用一点点，对话能力不够强，比较凑合，中文能力只支持繁体。挺辣的一个小模型。</p>\n<p>这玩意官网的部署指导实测了非常顺利没有什么环境依赖的问题，只要有conda就好了：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Create a new conda environment and activate the environment.</span></span><br><span class=\"line\">conda create -n mlc-chat</span><br><span class=\"line\">conda activate mlc-chat</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Install Git and Git-LFS, <span class=\"built_in\">which</span> is used <span class=\"keyword\">for</span> downloading the model weights</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">from Hugging Face.</span></span><br><span class=\"line\">conda install git git-lfs</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Install the chat CLI app from Conda.</span></span><br><span class=\"line\">conda install -c mlc-ai -c conda-forge mlc-chat-nightly</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Create a directory, download the model weights from HuggingFace, and download the binary libraries</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">from GitHub.</span></span><br><span class=\"line\">mkdir -p dist</span><br><span class=\"line\">git lfs install</span><br><span class=\"line\">git clone https://huggingface.co/mlc-ai/demo-vicuna-v1-7b-int3 dist/vicuna-v1-7b</span><br><span class=\"line\">git clone https://github.com/mlc-ai/binary-mlc-llm-libs.git dist/lib</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Enter this line and enjoy chatting with the bot running natively on your machine!</span></span><br><span class=\"line\">mlc_chat_cli</span><br></pre></td></tr></table></figure>\n\n\n\n<p>效果图：（注意要在创建的目录下运行，比如我是在<code>/AIGC/mlcchat</code>目录下运行哈（给自己备忘））</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20230503175658004.png\" alt=\"image-20230503175658004\"></p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://www.ithome.com/0/690/261.htm\">开源 AI 聊天机器人 MLC LLM 发布</a></p>\n<p><a href=\"https://mlc.ai/mlc-llm/\">https://mlc.ai/mlc-llm/</a></p>\n"},{"title":"ubuntu安装kafka","date":"2023-07-09T07:15:01.000Z","author":"Lcy","_content":"\n# 0. kafka简介\n\n### 1.基本概念\n\n　　Kafka 是一个分布式的基于发布/订阅消息系统，主要应用于大数据实时处理领域，其官网是：http://kafka.apache.org/。Kafka 是一个分布式、支持分区的（Partition）、多副本的（Replica），基于 ZooKeeper 协调的发布/订阅消息系统。\n\n　　Kafka 有以下三个基本概念：\n\n- Kafka 作为一个集群运行在一个或多个服务器上；\n- Kafka 集群存储的消息是以 Topic 为类别记录的；\n- 每个消息是由一个 Key，一个 Value 和时间戳构成。\n\n### 2.基本架构\n\n　　Kafka 的基本架构图如下：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721224046586-1139724284.png)\n\n- Producer：生产者，就是向 Broker 发消息的客户端；\n- Consumer：消费者，就是从 Broker 取消息的客户端；\n- Consumer Group：消费者组，由多个消费者组成。组内每个消费者负责消费不同分区的数据，一个分区的数据只能由一个组内的消费者进行消费，组内消费者之间互不影响；\n- Broker：一个 Kafka 服务器就是一个 Broker，一个集群由多个 Broker 组成；\n- Topic：主题，可以理解为队列，生成者和消费者都是用的同一个队列；\n- Partition：分区，为实现扩展性，一个大的 Topic 可以分散到多个 Broker 上，一个 Topic 可以分为多个 Partition；\n- Replica：副本，保证集群中某个节点发生故障时，该节点上的数据不丢失。\n\n# 1. 安装JAVA\n\n　　更新软件包\n\n```shell\nsudo apt-get update\n```\n\n　　安装 openjdk-8-jdk\n\n```shell\nsudo apt-get install openjdk-8-jdk\n```\n\n　　查看 Java 版本，检查是否安装成功\n\n```shell\njava -version\n```\n\n输出：\n\n```shell\nopenjdk version \"1.8.0_362\"\nOpenJDK Runtime Environment (build 1.8.0_362-8u372-ga~us1-0ubuntu1~20.04-b09)\nOpenJDK 64-Bit Server VM (build 25.362-b09, mixed mode)\n```\n\n# 2. 安装zookeeper\n\n下载 ZooKeeper：https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz\n\n历史版本：[Index of /dist/zookeeper (apache.org)](https://archive.apache.org/dist/zookeeper/)\n\n```shell\n# 解压\ntar -zxvf apache-zookeeper-3.5.8-bin.tar.gz\nsudo mv apache-zookeeper-3.5.8-bin /usr/local/zookeeper\ncd /usr/local/zookeeper\ncp conf/zoo_sample.cfg conf/zoo.cfg\n```\n\n　　下载好之后解压（注意：3.5.5之后的版本应该下载文件名中带“bin”的压缩包），再执行如下命令：\n\n　　其中有一些配置参数：\n\n- tickTime：Zookeeper 使用的基本时间单元，默认值2000；\n- initLimit：Zookeeper 中连接同步的最大时间，默认值为10；\n- syncLimit：Zookeeper 中进行心跳检测的最大时间，默认值为5；\n- dataDir：数据库更新事物保存的目录；\n- clientPort：Zookeeper 服务监听的端口，默认值为2181。\n\n由于8080端口经常被占用，所以需要顺便修改一下admin server的端口，在最后加上：\n\n```shell\nadmin.serverPort=18080\n```\n\n#### 2）配置\n\n　　修改 /etc/profile 文件，增加如下内容：\n\n```shell\nexport ZOOKEEPER_HOME=/usr/local/zookeeper/\nexport PATH=$PATH:$ZOOKEEPER_HOME/bin\n```\n\n　　更新环境变量\n\n```shell\nsource /etc/profile\n```\n\n#### 3）测试\n\n　　首先进入 bin 目录，开启服务：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151615524-2121055604.png)\n\n　　再启动 CLI 连接服务：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151712334-1531304093.png)\n\n# 3. 安装kafka服务\n\n下载 Kafka：http://kafka.apache.org/downloads。\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721152234927-1538569344.png)\n\n　　下载好之后解压，再执行如下命令：\n\n```shell\nsudo mv kafka_2.13-2.5.0/ /usr/local/kafka\n\ncd /usr/local/kafka\n```\n\n#### 2）测试\n\n　　由于前面已经启动了 Zookeeper 服务，所以这里只需要执行如下命令来开启 Kafka 服务：\n\n```shell\nbin/kafka-server-start.sh config/server.properties\n```\n\n　　通过输出信息可以看到 Kafka 服务已经成功开启了，截图如下：\n\n　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721153048100-504650557.png)\n\n　　但这样开启之后是阻塞的了，我们可以在中间加一个“-daemon”即开一个守护进程来运行，则命令如下：\n\n```shell\nbin/kafka-server-start.sh -daemon config/server.properties\n```\n\n　　创建一个主题，用一个分区和一个副本创建一个名为“mytopic”的主题：\n\n```shell\nbin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic mytopic\n```\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722113046117-2137815088.png)\n\n　　这样就已经创建成功了，然后可以使用如下命令查看主题：\n\n```shell\nbin/kafka-topics.sh --list --bootstrap-server localhost:9092\n```\n\n　　Kafka 有一个命令行服务端，它将从文件或标准输入中获取输入，并将其作为消息发送到 Kafka 集群。默认情况下，每行将作为单独的消息发送：\n\n```shell\nbin/kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic mytopic\n```\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114234272-715512594.png)　\n\n　　同样的，Kafka 还有一个命令行客户端，可以从 Kafka 集群中获取消息：\n\n```shell\nbin/kafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic mytopic --from-beginning\n```\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114616581-765248744.png)\n\n# 4. 安装python-kafka并调用\n\n### 1.安装 kafka-python\n\n> pip3 install kafka-python\n\n### 2.创建 Consumer\n\n　　Consumer 消费者负责从 Kafka 中获取消息进行处理，需要实例化 KafkaConsumer 这个类。\n\n```\nfrom kafka import KafkaConsumer\nconsumer = KafkaConsumer(\"test\", bootstrap_servers=[\"localhost:9092\"])\nfor msg in consumer:\n    print(msg)\n```\n\n### 3.创建 Producer\n\n　　Producer 生产者负责向 Kafka 生产和发送消息，需要实例化 KafkaProducer 这个类。\n\n```\nfrom kafka import KafkaProducer\nproducer = KafkaProducer(bootstrap_servers=\"localhost:9092\")\nfor i in range(10):\n    producer.send(\"test\", \"Hello {}\".format(i).encode(\"utf-8\"))\nproducer.close()\n```\n\n### 4.运行测试\n\n　　先运行消费者程序，再运行生产者程序，消费者一直在监听，等到生产者发送消息，消费者就把消息取出，运行结果如下：\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722110455346-807003907.png)\n\n 　可以看到其中每个消息都包含了主题、分区、消息内容、时间戳等信息。\n\n# Reference\n\n[Kafka 入门（一）--安装配置和 kafka-python 调用 - TM0831 - 博客园 (cnblogs.com)](https://www.cnblogs.com/TM0831/p/13355383.html)\n","source":"_posts/ubuntu安装kafka.md","raw":"---\ntitle: ubuntu安装kafka\ndate: 2023-07-09 15:15:01\ntags: Tips\ncategories: Tips\nauthor: Lcy\n---\n\n# 0. kafka简介\n\n### 1.基本概念\n\n　　Kafka 是一个分布式的基于发布/订阅消息系统，主要应用于大数据实时处理领域，其官网是：http://kafka.apache.org/。Kafka 是一个分布式、支持分区的（Partition）、多副本的（Replica），基于 ZooKeeper 协调的发布/订阅消息系统。\n\n　　Kafka 有以下三个基本概念：\n\n- Kafka 作为一个集群运行在一个或多个服务器上；\n- Kafka 集群存储的消息是以 Topic 为类别记录的；\n- 每个消息是由一个 Key，一个 Value 和时间戳构成。\n\n### 2.基本架构\n\n　　Kafka 的基本架构图如下：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721224046586-1139724284.png)\n\n- Producer：生产者，就是向 Broker 发消息的客户端；\n- Consumer：消费者，就是从 Broker 取消息的客户端；\n- Consumer Group：消费者组，由多个消费者组成。组内每个消费者负责消费不同分区的数据，一个分区的数据只能由一个组内的消费者进行消费，组内消费者之间互不影响；\n- Broker：一个 Kafka 服务器就是一个 Broker，一个集群由多个 Broker 组成；\n- Topic：主题，可以理解为队列，生成者和消费者都是用的同一个队列；\n- Partition：分区，为实现扩展性，一个大的 Topic 可以分散到多个 Broker 上，一个 Topic 可以分为多个 Partition；\n- Replica：副本，保证集群中某个节点发生故障时，该节点上的数据不丢失。\n\n# 1. 安装JAVA\n\n　　更新软件包\n\n```shell\nsudo apt-get update\n```\n\n　　安装 openjdk-8-jdk\n\n```shell\nsudo apt-get install openjdk-8-jdk\n```\n\n　　查看 Java 版本，检查是否安装成功\n\n```shell\njava -version\n```\n\n输出：\n\n```shell\nopenjdk version \"1.8.0_362\"\nOpenJDK Runtime Environment (build 1.8.0_362-8u372-ga~us1-0ubuntu1~20.04-b09)\nOpenJDK 64-Bit Server VM (build 25.362-b09, mixed mode)\n```\n\n# 2. 安装zookeeper\n\n下载 ZooKeeper：https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz\n\n历史版本：[Index of /dist/zookeeper (apache.org)](https://archive.apache.org/dist/zookeeper/)\n\n```shell\n# 解压\ntar -zxvf apache-zookeeper-3.5.8-bin.tar.gz\nsudo mv apache-zookeeper-3.5.8-bin /usr/local/zookeeper\ncd /usr/local/zookeeper\ncp conf/zoo_sample.cfg conf/zoo.cfg\n```\n\n　　下载好之后解压（注意：3.5.5之后的版本应该下载文件名中带“bin”的压缩包），再执行如下命令：\n\n　　其中有一些配置参数：\n\n- tickTime：Zookeeper 使用的基本时间单元，默认值2000；\n- initLimit：Zookeeper 中连接同步的最大时间，默认值为10；\n- syncLimit：Zookeeper 中进行心跳检测的最大时间，默认值为5；\n- dataDir：数据库更新事物保存的目录；\n- clientPort：Zookeeper 服务监听的端口，默认值为2181。\n\n由于8080端口经常被占用，所以需要顺便修改一下admin server的端口，在最后加上：\n\n```shell\nadmin.serverPort=18080\n```\n\n#### 2）配置\n\n　　修改 /etc/profile 文件，增加如下内容：\n\n```shell\nexport ZOOKEEPER_HOME=/usr/local/zookeeper/\nexport PATH=$PATH:$ZOOKEEPER_HOME/bin\n```\n\n　　更新环境变量\n\n```shell\nsource /etc/profile\n```\n\n#### 3）测试\n\n　　首先进入 bin 目录，开启服务：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151615524-2121055604.png)\n\n　　再启动 CLI 连接服务：\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151712334-1531304093.png)\n\n# 3. 安装kafka服务\n\n下载 Kafka：http://kafka.apache.org/downloads。\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721152234927-1538569344.png)\n\n　　下载好之后解压，再执行如下命令：\n\n```shell\nsudo mv kafka_2.13-2.5.0/ /usr/local/kafka\n\ncd /usr/local/kafka\n```\n\n#### 2）测试\n\n　　由于前面已经启动了 Zookeeper 服务，所以这里只需要执行如下命令来开启 Kafka 服务：\n\n```shell\nbin/kafka-server-start.sh config/server.properties\n```\n\n　　通过输出信息可以看到 Kafka 服务已经成功开启了，截图如下：\n\n　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721153048100-504650557.png)\n\n　　但这样开启之后是阻塞的了，我们可以在中间加一个“-daemon”即开一个守护进程来运行，则命令如下：\n\n```shell\nbin/kafka-server-start.sh -daemon config/server.properties\n```\n\n　　创建一个主题，用一个分区和一个副本创建一个名为“mytopic”的主题：\n\n```shell\nbin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic mytopic\n```\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722113046117-2137815088.png)\n\n　　这样就已经创建成功了，然后可以使用如下命令查看主题：\n\n```shell\nbin/kafka-topics.sh --list --bootstrap-server localhost:9092\n```\n\n　　Kafka 有一个命令行服务端，它将从文件或标准输入中获取输入，并将其作为消息发送到 Kafka 集群。默认情况下，每行将作为单独的消息发送：\n\n```shell\nbin/kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic mytopic\n```\n\n　　![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114234272-715512594.png)　\n\n　　同样的，Kafka 还有一个命令行客户端，可以从 Kafka 集群中获取消息：\n\n```shell\nbin/kafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic mytopic --from-beginning\n```\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114616581-765248744.png)\n\n# 4. 安装python-kafka并调用\n\n### 1.安装 kafka-python\n\n> pip3 install kafka-python\n\n### 2.创建 Consumer\n\n　　Consumer 消费者负责从 Kafka 中获取消息进行处理，需要实例化 KafkaConsumer 这个类。\n\n```\nfrom kafka import KafkaConsumer\nconsumer = KafkaConsumer(\"test\", bootstrap_servers=[\"localhost:9092\"])\nfor msg in consumer:\n    print(msg)\n```\n\n### 3.创建 Producer\n\n　　Producer 生产者负责向 Kafka 生产和发送消息，需要实例化 KafkaProducer 这个类。\n\n```\nfrom kafka import KafkaProducer\nproducer = KafkaProducer(bootstrap_servers=\"localhost:9092\")\nfor i in range(10):\n    producer.send(\"test\", \"Hello {}\".format(i).encode(\"utf-8\"))\nproducer.close()\n```\n\n### 4.运行测试\n\n　　先运行消费者程序，再运行生产者程序，消费者一直在监听，等到生产者发送消息，消费者就把消息取出，运行结果如下：\n\n![img](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722110455346-807003907.png)\n\n 　可以看到其中每个消息都包含了主题、分区、消息内容、时间戳等信息。\n\n# Reference\n\n[Kafka 入门（一）--安装配置和 kafka-python 调用 - TM0831 - 博客园 (cnblogs.com)](https://www.cnblogs.com/TM0831/p/13355383.html)\n","slug":"ubuntu安装kafka","published":1,"updated":"2023-07-09T12:58:04.133Z","_id":"cljv44h9n0000gcg1gkrt2d1k","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"0-kafka简介\"><a href=\"#0-kafka简介\" class=\"headerlink\" title=\"0. kafka简介\"></a>0. kafka简介</h1><h3 id=\"1-基本概念\"><a href=\"#1-基本概念\" class=\"headerlink\" title=\"1.基本概念\"></a>1.基本概念</h3><p>　　Kafka 是一个分布式的基于发布/订阅消息系统，主要应用于大数据实时处理领域，其官网是：<a href=\"http://kafka.apache.org/%E3%80%82Kafka\">http://kafka.apache.org/。Kafka</a> 是一个分布式、支持分区的（Partition）、多副本的（Replica），基于 ZooKeeper 协调的发布/订阅消息系统。</p>\n<p>　　Kafka 有以下三个基本概念：</p>\n<ul>\n<li>Kafka 作为一个集群运行在一个或多个服务器上；</li>\n<li>Kafka 集群存储的消息是以 Topic 为类别记录的；</li>\n<li>每个消息是由一个 Key，一个 Value 和时间戳构成。</li>\n</ul>\n<h3 id=\"2-基本架构\"><a href=\"#2-基本架构\" class=\"headerlink\" title=\"2.基本架构\"></a>2.基本架构</h3><p>　　Kafka 的基本架构图如下：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721224046586-1139724284.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721224046586-1139724284.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<ul>\n<li>Producer：生产者，就是向 Broker 发消息的客户端；</li>\n<li>Consumer：消费者，就是从 Broker 取消息的客户端；</li>\n<li>Consumer Group：消费者组，由多个消费者组成。组内每个消费者负责消费不同分区的数据，一个分区的数据只能由一个组内的消费者进行消费，组内消费者之间互不影响；</li>\n<li>Broker：一个 Kafka 服务器就是一个 Broker，一个集群由多个 Broker 组成；</li>\n<li>Topic：主题，可以理解为队列，生成者和消费者都是用的同一个队列；</li>\n<li>Partition：分区，为实现扩展性，一个大的 Topic 可以分散到多个 Broker 上，一个 Topic 可以分为多个 Partition；</li>\n<li>Replica：副本，保证集群中某个节点发生故障时，该节点上的数据不丢失。</li>\n</ul>\n<h1 id=\"1-安装JAVA\"><a href=\"#1-安装JAVA\" class=\"headerlink\" title=\"1. 安装JAVA\"></a>1. 安装JAVA</h1><p>　　更新软件包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<p>　　安装 openjdk-8-jdk</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure>\n\n<p>　　查看 Java 版本，检查是否安装成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n\n<p>输出：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openjdk version &quot;1.8.0_362&quot;</span><br><span class=\"line\">OpenJDK Runtime Environment (build 1.8.0_362-8u372-ga~us1-0ubuntu1~20.04-b09)</span><br><span class=\"line\">OpenJDK 64-Bit Server VM (build 25.362-b09, mixed mode)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-安装zookeeper\"><a href=\"#2-安装zookeeper\" class=\"headerlink\" title=\"2. 安装zookeeper\"></a>2. 安装zookeeper</h1><p>下载 ZooKeeper：<a href=\"https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz\">https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz</a></p>\n<p>历史版本：<a href=\"https://archive.apache.org/dist/zookeeper/\">Index of /dist/zookeeper (apache.org)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span></span><br><span class=\"line\">tar -zxvf apache-zookeeper-3.5.8-bin.tar.gz</span><br><span class=\"line\">sudo mv apache-zookeeper-3.5.8-bin /usr/local/zookeeper</span><br><span class=\"line\">cd /usr/local/zookeeper</span><br><span class=\"line\">cp conf/zoo_sample.cfg conf/zoo.cfg</span><br></pre></td></tr></table></figure>\n\n<p>　　下载好之后解压（注意：3.5.5之后的版本应该下载文件名中带“bin”的压缩包），再执行如下命令：</p>\n<p>　　其中有一些配置参数：</p>\n<ul>\n<li>tickTime：Zookeeper 使用的基本时间单元，默认值2000；</li>\n<li>initLimit：Zookeeper 中连接同步的最大时间，默认值为10；</li>\n<li>syncLimit：Zookeeper 中进行心跳检测的最大时间，默认值为5；</li>\n<li>dataDir：数据库更新事物保存的目录；</li>\n<li>clientPort：Zookeeper 服务监听的端口，默认值为2181。</li>\n</ul>\n<p>由于8080端口经常被占用，所以需要顺便修改一下admin server的端口，在最后加上：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">admin.serverPort=18080</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2）配置\"><a href=\"#2）配置\" class=\"headerlink\" title=\"2）配置\"></a>2）配置</h4><p>　　修改 /etc/profile 文件，增加如下内容：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export ZOOKEEPER_HOME=/usr/local/zookeeper/</span><br><span class=\"line\">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<p>　　更新环境变量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3）测试\"><a href=\"#3）测试\" class=\"headerlink\" title=\"3）测试\"></a>3）测试</h4><p>　　首先进入 bin 目录，开启服务：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151615524-2121055604.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151615524-2121055604.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<p>　　再启动 CLI 连接服务：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151712334-1531304093.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151712334-1531304093.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<h1 id=\"3-安装kafka服务\"><a href=\"#3-安装kafka服务\" class=\"headerlink\" title=\"3. 安装kafka服务\"></a>3. 安装kafka服务</h1><p>下载 Kafka：<a href=\"http://kafka.apache.org/downloads%E3%80%82\">http://kafka.apache.org/downloads。</a></p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721152234927-1538569344.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721152234927-1538569344.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<p>　　下载好之后解压，再执行如下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mv kafka_2.13-2.5.0/ /usr/local/kafka</span><br><span class=\"line\"></span><br><span class=\"line\">cd /usr/local/kafka</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2）测试\"><a href=\"#2）测试\" class=\"headerlink\" title=\"2）测试\"></a>2）测试</h4><p>　　由于前面已经启动了 Zookeeper 服务，所以这里只需要执行如下命令来开启 Kafka 服务：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure>\n\n<p>　　通过输出信息可以看到 Kafka 服务已经成功开启了，截图如下：</p>\n<p>　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721153048100-504650557.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721153048100-504650557.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<p>　　但这样开启之后是阻塞的了，我们可以在中间加一个“-daemon”即开一个守护进程来运行，则命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure>\n\n<p>　　创建一个主题，用一个分区和一个副本创建一个名为“mytopic”的主题：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic mytopic</span><br></pre></td></tr></table></figure>\n\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722113046117-2137815088.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722113046117-2137815088.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<p>　　这样就已经创建成功了，然后可以使用如下命令查看主题：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<p>　　Kafka 有一个命令行服务端，它将从文件或标准输入中获取输入，并将其作为消息发送到 Kafka 集群。默认情况下，每行将作为单独的消息发送：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic mytopic</span><br></pre></td></tr></table></figure>\n\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114234272-715512594.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114234272-715512594.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\">　</p>\n<p>　　同样的，Kafka 还有一个命令行客户端，可以从 Kafka 集群中获取消息：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic mytopic --from-beginning</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114616581-765248744.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114616581-765248744.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<h1 id=\"4-安装python-kafka并调用\"><a href=\"#4-安装python-kafka并调用\" class=\"headerlink\" title=\"4. 安装python-kafka并调用\"></a>4. 安装python-kafka并调用</h1><h3 id=\"1-安装-kafka-python\"><a href=\"#1-安装-kafka-python\" class=\"headerlink\" title=\"1.安装 kafka-python\"></a>1.安装 kafka-python</h3><blockquote>\n<p>pip3 install kafka-python</p>\n</blockquote>\n<h3 id=\"2-创建-Consumer\"><a href=\"#2-创建-Consumer\" class=\"headerlink\" title=\"2.创建 Consumer\"></a>2.创建 Consumer</h3><p>　　Consumer 消费者负责从 Kafka 中获取消息进行处理，需要实例化 KafkaConsumer 这个类。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from kafka import KafkaConsumer</span><br><span class=\"line\">consumer = KafkaConsumer(&quot;test&quot;, bootstrap_servers=[&quot;localhost:9092&quot;])</span><br><span class=\"line\">for msg in consumer:</span><br><span class=\"line\">    print(msg)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-创建-Producer\"><a href=\"#3-创建-Producer\" class=\"headerlink\" title=\"3.创建 Producer\"></a>3.创建 Producer</h3><p>　　Producer 生产者负责向 Kafka 生产和发送消息，需要实例化 KafkaProducer 这个类。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from kafka import KafkaProducer</span><br><span class=\"line\">producer = KafkaProducer(bootstrap_servers=&quot;localhost:9092&quot;)</span><br><span class=\"line\">for i in range(10):</span><br><span class=\"line\">    producer.send(&quot;test&quot;, &quot;Hello &#123;&#125;&quot;.format(i).encode(&quot;utf-8&quot;))</span><br><span class=\"line\">producer.close()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-运行测试\"><a href=\"#4-运行测试\" class=\"headerlink\" title=\"4.运行测试\"></a>4.运行测试</h3><p>　　先运行消费者程序，再运行生产者程序，消费者一直在监听，等到生产者发送消息，消费者就把消息取出，运行结果如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722110455346-807003907.png\" class=\"lazyload\" data-srcset=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722110455346-807003907.png\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" alt=\"img\"></p>\n<p> 　可以看到其中每个消息都包含了主题、分区、消息内容、时间戳等信息。</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p><a href=\"https://www.cnblogs.com/TM0831/p/13355383.html\">Kafka 入门（一）–安装配置和 kafka-python 调用 - TM0831 - 博客园 (cnblogs.com)</a></p>\n\n","site":{"data":{"author":{"Lcy":{"name":"Chengyu Luo","avatar":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/avatar.png","url":"http://www.seujyh.cn"},"Lyw":{"name":"Yuwei Le","avator":"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/lywavator.jpg","url":"http://www.exhard.cn"}}}},"excerpt":"","more":"<h1 id=\"0-kafka简介\"><a href=\"#0-kafka简介\" class=\"headerlink\" title=\"0. kafka简介\"></a>0. kafka简介</h1><h3 id=\"1-基本概念\"><a href=\"#1-基本概念\" class=\"headerlink\" title=\"1.基本概念\"></a>1.基本概念</h3><p>　　Kafka 是一个分布式的基于发布/订阅消息系统，主要应用于大数据实时处理领域，其官网是：<a href=\"http://kafka.apache.org/%E3%80%82Kafka\">http://kafka.apache.org/。Kafka</a> 是一个分布式、支持分区的（Partition）、多副本的（Replica），基于 ZooKeeper 协调的发布/订阅消息系统。</p>\n<p>　　Kafka 有以下三个基本概念：</p>\n<ul>\n<li>Kafka 作为一个集群运行在一个或多个服务器上；</li>\n<li>Kafka 集群存储的消息是以 Topic 为类别记录的；</li>\n<li>每个消息是由一个 Key，一个 Value 和时间戳构成。</li>\n</ul>\n<h3 id=\"2-基本架构\"><a href=\"#2-基本架构\" class=\"headerlink\" title=\"2.基本架构\"></a>2.基本架构</h3><p>　　Kafka 的基本架构图如下：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721224046586-1139724284.png\" alt=\"img\"></p>\n<ul>\n<li>Producer：生产者，就是向 Broker 发消息的客户端；</li>\n<li>Consumer：消费者，就是从 Broker 取消息的客户端；</li>\n<li>Consumer Group：消费者组，由多个消费者组成。组内每个消费者负责消费不同分区的数据，一个分区的数据只能由一个组内的消费者进行消费，组内消费者之间互不影响；</li>\n<li>Broker：一个 Kafka 服务器就是一个 Broker，一个集群由多个 Broker 组成；</li>\n<li>Topic：主题，可以理解为队列，生成者和消费者都是用的同一个队列；</li>\n<li>Partition：分区，为实现扩展性，一个大的 Topic 可以分散到多个 Broker 上，一个 Topic 可以分为多个 Partition；</li>\n<li>Replica：副本，保证集群中某个节点发生故障时，该节点上的数据不丢失。</li>\n</ul>\n<h1 id=\"1-安装JAVA\"><a href=\"#1-安装JAVA\" class=\"headerlink\" title=\"1. 安装JAVA\"></a>1. 安装JAVA</h1><p>　　更新软件包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<p>　　安装 openjdk-8-jdk</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure>\n\n<p>　　查看 Java 版本，检查是否安装成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n\n<p>输出：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openjdk version &quot;1.8.0_362&quot;</span><br><span class=\"line\">OpenJDK Runtime Environment (build 1.8.0_362-8u372-ga~us1-0ubuntu1~20.04-b09)</span><br><span class=\"line\">OpenJDK 64-Bit Server VM (build 25.362-b09, mixed mode)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-安装zookeeper\"><a href=\"#2-安装zookeeper\" class=\"headerlink\" title=\"2. 安装zookeeper\"></a>2. 安装zookeeper</h1><p>下载 ZooKeeper：<a href=\"https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz\">https://archive.apache.org/dist/zookeeper/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin.tar.gz</a></p>\n<p>历史版本：<a href=\"https://archive.apache.org/dist/zookeeper/\">Index of /dist/zookeeper (apache.org)</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span></span><br><span class=\"line\">tar -zxvf apache-zookeeper-3.5.8-bin.tar.gz</span><br><span class=\"line\">sudo mv apache-zookeeper-3.5.8-bin /usr/local/zookeeper</span><br><span class=\"line\">cd /usr/local/zookeeper</span><br><span class=\"line\">cp conf/zoo_sample.cfg conf/zoo.cfg</span><br></pre></td></tr></table></figure>\n\n<p>　　下载好之后解压（注意：3.5.5之后的版本应该下载文件名中带“bin”的压缩包），再执行如下命令：</p>\n<p>　　其中有一些配置参数：</p>\n<ul>\n<li>tickTime：Zookeeper 使用的基本时间单元，默认值2000；</li>\n<li>initLimit：Zookeeper 中连接同步的最大时间，默认值为10；</li>\n<li>syncLimit：Zookeeper 中进行心跳检测的最大时间，默认值为5；</li>\n<li>dataDir：数据库更新事物保存的目录；</li>\n<li>clientPort：Zookeeper 服务监听的端口，默认值为2181。</li>\n</ul>\n<p>由于8080端口经常被占用，所以需要顺便修改一下admin server的端口，在最后加上：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">admin.serverPort=18080</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2）配置\"><a href=\"#2）配置\" class=\"headerlink\" title=\"2）配置\"></a>2）配置</h4><p>　　修改 /etc/profile 文件，增加如下内容：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export ZOOKEEPER_HOME=/usr/local/zookeeper/</span><br><span class=\"line\">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<p>　　更新环境变量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3）测试\"><a href=\"#3）测试\" class=\"headerlink\" title=\"3）测试\"></a>3）测试</h4><p>　　首先进入 bin 目录，开启服务：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151615524-2121055604.png\" alt=\"img\"></p>\n<p>　　再启动 CLI 连接服务：</p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721151712334-1531304093.png\" alt=\"img\"></p>\n<h1 id=\"3-安装kafka服务\"><a href=\"#3-安装kafka服务\" class=\"headerlink\" title=\"3. 安装kafka服务\"></a>3. 安装kafka服务</h1><p>下载 Kafka：<a href=\"http://kafka.apache.org/downloads%E3%80%82\">http://kafka.apache.org/downloads。</a></p>\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721152234927-1538569344.png\" alt=\"img\"></p>\n<p>　　下载好之后解压，再执行如下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mv kafka_2.13-2.5.0/ /usr/local/kafka</span><br><span class=\"line\"></span><br><span class=\"line\">cd /usr/local/kafka</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2）测试\"><a href=\"#2）测试\" class=\"headerlink\" title=\"2）测试\"></a>2）测试</h4><p>　　由于前面已经启动了 Zookeeper 服务，所以这里只需要执行如下命令来开启 Kafka 服务：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure>\n\n<p>　　通过输出信息可以看到 Kafka 服务已经成功开启了，截图如下：</p>\n<p>　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200721153048100-504650557.png\" alt=\"img\"></p>\n<p>　　但这样开启之后是阻塞的了，我们可以在中间加一个“-daemon”即开一个守护进程来运行，则命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure>\n\n<p>　　创建一个主题，用一个分区和一个副本创建一个名为“mytopic”的主题：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic mytopic</span><br></pre></td></tr></table></figure>\n\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722113046117-2137815088.png\" alt=\"img\"></p>\n<p>　　这样就已经创建成功了，然后可以使用如下命令查看主题：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<p>　　Kafka 有一个命令行服务端，它将从文件或标准输入中获取输入，并将其作为消息发送到 Kafka 集群。默认情况下，每行将作为单独的消息发送：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic mytopic</span><br></pre></td></tr></table></figure>\n\n<p>　　<img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114234272-715512594.png\" alt=\"img\">　</p>\n<p>　　同样的，Kafka 还有一个命令行客户端，可以从 Kafka 集群中获取消息：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic mytopic --from-beginning</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722114616581-765248744.png\" alt=\"img\"></p>\n<h1 id=\"4-安装python-kafka并调用\"><a href=\"#4-安装python-kafka并调用\" class=\"headerlink\" title=\"4. 安装python-kafka并调用\"></a>4. 安装python-kafka并调用</h1><h3 id=\"1-安装-kafka-python\"><a href=\"#1-安装-kafka-python\" class=\"headerlink\" title=\"1.安装 kafka-python\"></a>1.安装 kafka-python</h3><blockquote>\n<p>pip3 install kafka-python</p>\n</blockquote>\n<h3 id=\"2-创建-Consumer\"><a href=\"#2-创建-Consumer\" class=\"headerlink\" title=\"2.创建 Consumer\"></a>2.创建 Consumer</h3><p>　　Consumer 消费者负责从 Kafka 中获取消息进行处理，需要实例化 KafkaConsumer 这个类。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from kafka import KafkaConsumer</span><br><span class=\"line\">consumer = KafkaConsumer(&quot;test&quot;, bootstrap_servers=[&quot;localhost:9092&quot;])</span><br><span class=\"line\">for msg in consumer:</span><br><span class=\"line\">    print(msg)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-创建-Producer\"><a href=\"#3-创建-Producer\" class=\"headerlink\" title=\"3.创建 Producer\"></a>3.创建 Producer</h3><p>　　Producer 生产者负责向 Kafka 生产和发送消息，需要实例化 KafkaProducer 这个类。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from kafka import KafkaProducer</span><br><span class=\"line\">producer = KafkaProducer(bootstrap_servers=&quot;localhost:9092&quot;)</span><br><span class=\"line\">for i in range(10):</span><br><span class=\"line\">    producer.send(&quot;test&quot;, &quot;Hello &#123;&#125;&quot;.format(i).encode(&quot;utf-8&quot;))</span><br><span class=\"line\">producer.close()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-运行测试\"><a href=\"#4-运行测试\" class=\"headerlink\" title=\"4.运行测试\"></a>4.运行测试</h3><p>　　先运行消费者程序，再运行生产者程序，消费者一直在监听，等到生产者发送消息，消费者就把消息取出，运行结果如下：</p>\n<p><img src=\"https://luochengyu.oss-cn-beijing.aliyuncs.com/img/1450803-20200722110455346-807003907.png\" alt=\"img\"></p>\n<p> 　可以看到其中每个消息都包含了主题、分区、消息内容、时间戳等信息。</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p><a href=\"https://www.cnblogs.com/TM0831/p/13355383.html\">Kafka 入门（一）–安装配置和 kafka-python 调用 - TM0831 - 博客园 (cnblogs.com)</a></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cl3iqqerb0001l0ema3qc5iyv","category_id":"cl3iqqerd0003l0emedaw6zxv","_id":"cl3iqqerf0008l0em2ecuhgq5"},{"post_id":"cl3iqqerj000fl0em1bhzgdwp","category_id":"cl3iqqeri000bl0em8mn7elit","_id":"cl3iqqerm000nl0em1ww546gn"},{"post_id":"cl3iqqerh0009l0emhc0chuwr","category_id":"cl3iqqeri000bl0em8mn7elit","_id":"cl3iqqern000rl0em27ti2sp4"},{"post_id":"cl3iqqerh000al0em1pa30sr3","category_id":"cl3iqqerk000hl0em4ww8ev3t","_id":"cl3iqqern000ul0emc6og54jm"},{"post_id":"cl3iqqerk000gl0em6bnddh7j","category_id":"cl3iqqerm000ol0embgkgf8c8","_id":"cl3iqqero0010l0emg52x2a1h"},{"post_id":"cl3iqqerp0016l0emcibbfxzu","category_id":"cl3iqqero0012l0em1pah4vh5","_id":"cl3iqqert001gl0em7pisbu5q"},{"post_id":"cl3iqqerl000ml0eme7wi1ylx","category_id":"cl3iqqero0012l0em1pah4vh5","_id":"cl3iqqeru001ll0emaj735pfp"},{"post_id":"cl3iqqern000tl0emg00v87ac","category_id":"cl3iqqero0012l0em1pah4vh5","_id":"cl3iqqerw001vl0em7l6x0eqx"},{"post_id":"cl3iqqerv001sl0em5ak1e7hq","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqery0022l0emae8i93wq"},{"post_id":"cl3iqqero000xl0em8rhjaxnt","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqerz0027l0emc7emcsg3"},{"post_id":"cl3iqqerw001ul0emawet92wr","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqerz002al0ema0781vgp"},{"post_id":"cl3iqqerx001zl0em0cchbox4","category_id":"cl3iqqerk000hl0em4ww8ev3t","_id":"cl3iqqerz002el0em7e3o4uj8"},{"post_id":"cl3iqqero000zl0embw6413d7","category_id":"cl3iqqerw001wl0em13243vx7","_id":"cl3iqqes0002gl0em16uzdar0"},{"post_id":"cl3iqqero0014l0emfemr4c0e","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl3iqqes0002jl0em0veb1qoh"},{"post_id":"cl3iqqerp0019l0emeuexetfu","category_id":"cl3iqqerw001wl0em13243vx7","_id":"cl3iqqes0002nl0emeoy821e2"},{"post_id":"cl3iqqers001dl0em1x8665u4","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqes1002ql0em35ilcv2n"},{"post_id":"cl3iqqers001fl0emcqmvfpne","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl3iqqes1002sl0em0dzg50md"},{"post_id":"cl3iqqert001kl0em8mvl7rbn","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqes1002ul0em4g4l4j9s"},{"post_id":"cl3iqqeru001nl0em4athhwls","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl3iqqes2002vl0em54gh40mc"},{"post_id":"cl3iqqery0026l0em0urgafwo","category_id":"cl3iqqes2002wl0em1b483mtb","_id":"cl3iqqes2002zl0emamtd8yzi"},{"post_id":"cl3iqqerz0029l0em8jcmbk67","category_id":"cl3iqqes2002yl0emc2tq7fht","_id":"cl3iqqes20030l0em0uwj6ril"},{"post_id":"cl3iqqes30031l0em4d26a10t","category_id":"cl3iqqerw001wl0em13243vx7","_id":"cl3iqqes30033l0emf65w51kf"},{"post_id":"cl3iqqes40035l0em6fvsftgs","category_id":"cl3iqqes40037l0em97tug9co","_id":"cl3iqqes5003bl0emh10vfgw5"},{"post_id":"cl3iqqes40036l0em8qnpaco2","category_id":"cl3iqqes40037l0em97tug9co","_id":"cl3iqqes5003cl0em064hg6th"},{"post_id":"cl3iqqery0021l0emg80fgsls","category_id":"cl3iqqerm000ol0embgkgf8c8","_id":"cl3iqsu1a0001h4eme2pt2xzd"},{"post_id":"cl3iqqerl000kl0emb2am2p0i","category_id":"cl3iqx5xq00001oembkhycvwu","_id":"cl3iqx5xx00051oemf0ocejqb"},{"post_id":"cl3iqqerm000ql0emfb67g06m","category_id":"cl3iqx5xq00001oembkhycvwu","_id":"cl3iqx5xy00071oem29ttfuu7"},{"post_id":"cl3lutt7w00008wem53pq71wd","category_id":"cl3iqx5xq00001oembkhycvwu","_id":"cl3lutt7z00028wemh897227g"},{"post_id":"cl3sgtqpj0000hkemdbererjo","category_id":"cl3iqx5xq00001oembkhycvwu","_id":"cl3sgtqpm0002hkem226o6ciq"},{"post_id":"cl476isdl0000uwem7603dprj","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl476isdo0002uwema0rh7uo7"},{"post_id":"cl4ch30i70000bgemdvy087ba","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl4ch30ia0002bgem00uodxic"},{"post_id":"cl4iompmz000040emheup9rzt","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl4iompn3000240em5yzx9pip"},{"post_id":"cl543t5ue0000gkem8muscswz","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl543t5ui0002gkem6dgx0zni"},{"post_id":"cl543t5uo0003gkem2ayjgtp2","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl543t5uu0005gkem4nd34wwd"},{"post_id":"cl56ds2th0000t0emeejoaeww","category_id":"cl3iqqeru001ol0em98hm0hjk","_id":"cl56ds2tm0002t0em3ifcg8b7"},{"post_id":"cl56fiy900000ysem5xyv6mrp","category_id":"cl3iqqerw001wl0em13243vx7","_id":"cl56fiy950002yseme2pefson"},{"post_id":"cl5g8mk730000e4tz128n5d3l","category_id":"cl5g8mk750001e4tz0wwfblkj","_id":"cl5g8mk7b0003e4tz1yp99jqg"},{"post_id":"cl5kor3ie0000zwtzb30xfdf5","category_id":"cl3iqqerk000hl0em4ww8ev3t","_id":"cl5kor3ii0002zwtz95p7fak2"},{"post_id":"cl6bkdqgp0000ngtzhnhkddtc","category_id":"cl5g8mk750001e4tz0wwfblkj","_id":"cl6bkdqgq0002ngtzf84i2fvo"},{"post_id":"cl9eack0t0000cwtz2kt2e6ho","category_id":"cl5g8mk750001e4tz0wwfblkj","_id":"cl9eack0x0002cwtza5au4rrb"},{"post_id":"cl9eack0x0003cwtz2p0n1dus","category_id":"cl5g8mk750001e4tz0wwfblkj","_id":"cl9eack0y0005cwtz08zebax6"},{"post_id":"cl9gxjcp000009ctz6ayu5x1b","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cl9gxjcp300029ctzb44vbrxz"},{"post_id":"clajefjoe0000y4tzfetb3ag7","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"clajefjoi0002y4tz2qb9d2lz"},{"post_id":"clajefjoj0003y4tz95i1cg77","category_id":"cl5g8mk750001e4tz0wwfblkj","_id":"clajefjok0005y4tz0fd6hcxz"},{"post_id":"clh7iz3xd0000g8fze9853ven","category_id":"clh7iz3xh0001g8fz2hznh39o","_id":"clh7iz3xo0004g8fzhegj7q9k"},{"post_id":"cljv44h9n0000gcg1gkrt2d1k","category_id":"cl3iqqery0023l0em8kztgs1t","_id":"cljv44h9q0002gcg11q8ednz0"}],"PostTag":[{"post_id":"cl3iqqerb0001l0ema3qc5iyv","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqerf0007l0em8yppbyq4"},{"post_id":"cl3iqqerh000al0em1pa30sr3","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqerj000el0em4puedsj4"},{"post_id":"cl3iqqerj000fl0em1bhzgdwp","tag_id":"cl3iqqeri000cl0em4b0p75x5","_id":"cl3iqqerl000jl0em9iz80uqk"},{"post_id":"cl3iqqerh0009l0emhc0chuwr","tag_id":"cl3iqqeri000cl0em4b0p75x5","_id":"cl3iqqerl000ll0em9rkz9145"},{"post_id":"cl3iqqeri000dl0em7ipj7j0x","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqern000sl0emb5nkhfnw"},{"post_id":"cl3iqqerk000gl0em6bnddh7j","tag_id":"cl3iqqerm000pl0em8yx9225c","_id":"cl3iqqero000yl0emdsrt13pk"},{"post_id":"cl3iqqero000xl0em8rhjaxnt","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqero0011l0emdh8yg37o"},{"post_id":"cl3iqqero0014l0emfemr4c0e","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerp0017l0em9yfn9bz0"},{"post_id":"cl3iqqerp0016l0emcibbfxzu","tag_id":"cl3iqqero0013l0emdoz47wrn","_id":"cl3iqqers001cl0eme0v4ba51"},{"post_id":"cl3iqqerl000ml0eme7wi1ylx","tag_id":"cl3iqqero0013l0emdoz47wrn","_id":"cl3iqqers001el0em7c41enzs"},{"post_id":"cl3iqqers001dl0em1x8665u4","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqert001jl0emaxe2a41b"},{"post_id":"cl3iqqers001fl0emcqmvfpne","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerv001rl0emez0x9d1l"},{"post_id":"cl3iqqert001kl0em8mvl7rbn","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerw001tl0em1xyr3nz5"},{"post_id":"cl3iqqern000tl0emg00v87ac","tag_id":"cl3iqqero0013l0emdoz47wrn","_id":"cl3iqqerx001yl0em1tl16gp1"},{"post_id":"cl3iqqerv001sl0em5ak1e7hq","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerx0020l0emg0q57ziv"},{"post_id":"cl3iqqero000zl0embw6413d7","tag_id":"cl3iqqerv001ql0eme5ty8yk2","_id":"cl3iqqery0025l0emf6z18rcp"},{"post_id":"cl3iqqerw001ul0emawet92wr","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerz0028l0ema1o5g5gr"},{"post_id":"cl3iqqerx001zl0em0cchbox4","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl3iqqerz002bl0emgbw14at9"},{"post_id":"cl3iqqerp0019l0emeuexetfu","tag_id":"cl3iqqerx001xl0em4j3rfeqj","_id":"cl3iqqes0002fl0em55ih48k8"},{"post_id":"cl3iqqery0026l0em0urgafwo","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqes0002hl0emdcgady9q"},{"post_id":"cl3iqqeru001nl0em4athhwls","tag_id":"cl3iqqery0024l0em2e1l0r7l","_id":"cl3iqqes0002kl0em7xoy0941"},{"post_id":"cl3iqqerz0029l0em8jcmbk67","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqes0002ll0emevu80fte"},{"post_id":"cl3iqqes30031l0em4d26a10t","tag_id":"cl3iqqes30032l0em41uy2ngg","_id":"cl3iqqes40034l0em3hcraidx"},{"post_id":"cl3iqqes40035l0em6fvsftgs","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqes50038l0emf83m4m60"},{"post_id":"cl3iqqes40036l0em8qnpaco2","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl3iqqes50039l0emdigmeqnh"},{"post_id":"cl3iqqery0021l0emg80fgsls","tag_id":"cl3iqqerm000pl0em8yx9225c","_id":"cl3iqsu1a0000h4emdzlg221u"},{"post_id":"cl3iqqerl000kl0emb2am2p0i","tag_id":"cl3iqx5xv00011oem9idnaa3q","_id":"cl3iqx5xx00041oemakv8alzh"},{"post_id":"cl3iqqerm000ql0emfb67g06m","tag_id":"cl3iqx5xv00011oem9idnaa3q","_id":"cl3iqx5xy00061oemg7f1h6s8"},{"post_id":"cl3lutt7w00008wem53pq71wd","tag_id":"cl3iqx5xv00011oem9idnaa3q","_id":"cl3lutt7z00018wem8bzvetj6"},{"post_id":"cl3sgtqpj0000hkemdbererjo","tag_id":"cl3iqx5xv00011oem9idnaa3q","_id":"cl3sgtqpm0001hkema57u7493"},{"post_id":"cl476isdl0000uwem7603dprj","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl476isdo0001uwemg9c931cg"},{"post_id":"cl4ch30i70000bgemdvy087ba","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl4ch30ia0001bgemgrl61c5l"},{"post_id":"cl4iompmz000040emheup9rzt","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl4iompn3000140emekcidwxm"},{"post_id":"cl543t5ue0000gkem8muscswz","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl543t5uh0001gkem8i0xh1uj"},{"post_id":"cl543t5uo0003gkem2ayjgtp2","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl543t5uq0004gkem4q7u17y7"},{"post_id":"cl56ds2th0000t0emeejoaeww","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl56ds2tm0001t0emdd213eay"},{"post_id":"cl56fiy900000ysem5xyv6mrp","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl56fiy950001ysem6sd6ejmf"},{"post_id":"cl5g8mk730000e4tz128n5d3l","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl5g8mk780002e4tz8tywc1vi"},{"post_id":"cl5kor3ie0000zwtzb30xfdf5","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl5kor3ii0001zwtz33tx0ff3"},{"post_id":"cl6bkdqgp0000ngtzhnhkddtc","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl6bkdqgp0001ngtz3d776zus"},{"post_id":"cl9eack0t0000cwtz2kt2e6ho","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl9eack0x0001cwtzb69j70s4"},{"post_id":"cl9eack0x0003cwtz2p0n1dus","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"cl9eack0y0004cwtza2ho7rsa"},{"post_id":"cl9gxjcp000009ctz6ayu5x1b","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cl9gxjcp300019ctz6dj97y7z"},{"post_id":"clajefjoe0000y4tzfetb3ag7","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"clajefjoi0001y4tz59w3df78"},{"post_id":"clajefjoj0003y4tz95i1cg77","tag_id":"cl3iqqere0004l0emgsl3hzju","_id":"clajefjoj0004y4tz87py2owi"},{"post_id":"clh7iz3xd0000g8fze9853ven","tag_id":"clh7iz3xn0002g8fze4cw1svd","_id":"clh7iz3xo0003g8fzcd265d8b"},{"post_id":"cljv44h9n0000gcg1gkrt2d1k","tag_id":"cl3iqqerl000il0em6ngk8ay4","_id":"cljv44h9q0001gcg1g7n49x1m"}],"Tag":[{"name":"Study","_id":"cl3iqqere0004l0emgsl3hzju"},{"name":"Interests","_id":"cl3iqqeri000cl0em4b0p75x5"},{"name":"Tips","_id":"cl3iqqerl000il0em6ngk8ay4"},{"name":"Lcy","_id":"cl3iqqerm000pl0em8yx9225c"},{"name":"Leetcode","_id":"cl3iqqern000wl0emae8404y2"},{"name":"QQrobot","_id":"cl3iqqero0013l0emdoz47wrn"},{"name":"Titanium Tech","_id":"cl3iqqerv001ql0eme5ty8yk2"},{"name":"Personal-Tips","_id":"cl3iqqerx001xl0em4j3rfeqj"},{"name":"Tools","_id":"cl3iqqery0024l0em2e1l0r7l"},{"name":"Others","_id":"cl3iqqerz002dl0em5y527pn8"},{"name":"Study-Devops","_id":"cl3iqqes30032l0em41uy2ngg"},{"name":"leetcode","_id":"cl3iqx5xv00011oem9idnaa3q"},{"name":"AI","_id":"clh7iz3xn0002g8fze4cw1svd"}],"TagPluginCSS":[],"TagPluginOfPost":[]}}