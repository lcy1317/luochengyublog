---
title: DeFi Learning(十八)
date: 2022-04-25 23:09:02
tags: Study
categories: DeFi
author: Lcy
comments: true
plugins: 
- mathjax
- katex
---

# Part Two： Evaluation DeFi Sectors

A reading note for 《How to DeFi Advance》

## 第三章 去中心化的交易所

### DEX种类：

- 基于订单的DEX：感觉和股市挺像的。
- 基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）

### AMM算法：

![image-20220425231949161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png)

流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。

当前一些著名的AMM算法：

#### 恒乘积

$$
x*y = k
$$

Uniswap用的就是常数乘积。

#### 恒和

$$
x+y=k
$$

这个模型有缺陷，不能提供无限的流动性。

#### 恒定平均

$$
v = \Pi_tB_t^{w_t}
$$

恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。

#### 稳定交换不变量

$$
An^n\sum X_i+D=ADn^n+\frac{D^{n+1}}{n^n\Pi x_i}
$$

![image-20220425232558126](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png)

### 流动性池类型

- 公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。
- 私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。
- 智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。

### AMM的风险

- 价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。
- Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。

![image-20220425234523467](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png)

- 无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。

### Conclusion

DEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。

## 第四章 DEX聚合器

之前说过DEX聚合器的作用，毕竟在AMM算法的加持下，比如说Uniswap的恒乘积策略下，当交易金额很高的时候对应的手续费也就越高。这显然对于哦我们交易者来说是不可接受的。所以就有了DEX聚合器就是DEX Aggregators。DEX聚合器能够将一笔较大的交易拆分，去不同的去中心化交易所交易，相当于综合了所有的去中心化交易所的流动性，而不用单纯的看一个交易所的流动性，大幅度降低了你作为一个用户来说在一家交易所交易大额所面临的高额手续费又或者减少了你自己去找哪里便宜这种麻烦事。

评价DEX聚合器的四个指标：

- 路由算法
- 流动性资源
- 当前的市场状态
- 交易规模

![image-20220426145303291](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145303291.png)

![image-20220426145317120](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426145317120.png)

### 风险提示

咱就是说有时候DEX聚合器不一定靠谱，对于部分小的交易可能直接去DEX比较方便，成本也是更低的。

## 第五章 去中心化的借贷

比较著名的几个借贷协议：Compound、Maker、Avae、Cream

这些在beginner一书里面说过。

### 风险提示

注意智能合约漏洞等技术风险。

黑客可能会利用并耗尽这些协议上的抵押品。此外，许多借贷协议依赖价格预言机（第 12  章会详细介绍）来提供链上价格数据。价格预言可能会失败或被利用。 2020 年 11 月，Compound 的价格预言被利用，将 Coinbase Pro 上的  DAI 价格推高了 30%，导致价值 8900 万美元的贷款被清算。25  但是，作为借款人，主要风险包括因管理不善而失去抵押品抵押率。加密货币以其极端的价格波动而闻名，您的贷款可能会低于其最低抵押品比率并被清算。这不是一个理想的结果，因为您将承担相当大的损失并支付清算费用。因此，持续监控和维持健康的贷款抵押比率至关重要。

## 第六章 去中心化的稳定币和稳定资产

USDT就不用再介绍了，太常见了。Tether就是1美元换1USDT。

DAI也不用说了，是Maker发行的，现在稳如老狗。

### 算法稳定币

算法稳定币就是用算法来控制稳定币的市场结构和基础经济。大多数算法稳定币都与美元挂钩，有些是浮动挂钩，形成了算法稳定资产。与算法稳定币不同，算法稳定资产可以被视为另一种形式的抵押品。

![image-20220426155420044](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220426155420044.png)

### Rebase Model

变基模型通过改变稳定币的全部供应来控制价格。根据稳定币的价格是高于还是低于预期挂钩，协议将在固定期限内自动增加或减少每个持有者钱包中的供应量。这样做的原因是，通过强制控制供应，可以根据简单的通货膨胀/通货紧缩经济理论来影响稳定币的价格。该模型的开创性协议是 Ampleforth ——AMPL。

### Seigniorage Model铸币税模型

铸币税模型通过引入影响市场动态的奖励系统来控制价格。如果价格高于挂钩，则铸造新的代币并提供给提供流动性或持有代币的参与者。如果价格低于挂钩，则停止铸造代币，并引入机制以减少供应。用户可以购买优惠券来燃烧底层代币以将其从供应中移除。这些优惠券可能会在未来兑换更多代币，但前提是不亏。

三种基础的铸币税模型例子。

1. Empty Set Dollar（ESD）

2. Basis Cash

3. Frax Finance

可惜啊，梦想是美好的现实是骨感的。实际上的表现并不是那么尽如人意。这些币最终都跌的一塌糊涂，就UST、sUSD、FRAX最终还能保持和美元的挂钩。

### 风险提示

- 目前算法稳定币仍处于试验阶段
- 稳定币需要一个比较强大的社区
- 建议使用较多的时间来了解之后再考虑投资

## 第七章 去中心化衍生品

### 永续协议

永续协议是一种提供永续合约交易的去中心化协议，允许用户在各种加密资产上开立高达十倍的杠杆多头或空头头寸。为了实现这一点，Perpetual Protocol  使用了一种独特的虚拟自动做市商 (vAMM) 方法。功能类似于 Uniswap 和 Balancer 的 AMM，交易者可以直接通过 vAMM  执行交易。主要区别在于“虚拟”部分。在传统的  AMM 中，资产存储在智能合约中，每种资产的交易价格通过特定的数学函数确定。永续协议中的 vAMM 不存储任何资产。取而代之的是，实物资产存储在一个以 USDC  计价的智能合约保险库中，成为用户开设杠杆头寸的抵押品。保险库中的资金总额基本上构成了交易者利润的上限。每个永续合约都有自己特定的  vAMM，但它们都受到协议保险基金的保护。 Perpetual Protocol 能够通过使用 xDai 链进行交易执行来提供更高的交易速度和最少的 gas  交易。使用 vAMM，用户将能够获得高流动性和低滑点来满足他们的交易需求。

### 合成资产

合成资产是与另一种资产具有相同价值或效果的资产或资产组合。合成资产跟踪标的资产的价值，并允许在无需持有实际资产本身的情况下接触资产。

### 风险提示

- 注意杠杆，别玩火
- 可能缺乏流动性
