---
title: DeFi Learning(十八)
date: 2022-04-25 23:09:02
tags: Study
categories: DeFi
author: Lcy
comments: true
plugins: 
- mathjax
- katex
---

# Part Two： Evaluation DeFi Sectors

A reading note for 《How to DeFi Advance》

## 第三章 去中心化的交易所

### DEX种类：

- 基于订单的DEX：感觉和股市挺像的。
- 基于流动性池的DEX：流动性池是位于  DEX 智能合约上的代币储备，可供用户交换代币。大多数基于流动性池的 DEX 都使用自动做市商 (AMM)，这是一种通过算法预先定义资产价格的数学函数。（这在之前的Beginner里面提到过AMM算法是怎么算的）

### AMM算法：

![image-20220425231949161](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425231949161.png)

流动性池可以看成一个交易的代币池。AMM算法决定了交易的费率，而费率中的一部分就提供给了LP就是流动性提供者作为激励。

当前一些著名的AMM算法：

#### 恒乘积

$$
x*y = k
$$

Uniswap用的就是常数乘积。

#### 恒和

$$
x+y=k
$$

这个模型有缺陷，不能提供无限的流动性。

#### 恒定平均

$$
v = \Pi_tB_t^{w_t}
$$

恒定平均做市商公式，或也称为价值函数它允许流动性池具有两个以上的代币和超过标准 50/50  分配的不同代币比率。加权几何平均值保持不变，而不是乘积。这允许对池中不同资产的可变风险敞口，并允许在流动性池的任何资产之间进行互换。

#### 稳定交换不变量

$$
An^n\sum X_i+D=ADn^n+\frac{D^{n+1}}{n^n\Pi x_i}
$$

![image-20220425232558126](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425232558126.png)

### 流动性池类型

- 公开池：任何人都可以添加流动性，但池参数是永久固定的。这是最trustless的池子。
- 私有池：灵活的参数。所有者是唯一可以更改参数并增加流动性的实体。这使得池托管和集中。
- 智能池：任何人都可以增加流动性。池支持固定和动态参数，可以持续更改。这是最灵活的池。

### AMM的风险

- 价格滑点：比如采用恒乘积的时候，交易的数额越大，就要产生更多的费用。
- Front-running：由于  AMM  上的订单被广播到区块链上供所有人查看，因此任何人都可以监控区块链以获取合适的订单并通过支付更高的交易费用来提前运行它，以使他们的订单比目标订单更快地被挖掘。进行这种无风险套利的领先者发起了一种被称为“三明治攻击”的攻击。

![image-20220425234523467](https://luochengyu.oss-cn-beijing.aliyuncs.com/img/image-20220425234523467.png)

- 无常损失：流动性池子的流动性变化可能会导致你提供的流动性资产不如直接放在外面来的赚。

### Conclusion

DEX 在为 DeFi  空间提供动力方面发挥着至关重要的作用，因为它描述了当前的市场行为，尤其是加密货币的价格和流动性。它确定了各种加密货币相对于彼此的价值，并说明了交易和资本流动的动态性质。

### 第四章 DEX聚合器
